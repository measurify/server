(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{163:function(e,t,r){},164:function(e,t,r){},250:function(e,t,r){},276:function(e,t){},278:function(e,t){},293:function(e,t,r){},297:function(e,t,r){},298:function(e,t,r){},299:function(e,t,r){},300:function(e,t,r){},301:function(e,t,r){},371:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(41),i=r.n(s),c=(r(250),r(3)),o=r(5),l=r(6),u=r(14),d=r(21),j=r(4),b=r(25),p=r(16),h=r(409),f={username:"Nome utente",password:"Password",tenant:"Organizzazione",email:"email",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",resources:"Risorse",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",preview:"Anteprima",configuration:"Configurazione",clear_all:"Cancella tutto",no_changes_found:"Nessun cambiamento trovato",resource_successfully_edited:"Resoursa modificata con successo!",resource_successfully_posted:"Resource successufully posted!",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",email_suggestion:"Inserisci la tua email",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",geo_update:"Posizione aggiornata",geo_failed:"Non \xe8 stato possibile aggiornare la posizione",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",email_change_confirm:"L'indirizzo email verr\xe0 modificato, procedere?",password_changed:"Password cambiata con successo",email_changed:"Email cambiata con successo",password_rules:"La password deve contenere almeno 6 caratteri, almeno una lettera maiuscola e un numero.",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",import:"Importa",export:"Esporta",password_recovery:"Recupero Password",password_reset:"Reset Password",forgot_password_link:"Hai dimenticato la tua password?",go_login_page:"Torna alla pagina di login",email_sent_successfully:"Email inviata, segui le istruzioni contenute per cambiare la tua password",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta",no_file:"Si prega di selezionare un file",duplicate_resource_error:"Nel database \xe8 gi\xe0 presente una risorsa con",error_imported_file:"Nel file sono presenti errori, non \xe8 stato possibile importarlo",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle.",old_pass_empty:"Per favore, inserire la vecchia password",old_pass_wrong:"La vecchia password \xe8 sbagliata",pass_not_null:"La password non pu\xf2 essere vuota",missing_tenant:"Si prega di inserire l'organizzazione",missing_email:"Si prega di inserire l'email",missing_token:"Si prega di inserire il token",missing_password:"Si prega di inserire la propria password",missing_username:"Si prega di inserire il proprio username",stronger_password_required:"Si prega di inserire una password pi\xf9 robusta",email_sent_errors:"Non \xe8 stato possibile inviare la mail, controllare i dati inseriti.",password_not_changed_errors:"Non \xe8 stato possibile cambiare la password.",network_error:"Errore di rete, si prega di controllare la connessione.",empty_email_error:"Il campo email \xe8 vuoto, si prega di inserire un indirizzo email valido.",email_not_match:"L'indirizzo email inserito e la sua conferma non combaciano, si prega di reinserirle.",email_same_as_old:"La nuova email coincide con quella vecchia, si prega di inserire un indirizzo email diverso dal precedente.",generic_file_post_error:"Il file selezionato non pu\xf2 essere caricato perch\xe9 contiene errori."},m={username:"Username",password:"Password",tenant:"Tenant",email:"Email",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",resources:"Resources",tools:"Tools",notifications:"Notifications",file_content:"File content",preview:"Preview",configuration:"Configuration",clear_all:"Clear all",no_changes_found:"No changes found",resource_successfully_edited:"Resource successfully edited!",resource_successfully_posted:"Resource successufully posted!",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",email_suggestion:"Insert your email",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",email_change_confirm:"Email address will be changed, do you confirm?",password_changed:"Password changed successfully",email_changed:"Email changed successfully",password_rules:"Password length should be at least 6 characters, contains at least one uppercase character and one number.",forgot_password_link:"Have you forgot your password?",go_login_page:"Go to login page",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",import:"Import",export:"Export",password_recovery:"Password Recovery",password_reset:"Reset Password",email_sent_successfully:"Email sent, please follow the provided instruction to reset the password",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired",no_file:"Please, select a file",duplicate_resource_error:"The database already contains a resource with",error_imported_file:"File contains errors. It was not possible to import it",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",old_pass_empty:"Please, enter old password",old_pass_wrong:"The old password is wrong",pass_not_null:"Password cannot be empty",missing_tenant:"Please, insert your tenant",missing_email:"Please, insert your email",missing_token:"Please, insert your token",missing_password:"Please, insert your password",missing_username:"Please, insert your username",stronger_password_required:"Please, insert stronger password",email_sent_errors:"It was not possible to send the mail, please check the provided info.",password_not_changed_errors:"It was not possible to change the password.",network_error:"Network error, please check internet connection",empty_email_error:"Email field is empty, please insert a valid email address.",email_not_match:"Provided email and the confirmation do not match. Please insert them again.",email_same_as_old:"The new email is the same as the old email. Please insert a different email address.",generic_file_post_error:"The selected file cannot be uploaded because it contains errors."},O=r(251).default,v=r(269),x=O.create({httpsAgent:new v.Agent({})}),g={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function y(e,t,r){var n={username:"".concat(e),password:"".concat(t),tenant:"".concat(r)},a={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},s=U+"/login";return new Promise((function(e,t){x.post(s,n,a).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-email",t.data.user.email),localStorage.setItem("user-tenant",r),localStorage.setItem("login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function w(e,t){return _.apply(this,arguments)}function _(){return _=Object(u.a)(Object(l.a)().mark((function e(t,r){var n,a,s,i,c,o=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},void 0===(a=o.length>3&&void 0!==o[3]?o[3]:void 0)&&(a=E()),s=U+"/"+t+"/file",console.log("POST file:"+s),i={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(n).forEach((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];i[r]=n})),c={headers:i},e.abrupt("return",new Promise((function(e,n){x.post(s,r,c).then((function(r){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:r})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),n({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function k(e,t){return C.apply(this,arguments)}function C(){return C=Object(u.a)(Object(l.a)().mark((function e(t,r){var n,a,s,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=E()),a=U+"/"+t+"/",console.log("POST :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,n){x.post(a,r,s).then((function(r){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:r})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),n({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function S(e,t,r){return N.apply(this,arguments)}function N(){return N=Object(u.a)(Object(l.a)().mark((function e(t,r,n){var a,s,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=U+"/"+t+"/"+n,void 0===(a=c.length>3&&void 0!==c[3]?c[3]:void 0)&&(a=E()),console.log("PUT :"+s),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){x.put(s,r,i).then((function(a){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)}),e({response:a})})).catch((function(e){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function I(e,t){return A.apply(this,arguments)}function A(){return A=Object(u.a)(Object(l.a)().mark((function e(t,r){var n,a,s,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=U+"/"+t,void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=E()),void 0!==r&&(a+="/"+r),console.log("DELETE :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,n){x.delete(a,s).then((function(n){void 0!==r?g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+r+", of type: "+t}):g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:n})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+r+", of type: "+t+". "+e.message}),404===e.statusCode&&g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),n({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function P(e){return z.apply(this,arguments)}function z(){return z=Object(u.a)(Object(l.a)().mark((function e(t){var r,n,a,s,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},a=U+"/"+t+"/",void 0===(n=i.length>2?i[2]:void 0)&&(n=E()),a=void 0!==r.filter?a.concat("?filter="+r.filter):a.concat("?filter="),void 0!==r.limit&&(a=a.concat("&limit="+r.limit)),void 0!==r.page&&(a=a.concat("&page="+r.page)),void 0!==r.sort&&""!==r.sort.by&&(a=a.concat('&sort={"'+r.sort.by+'":'+("ascending"===r.sort.order?'"asc"':'"desc"')+"}")),console.log("GET :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(a,s).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 11:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return R=Object(u.a)(Object(l.a)().mark((function e(t){var r,n,a,s,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},a=U+"/"+t+"/pipe/",void 0===(n=i.length>2?i[2]:void 0)&&(n=E()),a=void 0!==r.filter?a.concat("?filter="+r.filter):a.concat("?filter="),void 0!==r.limit&&(a=a.concat("&limit="+r.limit)),void 0!==r.page&&(a=a.concat("&page="+r.page)),console.log("GET PIPE:"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(a,s).then((function(t){e(t)})).catch((function(e){console.log(e),t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function T(e,t,r){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(Object(l.a)().mark((function e(t,r,n){var a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=U+"/"+t+"/"+r,void 0===n&&(n=E()),console.log("GET ONE:"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(a,s).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return localStorage.getItem("token")}function L(e,t){var r={headers:{"Content-Type":"application/json"}},n="https://api.bigdatacloud.net/data/reverse-geocode-client?latitude="+e+"&longitude="+t+"&localityLanguage=it";return console.log("GET location: "+n),new Promise((function(e,t){x.get(n,r).then((function(t){localStorage.setItem("continent",t.data.continent),localStorage.setItem("continentCode",t.data.continentCode),localStorage.setItem("countryName",t.data.countryName),localStorage.setItem("countryCode",t.data.countryCode),localStorage.setItem("principalSubdivision",t.data.principalSubdivision),localStorage.setItem("city",t.data.city),localStorage.setItem("locality",t.data.locality),e(t)})).catch((function(e){t(e)}))}))}function B(e,t){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(Object(l.a)().mark((function e(t,r){var n,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({email:r,tenant:t}),n=U+"/self/reset?tenant="+t,a=JSON.stringify({email:r}),console.log("POST password reset request:"+n),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,t){x.post(n,a,s).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,r){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(Object(l.a)().mark((function e(t,r,n){var a,s,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=U+"/self",console.log("PUT password reset:"+a),s=JSON.stringify({reset:r,password:n,tenant:t}),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,t){x.put(a,s,i).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U+"/types/passwordStrength",console.log("GET password strength:"+t),r={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,n){x.get(t,r).then((function(t){e({response:t})})).catch((function(e){n({error:e})}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U="https://think.measurify.org/v1",K="Pensaci Prima",q=["it"],V={measurements:["samples","actions"]},Y={},Q={measurements:["view","delete"]},X={measurements:["samples"]},Z={measurements:{tags:[""]}},$={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},measurements:{thing:"",device:"",tags:[""]}},ee={},te={measurements:["form"]},re={measurements:{visibility:"VisibilityTypes"}},ne={measurements:{device:"devices",thing:"things",tags:"tags"}},ae={};function se(){var e=localStorage.getItem("language");return 0===q.length?m:(1===q.length&&(e=q[0]),"it"===e?f:"en"===e?m:"it"===navigator.language.substring(0,2)?f:(navigator.language.substring(0,2),m))}ae.measurements=["admin","provider"],ae.analyzedata=["admin","analyst"];r(163),r(293);var ie=r(1),ce=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(ie.jsxs)("div",{children:[se().language,Object(ie.jsxs)("div",{children:[q.includes("it")&&Object(ie.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),q.includes("en")&&Object(ie.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},oe=r(424),le=void 0;function ue(){return de.apply(this,arguments)}function de(){return(de=Object(u.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("user-role"))&&void 0!==t&&""!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,T("roles",t);case 5:void 0!==(r=e.sent)&&localStorage.setItem("role",JSON.stringify(r.response.data));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t,r){if(void 0===le){var n=localStorage.getItem("role");if(void 0===n||null===n)return function(e,t,r){if("create"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("read"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}}if("update"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("delete"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}return!1}(e,t,r);le=JSON.parse(n)}if(0!==le.actions.length){var a=le.actions.filter((function(e){return e.entity===t}))[0];if(void 0!==a&&void 0!==a[r])return"none"!==a[r]&&!1!==a[r]}return"none"!==le.default[r]&&!1!==le.default[r]}var be=a.a.createRef(),pe=a.a.createRef(),he="think-before-tenant",fe=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),r=t[0],a=t[1];function s(){return(s=Object(u.a)(Object(l.a)().mark((function e(t){var r,n,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=be.current.value,n=pe.current.value,s=he,e.prev=4,e.next=7,y(r,n,s);case 7:return e.next=9,ue();case 9:window.location.replace("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}return Object(ie.jsxs)("div",{className:"auth-page",children:[Object(ie.jsx)("div",{className:"title-wrapper",children:Object(ie.jsx)("div",{className:"title-section",children:"Pensaci Prima"})}),q.length>1&&Object(ie.jsx)("div",{className:"language-wrapper",children:Object(ie.jsx)(ce,{})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)(oe.a,{onSubmit:function(e){return s.apply(this,arguments)},className:"rounded p-4 p-sm-3",children:[Object(ie.jsx)("h4",{children:se().login}),Object(ie.jsxs)(oe.a.Group,{className:"mb-3",controlId:"username",children:[Object(ie.jsx)(oe.a.Label,{children:se().username}),Object(ie.jsx)(oe.a.Control,{ref:be,type:"text",placeholder:se().username_suggestion})]}),Object(ie.jsxs)(oe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ie.jsx)(oe.a.Label,{children:se().password}),Object(ie.jsx)(oe.a.Control,{type:"password",ref:pe,placeholder:se().password_suggestion})]}),Object(ie.jsx)(h.a,{variant:"primary",type:"submit",children:se().submit})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{style:{color:"red"},children:r}),Object(ie.jsx)("div",{className:"form-row row",children:Object(ie.jsx)(b.b,{to:"/passwordrecovery",children:se().forgot_password_link})})]})},me=(r(297),function(){return Object(n.useEffect)((function(){})),Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsx)("header",{className:"page-header",children:K}),Object(ie.jsx)("main",{className:"page-content",children:Object(ie.jsx)("div",{className:"home-page",children:Object(ie.jsx)("div",{className:"info-box",children:Object(ie.jsxs)("div",{className:"info-text",children:[se().welcome_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),se().left_bar_descr_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),se().right_bar_descr_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),se().session_expire_info_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:se().github_issue_page_hp}),Object(ie.jsx)("br",{})]})})})})]})}),Oe=(r(298),function(){return Object(ie.jsxs)("div",{className:"notFound-page",children:[se().oh_no,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),se().broken_link,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:se().github_issue_page_hp})]})}),ve=(r(299),r(45)),xe=r(26);ve.a.library.add(xe.k,xe.a,xe.p,xe.n,xe.m,xe.o,xe.l,xe.b);var ge=a.a.createRef(),ye=a.a.createRef(),we=a.a.createRef(),_e=a.a.createRef(),ke=a.a.createRef(),Ce=a.a.createRef(),Se=a.a.createRef();function Ne(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),r=t[0],s=t[1],i=localStorage.getItem("username"),c=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return Ce.current=null!==i?i:"",ke.current=null!==c?c:"",Se.current=null!==o&&""!==o?o:"-",console.log({role:c,canReadMeas:je(ke.current,"measurements","read"),restrictionPages:ae}),Object(n.useEffect)((function(){function e(){var t,r;if(null!==we.current)r=we.current-1;else{if(null===ye.current){var n=localStorage.getItem("login-time");null!==n?(ye.current=n,t=parseInt(n,10)):(t=Date.now(),ye.current=t)}else t=parseInt(ye.current,10);null===_e.current&&(_e.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+_e.current-Date.now())/1e3}if(r<60&&(clearInterval(ge.current),function(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:E()}},t=U+"/login";return new Promise((function(r,n){x.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),r(e)})).catch((function(e){n(e)}))}))}().then((function(){we.current=null,ye.current=null,ge.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");we.current=parseInt(r,10)}ge.current=setInterval((function(){e()}),1e3)}),[]),Object(ie.jsxs)("nav",{className:"app-nav",children:[Object(ie.jsx)(h.a,{className:"app-nav-opener",onClick:function(){return s(!r)},children:r?Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(ie.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(ie.jsx)(b.b,{to:"/",className:"nav-wrap",children:K}),Object(ie.jsx)("hr",{}),Object(ie.jsx)("div",{className:"app-nav-wrapper ".concat(r?"opened":""),children:Object(ie.jsxs)("div",{className:"app-nav-links",children:[Object(ie.jsx)("hr",{}),Object(ie.jsxs)("div",{className:"data-wrapper",children:[Object(ie.jsxs)(b.b,{to:"/viewProfile/",children:[se().welcome+" ",Object(ie.jsx)("b",{children:Ce.current})]},"viewProfile"),Object(ie.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ie.jsxs)("h3",{children:[se().role+" ","admin"===ke.current?Object(ie.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===ke.current?Object(ie.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===ke.current?Object(ie.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===ke.current?Object(ie.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ie.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(ie.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ie.jsxs)("h3",{children:[se().tenant+" ",Object(ie.jsx)("b",{children:Se.current})]})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(ie.jsx)(h.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:se().logout})}),q.length>1&&Object(ie.jsxs)(a.a.Fragment,{children:[Object(ie.jsx)("hr",{}),Object(ie.jsx)("h2",{children:Object(ie.jsx)(ce,{})})]})]}),Object(ie.jsx)("div",{className:"app-nav-text",children:se().resources}),Object(ie.jsx)("hr",{}),je(ke.current,"measurements","read")&&(void 0===ae.measurements||ae.measurements.includes(ke.current))&&Object(ie.jsx)(b.b,{to:"/measurements",className:function(e){return e.isActive?"active":""},onClick:function(){return s(!1)},children:"Controlli"},"measurements"),je(ke.current,"measurements","read")&&(void 0===ae.analyzedata||ae.analyzedata.includes(ke.current))&&Object(ie.jsx)(b.b,{to:"/analyzedata",className:function(e){return e.isActive?"active":""},onClick:function(){return s(!1)},children:"Analisi dati"},"analyzedata")]})})]})}var Ie=r(410),Ae=r(425),Pe=r(232),ze=r(423);function De(e){var t={};return X[e.resType].forEach((function(r){r.constructor===Object?Object.keys(r).forEach((function(n){Array.isArray(e.resource[n])?t[n]=e.resource[n].map((function(e){var t={};return r[n].forEach((function(r){t[r]=e[r]})),t})):t[n]=e.resource[n]})):Object.keys(e.resource).includes(r)&&(t[r]=e.resource[r])})),Re(t)}function Re(e){return Object(ie.jsx)(Ae.a,{defaultActiveKey:0,size:"lg",children:a.a.Children.toArray(Object.entries(e).map((function(e,t){var r=Object(j.a)(e,2),n=r[0],s=r[1];return Object(ie.jsxs)(Ae.a.Item,{eventKey:t,children:[Object(ie.jsx)(Ae.a.Header,{children:Object(ie.jsx)("b",{children:n})}),Object(ie.jsx)(Ae.a.Body,{children:s instanceof Object?Array.isArray(s)?void 0!==s[0]?Object.values(s[0]).some((function(e){return e instanceof Object}))?a.a.Children.toArray(s.map((function(e,t){return Object(ie.jsx)(Ae.a,{children:Object(ie.jsxs)(Ae.a.Item,{eventKey:"0",children:[Object(ie.jsxs)(Ae.a.Header,{children:[n," ",Object(ie.jsxs)("i",{children:["[",t,"]"]})]}),Object(ie.jsx)(Ae.a.Body,{children:Re(e)})]})})}))):s[0]instanceof Object?Object(ie.jsxs)(Ie.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:a.a.Children.toArray(Object.keys(s[0]).map((function(e){return Object(ie.jsx)("th",{children:e})})))})}),Object(ie.jsx)("tbody",{children:a.a.Children.toArray(s.map((function(e){return Object(ie.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(ie.jsx)("td",{children:e})})))})})))})]}):"[ "+s.join(" , ")+" ]":"[ ]":"AAAA":void 0===s||null==s?Object(ie.jsx)("i",{children:"None"}):s})]})})))})}function Te(e){var t=Object(n.useState)(void 0),r=Object(j.a)(t,2),a=r[0],s=r[1];Object(n.useEffect)((function(){}),[e]);var i=void 0!==a?Object(ie.jsxs)(Pe.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(ie.jsx)(Pe.a.Header,{as:"h3",children:"View Resource"}),Object(ie.jsx)(Pe.a.Body,{children:Object(ie.jsx)(De,{resource:a,resType:e.resType})})]}):Object(ie.jsx)(Pe.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(ie.jsxs)(Pe.a.Header,{as:"h3",children:["Loading",Object(ie.jsx)(Pe.a.Body,{})]})});return"view"===e.action?Object(ie.jsx)(ze.a,{trigger:"click",placement:"left",overlay:i,rootClose:!0,children:Object(ie.jsx)(h.a,{variant:"link",size:"sm",onClick:function(){s(e.takeSingle(e.id))},children:Object(ie.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(ie.jsx)(h.a,{variant:"link",size:"sm",onClick:Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Sei sicuro di voler eliminare il controllo?")){t.next=12;break}return t.prev=2,t.next=5,I(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(ie.jsx)(b.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(ie.jsx)(h.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(ie.jsx)(b.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(ie.jsx)(h.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(ie.jsx)("div",{})}ve.a.library.add(xe.e,xe.i,xe.c);var Fe=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var r=!0;return t.forEach((function(t){r=r&&e(t)})),r}if(t.constructor===Object){var n=!0;return Object.entries(t).forEach((function(t){var r=Object(j.a)(t,2),a=(r[0],r[1]);n=n&&e(a)})),n}},Ee=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!Fe(e)})).length},Le=function e(t){if(Array.isArray(t),t.constructor===Object)for(var r=Object.entries(t),n=0;n<r.length;n++){if(Array.isArray(r[n][1]))for(var a=0;a<r[n][1].length;a++)r[n][1][a].constructor===Object||Array.isArray(r[n][1][a])?(e(r[n][1][a]),Fe(r[n][1][a])&&r[n][1].splice(a,1)):Fe(r[n][1][a])&&r[n][1].splice(a,1);if(r[n][1].constructor===Object)for(var s=Object.entries(r[n][1]),i=0;i<s.length;i++)s[n][1].constructor===Object||Array.isArray(s[n][1])?e(s[n][1]):Fe(s[n][1])&&delete r[n][1][s[n][0]]}return t},Be=function e(t,r){if(void 0===t||void 0===r)return!1;if(t===r)return!0;if(typeof t!==typeof r)return!1;if(Array.isArray(t)&&!Array.isArray(r)||!Array.isArray(t)&&Array.isArray(r))return!1;if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===Object&&r.constructor!==Object||t.constructor!==Object&&r.constructor===Object)return!1;if(t.constructor===Object&&r.constructor===Object){var a=Object.keys(t),s=Object.keys(r);return a.length===s.length&&(!!e(a,s)&&!!e(Object.values(t),Object.values(r)))}return!1};function Ge(e){return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}function We(e,t){console.log({data:e,header:t});var r=Object.fromEntries(t.map((function(e){return[e,""]}))),n=new RegExp(/,/g),a=new RegExp(/\n/g);return t.join(",").concat("\n").concat(e.map((function(e){var t=Object.assign(r,e);return Object.entries(t).map((function(e){return"string"===typeof e[1]?e[1].replace(n,"-").replace(a,""):"Data"===e[0]?Ge(new Date(e[1])):e[1]})).join(",")})).join("\n"))}function He(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(ie.jsx)("div",{children:"Loading"}):Object(ie.jsx)("div",{children:Object(ie.jsxs)(Ie.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==Y[e.resType]&&void 0!==Y[e.resType][t]?Object(ie.jsxs)("th",{children:[Y[e.resType][t],"Sostanza"!==t&&"Livello"!==t&&Object(ie.jsxs)(a.a.Fragment,{children:[" ",Object(ie.jsx)(h.a,{variant:e.orderBy===t?"link":"light",size:"sm",onClick:function(){e.sortHandler(t)},children:Object(ie.jsx)("b",{children:!0===e.ascending&&e.orderBy===t?"^":"V"})}),Object(ie.jsx)("i",{className:"fa fa-list",title:"",style:{width:"20px",height:"20px",opacity:.85}})]})]}):Object(ie.jsxs)("th",{children:[t,"Sostanza"!==t&&"Livello"!==t&&Object(ie.jsxs)(a.a.Fragment,{children:[Object(ie.jsx)(h.a,{variant:e.orderBy===t?"link":"light",size:"sm",onClick:function(){e.sortHandler(t)},children:Object(ie.jsx)("b",{children:!0===e.ascending&&e.orderBy===t?"^":"V"})}),Object(ie.jsx)("i",{className:"fa fa-list",title:"",style:{width:"20px",height:"20px",opacity:.85}})]})]})})))},"header")}),Object(ie.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,r){return Object(ie.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(n){if("actions"===n)return Object(ie.jsxs)("td",{children:[e.actions.includes("view")?Object(ie.jsx)(Te,{resType:e.resType,action:"view",k:r+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")&&je(e.userRole,e.resType,"update")?Object(ie.jsx)(Te,{resType:e.resType,action:"edit",k:r+"_edit",id:t._id}):"",e.actions.includes("duplicate")&&je(e.userRole,e.resType,"create")?Object(ie.jsx)(Te,{resType:e.resType,action:"duplicate",k:r+"_duplicate",id:t._id}):"",e.actions.includes("delete")&&je(e.userRole,e.resType,"delete")?Object(ie.jsx)(Te,{resType:e.resType,action:"delete",k:r+"_delete",id:t._id,removeSingle:e.removeSingle}):""]});if(void 0!==t[n]){if(Array.isArray(t[n])){if(void 0!==t[n][0]&&t[n][0].constructor===Object){var a="[ "+t[n].map((function(e){return Object.values(e).join(" - ")})).join(" -- ")+" ]";return Object(ie.jsx)("td",{children:a.length<=100?a:a.slice(0,97)+"..."})}return Object(ie.jsx)("td",{children:"[ "+t[n].join(" , ")+" ]"})}return"Data"===n?Object(ie.jsx)("td",{children:Ge(new Date(t[n]))}):Object(ie.jsx)("td",{children:t[n]})}})))})})))})]})})}ve.a.library.add(xe.j,xe.d,xe.f);var Me=r(411),Je=r(430),Ue=r(427);function Ke(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(ie.jsx)("div",{children:"Loading"}):0===e.resources.length?Object(ie.jsx)("div",{children:"Non sono presenti controlli"}):Object(ie.jsx)(Me.a,{children:a.a.Children.toArray(e.resources.map((function(t){var r=new Date(t.samples[0].values[2]),n=new Set(t.samples.map((function(e){return e.values[4]}))).size,s=t.samples.filter((function(e){return"nullo"!==e.values[11]})).map((function(e){return Object(ie.jsx)(Je.a.Item,{children:e.values[7]+"_"+e.values[5]+" ("+e.values[6]+") : "+e.values[10]+" "+e.values[11]})}));if(s.length!==n){var i=t.samples.filter((function(e){return"negativo"===e.values[9]})).map((function(e){return[e.values[7],e.values[5],e.values[6],e.values[9]]}))[0];void 0===i?s.push(Object(ie.jsx)(Je.a.Item,{children:t.samples[0].values[7]+"_"+t.samples[0].values[5]+" ("+t.samples[0].values[6]+") : "+t.samples[0].values[9]})):s.push(Object(ie.jsx)(Je.a.Item,{children:i[0]+"_"+i[1]+" ("+i[2]+") : "+i[3]}))}return Object(ie.jsxs)(Ue.a,{border:"primary",style:{width:"18rem"},children:[Object(ie.jsxs)(Ue.a.Header,{children:[t.samples[0].values[0]," ",Object(ie.jsx)(Te,{resType:e.resType,action:"delete",id:t._id,removeSingle:e.removeSingle})]}),Object(ie.jsxs)(Ue.a.Body,{children:[Object(ie.jsx)(Ue.a.Text,{children:r.toDateString()}),Object(ie.jsx)(Ue.a.Text,{children:t.samples[0].values[1]})]}),Object(ie.jsx)(Je.a,{className:"list-group-flush",children:a.a.Children.toArray(s)})]})})))})}var qe=r(431);r(164);ve.a.library.add(xe.j);var Ve=a.a.createRef();function Ye(e){var t=Object(p.p)().page,r=Object(b.c)(),a=Object(j.a)(r,2),s=a[0],i=a[1],c=Object(n.useState)(void 0),o=Object(j.a)(c,2),d=o[0],f=o[1],m=Object(n.useState)(void 0),O=Object(j.a)(m,2),v=O[0],x=O[1],g=Object(n.useState)(void 0),y=Object(j.a)(g,2),w=y[0],_=y[1],k=Object(n.useState)(1),C=Object(j.a)(k,2),S=C[0],N=C[1],I=Object(n.useState)(1),A=Object(j.a)(I,2),z=A[0],D=A[1],R=Object(n.useState)(),T=Object(j.a)(R,2),F=T[0],E=T[1],L=Object(n.useState)(),B=Object(j.a)(L,2),G=B[0],W=B[1],H=Object(n.useState)(),M=Object(j.a)(H,2),J=M[0],U=M[1],K=Object(n.useState)(),q=Object(j.a)(K,2),Y=q[0],X=q[1],Z=Object(n.useState)(),ee=Object(j.a)(Z,2),te=ee[0],re=ee[1],ne=localStorage.getItem("user-role");Ve.current=null!==ne?ne:"",Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var r,n,a=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,P(t,r);case 4:n=e.sent,x(V[t]),f(n.docs),void 0!==Q[t]&&_(Q[t]),E(n.hasNextPage),W(n.hasPrevPage),re(n.totalPages),U(n.prevPage),X(n.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),x(void 0),f(void 0),E(void 0),W(void 0),re(void 0),U(void 0),X(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;N(r);var n=null!==s.get("limit")?s.get("limit"):10;D(n),e({page:r,limit:n}).catch(console.error)}),[e,t,s]);var ae=function(){var e=parseInt(S,10)-2>0,t=parseInt(S,10)+2<te;return Object(ie.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(ie.jsxs)(qe.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(ie.jsx)(qe.a.First,{disabled:1===S,onClick:function(){return i({page:1,limit:z})}}),Object(ie.jsx)(qe.a.Prev,{disabled:!G,onClick:function(){return i({page:J,limit:z})}}),e&&Object(ie.jsx)(qe.a.Ellipsis,{}),parseInt(S,10)-1>0&&Object(ie.jsx)(qe.a.Item,{onClick:function(){return i({page:parseInt(S,10)-1,limit:z})},children:parseInt(S,10)-1}),Object(ie.jsx)(qe.a.Item,{children:Object(ie.jsx)("b",{children:S})}),parseInt(S,10)+1<=te&&Object(ie.jsx)(qe.a.Item,{onClick:function(){return i({page:parseInt(S,10)+1,limit:z})},children:parseInt(S,10)+1}),t&&Object(ie.jsx)(qe.a.Ellipsis,{}),Object(ie.jsx)(qe.a.Next,{disabled:!F,onClick:function(){return i({page:Y,limit:z})}}),Object(ie.jsx)(qe.a.Last,{disabled:S===te,onClick:function(){return i({page:te,limit:z})}})]})})};return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:[Object(ie.jsx)("b",{children:"Controlli"}),void 0!==$[t]&&je(Ve.current,t,"create")&&Object(ie.jsx)(b.b,{to:"/add/"+t+"/",children:Object(ie.jsx)(h.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",opacity:.85}})})})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsx)("br",{}),Object(ie.jsx)(Ke,{resType:t,header:v,resources:d,actions:w,takeSingle:function(e){return d.find((function(t){return t._id===e}))},removeSingle:function(e){var t=d.filter((function(t){return t._id!==e}));f(t)}}),Object(ie.jsx)(ae,{})]})]})}var Qe=r(412),Xe=r(413),Ze=r(225),$e=r(147);function et(e){var t=Object(n.useState)(""),r=Object(j.a)(t,2),a=r[0],s=r[1],i=Object(n.useState)(""),c=Object(j.a)(i,2),o=(c[0],c[1]),d=Object(n.useState)(""),b=Object(j.a)(d,2),p=b[0],f=b[1],m=Object(n.useState)(""),O=Object(j.a)(m,2),v=O[0],x=O[1],g=Object(n.useState)(""),w=Object(j.a)(g,2),_=w[0],k=w[1],C=Object(n.useState)(""),N=Object(j.a)(C,2),I=N[0],A=N[1],P=Object(n.useState)(""),z=Object(j.a)(P,2),D=z[0],R=z[1],T=Object(n.useState)(""),F=Object(j.a)(T,2),E=F[0],L=F[1],B=Object(n.useState)(""),G=Object(j.a)(B,2),W=G[0],H=G[1],J=Object(n.useState)(""),U=Object(j.a)(J,2),K=U[0],q=U[1],V=Object(n.useState)(""),Y=Object(j.a)(V,2),Q=Y[0],X=Y[1],Z=Object(n.useState)(!1),$=Object(j.a)(Z,2),ee=$[0],te=$[1];Object(n.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),r=localStorage.getItem("user-tenant"),n=localStorage.getItem("user-email");s(null!==e?e:""),o(null!==t?t:""),f(null!==r&&""!==r?r:"-"),x(null!==n?n:"")}),[]);var re=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var r,n,s,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==_){e.next=5;break}return q(se().old_pass_empty),te(!0),e.abrupt("return");case 5:if(I===D){e.next=9;break}return q(se().pass_not_match),te(!0),e.abrupt("return");case 9:if(""!==I&&""!==D){e.next=13;break}return q(se().pass_not_null),te(!0),e.abrupt("return");case 13:return e.prev=13,e.next=16,M();case 16:if(n=e.sent,r=n.response.data.passwordStrength,!(Object($e.passwordStrength)(I).id<r)){e.next=23;break}return q(se().stronger_password_required),te(!0),e.abrupt("return");case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(13),console.log(e.t0),r=1;case 29:return e.prev=29,e.next=32,y(a,_,"-"!==p?p:"");case 32:e.next=39;break;case 34:return e.prev=34,e.t1=e.catch(29),q(se().old_pass_wrong),te(!0),e.abrupt("return");case 39:if(s=window.confirm(se().pass_change_confirm),te(!1),!s){e.next=55;break}return e.prev=42,e.next=45,S("users",{password:I},a);case 45:i=e.sent,k(""),A(""),R(""),200===i.response.status&&q(se().password_changed),e.next=55;break;case 52:e.prev=52,e.t2=e.catch(42),console.log(e.t2);case 55:case"end":return e.stop()}}),e,null,[[13,25],[29,34],[42,52]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==E&&""!==W){e.next=5;break}return X(se().empty_email_error),te(!0),e.abrupt("return");case 5:if(E===W){e.next=9;break}return X(se().email_not_match),te(!0),e.abrupt("return");case 9:if(E!==v){e.next=13;break}return X(se().email_same_as_old),te(!0),e.abrupt("return");case 13:if(!window.confirm(se().email_change_confirm)){e.next=25;break}return e.prev=15,e.next=18,S("users",{email:E},a);case 18:200===e.sent.response.status&&(L(""),H(""),localStorage.setItem("user-email",E),x(E),te(!1),X(se().email_changed)),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:[se().welcome,"\xa0",Object(ie.jsx)("b",{children:a}),":\xa0",se().profile_page_desc]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Qe.a,{fluid:!0,children:[Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{xs:1,children:"Username:\xa0"})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("b",{children:a})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{xs:1,children:"Email:\xa0"})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("b",{children:v})})})]}),Object(ie.jsx)("hr",{}),Object(ie.jsxs)(Qe.a,{fluid:!0,children:[Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)("b",{children:"Modifica email"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(oe.a,{onSubmit:ne,children:[Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"email",onChange:function(e){e.preventDefault(),L(e.target.value)},value:E,placeholder:se().enter+" nuova email"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"email",onChange:function(e){e.preventDefault(),H(e.target.value)},value:W,placeholder:se().repeat+" nuova email"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:ee?"red":"black"},children:Q})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)(h.a,{variant:"primary",type:"submit",children:se().submit})})})]})})})]}),Object(ie.jsx)("hr",{}),Object(ie.jsxs)(Qe.a,{fluid:!0,children:[Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)("b",{children:"Modifica password"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(oe.a,{onSubmit:re,children:[Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"password",onChange:function(e){e.preventDefault(),k(e.target.value)},value:_,placeholder:se().enter+" vecchia password"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"password",onChange:function(e){e.preventDefault(),A(e.target.value)},value:I,placeholder:se().enter+" nuova password"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"password",onChange:function(e){e.preventDefault(),R(e.target.value)},value:D,placeholder:se().repeat+" nuova password"})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:ee?"red":"black"},children:K})})}),Object(ie.jsx)(h.a,{variant:"primary",type:"submit",children:se().submit})]})})})]})]})]})}r(300),r(301);function tt(){return Object(ie.jsx)("div",{className:"unAuth-page",children:Object(ie.jsx)("div",{className:"info-box",children:Object(ie.jsx)("div",{className:"info-text",children:se().unauthorised_user})})})}var rt=a.a.createRef(),nt="think-before-tenant";function at(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),r=t[0],a=t[1],s=Object(p.n)();function i(){return(i=Object(u.a)(Object(l.a)().mark((function e(t){var r,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=rt.current.value,n=nt,""!==r){e.next=6;break}return a(se().missing_email),e.abrupt("return");case 6:return e.prev=6,e.next=9,B(n,r);case 9:a(se().email_sent_successfully),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log({error:e.t0.response.data}),a(se().email_sent_errors);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}return Object(ie.jsxs)("div",{className:"auth-page",children:[Object(ie.jsx)("div",{className:"title-wrapper",children:Object(ie.jsx)("div",{className:"title-section",children:"Pensaci Prima"})}),q.length>1&&Object(ie.jsx)("div",{className:"language-wrapper",children:Object(ie.jsx)(ce,{})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("div",{className:"login-section",children:[Object(ie.jsx)(oe.a,{onSubmit:function(e){return i.apply(this,arguments)},children:Object(ie.jsxs)(Qe.a,{fluid:!0,children:[Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("h4",{children:se().password_recovery})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(oe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ie.jsx)(oe.a.Label,{children:se().email}),Object(ie.jsx)(oe.a.Control,{type:"email",ref:rt,placeholder:se().email_suggestion})]})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsxs)(Ze.a,{children:[Object(ie.jsx)(h.a,{variant:"success",type:"submit",children:se().submit})," ","\xa0\xa0\xa0",Object(ie.jsx)(h.a,{variant:"secondary",onClick:function(e){e.preventDefault(),s(-1)},children:se().cancel})]})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("div",{style:{color:"black"},children:r})})})]})}),Object(ie.jsx)("br",{})]})]})}var st=a.a.createRef(),it=a.a.createRef(),ct="think-before-tenant";function ot(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),r=t[0],a=t[1],s=Object(b.c)(),i=Object(j.a)(s,2),c=i[0],o=(i[1],Object(n.useState)(c.get("token"))),d=Object(j.a)(o,2),f=d[0],m=d[1],O=Object(p.n)();function v(){return(v=Object(u.a)(Object(l.a)().mark((function e(t){var r,n,s,i,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,M();case 4:n=e.sent,r=n.response.data.passwordStrength,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),r=1;case 12:if(s=ct,i=st.current.value,c=it.current.value,""!==i&&""!==c){e.next=18;break}return a(se().pass_not_null),e.abrupt("return");case 18:if(i===c){e.next=21;break}return a(se().pass_not_match),e.abrupt("return");case 21:if(""!==f&&void 0!=f){e.next=24;break}return a(se().missing_token),e.abrupt("return");case 24:if(!(Object($e.passwordStrength)(i).id<r)){e.next=28;break}return a(se().stronger_password_required),e.abrupt("return");case 28:return e.prev=28,e.next=31,W(s,f,i);case 31:o=e.sent,console.log(o),a(se().password_changed),e.next=43;break;case 36:if(e.prev=36,e.t1=e.catch(28),console.log(e.t1),"Network Error"!==e.t1.error.message){e.next=42;break}return a(se().network_error),e.abrupt("return");case 42:a(se().password_not_changed_errors);case 43:case"end":return e.stop()}}),e,null,[[1,8],[28,36]])})))).apply(this,arguments)}return Object(ie.jsxs)("div",{className:"auth-page",children:[Object(ie.jsx)("div",{className:"title-wrapper",children:Object(ie.jsx)("div",{className:"title-section",children:"Pensaci Prima"})}),q.length>1&&Object(ie.jsx)("div",{className:"language-wrapper",children:Object(ie.jsx)(ce,{})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("div",{className:"login-section",children:[Object(ie.jsx)(oe.a,{onSubmit:function(e){return v.apply(this,arguments)},children:Object(ie.jsxs)(Qe.a,{fluid:!0,children:[Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("h4",{children:se().password_reset})})}),(null===c.get("token")||""===c.get("token"))&&Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(oe.a.Group,{className:"mb-3",controlId:"token",children:[Object(ie.jsx)(oe.a.Label,{children:"Token"}),Object(ie.jsx)(oe.a.Control,{onChange:function(e){e.preventDefault(),m(e.target.value)},type:"text",placeholder:se().enter+" token"})]})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(oe.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ie.jsx)(oe.a.Label,{children:se().password}),Object(ie.jsx)(oe.a.Control,{ref:st,type:"password",placeholder:se().enter+" new password"}),Object(ie.jsx)(oe.a.Text,{className:"text-muted",children:se().password_rules})]})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(ie.jsx)(oe.a.Control,{type:"password",ref:it,placeholder:se().repeat+" new password"})})})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsxs)(Ze.a,{children:[Object(ie.jsx)(h.a,{variant:"success",type:"submit",children:se().submit})," ","\xa0\xa0\xa0",Object(ie.jsx)(h.a,{variant:"secondary",onClick:function(){O("/")},children:se().go_login_page})]})}),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)("div",{style:{color:"black"},children:r})})})]})}),Object(ie.jsx)("br",{})]})]})}var lt=a.a.createContext(),ut=r(421),dt=r(422),jt=function(e){var t,r=Object(n.useContext)(lt);if(t=void 0!==r?r.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.backFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(ie.jsxs)(oe.a,{onSubmit:e.submitFunction,children:[Object(ie.jsxs)(Qe.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(r){var n,s=Object(j.a)(r,2),i=s[0],c=s[1];if(void 0!==re[e.resource]&&void 0!==re[e.resource][i]&&void 0!==t.types&&void 0!==t.types[re[e.resource][i]])return function(t,r){return Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Ze.a,{sm:4,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsxs)(oe.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(ie.jsx)("option",{children:se().select+" "+t}),a.a.Children.toArray(Object.entries(r).map((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return Object(ie.jsx)("option",{value:r,children:n})})))]})})})]})}(i,t.types[re[e.resource][i]]);if(Array.isArray(c)){if("number"===typeof c[0])return n=i,Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:n})}),Object(ie.jsx)(Ze.a,{sm:4,children:a.a.Children.toArray(e.values[n].map((function(t,r){return Object(ie.jsx)(Xe.a,{children:Object(ie.jsxs)(oe.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(oe.a.Label,{children:["Insert ",Object(ie.jsx)("b",{children:n}),Object(ie.jsxs)("i",{children:["[",r,"]"]})]}),Object(ie.jsx)(oe.a.Control,{type:"number",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[n,r])},value:isNaN(e.values[n][r])?"":e.values[n][r],placeholder:se().enter+" "+n})]})})})))})]});if("string"===typeof c[0])return function(r){var n;return t!=={}&&void 0!==t.data[r]&&(n=t.data[r]),Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsx)(Ze.a,{children:a.a.Children.toArray(e.values[r].map((function(a,s){return Object(ie.jsxs)(Xe.a,{children:[Object(ie.jsx)(Ze.a,{sm:1,children:Object(ie.jsx)(h.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Ze.a,{sm:4,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:void 0!==t.data[r]?Object(ie.jsx)(dt.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r,s])},value:""===e.values[r][s]?null:e.values[r][s],options:n,renderInput:function(e){return Object(ie.jsx)(ut.a,Object(o.a)(Object(o.a)({},e),{},{label:se().enter+" "+r}))}}):Object(ie.jsx)(oe.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s])},value:e.values[r][s],placeholder:se().enter+" "+r})})}),Object(ie.jsx)(Ze.a,{md:"auto"})]})})))})]})}(i);if(c[0].constructor===Object)return function(r){return Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsx)(Ze.a,{children:a.a.Children.toArray(e.values[r].map((function(n,s){return Object(ie.jsxs)(Xe.a,{children:[Object(ie.jsx)(Ze.a,{sm:1,children:Object(ie.jsx)(h.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(j.a)(n,2),c=i[0],o=i[1];return"number"===typeof o?Object(ie.jsx)(Ze.a,{sm:2,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,s,c])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:isNaN(e.values[r][s][c])?"":e.values[r][s][c],placeholder:se().enter+" "+c},r+c+s+"")})}):void 0!==re[e.resource]&&void 0!==re[e.resource][r]&&void 0!==re[e.resource][r][c]&&void 0!==t.types&&void 0!==t.types[re[e.resource][r][c]]?Object(ie.jsx)(Ze.a,{sm:3,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsxs)(oe.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c])},value:e.values[r][s][c],disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],children:[Object(ie.jsx)("option",{children:se().select+" "+c}),a.a.Children.toArray(Object.entries(t.types[re[e.resource][r][c]]).map((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return Object(ie.jsx)("option",{value:r,children:n})})))]})})}):"string"===typeof o?Object(ie.jsx)(Ze.a,{sm:3,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c])},value:e.values[r][s][c],placeholder:se().enter+" "+c})})}):Array.isArray(o)?0===o.length?c+" is empty":"range"===c&&"enum"!==e.values[r][s].type?"":Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ae.a,{defaultActiveKey:"0",children:Object(ie.jsxs)(Ae.a.Item,{eventKey:"0",children:[Object(ie.jsxs)(Ae.a.Header,{children:[Object(ie.jsx)("b",{children:c})," : ",Ee(o)," items"]}),Object(ie.jsx)(Ae.a.Body,{children:a.a.Children.toArray(o.map((function(t,n){if(t.constructor===Object){var i=Object.entries(t);return Object(ie.jsxs)(Xe.a,{children:[Object(ie.jsx)(Ze.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(ie.jsx)(Ze.a,{sm:1,children:Object(ie.jsx)(h.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(i.map((function(t){var a=Object(j.a)(t,2),i=a[0],o=a[1];return Object(ie.jsx)(Ze.a,{sm:3,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c,n,i])},value:o,placeholder:se().enter+" "+i})})})})))]})}return"number"===typeof t?Object(ie.jsxs)(Xe.a,{children:[Object(ie.jsx)(Ze.a,{sm:1,children:Object(ie.jsx)(h.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Ze.a,{sm:3,children:Object(ie.jsx)(oe.a.Control,{type:"number",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,s,c,n])},value:isNaN(t)?"":t,placeholder:se().enter+" "+c},""+r+s+c+n)})]}):"string"===typeof t?Object(ie.jsxs)(Xe.a,{children:[Object(ie.jsx)(Ze.a,{sm:1,children:Object(ie.jsx)(h.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Ze.a,{sm:3,children:Object(ie.jsx)(oe.a.Control,{type:"text",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c,n])},value:t,placeholder:se().enter+" "+c},""+r+s+c+n)})]}):"Unknown data type"})))})]})})}):"Unknown data type"})))]})})))})]})}(i)}return"number"===typeof c?function(t){return Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Ze.a,{sm:4,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"number",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(parseInt(r.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:se().enter+" "+t})})})]})}(i):void 0!==ne[e.resource]&&void 0!==ne[e.resource][i]&&void 0!==t.data[ne[e.resource][i]]?function(r,n){var a;return t==={}||void 0===t.data[r]&&void 0===t.data[n]||(a=t.data[void 0!==n?n:r]),Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsx)(Ze.a,{sm:4,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(dt.a,{id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:""===e.values[r]?null:e.values[r],options:a,renderInput:function(e){return Object(ie.jsx)(ut.a,Object(o.a)(Object(o.a)({},e),{},{label:se().enter+" "+r}))}})})})]})}(i,ne[e.resource][i]):"string"===typeof c?function(t){return Object(ie.jsxs)(Xe.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Ze.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Ze.a,{sm:4,children:Object(ie.jsx)(oe.a.Group,{className:"mb-3",children:Object(ie.jsx)(oe.a.Control,{type:"password"===t?"password":"text",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:se().enter+" "+t})})})]})}(i):c.constructor===Object?"TODO ObjectFormRow":""})))]}),Object(ie.jsx)(h.a,{variant:"primary",type:"submit",children:se().submit},"submit"),"\xa0\xa0\xa0",Object(ie.jsx)(h.a,{variant:"secondary",onClick:e.backFunction,children:se().cancel},"cancel")]})},bt=r(110);function pt(e,t){var r=Object.keys(e),n=Object.keys(t);return(r=r.filter((function(e){return-1!==n.indexOf(e)}))).sort((function(e,t){return n.indexOf(e)-n.indexOf(t)})),r.reduce((function(r,n){if(Array.isArray(e[n])&&0!==e[n].length&&e[n][0].constructor===Object){var a=e[n].map((function(e){return pt(e,t[n][0])}));r[n]=a}else r[n]=e[n];return r}),{})}function ht(e,t,r){for(var n=Object.keys(e),a=bt(e),s=0;s<n.length;s++)Array.isArray(a[n[s]])&&(a=ft(a,[n[s]],t,r));return a}function ft(e,t,r,n){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=bt(e),i=s,c=bt(r[n]),l=Object(d.a)(t),u=0;u<l.length&&void 0!==t[u];u++)i=i[t[u]];for(var j=0;j<l.length&&void 0!==t[j]&&void 0!==c;j++)c="number"===typeof t[j]?c[0]:c[t[j]];return Array.isArray(c)?(void 0!==c&&(0===i.length?c[0].constructor===Object?i.push(Object(o.a)({},c[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return Fe(e)})).length&&i.push(Object(o.a)({},c[0])):i.includes("")||i.push("")),void 0!==a&&void 0===c&&(0===i.length||0===i.filter((function(e){return Fe(e)})).length)&&(a.constructor===Object?i.push(Object(o.a)({},a)):i.push(a)),s):s}var mt=r(110);function Ot(e){var t=Object(p.p)(),r=t.resource,a=t.id,s=Object(n.useState)(),i=Object(j.a)(s,2),o=i[0],b=i[1],h=Object(n.useState)(""),f=Object(j.a)(h,2),m=f[0],O=f[1],v=Object(p.n)(),x=Object(n.useState)(mt(Z[r])),g=Object(j.a)(x,2),y=g[0],w=g[1],_=Object(n.useState)({}),k=Object(j.a)(_,2),C=k[0],N=(k[1],Object(n.useState)(void 0)),I=Object(j.a)(N,2),A=I[0],z=I[1],D=Object(n.useContext)(lt).fetched,R=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===D.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:r=e.sent,D.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){void 0!==ne[r]&&Object.values(ne[r]).forEach((function(e){return R(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,s,i,c,o=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,P(r,t);case 3:n=e.sent,s=n.docs[0],i=mt(y),i=pt(s,i),c=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,n,s,c,o,u,d,j,p,h,f,m;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==ee[r]){e.next=7;break}for(z({}),t=Object.keys(i),n=0;n<t.length;n++)s=t[n],i=ft(i,[s],Z,r);return w(i),b(mt(i)),e.abrupt("return");case 7:c={},void 0!==A&&(c=A),o=Object.entries(ee[r]),u=0;case 11:if(!(u<o.length)){e.next=24;break}if(d=o[u][0],j=o[u][1],void 0!==i[d]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==j.type){e.next=21;break}return e.next=19,j.policy(a);case 19:p=e.sent,c[d]=p;case 21:u++,e.next=11;break;case 24:for(h=Object.keys(i),f=0;f<h.length;f++)m=h[f],void 0!==c[m]&&!1!==c[m]||(i=ft(i,[m],Z,r));z(c),w(i),b(mt(i));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:a};e({filter:JSON.stringify(t)})}),[]);var T=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,s,i,u,j,b,p,h,f,m,x,g,w,_,k,N;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=mt(y),s=mt(o),Le(n),Le(s),i={},u=Object.entries(n),j=0;j<u.length;j++)if(b=u[j][0],p=u[j][1],Array.isArray(p)){if(void 0===i[b]&&(i[b]={add:[],remove:[],update:[]}),h=Object(d.a)(s[b]),void 0!==C[b])for(f=0;f<C[b].indexes.length;f++)(m=h.splice(C[b].indexes[f][0],1)[0]).constructor===Object?(x=Object.keys(m)[0],i[b].remove.push(m[x])):i[b].remove.push(m);for(g=0;g<n[b].length;g++)g<h.length&&!Be(n[b][g],h[g])&&(n[b][g].constructor===Object?(_=Object.keys(h[g])[0],i[b].update.push((w={},Object(c.a)(w,_,h[g][_]),Object(c.a)(w,"new",n[b][g]),w))):(i[b].add.push(n[b][g]),i[b].remove.push(h[g]))),g>=h.length&&i[b].add.push(n[b][g]);Be(i[b],{add:[],remove:[],update:[]})&&delete i[b]}else p.constructor===Object||p!==o[b]&&(i[b]=p);return e.prev=8,e.next=11,S(r,i,a);case 11:N=e.sent,k=N.response,O(k.statusText),v("/"+r),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),k=e.t0.error.response,O(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(ie.jsx)("b",{children:r}),"\xa0of id:\xa0",Object(ie.jsx)("b",{children:a}),"\xa0from:"]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsx)(jt,{values:y,resource:r,functionalFields:Z,disabledFields:A,handleChangesCallback:function(e,t){var n,a=mt(y),s=a,i=-1;for(n=0;n<t.length-1;n++)s=s[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),s[t[n]]=e,-1!==i){var c="number"===typeof e?NaN:"";a=ft(a,t.slice(0,i),Z,r,c)}w(a)},arrayDeleteCallback:function(e){var t,n=mt(y),a=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)a=a[e[t]];var s=a.splice(e[t],1),i="number"===typeof s[0]?NaN:"";n=ft(n,e.slice(0,t),Z,r,i),1===t&&(void 0===C[e[0]]&&(C[e[0]]={indexes:[],elements:[],minDel:1/0}),Fe(s[0])||(C[e[0]].elements.push(s[0]),C[e[0]].indexes.push(e[t]>=C[e[0]].minDel?e[t]+C[[e[0]]].indexes.filter((function(r){return r>=e[t]})).length:e[t]),e[t]<C[e[0]].minDel&&(C[e[0]].minDel=e[t]))),w(n)},submitFunction:T,backFunction:function(e){e.preventDefault(),v(-1)}}),Object(ie.jsx)("br",{}),Object(ie.jsx)("font",{style:{marginLeft:"5px"},children:m})]})]})}var vt=r(428),xt=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(ie.jsxs)(oe.a,{onSubmit:e.submitFunction,children:[Object(ie.jsx)(oe.a.Label,{children:Object(ie.jsx)("b",{children:se().select_file})}),Object(ie.jsx)(oe.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var r=t.target.files[0];e.setFile(r);var n=new FileReader;n.onloadend=function(){var t=n.result;if(r.name.endsWith(".csv")){var a=new RegExp("\\r","g"),s=t.replace(a,"").split("\n");e.setContentHeader(s[0]),s.splice(0,1),e.setContentBody(s)}if(r.name.endsWith(".json")){var i=n.result;e.setContentPlain(i)}},n.readAsText(r)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(ie.jsx)(Ae.a,{children:Object(ie.jsxs)(Ae.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Ae.a.Header,{children:se().file_content}),Object(ie.jsx)(Ae.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ie.jsxs)(Ie.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:a.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(ie.jsx)("th",{children:e})})))})}),Object(ie.jsx)("tbody",{children:a.a.Children.toArray(e.contentBody.map((function(e){return Object(ie.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(ie.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(ie.jsx)(Ae.a,{children:Object(ie.jsxs)(Ae.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Ae.a.Header,{children:se().file_content}),Object(ie.jsx)(Ae.a.Body,{style:{overflow:"scroll",height:"70vh"},children:e.contentPlain})]})}),Object(ie.jsx)(h.a,{variant:"primary",type:"submit",children:se().submit},"submit"),"\xa0\xa0\xa0",Object(ie.jsx)(h.a,{variant:"secondary",onClick:e.backFunction,children:se().cancel},"cancel")]})},gt=r(110);function yt(e){var t=Object(p.p)().resource,r=Object(b.c)(),a=Object(j.a)(r,2),s=a[0];a[1];void 0!==e.resource&&(t=e.resource);var i,c=Object(p.n)(),o=Object(n.useState)("form"),d=Object(j.a)(o,2),h=d[0],f=d[1],m=Object(n.useState)(""),O=Object(j.a)(m,2),v=O[0],x=O[1],g=Object(n.useState)(gt($[t])),y=Object(j.a)(g,2),_=y[0],C=y[1],S=Object(n.useState)(void 0),N=Object(j.a)(S,2),I=N[0],A=N[1],z=Object(n.useState)(null),D=Object(j.a)(z,2),R=D[0],T=D[1],F=Object(n.useState)(null),E=Object(j.a)(F,2),L=E[0],B=E[1],G=Object(n.useState)(null),W=Object(j.a)(G,2),H=W[0],M=W[1],J=Object(n.useContext)(lt);i=void 0!==J?J.fetched:{};var U=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:r=e.sent,i.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==ne[t]&&Object.values(ne[t]).forEach((function(e){return U(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var r,n,a,s,i=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,P(t,r);case 3:n=e.sent,a=n.docs[0],s=gt(_),s=ht(s=pt(a,s),$,t),C(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var r={_id:s.get("from")};e({filter:JSON.stringify(r)})}}),[s,t]),void 0===$[t])return Object(ie.jsx)("div",{children:"This entity cannot be posted"});var K=function(e){e.preventDefault(),c(-1)},q=function(){var e=Object(u.a)(Object(l.a)().mark((function e(r){var n,a,s,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=void 0,void 0!==(a=gt(_)).token&&(n=a.token,delete a.token),s=gt(a),Le(s),e.prev=6,e.next=9,k(t,JSON.stringify(s),n);case 9:o=e.sent,i=o.response,x(i.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),i=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===i.status&&!0===window.confirm("Back to resource page?")&&c("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(Object(l.a)().mark((function e(r){var n,a,s,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!I.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",I),e.prev=4,e.next=7,w(t,a);case 7:s=e.sent,n=s.response,x(n.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),n=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!I.name.endsWith(".json")){e.next=31;break}return e.prev=18,e.next=21,k(t,H,void 0);case 21:i=e.sent,n=i.response,x(n.statusText),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(18),console.log(e.t1),n=e.t1.error.response,x(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 31:200===n.status&&!0===window.confirm("Back to resource page?")&&c("/"+t);case 32:case"end":return e.stop()}}),e,null,[[4,12],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ie.jsx)("b",{children:t})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(vt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return f(e)},defaultActiveKey:"form",children:[te[t].includes("form")&&Object(ie.jsx)(vt.a.Item,{children:Object(ie.jsx)(vt.a.Link,{eventKey:"form",children:"Form"})}),te[t].includes("file")&&null===s.get("from")&&Object(ie.jsx)(vt.a.Item,{children:Object(ie.jsx)(vt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ie.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===h&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(jt,{values:_,resource:t,functionalFields:$,disabledFields:{},handleChangesCallback:function(e,r){var n,a=gt(_),s=a,i=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(i=n);s[r[n]]=e,"number"===typeof r[n]&&(i=n),-1!==i&&(a=ft(a,r.slice(0,i),$,t)),C(a)},arrayDeleteCallback:function(e){var r,n=gt(_),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];a.splice(e[r],1),n=ft(n,e.slice(0,r),$,t),C(n)},submitFunction:q,backFunction:K}),Object(ie.jsx)("br",{}),Object(ie.jsx)("font",{style:{marginLeft:"5px"},children:v})]}),"file"===h&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(xt,{submitFunction:V,backFunction:K,setContentBody:B,setContentHeader:T,setContentPlain:M,setFile:A,contentPlain:H,contentHeader:R,contentBody:L}),Object(ie.jsx)("font",{style:{marginLeft:"5px"},children:v})]})]})]})]})}ve.a.library.add(xe.h);r(110);var wt=function(e){if(void 0===e.values||void 0===e.submitFunction||void 0===e.handleAddItemArray||void 0===e.handleRemoveItemArray||void 0===e.items||void 0===e.getAddress||void 0===e.msg||void 0===e.handleChanges||void 0===e.refreshLocation||void 0===e.addrMsg)return"Loading";return Object(ie.jsxs)(Qe.a,{fluid:!0,style:{paddingRight:"20px",paddingLeft:"20px"},children:[function t(r,n){return a.a.Children.toArray(Object.entries(r).map((function(r){var s=Object(d.a)(n);if(s.push(r[0]),"address"===r[0]||"indirizzo"===r[0])return Object(ie.jsxs)(Xe.a,{style:{paddingBottom:"10px"},children:[Object(ie.jsx)(Ze.a,{xs:9,children:Object(ie.jsxs)(oe.a.Group,{children:[Object(ie.jsx)(oe.a.Control,{type:"text",value:r[1],onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,s)},placeholder:se().enter+" "+r[0]}),Object(ie.jsx)(oe.a.Text,{className:"text-muted",children:e.addrMsg})]})}),Object(ie.jsx)(Ze.a,{xs:!0,children:Object(ie.jsx)(h.a,{variant:"link",onClick:Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshLocation();case 2:case"end":return t.stop()}}),t)}))),children:Object(ie.jsx)("i",{className:"fa fa-map-pin","aria-hidden":"true",title:"Refresh Position",style:{width:"20px",height:"20px",marginRight:"10px",opacity:.85}})})})]});if("et\xe0"===r[0])return Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{xs:9,children:Object(ie.jsx)(oe.a.Group,{children:Object(ie.jsx)(oe.a.Control,{type:"number",min:14,max:150,value:isNaN(r[1])?"":r[1],onChange:function(t){t.preventDefault(),e.handleChanges(parseInt(t.target.value,10),s)},"aria-label":se().enter+" "+r[0],placeholder:se().enter+" "+r[0]})})})});if("time"===r[0]||"ora"===r[0])return Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{xs:9,children:Object(ie.jsx)(oe.a.Group,{children:Object(ie.jsx)(oe.a.Control,{type:"time",className:"modalTextField",value:r[1],onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,s)},"aria-label":se().enter+" "+r[0],placeholder:se().enter+" "+r[0]})})})});if("index"===r[0])return"";if("note"===r[0])return Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{xs:12,children:Object(ie.jsx)(oe.a.Group,{children:Object(ie.jsx)(oe.a.Control,{as:"textarea",rows:3,type:"text",value:r[1],onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,s)},placeholder:se().enter+" "+r[0]})})})});if("date"===r[0]||"data"===r[0]){var i=new Date;return Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{xs:9,children:Object(ie.jsx)(oe.a.Control,{type:"date",defaultValue:[i.toLocaleString("default",{year:"numeric"}),i.toLocaleString("default",{month:"2-digit"}),i.toLocaleString("default",{day:"2-digit"})].join("-"),onChange:function(t){var r=new Date(t.target.value).getTime();e.handleChanges(r,s)},"aria-label":se().enter+" "+r[0]})})})}var c=e.items.filter((function(e){return"enum"===e.type&&e.name===r[0]}))[0],o=null;return void 0!==c&&(o=c.range),null!==o?Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{xs:9,children:Object(ie.jsxs)(oe.a.Select,{xs:9,"aria-label":se().select+" "+r[0],value:r[1],onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,s)},children:[Object(ie.jsx)("option",{value:"",children:se().select+" "+r[0]}),a.a.Children.toArray(o.map((function(e){return Object(ie.jsx)("option",{value:e,children:e})})))]})})}):Array.isArray(r[1])?a.a.Children.toArray(r[1].map((function(a,s){var i=Object(d.a)(n);return i.push(r[0]),i.push(s),Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ae.a,{children:Object(ie.jsxs)(Ae.a.Item,{children:[Object(ie.jsxs)(Ae.a.Header,{children:["persone"===r[0]?"Persona":"Sostanza"," ",s+1]}),Object(ie.jsxs)(Ae.a.Body,{children:[Object(ie.jsx)(Xe.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(h.a,{variant:"outline-danger",onClick:function(t){t.preventDefault(),e.handleRemoveItemArray(i)},style:{textDecoration:"none"},children:[Object(ie.jsx)("i",{className:"fa fa-minus-circle","aria-hidden":"true",title:"Remove",style:{width:"25px",height:"25px",opacity:.85}}),"\xa0Rimuovi\xa0","persone"===r[0]?"persona":"sostanza","\xa0",s+1]})})}),t(a,i),s===r[1].length-1&&Object(ie.jsx)(Xe.a,{children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsxs)(h.a,{variant:"link",onClick:function(t){t.preventDefault(),e.handleAddItemArray(i)},style:{textDecoration:"none"},children:[Object(ie.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"25px",height:"25px",opacity:.85}}),"\xa0Aggiungi\xa0","persone"===r[0]?"persona":"sostanza"]})})})]})]})})})}))):Object(ie.jsx)(Xe.a,{children:r[0]+r[1]})})))}(e.values,[]),Object(ie.jsx)(Xe.a,{style:{padding:"10px"},children:Object(ie.jsx)(Ze.a,{children:Object(ie.jsx)(h.a,{variant:"primary",onClick:e.submitFunction,children:se().submit})})}),Object(ie.jsx)("font",{children:e.msg})]})};ve.a.library.add(xe.g);var _t=r(110),kt="controllo",Ct="think-before-device",St="Genova",Nt=[],It=a.a.createRef();function At(e){var t="measurements",r=Object(b.c)(),a=Object(j.a)(r,2),s=a[0],i=(a[1],Object(n.useState)([])),c=Object(j.a)(i,2),o=(c[0],c[1],Object(n.useState)([])),h=Object(j.a)(o,2),f=h[0],m=h[1],O=Object(n.useState)({}),v=Object(j.a)(O,2),x=v[0],g=v[1],y=Object(n.useState)(""),w=Object(j.a)(y,2),_=w[0],C=w[1],S=Object(p.n)(),N=Object(n.useState)(""),I=Object(j.a)(N,2),A=I[0],z=(I[1],Object(n.useContext)(lt).fetched),D=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===z.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:r=e.sent,z.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==ne[t]&&Object.values(ne[t]).forEach((function(e){return D(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,r,n,a,s,i,c,o,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:kt},r={filter:JSON.stringify(t)},e.prev=2,e.next=5,P("features",r);case 5:n=e.sent,a=n.docs[0],s=B(),i=a.items,c=new Date,o=c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0"),u={indirizzo:s,note:"",data:Date.now(),ora:o,veicolo:"",persone:[{index:0,"et\xe0":NaN,genere:"","nazionalit\xe0":"",risultato:""}]},g(u),m(i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0);case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();e()}),[e,s]),Object(n.useEffect)((function(){null!==It.current&&g(It.current)})),void 0===$[t])return Object(ie.jsx)("div",{children:"This entity cannot be posted"});var R=function e(t,r,n){var a=Object(d.a)(r),s=!0;return t.constructor===Object&&Object.values(t).forEach((function(t){Array.isArray(t)?(s=!1,t.forEach((function(t){return e(t,a,n)}))):a.push(t)})),!0===s&&n.push(a),n},T=function(){var e=Object(u.a)(Object(l.a)().mark((function e(r){var n,a,s,i,c,o,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=void 0,a=f.filter((function(e){return"sostanza"===e.name}))[0].range,""!==(s=_t(x)).note&&void 0!==s.note&&null!==s.note||(s.note="--"),!(s.persone.filter((function(e){return isNaN(e["et\xe0"])||e["et\xe0"]<14||e["et\xe0"]>150})).length>0)){e.next=9;break}return window.alert("Errore, non \xe8 stato possibile salvare i dati. Controllare di aver specificato tutte le voci correttamente"),e.abrupt("return");case 9:return s.persone.forEach((function(e){a.forEach((function(t){void 0===e.sostanze&&(e.sostanze=[]),!1===e.sostanze.map((function(e){return e.sostanza})).includes(t)&&e.sostanze.push({sostanze:t,livello:"nullo"})}))})),i=R(s,[],[]),c=i.map((function(e){return{values:e}})),(o={}).feature=kt,o.tags=Nt,o.thing=St,o.device=Ct,o.samples=c,void 0!==o.token&&(n=o.token,delete o.token),e.prev=19,e.next=22,k(t,JSON.stringify(o),n);case 22:d=e.sent,u=d.response,e.next=32;break;case 26:e.prev=26,e.t0=e.catch(19),console.log(e.t0),It.current=x,u=e.t0.error.response,window.alert("Errore, non \xe8 stato possibile salvare i dati. Controllare di aver specificato tutte le voci correttamente");case 32:200===u.status&&(It.current=null,window.alert("Controllo caricato con successo"),S("/add/measurements"));case 33:case"end":return e.stop()}}),e,null,[[19,26]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=Object(u.a)(Object(l.a)().mark((function e(n){var a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.coords.latitude,r=n.coords.longitude,e.prev=2,e.next=5,L(t,r);case 5:a=E(),g(a),C(se().geo_update),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error while connecting to Geolocalization APIs"),console.log(e.t0),C(se().geo_failed);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()):(console.log("Geolocation is not supported by this browser."),C(se().geo_failed));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=_t(x);return void 0!==e.indirizzo&&(e.indirizzo=B()),void 0!==e.address&&(e.address=B()),e},B=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=localStorage.getItem("continent"),n=localStorage.getItem("continentCode"),a=localStorage.getItem("countryName"),s=localStorage.getItem("countryCode"),i=localStorage.getItem("principalSubdivision"),c=localStorage.getItem("city"),o=localStorage.getItem("locality");return!0===e?!0===t?n+" - "+s+" - "+i+" - "+c+" - "+o:r+" - "+a+" - "+i+" - "+c+" - "+o:c+" - "+o};return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Aggiungi\xa0",Object(ie.jsx)("b",{children:"Controllo"})]}),Object(ie.jsx)("main",{children:Object(ie.jsx)(wt,{values:x,items:f,submitFunction:T,backFunction:function(e){e.preventDefault(),S(-1)},getAddress:B,msg:A,handleAddItemArray:function(e){It.current=null;for(var t=_t(x),r=t,n=null,a=0;a<e.length-1;a++)r=r[e[a]],n=e[a];"sostanze"===n&&r.push({sostanza:"",livello:""}),"persone"===n&&r.push({index:r.length,"et\xe0":NaN,genere:"","nazionalit\xe0":"",risultato:""}),g(t)},handleRemoveItemArray:function(e){It.current=null;var t,r=_t(x),n=r;for(t=0;t<e.length-1&&void 0!==e[t];t++)n=n[e[t]];1!==n.length&&(n.splice(e[t],1),g(r))},handleChanges:function(e,t){It.current=null;var r,n=_t(x),a=n;for(r=0;r<t.length-1;r++)a=a[t[r]],"number"===typeof t[r]&&r;t[r],a[t[r]]=e,"risultato"===t[r]&&"positivo"===e&&(a.sostanze=[{sostanza:"",livello:""}]),g(n)},refreshLocation:F,addrMsg:_})})]})}var Pt=r(231);r(123);ve.a.library.add(xe.j,xe.d);var zt=["Luogo","Mezzo","Anni","Sesso","Nazionalit\xe0","Data","Ora","Risultato","Sostanza","Livello","Note"];function Dt(e){var t="measurements",r=Object(b.c)(),a=Object(j.a)(r,2),s=a[0],i=a[1],c=Object(n.useState)(void 0),o=Object(j.a)(c,2),d=o[0],p=o[1],f=Object(n.useState)(void 0),m=Object(j.a)(f,2),O=m[0],v=m[1],x=Object(n.useState)(void 0),g=Object(j.a)(x,2),y=g[0],w=g[1],_=Object(n.useState)(1),k=Object(j.a)(_,2),C=k[0],S=k[1],N=Object(n.useState)(1),I=Object(j.a)(N,2),A=(I[0],I[1]),z=Object(n.useState)(),R=Object(j.a)(z,2),T=R[0],F=R[1],E=Object(n.useState)(),L=Object(j.a)(E,2),B=L[0],G=L[1],W=Object(n.useState)(),H=Object(j.a)(W,2),M=H[0],J=H[1],U=Object(n.useState)(),K=Object(j.a)(U,2),q=(K[0],K[1]),V=Object(n.useState)(),Y=Object(j.a)(V,2),Q=Y[0],X=Y[1],Z=Object(n.useState)(""),$=Object(j.a)(Z,2),ee=$[0],te=$[1],re=Object(n.useState)(!1),ne=Object(j.a)(re,2),ae=ne[0],se=ne[1];Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var r,n,a,s,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.prev=1,e.next=4,P(t,r);case 4:n=e.sent,a=n.docs.map((function(e){return e.samples})),s=a.map((function(e){if("positivo"===e[0].values[9]){var t=e.filter((function(e){return"nullo"!==e.values[11]}));if(0===t.length){var r=e[0];return r.values[10]="Non specificato",r.values[11]="Non specificato",r}return t}var n=e[0];return n.values[10]="--",n.values[11]="NA",[n]})),i=s.flat().map((function(e){return e.values})).map((function(e){return{Luogo:e[0],Mezzo:e[4],Anni:e[6],Sesso:e[7],"Nazionalit\xe0":e[8],Data:e[2],Ora:e[3],Risultato:e[9],Sostanza:e[10],Livello:e[11],Note:e[1]}})),v(zt),p(i),w([]),F(n.hasNextPage),G(n.hasPrevPage),X(n.totalPages),J(n.prevPage),q(n.nextPage),e.next=28;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),v(void 0),p(void 0),F(void 0),G(void 0),X(void 0),J(void 0),q(void 0);case 28:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;S(r);var n=null!==s.get("limit")?s.get("limit"):10;A(n);var a=null!==s.get("sortBy")?s.get("sortBy"):"",i=null!==s.get("order")?s.get("order"):"";""!==a&&(a="samples.values."+["Luogo","Note","Data","Ora","Mezzo","ID","Anni","Sesso","Nazionalit\xe0","Risultato","Sostanza","Livello"].indexOf(a)),e({page:r,limit:n,sort:{order:i,by:a}}).catch(console.error)}),[e,t,s]);var ce=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,r,n,a,s,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("measurements",{});case 2:t=e.sent,r=new RegExp(/}{/g),n=t.data.replace(r,"},{"),a=JSON.parse("["+n+"]").map((function(e){return e.samples})).map((function(e){if("positivo"===e[0].values[9]){var t=e.filter((function(e){return"nullo"!==e.values[11]}));if(0===t.length){var r=e[0];return r.values[10]="Non specificato",r.values[11]="Non specificato",r}return t}var n=e[0];return n.values[10]="--",n.values[11]="NA",[n]})).flat().map((function(e){return e.values})).map((function(e){return{Luogo:e[0],Mezzo:e[4],Anni:e[6],Sesso:e[7],"Nazionalit\xe0":e[8],Data:e[2],Ora:e[3],Risultato:e[9],Sostanza:e[10],Livello:e[11],Note:e[1]}})),s=We(a,zt),i=new Blob([s],{type:"text/plain;charset=utf-8"}),Object(Pt.saveAs)(i,"Dati_Pensaci_Prima.csv");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=parseInt(C,10)-2>0,t=parseInt(C,10)+2<Q;return Object(ie.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(ie.jsxs)(qe.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(ie.jsx)(qe.a.First,{disabled:1===C,onClick:function(){s.set("page",1),i(s)}}),Object(ie.jsx)(qe.a.Prev,{disabled:!B,onClick:function(){s.set("page",M),i(s)}}),e&&Object(ie.jsx)(qe.a.Ellipsis,{}),parseInt(C,10)-1>0&&Object(ie.jsx)(qe.a.Item,{onClick:function(){s.set("page",parseInt(C,10)-1),i(s)},children:parseInt(C,10)-1}),Object(ie.jsx)(qe.a.Item,{children:Object(ie.jsx)("b",{children:C})}),parseInt(C,10)+1<=Q&&Object(ie.jsx)(qe.a.Item,{onClick:function(){s.set("page",parseInt(C,10)+1),i(s)},children:parseInt(C,10)+1}),t&&Object(ie.jsx)(qe.a.Ellipsis,{}),Object(ie.jsx)(qe.a.Next,{disabled:!T,onClick:function(){s.set("page",parseInt(C,10)+1),i(s)}}),Object(ie.jsx)(qe.a.Last,{disabled:C===Q,onClick:function(){s.set("page",Q),i(s)}})]})})};return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:[Object(ie.jsx)("b",{children:"Analizza dati raccolti"}),Object(ie.jsx)(h.a,{variant:"link",size:"sm",onClick:function(e){e.preventDefault(),ce()},children:Object(ie.jsx)("i",{className:"fa fa-download","aria-hidden":"true",title:"Download",style:{width:"30px",height:"30px",opacity:.85}})})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsx)("br",{}),Object(ie.jsx)(He,{resType:t,header:O,resources:d,actions:y,takeSingle:function(e){return d.find((function(t){return t._id===e}))},removeSingle:function(e){var t=d.filter((function(t){return t._id!==e}));p(t)},orderBy:ee,ascending:ae,sortHandler:function(e){var t=s.get("order"),r=!1;null===t||"ascending"===t?t="descending":(t="ascending",r=!0),s.set("sortBy",e),s.set("order",t),te(e),se(r),i(s)}}),Object(ie.jsx)(oe,{})]})]})}var Rt=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),r=t[0],s=t[1],i=Object(n.useState)(),h=Object(j.a)(i,2),f=h[0],m=h[1],O=Object(n.useState)({}),v=Object(j.a)(O,2),x=v[0],y=v[1],w=(a.a.useRef(),localStorage.getItem("token")),_=localStorage.getItem("city");function k(e){s((function(t){return[e].concat(t)}))}function C(e){var t=Object(d.a)(r);t.splice(e,1),s(t)}function S(){s([])}var N={notifications:r,PushNotification:k,RemoveNotification:C,ClearNotifications:S};g.ClearNotifications=S,g.PushNotification=k,g.RemoveNotification=C,Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=12;break}return navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,r=e.coords.longitude})),e.prev=2,e.next=5,L(t,r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Error while connecting to Geolocalization APIs");case 10:e.next=13;break;case 12:console.log("Geolocation is not supported by this browser.");case 13:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();if(null===_)try{e()}catch(t){console.log(t)}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("types",{},"");case 3:t=e.sent,m(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===f)try{e()}catch(t){console.log(t)}}),[]);var I={types:f,data:x,UpdateData:function(e,t){y((function(r){return Object(o.a)(Object(o.a)({},r),{},Object(c.a)({},t,Object(d.a)(e)))}))}};return null===w?Object(ie.jsx)("div",{className:"app",children:Object(ie.jsx)(b.a,{children:Object(ie.jsxs)(p.d,{children:[Object(ie.jsx)(p.b,{path:"/",element:Object(ie.jsx)(fe,{})}),Object(ie.jsx)(p.b,{path:"/passwordrecovery",element:Object(ie.jsx)(at,{})}),Object(ie.jsx)(p.b,{path:"/passwordreset",element:Object(ie.jsx)(ot,{})}),Object(ie.jsx)(p.b,{path:"/add/tenants",element:Object(ie.jsx)(yt,{resource:"tenants"})})]})})}):Object(ie.jsx)(lt.Provider,{value:{notifications:N,fetched:I},children:Object(ie.jsx)(b.a,{children:Object(ie.jsx)(Qe.a,{fluid:!0,style:{paddingLeft:"0px",paddingRight:"0px",minHeight:"100vh"},children:Object(ie.jsxs)(Xe.a,{style:{padding:"0px",height:1==/Mobi/i.test(window.navigator.userAgent)?"auto":"100vh"},children:[Object(ie.jsx)(Ze.a,{md:"auto",style:{padding:"0px"},children:Object(ie.jsx)(Ne,{})}),Object(ie.jsx)(Ze.a,{style:{paddingLeft:"0px",paddingRight:"0px"},children:Object(ie.jsxs)(p.d,{children:[Object(ie.jsx)(p.b,{path:"/",element:Object(ie.jsx)(p.a,{replace:!0,to:"analyst"===localStorage.getItem("user-role")?"/analyzedata":"/add/measurements"})}),Object(ie.jsx)(p.b,{path:"/home",element:Object(ie.jsx)(me,{})}),Object(ie.jsx)(p.b,{path:"/viewProfile",element:Object(ie.jsx)(et,{})}),Object(ie.jsx)(p.b,{path:"/analyzedata",element:Object(ie.jsx)(Dt,{})}),Object(ie.jsx)(p.b,{path:"/add/measurements/",element:Object(ie.jsx)(At,{})}),Object(ie.jsx)(p.b,{path:"/edit/:resource/:id",element:Object(ie.jsx)(Ot,{})}),Object(ie.jsx)(p.b,{path:"/add/:resource/",element:Object(ie.jsx)(yt,{})}),Object(ie.jsx)(p.b,{path:"/:page",element:Object(ie.jsx)(Ye,{res:":page"})}),Object(ie.jsx)(p.b,{path:"/unauthorized",element:Object(ie.jsx)(tt,{})}),Object(ie.jsx)(p.b,{path:"/404",element:Object(ie.jsx)(Oe,{})}),Object(ie.jsx)(p.b,{path:"*",element:Object(ie.jsx)(p.a,{to:"/404",replace:!0})})]})})]})})})})};i.a.render(Object(ie.jsx)(a.a.StrictMode,{children:Object(ie.jsx)(Rt,{})}),document.getElementById("root"))}},[[371,1,2]]]);
//# sourceMappingURL=main.9c196938.chunk.js.map