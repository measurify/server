{"version":3,"sources":["common/localizations/localization_it.js","common/localizations/localization_en.js","services/http_operations.js","config.js","common/locale.ts","components/languageSelector/languageSelector.tsx","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","components/navigation/navigation.comp.jsx","components/actionsManager/actionsManager.jsx","components/contentTable/contentTable.jsx","components/page/page.jsx","components/profilePage/profilePage.jsx","components/unauthorizedPage/unauthorizedPage.tsx","context.jsx","components/notificationBar/notificationBar.jsx","components/horizontalNavigationBar/horizontalNavigationBar.jsx","services/misc_functions.js","components/formManager/formManager.jsx","services/objects_manipulation.js","components/editContentPage/editContentPage.jsx","components/formFileComp/formFile.jsx","components/addPage/addPage.jsx","components/addExperimentPage/addExperimentPage.jsx","components/addMeasurementsPage/samplesForm.jsx","components/addMeasurementsPage/addMeasurementsPage.jsx","App.tsx","index.js"],"names":["localization_it","username","password","tenant","keep_logged","select","language","welcome","role","session_expire_in","tools","notifications","file_content","clear_all","enter","username_suggestion","password_suggestion","tenant_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","geo_update","geo_failed","profile_page_desc","pass_change_confirm","pass_not_match","pass_not_null","password_changed","oh_no","broken_link","submit","cancel","login","logout","repeat","close","remove","login_error","unauthorised_user","session_expired","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","body","options","headers","url_string","api_url","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","type","Date","getTime","toString","catch","error","refreshToken","Authorization","GetToken","put","post_file_generic","resource_type","formData","additionalHeader","undefined","console","log","tempH","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_generic","put_generic","padStart","length","JSON","stringify","message","delete_generic","delete","statusCode","get_generic","qs","url","filter","concat","limit","page","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","getItem","getBigDataCloudLocation","latitude","longitude","res","continent","continentCode","countryName","countryCode","principalSubdivision","city","locality","website_name","languages","layout","pages","aliasPages","pageActions","viewFields","editFields","tags","addFields","_id","organization","address","email","phone","admin_username","admin_password","passwordhash","thing","device","editFieldsSpecifier","addTypes","fetchedPageTypes","visibility","fetchedPageData","locale","tkn","navigator","substring","LanguageSelector","setSessionLanguage","window","location","reload","includes","Button","variant","onClick","userRef","React","createRef","pswRef","tenantRef","AuthPage","useState","setMsg","e","preventDefault","current","value","psw","replace","details","className","Form","onSubmit","Group","controlId","Label","Control","ref","placeholder","style","color","HomePage","useEffect","href","target","rel","title","NotFoundPage","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","intervalRef","loginTime","remainingSeconds","duration","Navigation","isOpened","setIsOpened","usr","rl","tn","CalcEnding","t0","remainingSec","retryLoginTime","parseInt","now","exp","endsWith","slice","DurationToMilliSeconds","clearInterval","setInterval","clear","to","paddingLeft","paddingBottom","document","Fragment","keys","map","navData","isActive","ActionContent","props","toShow","resType","constructor","subK","Array","isArray","resource","row","f","UnrollView","item","Accordion","defaultActiveKey","size","Children","toArray","i","key","Item","eventKey","Header","Body","values","some","single","Table","responsive","striped","bordered","hover","join","ActionManager","setRes","viewPopover","Popover","width","minWidth","test","userAgent","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","height","marginRight","opacity","confirm","status","removeSingle","ContentTable","header","resources","actions","index","str","el","faEye","faPencilAlt","faCopy","Page","params","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","setActions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","disabled","Prev","Ellipsis","Next","Last","find","r","tmp","faPlusCircle","ProfilePage","setUsername","setRole","setTenant","setPassword","passwordConfirm","setPasswordConfirm","submitPassword","Container","fluid","Row","Col","xs","onChange","Text","muted","UnauthorizedPage","AppContext","createContext","oldNotifications","NotificationBar","show","setShow","highlight","setHighlight","layoutRef","useRef","myNotifications","useContext","handleClose","setTimeout","errorNot","textDecoration","Badge","pill","bg","Offcanvas","backgroundColor","onHide","scroll","backdrop","keyboard","Title","ToastContainer","notification","Toast","animation","onClose","src","alt","HorizontalNavigationBar","padding","justifyContent","alignItems","isDefault","isNaN","def","elem","nonDefaultLength","removeDefaultElements","entr","j","splice","subEntr","areEqual","obj1","obj2","k1","k2","FormManager","myFetched","context","fetched","disabledFields","functionalFields","submitFunction","backFunction","handleChangesCallback","arrayDeleteCallback","types","val","borderBottomStyle","borderBottomWidth","marginBottom","sm","borderRightStyle","borderRightWidth","Select","SelectFormRow","Autocomplete","newValue","renderInput","TextField","label","md","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","NumericFormRow","alias","FetchedFormRow","StringFormRow","cloneDeep","sortObject","template","sortingKeys","ob","indexOf","sort","a","b","reduce","accumulator","maintainEmptyElements","original","fieldSpecifier","copy","maintainEmptyElement","path","tmpPtr","fieldSpecifierCpy","tmpPath","push","EditContentPage","setOriginal","navigate","useNavigate","setValues","deleted","setDisabledFields","UpdateData","tmpValues","evaluateSpecifiers","_key","specsEntries","policy","resp","fst","tmpOrig","toSend","update","origArr","indexes","removed","statusText","tmpVals","valuesPtr","lastIndexNumber","NaN","elements","minDel","Infinity","FormFile","setContentHeader","setContentPlain","setContentBody","setFile","contentBody","contentPlain","contentHeader","select_file","accept","file","files","fileReader","FileReader","onloadend","content","result","regex","RegExp","splitted","split","readAsText","overflow","h","AddPage","postType","setPostType","back","postBody","postFile","FormData","append","Nav","justify","onSelect","Link","borderRadius","borderStyle","borderColor","borderWidth","margin","AddExperimentPage","protocols","setProtocols","handleProtocolChange","selectedProtocol","protocol","metadata","tmpDisabled","SamplesForm","samples","handleAddSample","handleDeleteSample","items","getAddress","handleChanges","refreshLocation","addrMsg","sample","enumValues","parse","faMapPin","_feature","_tags","AddMeasurementsPage","setSamples","setItems","setAddrMsg","formValues","fetchFeature","feature","addSample","updateAddress","tmpSample","dimension","range","tmpSamples","geolocation","getCurrentPosition","position","coords","smpls","complete","short","country","sub","samplesPtr","App","setNotifications","setTypes","setData","prev","notificationManagement","getLocation","fetchTypes","fetchedManagement","element","Provider","paddingRight","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b1b2e68d.chunk.js","sourcesContent":["const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadrà in \",\r\n  tools: \"Strumenti\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo di Measurify!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.\",\r\n  right_bar_descr_hp:\r\n    'La barra a destra può essere aperta cliccando sul pulsante \"Notifiche\" per mostrare la lista delle notifiche.',\r\n  session_expire_info_hp: ``,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //geolocalization messages\r\n  geo_update: \"Posizione aggiornata\",\r\n  geo_failed: \"Non è stato possibile aggiornare la posizione\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"questa è la pagina in cui puoi visionare il tuo profilo o modificare la password\",\r\n  pass_change_confirm: \"La password verrà modificata, procedere?\",\r\n  pass_not_match:\r\n    \"La password inserita e la conferma non combaciano, si prega di reinserirle\",\r\n  pass_not_null: \"La password non può essere vuota\",\r\n  password_changed: \"Password cambiata\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  repeat: \"Ripeti\",\r\n  close: \"Chiudi\",\r\n  remove: \"Rimuovi\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  tools: \"Tools\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n\r\n  clear_all: \"Clear all\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //geolocalization messages\r\n  geo_update: \"Position updated\",\r\n  geo_failed: \"It was not possible to update the position\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to the Administration dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains the information about your account and  the list of tabs\",\r\n  right_bar_descr_hp:\r\n    'The right bar contains the notification bar (Click on \"Notifications\" to open).',\r\n  session_expire_info_hp: \"\",\r\n  github_page_hp: \"\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"from this page you can view your own profile or change the password\",\r\n  pass_change_confirm: \"Password will be changed, do you confirm?\",\r\n  pass_not_match:\r\n    \"Provided password and the confirmation do not match. Please insert them again\",\r\n  pass_not_null: \"Password cannot be empty\",\r\n  password_changed: \"Password changed\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link: \"It looks like you have clicked on a broken link.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  repeat: \"Repeat\",\r\n  close: \"Close\",\r\n  remove: \"Remove\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n};\r\n\r\nexport default localization_en;\r\n","import { api_url } from \"../config\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nconst instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    //unsafe, delete in prod\r\n    //rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => {},\r\n  RemoveNotification: (id) => {},\r\n  ClearNotifications: () => {},\r\n};\r\n\r\n//login\r\nexport function login(username, password, tenant) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      //Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        localStorage.setItem(\"username\", response.data.user.username);\r\n        localStorage.setItem(\"user-role\", response.data.user.type);\r\n        localStorage.setItem(\"user-tenant\", tenant);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(resource_type, qs = {}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//return the login token from the localstorage\r\nfunction GetToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\n//get location from bigDataCloud APIs\r\nexport function getBigDataCloudLocation(latitude, longitude) {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const url =\r\n    \"https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=\" +\r\n    latitude +\r\n    \"&longitude=\" +\r\n    longitude +\r\n    \"&localityLanguage=it\";\r\n  console.log(\"GET location: \" + url);\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((res) => {\r\n        //set response into localStorage (it will be cleared on logout)\r\n        localStorage.setItem(\"continent\", res.data.continent);\r\n        localStorage.setItem(\"continentCode\", res.data.continentCode);\r\n        localStorage.setItem(\"countryName\", res.data.countryName);\r\n        localStorage.setItem(\"countryCode\", res.data.countryCode);\r\n        localStorage.setItem(\r\n          \"principalSubdivision\",\r\n          res.data.principalSubdivision\r\n        );\r\n        localStorage.setItem(\"city\", res.data.city);\r\n        localStorage.setItem(\"locality\", res.data.locality);\r\n\r\n        resolve(res);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n","import { isFeatureInUse, alwaysTrue } from \"./services/validations\";\r\n\r\n//url of APIs\r\n//export const api_url = \"https://hi-drive.measurify.org:8080/v1\";\r\nexport const api_url = \"https://think.measurify.org/v1\";\r\n\r\n//name of this dashboard, shown to users\r\nexport const website_name = \"Pensaci Prima\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\n//export const languages = [\"en\", \"it\"];\r\nexport const languages = [\"it\"];\r\n\r\n//gui layout\r\n// options are \"horizontal\" or \"vertical\"\r\nexport const layout = \"vertical\";\r\n\r\n//dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const pages = {};\r\n//pages[\"users\"] = [\"username\", \"type\", \"actions\"];\r\n//pages[\"tags\"] = [\"_id\", \"actions\"];\r\n//pages[\"things\"] = [\"_id\", \"actions\"];\r\n//pages[\"features\"] = [\"_id\", \"actions\"];\r\n//pages[\"devices\"] = [\"_id\", \"tags\", \"actions\"];\r\n//pages[\"protocols\"] = [\"_id\", \"description\", \"actions\"];\r\n//pages[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"actions\"];\r\npages[\"measurements\"] = [\"samples\", \"actions\"];\r\n\r\n//alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\nexport const aliasPages = {};\r\n//aliasPages[\"features\"] = { _id: \"Feature Name\", actions: \"Actions\" };\r\n//aliasPages[\"tags\"] = { _id: \"Tag Name\", actions: \"Actions\" };\r\n//aliasPages[\"devices\"] = { _id: \"Device Name\", actions: \"Actions\" };\r\n\r\n//actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\"\r\nexport const pageActions = {};\r\n//pageActions[\"features\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n//pageActions[\"users\"] = [\"view\", \"delete\"];\r\n//pageActions[\"things\"] = [\"view\", \"delete\"];\r\n//pageActions[\"tags\"] = [\"view\", \"edit\", \"delete\"];\r\n//pageActions[\"devices\"] = [\"view\", \"edit\", \"delete\"];\r\n//pageActions[\"protocols\"] = [\"view\", \"delete\"];\r\n//pageActions[\"experiments\"] = [\"view\", \"delete\"];\r\npageActions[\"measurements\"] = [\"view\", \"delete\"];\r\n\r\n//view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\n/*viewFields[\"users\"] = [\"username\", \"type\", \"actions\", \"fieldmask\", \"status\"];\r\nviewFields[\"features\"] = [\r\n  { items: [\"name\", \"type\", \"unit\", \"dimension\"] },\r\n  \"tags\",\r\n];\r\nviewFields[\"tags\"] = [\"tags\"];\r\nviewFields[\"things\"] = [\"_id\", \"visibility\", \"tags\"];\r\nviewFields[\"devices\"] = [\"_id\", \"features\", \"tags\", \"scripts\"];\r\nviewFields[\"protocols\"] = [\"_id\", \"description\", \"metadata\"];\r\nviewFields[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"metadata\"];*/\r\nviewFields[\"measurements\"] = [\"samples\"];\r\n\r\n//edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the object that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const editFields = {};\r\n/*editFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN }],\r\n  tags: [\"\"],\r\n};\r\neditFields[\"tags\"] = {\r\n  tags: [\"\"],\r\n};\r\neditFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };*/\r\neditFields[\"measurements\"] = { tags: [\"\"] };\r\n//add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const addFields = {};\r\naddFields[\"tenants\"] = {\r\n  token: \"\",\r\n  _id: \"\",\r\n  organization: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  admin_username: \"\",\r\n  admin_password: \"\",\r\n  passwordhash: \"\",\r\n};\r\n/*addFields[\"tags\"] = { _id: \"\", tags: [\"\"] };\r\naddFields[\"things\"] = { _id: \"\", visibility: \"\", tags: [\"\"] };\r\naddFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN, range: [\"\"] }],\r\n  tags: [\"\"],\r\n};\r\naddFields[\"users\"] = { username: \"\", password: \"\", type: \"\" };\r\n\r\naddFields[\"devices\"] = {\r\n  _id: \"\",\r\n  features: [\"\"],\r\n};\r\n\r\naddFields[\"protocols\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  metadata: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      type: \"\",\r\n    },\r\n  ],\r\n  topics: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      fields: [{ name: \"\", description: \"\", type: \"\" }],\r\n    },\r\n  ],\r\n};\r\n\r\n//NOTE: experiments page works differently, so keep it empty\r\naddFields[\"experiments\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  state: \"\",\r\n};\r\n*/\r\n//NOTE: measurements page works differently, so keep it empty\r\naddFields[\"measurements\"] = {\r\n  thing: \"\",\r\n  device: \"\",\r\n  tags: [\"\"],\r\n};\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\n/*editFieldsSpecifier[\"features\"] = {\r\n  _id: { type: \"disable\", policy: isFeatureInUse },\r\n  items: { type: \"disable\", policy: isFeatureInUse },\r\n};*/\r\n\r\n//dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\nexport const addTypes = {};\r\n/*addTypes[\"tags\"] = [\"form\", \"file\"];\r\naddTypes[\"things\"] = [\"form\", \"file\"];\r\naddTypes[\"features\"] = [\"form\", \"file\"];\r\naddTypes[\"users\"] = [\"form\", \"file\"];\r\naddTypes[\"devices\"] = [\"form\", \"file\"];\r\naddTypes[\"tenants\"] = [\"form\"];\r\naddTypes[\"protocols\"] = [\"form\", \"file\"];\r\naddTypes[\"experiments\"] = [\"form\", \"file\"];*/\r\naddTypes[\"measurements\"] = [\"form\"];\r\n\r\n//dictionary for fetched types\r\n//types are fetched on the /types route and matched with fields following this dictionary\r\nexport const fetchedPageTypes = {};\r\n/*fetchedPageTypes[\"users\"] = { type: \"UserRoles\", status: \"UserStatusTypes\" };\r\nfetchedPageTypes[\"devices\"] = {\r\n  measurementBufferPolicy: \"MeasurementBufferPolicyTypes\",\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"things\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"tag\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"things\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"scripts\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"rights\"] = {\r\n  type: \"RightTypes\",\r\n};\r\nfetchedPageTypes[\"features\"] = {\r\n  items: { type: \"ItemTypes\" },\r\n};*/\r\nfetchedPageTypes[\"measurements\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n}; /*\r\nfetchedPageTypes[\"issues\"] = {\r\n  type: \"IssueTypes\",\r\n  status: \"IssueStatusType\",\r\n};\r\nfetchedPageTypes[\"protocols\"] = {\r\n  metadata: { type: \"MetadataTypes\" },\r\n  field: { type: \"TopicFieldTypes\" },\r\n};\r\nfetchedPageTypes[\"experiments\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n  state: \"ExperimentStateTypes\",\r\n};\r\nfetchedPageTypes[\"constraints\"] = {\r\n  type1: \"ConstraintTypes\",\r\n  type2: \"ConstraintTypes\",\r\n};*/\r\n\r\n//dictionary for fetched data\r\n//data is fetched on the according resource route and matched with fields following this dictionary\r\n//the value of the specified field is the route to search for data. _ids of that route will be used as options\r\nexport const fetchedPageData = {};\r\n/*fetchedPageData[\"tags\"] = { tags: \"tags\" };\r\nfetchedPageData[\"things\"] = { tags: \"tags\" };\r\nfetchedPageData[\"devices\"] = { features: \"features\" };\r\nfetchedPageData[\"features\"] = { tags: \"tags\" };*/\r\nfetchedPageData[\"measurements\"] = {\r\n  device: \"devices\",\r\n  thing: \"things\",\r\n  tags: \"tags\",\r\n};\r\n","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../config\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  tools: string;\r\n  notifications: string;\r\n  file_content: string;\r\n\r\n  clear_all: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //geolocalization messages\r\n  geo_update: string;\r\n  geo_failed: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //profile page\r\n  profile_page_desc: string;\r\n  pass_change_confirm: string;\r\n  pass_not_match: string;\r\n  pass_not_null: string;\r\n  password_changed: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n  repeat: string;\r\n  close: string;\r\n  remove: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n  //let localization : ILocalization;\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../config\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        {languages.includes(\"it\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"it\")}\r\n          >\r\n            Ita\r\n          </Button>\r\n        )}\r\n        {languages.includes(\"en\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"en\")}\r\n          >\r\n            Eng\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nconst userRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nconst AuthPageComp = () => {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const user = userRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n\r\n    try {\r\n      await login(user, psw, tenant);\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Pensaci Prima</div>\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <Form onSubmit={submitForm} className=\"rounded p-4 p-sm-3\">\r\n        <h4>{locale().login}</h4>\r\n        <Form.Group className=\"mb-3\" controlId=\"username\">\r\n          <Form.Label>{locale().username}</Form.Label>\r\n          <Form.Control\r\n            ref={userRef}\r\n            type=\"text\"\r\n            placeholder={locale().username_suggestion}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n          <Form.Label>{locale().password}</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            ref={pswRef}\r\n            placeholder={locale().password_suggestion}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n          <Form.Label>{locale().tenant}</Form.Label>\r\n          <Form.Control\r\n            type=\"text\"\r\n            ref={tenantRef}\r\n            placeholder={locale().tenant_suggestion}\r\n          />\r\n        </Form.Group>\r\n        <Button variant=\"primary\" type=\"submit\">\r\n          {locale().submit}\r\n        </Button>\r\n      </Form>\r\n      <br />\r\n      <div style={{ color: \"red\" }}>{msg}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../config\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      {locale().oh_no}\r\n      <br />\r\n      <br />\r\n      {locale().broken_link}\r\n      <br />\r\n      <br />\r\n      <a\r\n        href=\"https://github.com/measurify/server/issues\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        title=\"https://github.com/measurify/server/issues\"\r\n      >\r\n        {locale().github_issue_page_hp}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function Navigation() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <NavLink to=\"/add/measurements\" className=\"nav-wrap\">\r\n        {website_name}\r\n      </NavLink>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <hr />\r\n          <div className=\"data-wrapper\">\r\n            <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n              {locale().welcome + \" \"}\r\n              <b>{username.current}</b>\r\n            </NavLink>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().role + \" \"}\r\n                {renderIconRole()}\r\n              </h3>\r\n            </div>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().tenant + \" \"}\r\n                <b>{tenant.current}</b>\r\n              </h3>\r\n            </div>\r\n            <br />\r\n            <div style={{ paddingLeft: 20 + \"px\", paddingBottom: 20 + \"px\" }}>\r\n              <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                {locale().logout}\r\n              </Button>\r\n            </div>\r\n            {languages.length > 1 && (\r\n              <React.Fragment>\r\n                <hr />\r\n                <h2>\r\n                  <LanguageSelector />\r\n                </h2>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"app-nav-text\">{locale().tools}</div>\r\n          <hr />\r\n          {Object.keys(pages).map((k) => {\r\n            return (\r\n              <NavLink\r\n                to={`/` + k}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={k}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                {k}\r\n              </NavLink>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { viewFields } from \"../../config\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic } from \"../../services/http_operations\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  viewFields[props.resType].forEach((k) => {\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).forEach((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].forEach((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size={\"lg\"}>\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>\r\n                                    {key} <i>[{i}]</i>\r\n                                  </Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    \"AAAA\"\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{\r\n          width: 20 + \"vw\",\r\n          minWidth:\r\n            /Mobi/i.test(window.navigator.userAgent) == true ? 250 : 400 + \"px\",\r\n        }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n          if (result) {\r\n            try {\r\n              const response = await delete_generic(props.resType, props.id);\r\n\r\n              if (response.response.status === 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink to={`/edit/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title=\"Edit\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  return <div />;\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../config\";\r\n\r\nimport { Table } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\n\r\nexport default function ContentTable(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return <th>{aliasPages[props.resType][e]}</th>;\r\n                return <th>{e}</th>;\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props.actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"edit\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"duplicate\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return;\r\n                      if (Array.isArray(row[e])) {\r\n                        if (\r\n                          row[e][0] !== undefined &&\r\n                          row[e][0].constructor === Object\r\n                        ) {\r\n                          const str =\r\n                            \"[ \" +\r\n                            row[e]\r\n                              .map((el) => Object.values(el).join(\" - \"))\r\n                              .join(\" -- \") +\r\n                            \" ]\";\r\n                          return (\r\n                            <td>\r\n                              {str.length <= 100\r\n                                ? str\r\n                                : str.slice(0, 97) + \"...\"}\r\n                            </td>\r\n                          );\r\n                        }\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      }\r\n\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport \"./page.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) setActions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {page}\r\n\r\n        {addFields[page] !== undefined && (\r\n          <NavLink to={`/add/` + page + \"/\"} key={page + \"_add_navlink\"}>\r\n            <Button variant=\"link\" size=\"sm\" key={page + \"button\"}>\r\n              <i\r\n                key={page + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { put_generic } from \"../../services/http_operations\";\r\nimport \"../page/page.scss\";\r\n\r\nexport default function ProfilePage(params) {\r\n  //save in status informations of profile\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  function renderIconRole() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"user-role\");\r\n    const tenant = localStorage.getItem(\"user-tenant\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n  }, []);\r\n\r\n  const submitPassword = async (e) => {\r\n    e.preventDefault();\r\n    if (password !== passwordConfirm) {\r\n      setMsg(locale().pass_not_match);\r\n      return;\r\n    }\r\n    if (password === \"\" || passwordConfirm === \"\") {\r\n      setMsg(locale().pass_not_null);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().pass_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\r\n          \"users\",\r\n          { password: password },\r\n          username\r\n        );\r\n\r\n        setPassword(\"\");\r\n        setPasswordConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setMsg(locale().password_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {locale().welcome}&nbsp;<b>{username}</b>:&nbsp;\r\n        {locale().profile_page_desc}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col xs={1}>Username:&nbsp;</Col>\r\n            <Col>\r\n              <b>{username}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().role}</Col>\r\n            <Col>\r\n              {role}&nbsp;\r\n              {renderIconRole()}\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().tenant + \" \"}</Col>\r\n            <Col>\r\n              <b>{tenant}</b>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit password</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitPassword}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      value={password}\r\n                      placeholder={locale().enter + \" new password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPasswordConfirm(e.target.value);\r\n                      }}\r\n                      value={passwordConfirm}\r\n                      placeholder={locale().repeat + \" new password\"}\r\n                      aria-describedby=\"passwordHelpBlock\"\r\n                    />\r\n                    <Form.Text id=\"passwordHelpBlock\" muted>\r\n                      {msg}\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Row>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import {\r\n  Button,\r\n  Badge,\r\n  Offcanvas,\r\n  Toast,\r\n  ToastContainer,\r\n} from \"react-bootstrap\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport \"./notificationBar.scss\";\r\nimport AppContext from \"../../context\";\r\nimport { layout } from \"../../config\";\r\nconst oldNotifications = React.createRef();\r\n\r\nexport default function NotificationBar(props) {\r\n  const [show, setShow] = useState(false);\r\n  const [highlight, setHighlight] = useState(false);\r\n\r\n  let layoutRef = React.useRef();\r\n  const myNotifications = useContext(AppContext).notifications;\r\n  oldNotifications.current = 0;\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  /*\r\n  handleClick = () => {\r\n    this.setState({ highlight: true });\r\n    setTimeout(() => {\r\n      this.setState({ highlight: false });\r\n    }, 2000);\r\n  };*/\r\n\r\n  useEffect(() => {\r\n    if (oldNotifications.current < myNotifications.notifications.length) {\r\n      oldNotifications.current = myNotifications.notifications.length;\r\n\r\n      setHighlight(true);\r\n      setTimeout(() => {\r\n        setHighlight(false);\r\n      }, 600);\r\n    }\r\n  }, [myNotifications.notifications]);\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) === true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n  const errorNot = myNotifications.notifications.filter(\r\n    (e) => e.name === \"error\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className=\"notificationBar\"\r\n      style={\r\n        layoutRef.current === \"vertical\" &&\r\n        /Mobi/i.test(window.navigator.userAgent) === false\r\n          ? { height: 100 + \"vh\" }\r\n          : {}\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          handleShow();\r\n        }}\r\n        style={{\r\n          color: \"#fff\",\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        {locale().notifications}&nbsp;\r\n        <Badge\r\n          pill\r\n          bg={errorNot.length > 0 ? \"danger\" : \"success\"}\r\n          className={`element${highlight ? \" highlight\" : \"\"}`}\r\n        >\r\n          {myNotifications.notifications.length}\r\n        </Badge>\r\n        <span className=\"visually-hidden\">Unread notifications</span>\r\n      </Button>\r\n\r\n      <Offcanvas\r\n        style={{\r\n          backgroundColor: \"#123651\",\r\n          color: \"#fff\",\r\n        }}\r\n        show={show}\r\n        onHide={handleClose}\r\n        placement=\"end\"\r\n        name={\"notification_bar\"}\r\n        scroll={false}\r\n        backdrop={true}\r\n        keyboard={true}\r\n      >\r\n        <Offcanvas.Header>\r\n          <Offcanvas.Title>\r\n            {locale().notifications}\r\n            &nbsp;\r\n            <Badge pill bg={errorNot.length > 0 ? \"danger\" : \"success\"}>\r\n              {myNotifications.notifications.length}\r\n            </Badge>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <Button variant=\"outline-secondary\" onClick={() => handleClose()}>\r\n              {locale().close + \" \" + locale().notifications}\r\n            </Button>\r\n          </Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div\r\n            style={{\r\n              width: 100 + \"%\",\r\n              height: 100 + \"%\",\r\n            }}\r\n          >\r\n            {myNotifications.notifications.length !== 0 && (\r\n              <Button\r\n                variant=\"warning\"\r\n                onClick={() => myNotifications.ClearNotifications()}\r\n              >\r\n                {locale().clear_all}\r\n              </Button>\r\n            )}\r\n\r\n            <ToastContainer>\r\n              {myNotifications.notifications.map((notification, index) => {\r\n                let type;\r\n                if (notification.name === \"info\") type = \"success\";\r\n                if (notification.name === \"error\") type = \"danger\";\r\n                return (\r\n                  <Toast\r\n                    className=\"d-inline-block m-1\"\r\n                    key={\"notification_\" + index}\r\n                    bg={type}\r\n                    animation={true}\r\n                    onClose={() => {\r\n                      myNotifications.RemoveNotification(index);\r\n                    }}\r\n                  >\r\n                    <Toast.Header>\r\n                      <img\r\n                        src=\"holder.js/20x20?text=%20\"\r\n                        className=\"rounded me-2\"\r\n                        alt=\"\"\r\n                      />\r\n                      <strong className=\"me-auto\">{notification.name}</strong>\r\n                      <small>{notification.time.slice(0, 15)}</small>\r\n                    </Toast.Header>\r\n                    <Toast.Body>{notification.msg}</Toast.Body>\r\n                  </Toast>\r\n                );\r\n              })}\r\n            </ToastContainer>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button, Container, Row, Col } from \"react-bootstrap\";\r\nimport NotificationBar from \"../notificationBar/notificationBar\";\r\nimport \"./horizontalNavigationBar.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages, website_name } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function HorizontalNavigationBar() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"horizontal-nav\">\r\n      <div className=\"horizontal-nav-links\">\r\n        <div className=\"data-wrapper\">\r\n          <Container fluid>\r\n            <Row style={{ padding: 0 }}>\r\n              <Col>\r\n                <NavLink to=\"/add/measurements\" className=\"nav-wrap\">\r\n                  {website_name}\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n                  {locale().welcome + \" \"}\r\n                  <b>{username.current}</b>\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().role + \" \"}\r\n                  {renderIconRole()}\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().tenant + \" \"}\r\n                  <b>{tenant.current}</b>\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                  {locale().logout}\r\n                </Button>\r\n              </Col>\r\n\r\n              {languages.length > 1 && (\r\n                <Col>\r\n                  <LanguageSelector />\r\n                </Col>\r\n              )}\r\n              <Col>\r\n                <NotificationBar />\r\n              </Col>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              <hr />\r\n              <div\r\n                style={{\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  alignSelf: \"flex-start\",\r\n                }}\r\n              >\r\n                {locale().tools}\r\n              </div>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              {React.Children.toArray(\r\n                Object.keys(pages).map((k) => {\r\n                  return (\r\n                    <Col>\r\n                      <NavLink\r\n                        to={`/` + k}\r\n                        className={(navData) =>\r\n                          navData.isActive ? \"active\" : \"\"\r\n                        }\r\n                        //activeClassName=\"active\"\r\n                        key={k}\r\n                        onClick={() => setIsOpened(false)}\r\n                      >\r\n                        {k}\r\n                      </NavLink>\r\n                    </Col>\r\n                  );\r\n                })\r\n              )}\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n  /*\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    backFunction: props.backFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n    fetchedData: myFetched.data,\r\n    fetchedTypes: fetchedPageTypes,\r\n  });\r\n*/\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string for row component\r\n  const StringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type={key === \"password\" ? \"password\" : \"text\"}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //fetched data for row component\r\n  const FetchedFormRow = (key, alias) => {\r\n    let options;\r\n    if (\r\n      myFetched !== {} &&\r\n      (myFetched.data[key] !== undefined || myFetched.data[alias] !== undefined)\r\n    ) {\r\n      options = myFetched.data[alias !== undefined ? alias : key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Autocomplete\r\n              id={key}\r\n              onChange={(e, newValue) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(newValue, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key] === \"\" ? null : props.values[key]}\r\n              options={options}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label={locale().enter + \" \" + key} />\r\n              )}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={k}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>\r\n                      Insert <b>{k}</b>\r\n                      <i>[{index}]</i>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    let options;\r\n    if (myFetched !== {} && myFetched.data[key] !== undefined) {\r\n      options = myFetched.data[key];\r\n    }\r\n\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={4}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      {myFetched.data[key] !== undefined ? (\r\n                        <Autocomplete\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          id={key}\r\n                          onChange={(e, newValue) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(newValue, [key, index]);\r\n                          }}\r\n                          value={\r\n                            props.values[key][index] === \"\"\r\n                              ? null\r\n                              : props.values[key][index]\r\n                          }\r\n                          options={options}\r\n                          renderInput={(params) => (\r\n                            <TextField\r\n                              {...params}\r\n                              label={locale().enter + \" \" + key}\r\n                            />\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          value={props.values[key][index]}\r\n                          placeholder={locale().enter + \" \" + key}\r\n                        />\r\n                      )}\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={2}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                key={key + k + index + \"\"}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's an enum\r\n                      if (\r\n                        fetchedPageTypes[props.resource] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key][k] !==\r\n                          undefined &&\r\n                        myFetched.types !== undefined &&\r\n                        myFetched.types[\r\n                          fetchedPageTypes[props.resource][key][k]\r\n                        ] !== undefined\r\n                      ) {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Select\r\n                                aria-label=\"Default select\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                              >\r\n                                <option>{locale().select + \" \" + k}</option>\r\n                                {React.Children.toArray(\r\n                                  Object.entries(\r\n                                    myFetched.types[\r\n                                      fetchedPageTypes[props.resource][key][k]\r\n                                    ]\r\n                                  ).map(([k, v]) => {\r\n                                    return <option value={k}>{v}</option>;\r\n                                  })\r\n                                )}\r\n                              </Form.Select>\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n\r\n                        //only show range field when enum type is selected, otherwise skip it\r\n                        if (\r\n                          k === \"range\" &&\r\n                          props.values[key][index][\"type\"] !== \"enum\"\r\n                        )\r\n                          return \"\";\r\n                        return (\r\n                          <Row>\r\n                            <Accordion defaultActiveKey=\"0\">\r\n                              <Accordion.Item eventKey=\"0\">\r\n                                <Accordion.Header>\r\n                                  <b>{k}</b> : {nonDefaultLength(value)} items\r\n                                </Accordion.Header>\r\n                                <Accordion.Body>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={1}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col sm={3}>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={\r\n                                                          props.disabledFields[\r\n                                                            key\r\n                                                          ] !== undefined\r\n                                                            ? props\r\n                                                                .disabledFields[\r\n                                                                key\r\n                                                              ]\r\n                                                            : false\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      }\r\n                                      return \"Unknown data type\";\r\n                                    })\r\n                                  )}\r\n                                </Accordion.Body>\r\n                              </Accordion.Item>\r\n                            </Accordion>\r\n                          </Row>\r\n                        );\r\n                      }\r\n                      return \"Unknown data type\";\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return \"TODO ObjectFormRow\";\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //enum type defined by config\r\n              //check if all the required resources are defined\r\n\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return SelectFormRow(\r\n                  key,\r\n                  myFetched.types[fetchedPageTypes[props.resource][key]]\r\n                );\r\n              }\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n              //input field for fetched data\r\n\r\n              if (\r\n                fetchedPageData[props.resource] !== undefined &&\r\n                fetchedPageData[props.resource][key] !== undefined &&\r\n                myFetched.data[fetchedPageData[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return FetchedFormRow(\r\n                  key,\r\n                  fetchedPageData[props.resource][key]\r\n                );\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow();\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import { isDefault, removeDefaultElements } from \"./misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n// this function sort keys of an object and of its array-of-objects values (recursively) based on a template\r\nexport function sortObject(obj, template) {\r\n  //keys of the object to sort\r\n  let keys = Object.keys(obj);\r\n  //sorted array of keys\r\n  const sortingKeys = Object.keys(template);\r\n  //remove uncommon keys between the two arrays from the key array\r\n  keys = keys.filter((ob) => {\r\n    return sortingKeys.indexOf(ob) !== -1;\r\n  });\r\n  //sort the keys in the key array\r\n  keys.sort((a, b) => sortingKeys.indexOf(a) - sortingKeys.indexOf(b));\r\n\r\n  const sorted = keys.reduce((accumulator, key) => {\r\n    if (\r\n      Array.isArray(obj[key]) &&\r\n      obj[key].length !== 0 &&\r\n      obj[key][0].constructor === Object\r\n    ) {\r\n      const tmp = obj[key].map((el) => {\r\n        return sortObject(el, template[key][0]);\r\n      });\r\n\r\n      accumulator[key] = tmp;\r\n    } else accumulator[key] = obj[key];\r\n\r\n    return accumulator;\r\n  }, {});\r\n  return sorted;\r\n}\r\n\r\n//this function will check of each field of the object if it's an array, and then, only for array values, check if empty elements are contained into that array\r\nexport function maintainEmptyElements(original, fieldSpecifier, resource) {\r\n  const keys = Object.keys(original);\r\n  let copy = cloneDeep(original);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (Array.isArray(copy[keys[i]])) {\r\n      copy = maintainEmptyElement(copy, [keys[i]], fieldSpecifier, resource);\r\n    }\r\n  }\r\n  return copy;\r\n}\r\n\r\nexport function maintainEmptyElement(\r\n  original,\r\n  path,\r\n  fieldSpecifier,\r\n  resource,\r\n  item = undefined\r\n) {\r\n  let tmp = cloneDeep(original);\r\n  let tmpPtr = tmp;\r\n  let fieldSpecifierCpy = cloneDeep(fieldSpecifier[resource]);\r\n  const tmpPath = [...path];\r\n\r\n  //get more nested array\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    tmpPtr = tmpPtr[path[i]];\r\n  }\r\n\r\n  //get the appropriate item, if possible\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    if (fieldSpecifierCpy === undefined) break;\r\n    //ignore indexes for fieldSpecifierCpy\r\n    if (typeof path[i] === \"number\") fieldSpecifierCpy = fieldSpecifierCpy[0];\r\n    else fieldSpecifierCpy = fieldSpecifierCpy[path[i]];\r\n  }\r\n\r\n  //non array case\r\n  if (!Array.isArray(fieldSpecifierCpy)) return tmp;\r\n\r\n  //add item according to addfield dictionary\r\n  if (fieldSpecifierCpy !== undefined) {\r\n    //0-length array\r\n    if (tmpPtr.length === 0) {\r\n      if (fieldSpecifierCpy[0].constructor === Object) {\r\n        tmpPtr.push({\r\n          ...fieldSpecifierCpy[0],\r\n        });\r\n      } else {\r\n        tmpPtr.push(\"\");\r\n      }\r\n    }\r\n    //else 0-length array\r\n    else {\r\n      if (tmpPtr[0].constructor === Object) {\r\n        //check if there are no default elements in array\r\n        if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n          tmpPtr.push({\r\n            ...fieldSpecifierCpy[0],\r\n          });\r\n        }\r\n      } else {\r\n        if (!tmpPtr.includes(\"\")) {\r\n          tmpPtr.push(\"\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  //add item according to params\r\n  if (item !== undefined && fieldSpecifierCpy === undefined) {\r\n    if (tmpPtr.length === 0) {\r\n      if (item.constructor === Object) {\r\n        tmpPtr.push({ ...item });\r\n      } else {\r\n        tmpPtr.push(item);\r\n      }\r\n    }\r\n    //else 0-length array\r\n    else {\r\n      if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n        if (item.constructor === Object) {\r\n          tmpPtr.push({ ...item });\r\n        } else {\r\n          tmpPtr.push(item);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return tmp;\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport { editFields, editFieldsSpecifier, fetchedPageData } from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;from:\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { Button, Form, Accordion, Table } from \"react-bootstrap\";\r\n\r\nexport const FormFile = (props) => {\r\n  //return \"loading\" if something is undefined\r\n  /*console.log({\r\n    submit: props.submitFunction,\r\n    back: props.backFunction,\r\n    setContHead: props.setContentHeader,\r\n    setContBdy: props.setContentBody,\r\n    setContPln: props.setContentPlain,\r\n    setFl: props.setFile,\r\n    contBod: props.contentBody,\r\n    contPln: props.contentPlain,\r\n    contHdr: props.contentHeader,\r\n  });*/\r\n  if (\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.setContentHeader === undefined ||\r\n    props.setContentPlain === undefined ||\r\n    props.setContentBody === undefined ||\r\n    props.setFile === undefined ||\r\n    props.contentBody === undefined ||\r\n    props.contentPlain === undefined ||\r\n    props.contentHeader === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Form.Label>\r\n        <b>{locale().select_file}</b>\r\n      </Form.Label>\r\n      <Form.Control\r\n        className=\"mb-3\"\r\n        type=\"file\"\r\n        accept=\".csv, .json\"\r\n        label=\"File\"\r\n        onChange={(e) => {\r\n          const file = e.target.files[0];\r\n          props.setFile(file);\r\n          const fileReader = new FileReader();\r\n\r\n          fileReader.onloadend = () => {\r\n            const content = fileReader.result;\r\n            if (file.name.endsWith(\".csv\")) {\r\n              const regex = new RegExp(\"\\\\r\", \"g\");\r\n              let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n              props.setContentHeader(splitted[0]);\r\n              splitted.splice(0, 1);\r\n              props.setContentBody(splitted);\r\n            }\r\n            if (file.name.endsWith(\".json\")) {\r\n              const content = fileReader.result;\r\n              props.setContentPlain(content);\r\n            }\r\n          };\r\n          fileReader.readAsText(file);\r\n        }}\r\n      />\r\n      {props.contentBody !== null && props.contentHeader !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <Table responsive striped bordered hover>\r\n                <thead>\r\n                  <tr>\r\n                    {React.Children.toArray(\r\n                      props.contentHeader.split(\",\").map((h) => {\r\n                        return <th>{h}</th>;\r\n                      })\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {React.Children.toArray(\r\n                    props.contentBody.map((e) => {\r\n                      return (\r\n                        <tr>\r\n                          {React.Children.toArray(\r\n                            e.split(\",\").map((h) => {\r\n                              return <td>{h}</td>;\r\n                            })\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      {props.contentPlain !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              {props.contentPlain}\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Form, Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddExperimentPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"experiments\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //values\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [protocols, setProtocols] = useState();\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      const response = await get_generic(\"protocols\", qs);\r\n\r\n      setProtocols(response.docs.map((e) => e._id));\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected protocols\r\n  const handleProtocolChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedProtocol = e.target.value;\r\n    const fst = { _id: e.target.value };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n\r\n    const metadata = [];\r\n    for (let i = 0; i < protocol.metadata.length; i++) {\r\n      if (protocol.metadata[i].type === \"scalar\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: NaN,\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"text\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: \"\",\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"vector\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: [NaN],\r\n        });\r\n      }\r\n    }\r\n\r\n    const tmpValues = cloneDeep(values);\r\n    tmpValues[\"protocol\"] = selectedProtocol;\r\n    if (metadata.length !== 0) tmpValues[\"metadata\"] = metadata;\r\n\r\n    const tmpDisabled = cloneDeep(disabledFields);\r\n    tmpDisabled[\"protocol\"] = true;\r\n\r\n    setDisabledFields(tmpDisabled);\r\n    //setProtocol(selectedProtocol);\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && protocols !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" protocol\"}\r\n                onChange={handleProtocolChange}\r\n              >\r\n                <option>{locale().select} protocol</option>\r\n                {React.Children.toArray(\r\n                  protocols.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <br />\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Accordion,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  InputGroup,\r\n} from \"react-bootstrap\";\r\nimport { getBigDataCloudLocation } from \"../../services/http_operations\";\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport const SamplesForm = (props) => {\r\n  //return if something is undefined\r\n  if (\r\n    props.samples === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.handleAddSample === undefined ||\r\n    props.handleDeleteSample === undefined ||\r\n    props.items === undefined ||\r\n    props.getAddress === undefined ||\r\n    props.msg === undefined ||\r\n    props.handleChanges === undefined ||\r\n    props.refreshLocation === undefined ||\r\n    props.addrMsg === undefined\r\n  )\r\n    return \"Loading\";\r\n  return (\r\n    <Container fluid>\r\n      <Row>\r\n        <b>Samples :{props.samples.length}</b>\r\n      </Row>\r\n      <br />\r\n      {React.Children.toArray(\r\n        props.samples.map((sample, i) => {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Accordion defaultActiveKey={props.samples.length - 1}>\r\n                <Accordion.Item eventKey={i}>\r\n                  <Accordion.Header>\r\n                    <b>\r\n                      <i>Sample [{i}]</i>\r\n                    </b>\r\n                  </Accordion.Header>\r\n                  <Accordion.Body>\r\n                    <Button\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleDeleteSample([i]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                      <b>{locale().remove}</b>\r\n                    </Button>\r\n                    {React.Children.toArray(\r\n                      Object.entries(sample.values).map(([key, value]) => {\r\n                        return (\r\n                          <Row\r\n                            style={{\r\n                              borderBottomStyle: \"solid\",\r\n                              borderBottomWidth: 1 + \"px\",\r\n                              marginBottom: 5 + \"px\",\r\n                              paddingBottom: 5,\r\n                            }}\r\n                          >\r\n                            <Col sm={2}>\r\n                              <b>\r\n                                <i>{value.name}</i>\r\n                              </b>\r\n                              {value.name === \"address\" ||\r\n                              value.name === \"indirizzo\" ? (\r\n                                <Button\r\n                                  variant=\"link\"\r\n                                  onClick={async () => {\r\n                                    await props.refreshLocation();\r\n                                  }}\r\n                                >\r\n                                  <i\r\n                                    className=\"fa fa-map-pin\"\r\n                                    aria-hidden=\"true\"\r\n                                    title={\"Refresh Position\"}\r\n                                    style={{\r\n                                      width: 20 + \"px\",\r\n                                      height: 20 + \"px\",\r\n                                      marginRight: 10 + \"px\",\r\n                                      opacity: 0.85,\r\n                                    }}\r\n                                  ></i>\r\n                                </Button>\r\n                              ) : (\r\n                                \"\"\r\n                              )}\r\n                            </Col>\r\n                            <Col sm={2}>\r\n                              {value.type === \"enum\" ? (\r\n                                <Form.Select\r\n                                  aria-label={\r\n                                    locale().select + \" \" + value.name\r\n                                  }\r\n                                  value={value.value}\r\n                                  onChange={(e) => {\r\n                                    e.preventDefault();\r\n                                    props.handleChanges(e.target.value, [\r\n                                      i,\r\n                                      \"values\",\r\n                                      parseInt(key, 10),\r\n                                      \"value\",\r\n                                    ]);\r\n                                  }}\r\n                                >\r\n                                  <option value=\"\">\r\n                                    {locale().select + \" \" + value.name}\r\n                                  </option>\r\n                                  {React.Children.toArray(\r\n                                    value.enumValues.map((e) => {\r\n                                      return <option value={e}>{e}</option>;\r\n                                    })\r\n                                  )}\r\n                                </Form.Select>\r\n                              ) : value.type === \"text\" ? (\r\n                                value.name === \"address\" ||\r\n                                value.name === \"indirizzo\" ? (\r\n                                  <React.Fragment>\r\n                                    <Form.Group>\r\n                                      <Form.Control\r\n                                        type=\"text\"\r\n                                        id={value.name}\r\n                                        value={value.value}\r\n                                        onChange={(e) => {\r\n                                          e.preventDefault();\r\n                                          props.handleChanges(e.target.value, [\r\n                                            i,\r\n                                            \"values\",\r\n                                            parseInt(key, 10),\r\n                                            \"value\",\r\n                                          ]);\r\n                                        }}\r\n                                        aria-label={\r\n                                          locale().enter + \" \" + value.name\r\n                                        }\r\n                                      />\r\n                                      <Form.Text className=\"text-muted\">\r\n                                        {props.addrMsg}\r\n                                      </Form.Text>\r\n                                    </Form.Group>\r\n                                  </React.Fragment>\r\n                                ) : (\r\n                                  <Form.Control\r\n                                    type=\"text\"\r\n                                    //value={value.value}\r\n                                    id={value.name}\r\n                                    value={value.value}\r\n                                    onChange={(e) => {\r\n                                      e.preventDefault();\r\n                                      props.handleChanges(e.target.value, [\r\n                                        i,\r\n                                        \"values\",\r\n                                        parseInt(key, 10),\r\n                                        \"value\",\r\n                                      ]);\r\n                                    }}\r\n                                    aria-label={\r\n                                      locale().enter + \" \" + value.name\r\n                                    }\r\n                                  />\r\n                                )\r\n                              ) : value.name === \"date\" ||\r\n                                value.name === \"data\" ? (\r\n                                <Form.Control\r\n                                  type=\"date\"\r\n                                  //value={value.value}\r\n                                  id={value.name}\r\n                                  //value={value.value}\r\n                                  onChange={(e) => {\r\n                                    e.preventDefault();\r\n                                    props.handleChanges(\r\n                                      Date.parse(e.target.value),\r\n                                      [i, \"values\", parseInt(key, 10), \"value\"]\r\n                                    );\r\n                                  }}\r\n                                  aria-label={locale().enter + \" \" + value.name}\r\n                                />\r\n                              ) : (\r\n                                <Form.Control\r\n                                  type=\"number\"\r\n                                  id={value.name}\r\n                                  value={isNaN(value.value) ? \"\" : value.value}\r\n                                  onChange={(e) => {\r\n                                    e.preventDefault();\r\n                                    props.handleChanges(\r\n                                      parseInt(e.target.value, 10),\r\n                                      [i, \"values\", parseInt(key, 10), \"value\"]\r\n                                    );\r\n                                  }}\r\n                                  aria-label={locale().enter + \" \" + value.name}\r\n                                />\r\n                              )}\r\n                            </Col>\r\n                          </Row>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </Accordion.Body>\r\n                </Accordion.Item>\r\n              </Accordion>\r\n            </Row>\r\n          );\r\n        })\r\n      )}\r\n      {props.samples.length !== 0 && (\r\n        <Button\r\n          variant=\"link\"\r\n          onClick={() => {\r\n            props.handleAddSample(props.samples, props.items);\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-plus-circle\"\r\n            aria-hidden=\"true\"\r\n            title={\"Add sample\"}\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      )}\r\n      <br />\r\n      <Button variant=\"primary\" onClick={props.submitFunction}>\r\n        {locale().submit}\r\n      </Button>\r\n      <hr />\r\n      <br />\r\n      <font>{props.msg}</font>\r\n    </Container>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  getBigDataCloudLocation,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageData } from \"../../config\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faMapPin } from \"@fortawesome/fontawesome-free-solid\";\r\nimport { SamplesForm } from \"./samplesForm\";\r\nfontawesome.library.add(faMapPin);\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\n//hardcoded part for \"Pensaci Prima\" project\r\n\r\nconst _feature = \"controllo\";\r\nconst _device = \"think-before-device\";\r\nconst _thing = \"Genova\";\r\nconst _tags = [];\r\n\r\nexport default function AddMeasurementsPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"measurements\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [samples, setSamples] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n  //addr msg\r\n  const [addrMsg, setAddrMsg] = useState(\"\");\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //formValues\r\n  const [formValues, setFormValues] = useState({});\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    //handle changes to selected feature\r\n    const fetchFeature = async () => {\r\n      const fst = { _id: _feature };\r\n      const qs = { filter: JSON.stringify(fst) };\r\n\r\n      try {\r\n        const res = await get_generic(\"features\", qs);\r\n        const feature = res.docs[0];\r\n\r\n        const items = feature.items;\r\n\r\n        const samples = [];\r\n        let tmp = addSample(samples, items);\r\n        tmp = updateAddress(tmp);\r\n        setSamples(tmp);\r\n        setItems(items);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n      return;\r\n    };\r\n\r\n    fetchFeature();\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpSamples = cloneDeep(samples);\r\n    let samplesPtr = tmpSamples;\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      samplesPtr = samplesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    samplesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    setSamples(tmpSamples);\r\n  };\r\n\r\n  const handleDeleteSample = (path) => {\r\n    let val = cloneDeep(samples);\r\n\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n    if (tmpPtr.length === 1) {\r\n      return;\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n    setSamples(val);\r\n  };\r\n  const addSample = (samples, items) => {\r\n    const values = [];\r\n    const tmpSample = cloneDeep(samples);\r\n    if (tmpSample.length > 0) {\r\n      tmpSample.push({ ...tmpSample[tmpSample.length - 1] });\r\n    } else {\r\n      items.forEach((item) => {\r\n        if (item.type === \"number\") {\r\n          if (item.dimension === 0)\r\n            values.push({ name: item.name, value: NaN, type: item.type });\r\n          else values.push([{ name: item.name, value: NaN, type: item.type }]);\r\n        } else if (item.type === \"text\") {\r\n          if (item.dimension === 0) {\r\n            values.push({ name: item.name, value: \"\", type: item.type });\r\n          } else {\r\n            values.push([{ name: item.name, value: \"\", type: item.type }]);\r\n          }\r\n        } else if (item.type === \"enum\") {\r\n          if (item.dimension === 0)\r\n            values.push({\r\n              name: item.name,\r\n              value: \"\",\r\n              enumValues: item.range,\r\n              type: item.type,\r\n            });\r\n          else\r\n            values.push([\r\n              {\r\n                name: item.name,\r\n                value: \"\",\r\n                enumValues: item.range,\r\n                type: item.type,\r\n              },\r\n            ]);\r\n        }\r\n      });\r\n      tmpSample.push({ values: values });\r\n    }\r\n\r\n    setSamples(tmpSample);\r\n    return tmpSample;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone formValues\r\n    let token = undefined;\r\n    let body = cloneDeep(formValues);\r\n    let tmpSamples = samples.map((sample) => {\r\n      return { values: sample.values.map((v) => v.value) };\r\n    });\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n    removeDefaultElements(body);\r\n    body[\"feature\"] = _feature;\r\n    body[\"samples\"] = tmpSamples;\r\n    body[\"tags\"] = _tags;\r\n    body[\"feature\"] = _feature;\r\n    body[\"thing\"] = _thing;\r\n    body[\"device\"] = _device;\r\n    //let tmpformValues = cloneDeep(body);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(resource, JSON.stringify(body), token);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const refreshLocation = async () => {\r\n    if (navigator.geolocation) {\r\n      let latitude;\r\n      let longitude;\r\n      navigator.geolocation.getCurrentPosition(async (position) => {\r\n        latitude = position.coords.latitude;\r\n        longitude = position.coords.longitude;\r\n\r\n        try {\r\n          await getBigDataCloudLocation(latitude, longitude);\r\n\r\n          //update all the address\r\n          const tmp = updateAddress();\r\n          setSamples(tmp);\r\n          setAddrMsg(locale().geo_update);\r\n        } catch (error) {\r\n          console.log(\"Error while connecting to Geolocalization APIs\");\r\n          console.log(error);\r\n          setAddrMsg(locale().geo_failed);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"Geolocation is not supported by this browser.\");\r\n      setAddrMsg(locale().geo_failed);\r\n    }\r\n  };\r\n\r\n  const updateAddress = (smpls = undefined) => {\r\n    let tmpSample = smpls !== undefined ? smpls : cloneDeep(samples);\r\n    tmpSample = tmpSample.map((sample) => {\r\n      sample.values = sample.values.map((value) => {\r\n        const tmp = { ...value };\r\n        if (tmp.name === \"address\" || tmp.name === \"indirizzo\") {\r\n          tmp.value = getAddress();\r\n        }\r\n        return tmp;\r\n      });\r\n      const newSample = { values: sample.values };\r\n      return newSample;\r\n    });\r\n    return tmpSample;\r\n  };\r\n\r\n  const getAddress = (complete = false, short = false) => {\r\n    const continent = localStorage.getItem(\"continent\");\r\n    const continentCode = localStorage.getItem(\"continentCode\");\r\n    const country = localStorage.getItem(\"countryName\");\r\n    const countryCode = localStorage.getItem(\"countryCode\");\r\n    const sub = localStorage.getItem(\"principalSubdivision\");\r\n    const city = localStorage.getItem(\"city\");\r\n    const locality = localStorage.getItem(\"locality\");\r\n\r\n    if (complete === true) {\r\n      if (short === true) {\r\n        return (\r\n          continentCode +\r\n          \" - \" +\r\n          countryCode +\r\n          \" - \" +\r\n          sub +\r\n          \" - \" +\r\n          city +\r\n          \" - \" +\r\n          locality\r\n        );\r\n      } else {\r\n        return (\r\n          continent +\r\n          \" - \" +\r\n          country +\r\n          \" - \" +\r\n          sub +\r\n          \" - \" +\r\n          city +\r\n          \" - \" +\r\n          locality\r\n        );\r\n      }\r\n    }\r\n\r\n    return city + \" - \" + locality;\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main>\r\n        <SamplesForm\r\n          samples={samples}\r\n          items={items}\r\n          submitFunction={postBody}\r\n          backFunction={back}\r\n          getAddress={getAddress}\r\n          msg={msg}\r\n          handleAddSample={addSample}\r\n          handleDeleteSample={handleDeleteSample}\r\n          handleChanges={handleChanges}\r\n          refreshLocation={refreshLocation}\r\n          addrMsg={addrMsg}\r\n        />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport Navigation from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\nimport ProfilePage from \"./components/profilePage/profilePage\";\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport HorizontalNavigationBar from \"./components/horizontalNavigationBar/horizontalNavigationBar\";\r\nimport AppContext from \"./context\";\r\n\r\nimport {\r\n  notificationManager,\r\n  get_generic,\r\n  getBigDataCloudLocation,\r\n} from \"./services/http_operations\";\r\nimport MobilePlaceholderPage from \"./components/mobilePlaceholderPage/mobilePlaceholderPage\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport { layout } from \"./config\";\r\nimport AddMeasurementsPage from \"./components/addMeasurementsPage/addMeasurementsPage\";\r\nimport cloneDeep from \"clone-deep\";\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const [types, setTypes] = useState<Object | undefined>();\r\n  const [data, setData] = useState<Object>({});\r\n\r\n  let layoutRef = React.useRef<string | null>();\r\n  const tkn = localStorage.getItem(\"token\");\r\n  const location = localStorage.getItem(\"city\");\r\n\r\n  ////////////////NOTIFICATION MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationManagement = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  ///////////////END NOTIFICATION MANAGEMENT FRAGMENT\r\n\r\n  ////////////////////////////GET COORDINATES FROM BROWSER\r\n\r\n  useEffect(() => {\r\n    const getLocation = async () => {\r\n      if (navigator.geolocation) {\r\n        let latitude;\r\n        let longitude;\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          latitude = position.coords.latitude;\r\n          longitude = position.coords.longitude;\r\n        });\r\n        try {\r\n          await getBigDataCloudLocation(latitude, longitude);\r\n        } catch (error) {\r\n          console.log(\"Error while connecting to Geolocalization APIs\");\r\n        }\r\n      } else {\r\n        console.log(\"Geolocation is not supported by this browser.\");\r\n      }\r\n    };\r\n\r\n    //if location has been already set, return\r\n    if (location !== null) {\r\n      return;\r\n    }\r\n    // call the function\r\n    try {\r\n      getLocation();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, []);\r\n\r\n  ///////////////////////////////////////\r\n\r\n  ///////////////FETCHED TYPES AND DATA MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function UpdateData(fetched: string[], key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: [...fetched] };\r\n    });\r\n  }\r\n\r\n  //use effect to fetch static data from the server /types\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, \"\");\r\n\r\n        setTypes(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    //if types has been already set, ignore it\r\n    if (types !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  const fetchedManagement = {\r\n    types: types,\r\n    data: data,\r\n    UpdateData: UpdateData,\r\n  };\r\n  ///////////////END FETCHED TYPES MANAGEMENT FRAGMENT\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) == true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n\r\n  //not logged => show auth page\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        notifications: notificationManagement,\r\n        fetched: fetchedManagement,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Container\r\n          fluid\r\n          style={{\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            height: 100 + \"vh\",\r\n          }}\r\n        >\r\n          {layoutRef.current === \"horizontal\" ? (\r\n            <Row style={{ padding: 0 }}>\r\n              <HorizontalNavigationBar />\r\n            </Row>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row\r\n            style={{\r\n              padding: 0,\r\n            }}\r\n          >\r\n            {layoutRef.current === \"vertical\" ? (\r\n              <Col md=\"auto\" style={{ padding: 0, minWidth: 250 + \"px\" }}>\r\n                <Navigation />\r\n              </Col>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {/Mobi/i.test(window.navigator.userAgent) == true && (\r\n              <Col md=\"auto\" style={{ padding: 0 }}>\r\n                <NotificationBar />\r\n              </Col>\r\n            )}\r\n            <Col style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n              <Routes>\r\n                <Route\r\n                  path=\"/\"\r\n                  element={<Navigate replace to=\"/add/measurements\" />}\r\n                />\r\n\r\n                <Route path=\"/home\" element={<HomePage />} />\r\n                <Route path=\"/viewProfile\" element={<ProfilePage />} />\r\n                <Route\r\n                  path=\"/add/experiments/\"\r\n                  element={<AddExperimentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/measurements/\"\r\n                  element={<AddMeasurementsPage />}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/edit/:resource/:id\"\r\n                  element={<EditContentPage />}\r\n                />\r\n                <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n                <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n                <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n                <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n                <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n              </Routes>\r\n            </Col>\r\n            {layoutRef.current === \"vertical\" &&\r\n              /Mobi/i.test(window.navigator.userAgent) == false && (\r\n                <Col md=\"auto\" style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n                  <NotificationBar />\r\n                </Col>\r\n              )}\r\n          </Row>\r\n        </Container>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}