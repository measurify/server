(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{107:function(e,t,r){},212:function(e,t,r){},238:function(e,t){},240:function(e,t){},255:function(e,t,r){},256:function(e,t,r){},260:function(e,t,r){},261:function(e,t,r){},262:function(e,t,r){},263:function(e,t,r){},264:function(e,t,r){},265:function(e,t,r){},266:function(e,t,r){},275:function(e,t,r){"use strict";r.r(t);var n,a=r(1),s=r.n(a),c=r(37),i=r.n(c),o=(r(212),r(6)),l=r(13),d=r(4),u=r(5),j=r(21),b=r(3),p=r(24),h=r(16),f=r(313),x={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",resources:"Risorse",notifications:"Notifiche",file_content:"Contenuto del file",preview:"Anteprima",configuration:"Configurazione",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",old_pass_empty:"Per favore, inserire la vecchia password",old_pass_wrong:"La vecchia password \xe8 sbagliata",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",import:"Importa",export:"Esporta",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta",no_file:"Si prega di selezionare un file",duplicate_error:"Nel database \xe8 gi\xe0 presente una risorsa con",error_imported_file:"Nel file sono presenti errori, non \xe8 stato possibile importarlo"},O={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",resources:"Resources",notifications:"Notifications",file_content:"File content",preview:"Preview",configuration:"Configuration",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",old_pass_empty:"Please. enter old password",old_pass_wrong:"The old password is wrong",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",import:"Import",export:"Export",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired",no_file:"Please, select a file",duplicate_error:"The database already contains a resource with",error_imported_file:"File contains errors. It was not possible to import it"},m=r(213).default,v=r(231),g=m.create({httpsAgent:new v.Agent({})}),y={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function k(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={username:"".concat(e),password:"".concat(t),tenant:"".concat(r)},c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=n+"/login";return new Promise((function(e,t){g.post(i,s,c).then((function(t){!0===a&&(localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-tenant",r),localStorage.setItem("login-time",(new Date).getTime().toString())),e(t)})).catch((function(e){t(e)}))}))}function C(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:L()}},t=n+"/login";return new Promise((function(r,n){g.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),r(e)})).catch((function(e){n(e)}))}))}function w(e,t){return S.apply(this,arguments)}function S(){return S=Object(l.a)(Object(o.a)().mark((function e(t,r){var a,s,c,i,l,d=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>2&&void 0!==d[2]?d[2]:{},void 0===(s=d.length>3&&void 0!==d[3]?d[3]:void 0)&&(s=L()),c=n+"/"+t+"/file",console.log("POST file:"+c),i={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:s},Object.entries(a).forEach((function(e){var t=Object(b.a)(e,2),r=t[0],n=t[1];i[r]=n})),l={headers:i},e.abrupt("return",new Promise((function(e,n){g.post(c,r,l).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),n({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function N(e,t){return _.apply(this,arguments)}function _(){return _=Object(l.a)(Object(o.a)().mark((function e(t,r){var a,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(a=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(a=L()),s=n+"/"+t+"/",console.log("POST :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,n){g.post(s,r,c).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),n({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function A(e,t,r){return D.apply(this,arguments)}function D(){return D=Object(l.a)(Object(o.a)().mark((function e(t,r,a){var s,c,i,l=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,c=n+"/"+t+"/"+a,void 0===s&&(s=L()),console.log("PUT :"+c),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:s}},e.abrupt("return",new Promise((function(e,n){g.put(c,r,i).then((function(n){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+a+", body: "+JSON.stringify(r)}),e({response:n})})).catch((function(e){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+a+", body: "+JSON.stringify(r)+". "+e.message}),n({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e,t){return R.apply(this,arguments)}function R(){return R=Object(l.a)(Object(o.a)().mark((function e(t,r){var a,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:void 0,s=n+"/"+t,void 0===a&&(a=L()),void 0!==r&&(s+="/"+r),console.log("DELETE :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,n){g.delete(s,c).then((function(n){void 0!==r?y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+r+", of type: "+t}):y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:n})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+r+", of type: "+t+". "+e.message}),404===e.statusCode&&y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),n({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return I=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},a=i.length>2?i[2]:void 0,s=n+"/"+t+"/",void 0===a&&(a=L()),s=void 0!==r.filter?s.concat("?filter="+r.filter):s.concat("?filter="),void 0!==r.limit&&(s=s.concat("&limit="+r.limit)),void 0!==r.page&&(s=s.concat("&page="+r.page)),console.log("GET :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function T(e,t,r){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(Object(o.a)().mark((function e(t,r,a){var s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n+"/"+t+"/"+r,void 0===a&&(a=L()),console.log("GET ONE:"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return localStorage.getItem("token")}function E(){return!0}var z="https://hi-drive.measurify.org/v1",H="Admin Dashboard",W=[],G="vertical",K=["updatehistory","downloadexperiment","removesteps"],U={users:["username","type","_actions"],roles:["_id","_actions"],protocols:["_id","description","_actions"],experiments:["_id","description","protocol","_actions"]},J={users:{_actions:"Management"},roles:{_actions:"Management"},protocols:{_actions:"Management"},experiments:{_actions:"Management"}},M={users:["admin"],protocols:["admin"],roles:["admin"]},V={users:["view","delete"],roles:["view","delete"],protocols:["view","delete"],experiments:["view","edit","duplicate","delete"]},q={users:["username","type","fieldmask","status"],roles:["_id","default","actions"],protocols:["_id","description","metadata"],experiments:["_id","description","state","startDate","endDate","manager","place","protocol","metadata","history"]},Y={experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",protocol:"",place:[{name:""}],metadata:[{name:"",value:""}],tags:[""]}},Q={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:!0},users:{username:"",password:"",type:""},roles:{_id:"",default:{create:!1,read:"",update:"",delete:""},actions:[{entity:"",crud:{create:!1,read:"",update:"",delete:""}}]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}]}},X={};X.experiments={protocol:{_type:"disable",policy:E},metadata:{name:{_type:"disable",policy:E}}};var Z={users:["form","file"],roles:["form","file"],tenants:["form"],protocols:["form","file"],experiments:["form","file"]},$={users:{status:"UserStatusTypes"},roles:{default:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"},actions:{crud:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"}}},protocols:{metadata:{type:"MetadataTypes"},field:{type:"TopicFieldTypes"}},experiments:{visibility:"VisibilityTypes"}},ee={users:{type:"roles"}},te={};function re(){var e=localStorage.getItem("language");return 0===W.length?O:(1===W.length&&(e=W[0]),"it"===e?x:"en"===e?O:"it"===navigator.language.substring(0,2)?x:(navigator.language.substring(0,2),O))}te.protocols={_id:"Please, enter protocol's name.",description:"Please, enter a short protocol's description."},te.experiments={_id:"Please, enter experiment's name (N.B. don't use the # character in experiment's name).",state:"Please, enter 0 for ongoing experiment, 1 for finished experiment.",description:"Please, enter a short experiment's description.",manager:"Please, enter the experiment's company name (as a short Acronym).",startDate:"Please, use yyyy/mm/dd format.",endDate:"Please, use yyyy/mm/dd format."},te.updateHistory={step:"Please, enter the step number."};var ne=void 0;function ae(){return se.apply(this,arguments)}function se(){return(se=Object(l.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("user-role"))&&void 0!==t&&""!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,T("roles",t);case 6:void 0!==(r=e.sent)&&localStorage.setItem("role",JSON.stringify(r.response.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function ce(e,t,r){if(void 0===ne){var n=localStorage.getItem("role");if(void 0===n||null===n)return function(e,t,r){if("create"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("read"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}}if("update"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("delete"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}return!1}(e,t,r);ne=JSON.parse(n)}if(0!==ne.actions.length){var a=ne.actions.filter((function(e){return e.entity===t}))[0];if(void 0!==a&&void 0!==a[r])return"none"!==a[r]&&!1!==a[r]}return"none"!==ne.default[r]&&!1!==ne.default[r]}r(255),r(256);var ie=r(0),oe=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(ie.jsxs)("div",{children:[re().language,Object(ie.jsxs)("div",{children:[W.includes("it")&&Object(ie.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),W.includes("en")&&Object(ie.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},le=r(330),de=s.a.createRef(),ue=s.a.createRef(),je=s.a.createRef(),be=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),r=t[0],n=t[1];function s(){return(s=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=de.current.value,a=ue.current.value,s=je.current.value,""!==r){e.next=7;break}return n("Please, insert your username"),e.abrupt("return");case 7:if(""!==a){e.next=10;break}return n("Please, insert your password"),e.abrupt("return");case 10:return e.prev=10,e.next=13,k(r,a,s);case 13:return e.next=15,ae();case 15:window.location.replace("/"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),console.log({error:e.t0.response.data}),n(e.t0.response.data.message+" : "+e.t0.response.data.details);case 22:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return Object(ie.jsxs)("div",{className:"auth-page",children:[Object(ie.jsxs)("div",{className:"title-wrapper",children:[Object(ie.jsx)("div",{className:"title-section",children:"Measurify"}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),W.length>1&&Object(ie.jsx)("div",{className:"language-wrapper",children:Object(ie.jsx)(oe,{})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("div",{className:"login-section",children:[Object(ie.jsx)("h4",{children:re().login}),Object(ie.jsxs)(le.a,{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(ie.jsxs)(le.a.Group,{className:"mb-3",controlId:"username",children:[Object(ie.jsx)(le.a.Label,{children:re().username}),Object(ie.jsx)(le.a.Control,{ref:de,type:"text",placeholder:re().username_suggestion})]}),Object(ie.jsxs)(le.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ie.jsx)(le.a.Label,{children:re().password}),Object(ie.jsx)(le.a.Control,{type:"password",ref:ue,placeholder:re().password_suggestion})]}),Object(ie.jsxs)(le.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ie.jsx)(le.a.Label,{children:re().tenant}),Object(ie.jsx)(le.a.Control,{type:"text",ref:je,placeholder:re().tenant_suggestion})]}),Object(ie.jsx)(f.a,{variant:"success",type:"submit",children:re().submit})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{style:{color:"red"},children:r}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{className:"form-row row",children:Object(ie.jsx)(p.b,{to:"/add/tenants",children:Object(ie.jsxs)(f.a,{variant:"outline-success",size:"sm",children:[re().add_tenant,Object(ie.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})},pe=(r(260),function(){return Object(a.useEffect)((function(){})),Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsx)("header",{className:"page-header",children:H}),Object(ie.jsx)("main",{className:"page-content",children:Object(ie.jsx)("div",{className:"home-page",children:Object(ie.jsx)("div",{className:"info-box",children:Object(ie.jsxs)("div",{className:"info-text",children:[re().welcome_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),re().left_bar_descr_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),re().right_bar_descr_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),re().session_expire_info_hp,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:re().github_issue_page_hp}),Object(ie.jsx)("br",{})]})})})})]})}),he=(r(261),function(){return Object(ie.jsxs)("div",{className:"notFound-page",children:[re().oh_no,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),re().broken_link,Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:re().github_issue_page_hp})]})}),fe=(r(262),r(75)),xe=r(28),Oe=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("boolean"===typeof t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var r=!0;return t.forEach((function(t){r=r&&e(t)})),r}if(t.constructor===Object){var n=!0;return Object.entries(t).forEach((function(t){var r=Object(b.a)(t,2),a=(r[0],r[1]);n=n&&e(a)})),n}return!0},me=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!Oe(e)})).length},ve=function e(t){if(Array.isArray(t),t.constructor===Object)for(var r=Object.entries(t),n=0;n<r.length;n++){if(Array.isArray(r[n][1]))for(var a=0;a<r[n][1].length;a++)r[n][1][a].constructor===Object||Array.isArray(r[n][1][a])?(e(r[n][1][a]),Oe(r[n][1][a])&&r[n][1].splice(a,1)):Oe(r[n][1][a])&&r[n][1].splice(a,1);if(r[n][1].constructor===Object)for(var s=Object.entries(r[n][1]),c=0;c<s.length;c++)s[n][1].constructor===Object||Array.isArray(s[n][1])?e(s[n][1]):Oe(s[n][1])&&delete r[n][1][s[n][0]]}return t},ge=function e(t,r){if(void 0===t||void 0===r)return!1;if(t===r)return!0;if(typeof t!==typeof r)return!1;if(Array.isArray(t)&&!Array.isArray(r)||!Array.isArray(t)&&Array.isArray(r))return!1;if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===Object&&r.constructor!==Object||t.constructor!==Object&&r.constructor===Object)return!1;if(t.constructor===Object&&r.constructor===Object){var a=Object.keys(t),s=Object.keys(r);return a.length===s.length&&(!!e(a,s)&&!!e(Object.values(t),Object.values(r)))}return!1};function ye(e){return e&&e[0].toUpperCase()+e.slice(1)}function ke(e){return e.slice(0,10).replaceAll("-","/")}fe.a.library.add(xe.g,xe.a,xe.l,xe.j,xe.i,xe.k,xe.h,xe.b);var Ce=s.a.createRef(),we=s.a.createRef(),Se=s.a.createRef(),Ne=s.a.createRef(),_e=s.a.createRef(),Ae=s.a.createRef(),De=s.a.createRef();function Pe(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),r=t[0],n=t[1],c=localStorage.getItem("username"),i=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return Ae.current=null!==c?c:"",_e.current=null!==i?i:"",De.current=null!==o&&""!==o?o:"-",Object(a.useEffect)((function(){function e(){var t,r;if(null!==Se.current)r=Se.current-1;else{if(null===we.current){var n=localStorage.getItem("login-time");null!==n?(we.current=n,t=parseInt(n,10)):(t=Date.now(),we.current=t)}else t=parseInt(we.current,10);null===Ne.current&&(Ne.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+Ne.current-Date.now())/1e3}if(r<60&&(clearInterval(Ce.current),C().then((function(){Se.current=null,we.current=null,Ce.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");Se.current=parseInt(r,10)}Ce.current=setInterval((function(){e()}),1e3)}),[]),Object(ie.jsxs)("nav",{className:"app-nav",children:[Object(ie.jsx)(f.a,{className:"app-nav-opener",onClick:function(){return n(!r)},children:r?Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(ie.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(ie.jsx)(p.b,{to:"/home",className:"nav-wrap",children:H}),Object(ie.jsx)("hr",{}),Object(ie.jsx)("div",{className:"app-nav-wrapper ".concat(r?"opened":""),children:Object(ie.jsxs)("div",{className:"app-nav-links",children:[Object(ie.jsx)("hr",{}),Object(ie.jsxs)("div",{className:"data-wrapper",children:[Object(ie.jsxs)(p.b,{to:"/viewProfile/",children:[re().welcome+" ",Object(ie.jsx)("b",{children:Ae.current})]},"viewProfile"),Object(ie.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ie.jsxs)("h3",{children:[re().role+" ","admin"===_e.current?Object(ie.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===_e.current?Object(ie.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===_e.current?Object(ie.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===_e.current?Object(ie.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ie.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(ie.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ie.jsxs)("h3",{children:[re().tenant+" ",Object(ie.jsx)("b",{children:De.current})]})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(ie.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:re().logout})}),W.length>1&&Object(ie.jsxs)(s.a.Fragment,{children:[Object(ie.jsx)("hr",{}),Object(ie.jsx)("h2",{children:Object(ie.jsx)(oe,{})})]})]}),Object(ie.jsx)("hr",{}),Object(ie.jsx)("div",{className:"app-nav-text",children:re().resources}),Object(ie.jsx)("hr",{}),Object.keys(U).map((function(e){return!ce(_e.current,e,"read")||void 0!==M[e]&&!M[e].includes(_e.current)?"":Object(ie.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:ye(e)},e)})),Object(ie.jsx)("hr",{}),0!==K.length&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"app-nav-text",children:"Manage Experiments"})," ",Object(ie.jsx)("hr",{})]}),K.includes("updatehistory")&&ce(_e.current,"experiments","update")&&Object(ie.jsx)(p.b,{to:"/updatehistory",className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:"Update Experiments History"}),K.includes("downloadexperiment")&&ce(_e.current,"experiments","read")&&Object(ie.jsx)(p.b,{to:"/downloadexperiment",className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:"Download Experiments Data"}),K.includes("removesteps")&&ce(_e.current,"experiments","update")&&Object(ie.jsx)(p.b,{to:"/removesteps",className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:"Remove History Steps"})]})})]})}var Re=r(314),Fe=r(332),Ie=r(194),Te=r(331);function Be(e){var t={};return q[e.resType].forEach((function(r){r.constructor===Object?Object.keys(r).forEach((function(n){Array.isArray(e.resource[n])?t[n]=e.resource[n].map((function(e){var t={};return r[n].forEach((function(r){t[r]=e[r]})),t})):t[n]=e.resource[n]})):Object.keys(e.resource).includes(r)&&(t[r]=e.resource[r])})),Le(t)}function Le(e){return Object(ie.jsx)(Fe.a,{defaultActiveKey:0,size:"lg",children:s.a.Children.toArray(Object.entries(e).map((function(e,t){var r=Object(b.a)(e,2),n=r[0],a=r[1];return Object(ie.jsxs)(Fe.a.Item,{eventKey:t,children:[Object(ie.jsx)(Fe.a.Header,{children:Object(ie.jsx)("b",{children:n})}),Object(ie.jsx)(Fe.a.Body,{children:a instanceof Object?Array.isArray(a)?void 0!==a[0]?Object.values(a[0]).some((function(e){return e instanceof Object}))?s.a.Children.toArray(a.map((function(e,t){return Object(ie.jsx)(Fe.a,{children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsxs)(Fe.a.Header,{children:[n," ",Object(ie.jsxs)("i",{children:["[",t,"]"]})]}),Object(ie.jsx)(Fe.a.Body,{children:Le(e)})]})})}))):a[0]instanceof Object?Object(ie.jsxs)(Re.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:s.a.Children.toArray(Object.keys(a[0]).map((function(e){return Object(ie.jsx)("th",{children:e})})))})}),Object(ie.jsx)("tbody",{children:s.a.Children.toArray(a.map((function(e){return Object(ie.jsx)("tr",{children:s.a.Children.toArray(Object.values(e).map((function(e){return Array.isArray(e)?Object(ie.jsxs)("td",{children:["[",e.join(", "),"]"]}):Object(ie.jsx)("td",{children:e})})))})})))})]}):"[ "+a.join(" , ")+" ]":"[ ]":Object(ie.jsx)(Re.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(ie.jsx)("tbody",{children:s.a.Children.toArray(Object.entries(a).map((function(e){return Object(ie.jsxs)("tr",{children:[Object(ie.jsx)("td",{children:Object(ie.jsx)("b",{children:e[0]})}),Object(ie.jsx)("td",{children:"string"!==typeof e[1]?e[1].toString():e[1]})]})})))})}):void 0===a||null==a?Object(ie.jsx)("i",{children:"None"}):n.toLowerCase().includes("date")?ke(a):a})]})})))})}function Ee(e){var t=Object(a.useState)(void 0),r=Object(b.a)(t,2),n=r[0],s=r[1];Object(a.useEffect)((function(){}),[e]);var c=void 0!==n?Object(ie.jsxs)(Ie.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(ie.jsx)(Ie.a.Header,{as:"h3",children:"View Resource"}),Object(ie.jsx)(Ie.a.Body,{children:Object(ie.jsx)(Be,{resource:n,resType:e.resType})})]}):Object(ie.jsx)(Ie.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(ie.jsxs)(Ie.a.Header,{as:"h3",children:["Loading",Object(ie.jsx)(Ie.a.Body,{})]})});return"view"===e.action?Object(ie.jsx)(Te.a,{trigger:"click",placement:"left",overlay:c,rootClose:!0,children:Object(ie.jsx)(f.a,{variant:"link",size:"sm",onClick:function(){s(e.takeSingle(e.id))},children:Object(ie.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(ie.jsx)(f.a,{variant:"link",size:"sm",onClick:Object(l.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,P(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(ie.jsx)(p.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(ie.jsx)(f.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(ie.jsx)(p.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(ie.jsx)(f.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(ie.jsx)("div",{})}function ze(e){return void 0===e.header||void 0===e.resources||e.header.includes("_actions")&&void 0===e._actions?Object(ie.jsx)("div",{children:"Loading"}):Object(ie.jsx)("div",{children:Object(ie.jsxs)(Re.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(t){return void 0!==J[e.resType]&&void 0!==J[e.resType][t]?Object(ie.jsx)("th",{children:J[e.resType][t]}):Object(ie.jsx)("th",{children:t})})))},"header")}),Object(ie.jsx)("tbody",{children:s.a.Children.toArray(e.resources.map((function(t,r){return Object(ie.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(n){return"_actions"===n?Object(ie.jsxs)("td",{children:[e._actions.includes("view")?Object(ie.jsx)(Ee,{resType:e.resType,action:"view",k:r+"_view",id:t._id,takeSingle:e.takeSingle}):"",e._actions.includes("edit")&&ce(e.userRole,e.resType,"update")?Object(ie.jsx)(Ee,{resType:e.resType,action:"edit",k:r+"_edit",id:t._id}):"",e._actions.includes("duplicate")&&ce(e.userRole,e.resType,"create")?Object(ie.jsx)(Ee,{resType:e.resType,action:"duplicate",k:r+"_duplicate",id:t._id}):"",e._actions.includes("delete")&&ce(e.userRole,e.resType,"delete")?Object(ie.jsx)(Ee,{resType:e.resType,action:"delete",k:r+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[n]?Array.isArray(t[n])?Object(ie.jsx)("td",{children:"[ "+t[n].join(" , ")+" ]"}):Object(ie.jsx)("td",{children:t[n]}):void 0})))})})))})]})})}fe.a.library.add(xe.d,xe.e,xe.c);var He=r(337);r(107);fe.a.library.add(xe.f);var We=s.a.createRef();function Ge(e){var t=Object(h.o)().page,r=Object(p.c)(),n=Object(b.a)(r,2),s=n[0],c=n[1],i=Object(a.useState)(void 0),d=Object(b.a)(i,2),u=d[0],j=d[1],x=Object(a.useState)(void 0),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(a.useState)(void 0),y=Object(b.a)(g,2),k=y[0],C=y[1],w=Object(a.useState)(1),S=Object(b.a)(w,2),N=S[0],_=S[1],A=Object(a.useState)(1),D=Object(b.a)(A,2),P=D[0],R=D[1],I=Object(a.useState)(),T=Object(b.a)(I,2),B=T[0],L=T[1],E=Object(a.useState)(),z=Object(b.a)(E,2),H=z[0],W=z[1],G=Object(a.useState)(),K=Object(b.a)(G,2),J=K[0],M=K[1],q=Object(a.useState)(),Y=Object(b.a)(q,2),X=Y[0],Z=Y[1],$=Object(a.useState)(),ee=Object(b.a)($,2),te=ee[0],re=ee[1],ne=localStorage.getItem("user-role");We.current=null!==ne?ne:"",Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,n,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,F(t,r);case 4:n=e.sent,v(U[t]),j(n.docs),void 0!==V[t]&&C(V[t]),L(n.hasNextPage),W(n.hasPrevPage),re(n.totalPages),M(n.prevPage),Z(n.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),j(void 0),L(void 0),W(void 0),re(void 0),M(void 0),Z(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;_(r);var n=null!==s.get("limit")?s.get("limit"):10;R(n),e({page:r,limit:n}).catch(console.error)}),[e,t,s]);var ae=function(){var e=parseInt(N,10)-2>0,t=parseInt(N,10)+2<te;return Object(ie.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(ie.jsxs)(He.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(ie.jsx)(He.a.First,{disabled:1===N,onClick:function(){return c({page:1,limit:P})}}),Object(ie.jsx)(He.a.Prev,{disabled:!H,onClick:function(){return c({page:J,limit:P})}}),e&&Object(ie.jsx)(He.a.Ellipsis,{}),parseInt(N,10)-1>0&&Object(ie.jsx)(He.a.Item,{onClick:function(){return c({page:parseInt(N,10)-1,limit:P})},children:parseInt(N,10)-1}),Object(ie.jsx)(He.a.Item,{children:Object(ie.jsx)("b",{children:N})}),parseInt(N,10)+1<=te&&Object(ie.jsx)(He.a.Item,{onClick:function(){return c({page:parseInt(N,10)+1,limit:P})},children:parseInt(N,10)+1}),t&&Object(ie.jsx)(He.a.Ellipsis,{}),Object(ie.jsx)(He.a.Next,{disabled:!B,onClick:function(){return c({page:X,limit:P})}}),Object(ie.jsx)(He.a.Last,{disabled:N===te,onClick:function(){return c({page:te,limit:P})}})]})})};return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:[ye(t),void 0!==Q[t]&&ce(We.current,t,"create")&&Object(ie.jsx)(p.b,{to:"/add/"+t+"/",children:Object(ie.jsx)(f.a,{variant:"link",size:"sm",children:Object(ie.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsx)(ze,{resType:t,userRole:We.current,header:m,resources:u,_actions:k,takeSingle:function(e){return u.find((function(t){return t._id===e}))},removeSingle:function(e){var t=u.filter((function(t){return t._id!==e}));j(t)}}),Object(ie.jsx)(ae,{})]})]})}var Ke=r(315),Ue=r(316),Je=r(189);function Me(e){var t=Object(a.useState)(""),r=Object(b.a)(t,2),n=r[0],s=r[1],c=Object(a.useState)(""),i=Object(b.a)(c,2),d=i[0],u=i[1],j=Object(a.useState)(""),p=Object(b.a)(j,2),h=p[0],x=p[1],O=Object(a.useState)(""),m=Object(b.a)(O,2),v=m[0],g=m[1],y=Object(a.useState)(""),C=Object(b.a)(y,2),w=C[0],S=C[1],N=Object(a.useState)(""),_=Object(b.a)(N,2),D=_[0],P=_[1],R=Object(a.useState)(""),F=Object(b.a)(R,2),I=F[0],T=F[1];Object(a.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),r=localStorage.getItem("user-tenant");s(null!==e?e:""),u(null!==t?t:""),x(null!==r&&""!==r?r:"-")}),[]);var B=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===v&&T(re().old_pass_empty),w===D){e.next=5;break}return T(re().pass_not_match),e.abrupt("return");case 5:if(""!==w&&""!==D){e.next=8;break}return T(re().pass_not_null),e.abrupt("return");case 8:return e.prev=8,e.next=11,k(n,v,"-"!==h?h:void 0,!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),T(re().old_pass_wrong),e.abrupt("return");case 17:if(!window.confirm(re().pass_change_confirm)){e.next=32;break}return e.prev=19,e.next=22,A("users",{password:w},n);case 22:r=e.sent,g(""),S(""),P(""),200===r.response.status&&T(re().password_changed),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[8,13],[19,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:[re().welcome,"\xa0",Object(ie.jsx)("b",{children:n}),":\xa0",re().profile_page_desc]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{xs:1,children:"Username:\xa0"}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:n})})]}),Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{xs:1,children:re().role}),Object(ie.jsxs)(Je.a,{children:[d,"\xa0","admin"===d?Object(ie.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===d?Object(ie.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===d?Object(ie.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===d?Object(ie.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ie.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{xs:1,children:re().tenant+" "}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:h})})]})]}),Object(ie.jsx)("hr",{}),Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)("b",{children:"Edit password"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsxs)(le.a,{onSubmit:B,children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:v,placeholder:re().enter+" old password"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"password",onChange:function(e){e.preventDefault(),S(e.target.value)},value:w,placeholder:re().enter+" new password"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"password",onChange:function(e){e.preventDefault(),P(e.target.value)},value:D,placeholder:re().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(ie.jsx)(le.a.Text,{id:"passwordHelpBlock",muted:!0,children:I})]})}),Object(ie.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit})]})})})]})]})]})}r(263),r(264);function Ve(){return Object(ie.jsx)("div",{className:"unAuth-page",children:Object(ie.jsx)("div",{className:"info-box",children:Object(ie.jsx)("div",{className:"info-text",children:re().unauthorised_user})})})}var qe=r(317),Ye=r(329),Qe=r(318),Xe=r(334),Ze=(r(265),s.a.createContext()),$e=s.a.createRef();function et(e){var t=Object(a.useState)(!1),r=Object(b.a)(t,2),n=r[0],c=r[1],i=Object(a.useState)(!1),o=Object(b.a)(i,2),l=o[0],d=o[1],u=s.a.useRef(),j=Object(a.useContext)(Ze).notifications;$e.current=0;var p=function(){return c(!1)};Object(a.useEffect)((function(){$e.current<j.notifications.length&&($e.current=j.notifications.length,d(!0),setTimeout((function(){d(!1)}),600))}),[j.notifications]),!0===/Mobi/i.test(window.navigator.userAgent)?u.current="vertical":u.current=G;var h=j.notifications.filter((function(e){return"error"===e.name}));return Object(ie.jsxs)("div",{className:"notificationBar",style:"vertical"===u.current&&!1===/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(ie.jsxs)(f.a,{variant:"link",onClick:function(){c(!0)},style:{color:"#fff",textDecoration:"none"},children:[re().notifications,"\xa0",Object(ie.jsx)(qe.a,{pill:!0,bg:h.length>0?"danger":"success",className:"element".concat(l?" highlight":""),children:j.notifications.length}),Object(ie.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(ie.jsxs)(Ye.a,{style:{backgroundColor:"#123651",color:"#fff"},show:n,onHide:p,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(ie.jsx)(Ye.a.Header,{children:Object(ie.jsxs)(Ye.a.Title,{children:[re().notifications,"\xa0",Object(ie.jsx)(qe.a,{pill:!0,bg:h.length>0?"danger":"success",children:j.notifications.length}),"\xa0\xa0\xa0",Object(ie.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return p()},children:re().close+" "+re().notifications})]})}),Object(ie.jsx)(Ye.a.Body,{children:Object(ie.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==j.notifications.length&&Object(ie.jsx)(f.a,{variant:"warning",onClick:function(){return j.ClearNotifications()},children:re().clear_all}),Object(ie.jsx)(Qe.a,{children:j.notifications.map((function(e,t){var r;return"info"===e.name&&(r="success"),"error"===e.name&&(r="danger"),Object(ie.jsxs)(Xe.a,{className:"d-inline-block m-1",bg:r,animation:!0,onClose:function(){j.RemoveNotification(t)},children:[Object(ie.jsxs)(Xe.a.Header,{children:[Object(ie.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(ie.jsx)("strong",{className:"me-auto",children:e.name}),Object(ie.jsx)("small",{children:e.time.slice(0,15)})]}),Object(ie.jsx)(Xe.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}r(266);fe.a.library.add(xe.g,xe.a,xe.l,xe.j,xe.i,xe.k,xe.h,xe.b);var tt=s.a.createRef(),rt=s.a.createRef(),nt=s.a.createRef(),at=s.a.createRef(),st=s.a.createRef(),ct=s.a.createRef(),it=s.a.createRef();function ot(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),r=(t[0],t[1]),n=localStorage.getItem("username"),c=localStorage.getItem("user-role"),i=localStorage.getItem("user-tenant");return ct.current=null!==n?n:"",st.current=null!==c?c:"",it.current=null!==i&&""!==i?i:"-",Object(a.useEffect)((function(){function e(){var t,r;if(null!==nt.current)r=nt.current-1;else{if(null===rt.current){var n=localStorage.getItem("login-time");null!==n?(rt.current=n,t=parseInt(n,10)):(t=Date.now(),rt.current=t)}else t=parseInt(rt.current,10);null===at.current&&(at.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+at.current-Date.now())/1e3}if(r<60&&(clearInterval(tt.current),C().then((function(){nt.current=null,rt.current=null,tt.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");nt.current=parseInt(r,10)}tt.current=setInterval((function(){e()}),1e3)}),[]),Object(ie.jsx)("nav",{className:"horizontal-nav",children:Object(ie.jsx)("div",{className:"horizontal-nav-links",children:Object(ie.jsx)("div",{className:"data-wrapper",children:Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsxs)(Ue.a,{style:{padding:0},children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(p.b,{to:"/home",className:"nav-wrap",children:H})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsxs)(p.b,{to:"/viewProfile/",children:[re().welcome+" ",Object(ie.jsx)("b",{children:ct.current})]},"viewProfile")}),Object(ie.jsx)(Je.a,{children:Object(ie.jsxs)("div",{className:"horizontal-nav-text",children:[re().role+" ","admin"===st.current?Object(ie.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===st.current?Object(ie.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===st.current?Object(ie.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===st.current?Object(ie.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ie.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsxs)("div",{className:"horizontal-nav-text",children:[re().tenant+" ",Object(ie.jsx)("b",{children:it.current})]})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:re().logout})}),W.length>1&&Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(oe,{})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(et,{})})]}),Object(ie.jsxs)(Ue.a,{style:{padding:0},children:[Object(ie.jsx)("hr",{}),Object(ie.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:re().resources})]}),Object(ie.jsx)(Ue.a,{style:{padding:0},children:s.a.Children.toArray(Object.keys(U).map((function(e){return ce(st.current,e,"read")?Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return r(!1)},children:ye(e)},e)}):""})))})]})})})})}var lt=r(63),dt={PushLog:function(e){},RemoveLog:function(e){},ClearLogs:function(){}};function ut(e,t,r,n,a){return jt.apply(this,arguments)}function jt(){return(jt=Object(l.a)(Object(o.a)().mark((function e(t,r,a,s,c){var i,l,d,u,j,b,p;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,l=i.split("#")[0],(d=new FormData).append("file",t),u=!1===r||void 0===r?n+"/experiments/"+l+"/file?sep="+a+"&sepArray="+s+"&sepFloat="+c:n+"/experiments/"+l+"/file/?override=true&sep="+a+"&sepArray="+s+"&sepFloat="+c,j={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:L()},b={headers:j},e.prev=7,e.next=10,g.put(u,d,b);case 10:p=e.sent,dt.PushLog({type:"info",msg:i+", successfully posted: Added: [ "+p.data.report.success.join(", ")+" ] Ignored: ["+p.data.report.ignored.join(", ")+" ] Overridden: ["+p.data.report.overridden.join(", ")+" ]\n"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("error in response"),dt.PushLog({type:"error",msg:i+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}function bt(e,t,r){return pt.apply(this,arguments)}function pt(){return(pt=Object(l.a)(Object(o.a)().mark((function e(t,r,a){var s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1===a||void 0===a?n+"/experiments/"+t:n+"/experiments/"+t+"?override=true",c=r.history.add[0].step,i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:L()}},e.prev=3,e.next=6,g.put(s,JSON.stringify(r),i);case 6:l=e.sent,dt.PushLog({type:"info",msg:"Step "+c+", successfully posted: Added: [ "+l.data.report.success.join(", ")+" ] Ignored: ["+l.data.report.ignored.join(", ")+" ] Overridden: ["+l.data.report.overridden.join(", ")+" ]\n"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("error in response"),dt.PushLog({type:"error",msg:"Step "+c+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function ht(e,t,r,n){return ft.apply(this,arguments)}function ft(){return ft=Object(l.a)(Object(o.a)().mark((function e(t,r,n,a){var s,c,i,l,d,u,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j.length>4&&void 0!==j[4]?j[4]:void 0,c="experiments/"+t+"/history?sep="+r+"&sepArray="+n+"&sepFloat="+a,i=t+"#history.csv",e.prev=3,e.next=6,xt(c);case 6:return l=e.sent,d=new Blob([l]),u=null,void 0===s||!1===s?Object(lt.saveAs)(d,i):u=new File([d],i),dt.PushLog({type:"info",msg:i+" successfully downloaded.\n"}),e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])}))),ft.apply(this,arguments)}function xt(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(l.a)(Object(o.a)().mark((function e(t){var r,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"get",url:n+"/"+t,headers:{Authorization:L()}},e.prev=2,e.next=5,g(r);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),dt.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details:"")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function mt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=Object(l.a)(Object(o.a)().mark((function e(t,r){var a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"put",url:n+"/experiments/"+t,headers:{Authorization:L()},data:{history:{remove:r}}},e.prev=2,e.next=5,g(a);case 5:e.sent,dt.PushLog({type:"info",msg:"Successfully deleted steps with id: "+r.join(" - ")+"\n"}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),dt.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"\n")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var gt=r(327),yt=r(328),kt=function(e){var t,r=Object(a.useContext)(Ze);if(t=void 0!==r?r.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(ie.jsxs)(le.a,{onSubmit:e.submitFunction,children:[Object(ie.jsxs)(Ke.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&s.a.Children.toArray(Object.entries(e.values).map((function(r){var n,a=Object(b.a)(r,2),c=a[0],i=a[1];if(void 0!==$[e.resource]&&void 0!==$[e.resource][c]&&void 0!==t.types&&void 0!==t.types[$[e.resource][c]])return function(t,r){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Je.a,{sm:4,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsxs)(le.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(ie.jsx)("option",{children:re().select+" "+t}),s.a.Children.toArray(Object.entries(r).map((function(e){var t=Object(b.a)(e,2),r=(t[0],t[1]);return Object(ie.jsx)("option",{value:r,children:r})})))]})})})]},t)}(c,t.types[$[e.resource][c]]);if(Array.isArray(i)){if("number"===typeof i[0])return n=c,Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:n})}),Object(ie.jsx)(Je.a,{sm:2,children:s.a.Children.toArray(e.values[n].map((function(t,r){return Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"number",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[n,r])},value:isNaN(e.values[n][r])?"":e.values[n][r],placeholder:re().enter+" "+n+"["+r+"]"})})})})))})]},n);if("boolean"===typeof i[0])return function(t){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Je.a,{children:s.a.Children.toArray(e.values[t].map((function(r,n){return Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(f.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(r){r.preventDefault(),e.arrayDeleteCallback([t,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{sm:6,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t,n])},checked:e.values[t][n],placeholder:re().enter+" "+t})})}),Object(ie.jsx)(Je.a,{md:"auto"})]})})))})]},t)}(c);if("string"===typeof i[0])return function(r){var n;return t!=={}&&void 0!==t.data[r]&&(n=t.data[r]),Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsx)(Je.a,{children:s.a.Children.toArray(e.values[r].map((function(a,s){return Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{sm:Math.max(2,2),children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:void 0!==t.data[r]?Object(ie.jsx)(yt.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r,s])},value:""===e.values[r][s]?null:e.values[r][s],options:n,renderInput:function(e){return Object(ie.jsx)(gt.a,Object(u.a)(Object(u.a)({},e),{},{label:re().enter+" "+r+"["+s+"]"}))}}):Object(ie.jsx)(le.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s])},value:e.values[r][s],placeholder:re().enter+" "+r+"["+s+"]"})})}),Object(ie.jsx)(Je.a,{md:"auto"})]})})))})]},r)}(c);if(i[0].constructor===Object)return function(r){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsxs)(Je.a,{children:[Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:[void 0===e.disabledFields[r]&&Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)("b",{children:Object(ie.jsx)("i",{children:"Remove"})})}),s.a.Children.toArray(Object.entries(e.values[r][0]).map((function(e){return Object(ie.jsx)(Je.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(ie.jsx)("b",{children:Object(ie.jsx)("i",{children:ye(r)+" "+e[0]})})})})))]}),s.a.Children.toArray(e.values[r].map((function(n,a){return Object(ie.jsxs)(Ue.a,{children:[void 0===e.disabledFields[r]&&Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(f.a,{disabled:void 0!==e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,a])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(Object.entries(n).map((function(n){var c=Object(b.a)(n,2),i=c[0],o=c[1],l=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][i]?e.disabledFields[r][i]:!0===e.disabledFields[r]);return"number"===typeof o?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,a,i])},disabled:l,value:isNaN(e.values[r][a][i])?"":e.values[r][a][i],placeholder:re().enter+" "+i})})}):"boolean"===typeof o?Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,a,i])},disabled:l,checked:e.values[r][a][i],placeholder:re().enter+" "+i})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][i]&&void 0!==t.types&&void 0!==t.types[$[e.resource][r][i]]?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsxs)(le.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i])},value:e.values[r][a][i],disabled:l,children:[Object(ie.jsx)("option",{children:re().select+" "+i}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][i]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],n=t[1];return Object(ie.jsx)("option",{value:r,children:n})})))]})})}):"string"===typeof o?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i])},value:e.values[r][a][i],placeholder:re().enter+" "+i}),"metadata"===r&&"name"===i&&"Country"===e.values[r][a][i]&&Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(o)?0===o.length?i+" is empty":"range"===i&&"enum"!==e.values[r][a].type?"":Object(ie.jsx)(Fe.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsxs)(Fe.a.Header,{children:[Object(ie.jsx)("b",{children:i})," : ",me(o)," items"]}),Object(ie.jsx)(Fe.a.Body,{children:Object(ie.jsx)(Ke.a,{fluid:!0,children:s.a.Children.toArray(o.map((function(t,n){if(t.constructor===Object){var c=Object.entries(t);return Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,a,i,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(c.map((function(t){var s=Object(b.a)(t,2),c=s[0],o=s[1];return Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i,n,c])},value:o,placeholder:re().enter+" "+c})})})})))]})}return"number"===typeof t?Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,a,i,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,a,i,n])},value:isNaN(t)?"":t,placeholder:re().enter+" "+i})})]}):"string"===typeof t?Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,a,i,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i,n])},value:t,placeholder:re().enter+" "+i})})]}):"Unknown data type"})))})})]})}):o.constructor===Object?Object(ie.jsx)(Fe.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Fe.a.Header,{children:Object(ie.jsx)("b",{children:i})}),Object(ie.jsx)(Fe.a.Body,{children:Object(ie.jsx)(Ke.a,{fluid:!0,children:Object(ie.jsx)(Ue.a,{children:s.a.Children.toArray(Object.entries(o).map((function(n){return"number"===typeof n[1]?Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,a,i,n[0]],!0)},value:isNaN(n[1])?"":n[1],placeholder:re().enter+" "+n[0]})}):"boolean"===typeof n[1]?Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,a,i,n[0]],!0)},disabled:l,checked:n[1],label:n[0]})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][i]&&void 0!==$[e.resource][r][i][n[0]]&&void 0!==t.types&&void 0!==$[e.resource][r][i][n[0]]?Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsxs)(le.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i,n[0]],!0)},value:n[1],disabled:l,children:[Object(ie.jsx)("option",{children:re().select+" "+n[0]}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][i][n[0]]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],n=t[1];return Object(ie.jsx)("option",{value:r,children:n})})))]})})}):"string"===typeof n[1]?Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,a,i,n[0]],!0)},value:n[1],placeholder:re().enter+" "+n[0]})}):"Unknown data type"})))})})})]})}):"Unknown data type"})))]})})))]})]},r)}(c)}return"number"===typeof i?function(t){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Je.a,{sm:4,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"number",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(parseInt(r.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:re().enter+" "+t}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(ie.jsx)(le.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):void 0!==ee[e.resource]&&void 0!==ee[e.resource][c]&&void 0!==t.data[ee[e.resource][c]]?function(r,n){var a;return t==={}||void 0===t.data[r]&&void 0===t.data[n]||(a=t.data[void 0!==n?n:r]),Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:r})}),Object(ie.jsx)(Je.a,{sm:4,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(yt.a,{id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:""===e.values[r]?null:e.values[r],options:a,renderInput:function(e){return Object(ie.jsx)(gt.a,Object(u.a)(Object(u.a)({},e),{},{label:re().enter+" "+r}))}})})})]},r)}(c,ee[e.resource][c]):"boolean"===typeof i?function(t){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Check,{id:t,type:"checkbox",onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],checked:e.values[t]}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(ie.jsx)(le.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):"string"===typeof i?function(t){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:t})}),Object(ie.jsx)(Je.a,{sm:4,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"password"===t?"password":"text",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:re().enter+" "+t}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(ie.jsx)(le.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):i.constructor===Object?function(r){return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ue.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(e){return Object(ie.jsx)(Je.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(ie.jsx)("b",{children:Object(ie.jsx)("i",{children:ye(r)+" "+e[0]})})})})))}),Object(ie.jsx)(Ue.a,{children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(n){var a=Object(b.a)(n,2),c=a[0],i=a[1],o=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][c]?e.disabledFields[r][c]:!0===e.disabledFields[r]);return"number"===typeof i?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c])},disabled:o,value:isNaN(e.values[r][c])?"":e.values[r][c],placeholder:re().enter+" "+c})})}):"boolean"===typeof i?Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,c])},disabled:o,checked:e.values[r][c],label:c})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][c]&&void 0!==t.types&&void 0!==t.types[$[e.resource][r][c]]?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsxs)(le.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],disabled:o,children:[Object(ie.jsx)("option",{children:re().select+" "+c}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][c]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],n=t[1];return Object(ie.jsx)("option",{value:r,children:n})})))]})})}):"string"===typeof i?Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],placeholder:re().enter+" "+c}),"metadata"===r&&"name"===c&&"Country"===e.values[r][c]&&Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(i)?0===i.length?c+" is empty":"range"===c&&"enum"!==e.values[r].type?"":Object(ie.jsx)(Fe.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsxs)(Fe.a.Header,{children:[Object(ie.jsx)("b",{children:c})," : ",me(i)," items"]}),Object(ie.jsx)(Fe.a.Body,{children:Object(ie.jsx)(Ke.a,{fluid:!0,children:s.a.Children.toArray(i.map((function(t,n){if(t.constructor===Object){var a=Object.entries(t);return Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(a.map((function(t){var a=Object(b.a)(t,2),s=a[0],i=a[1];return Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,n,s])},value:i,placeholder:re().enter+" "+s})})})})))]})}return"number"===typeof t?Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"number",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c,n])},value:isNaN(t)?"":t,placeholder:re().enter+" "+c})})]}):"string"===typeof t?Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,n])},children:Object(ie.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Control,{type:"text",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,n])},value:t,placeholder:re().enter+" "+c})})]}):"Unknown data type"})))})})]})}):"Unknown data type"})))})]})}(c):""})))]},"form"),Object(ie.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit}),"\xa0\xa0\xa0",void 0!==e.backFunction&&Object(ie.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:re().cancel})]})},Ct=r(72);function wt(e,t){var r=Object.keys(e),n=Object.keys(t);return(r=r.filter((function(e){return-1!==n.indexOf(e)}))).sort((function(e,t){return n.indexOf(e)-n.indexOf(t)})),r.reduce((function(r,n){if(Array.isArray(e[n])&&0!==e[n].length&&e[n][0].constructor===Object){var a=e[n].map((function(e){return wt(e,t[n][0])}));r[n]=a}else r[n]=e[n];return r}),{})}function St(e,t,r){for(var n=Object.keys(e),a=Ct(e),s=0;s<n.length;s++)Array.isArray(a[n[s]])&&(a=Nt(a,[n[s]],t,r));return a}function Nt(e,t,r,n){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=Ct(e),c=s,i=void 0!==r?Ct(r[n]):void 0,o=Object(j.a)(t),l=0;l<o.length&&void 0!==t[l];l++)c=c[t[l]];var d,b=me(c),p=c.length;if(b<p)return s;for(var h=0;h<o.length&&void 0!==t[h]&&void 0!==i;h++)i="number"===typeof t[h]?i[0]:i[t[h]];return void 0===i||Array.isArray(i)?(void 0!==i&&(d=i[0].constructor===Object?Object(u.a)({},i[0]):""),void 0!==a&&void 0===i&&(d=a.constructor===Object?Object(u.a)({},a):a),void 0!==d&&c.push(d),s):s}var _t=r(72);function At(e){var t=Object(h.o)(),r=t.resource,n=t.id,s=Object(a.useState)(),c=Object(b.a)(s,2),i=c[0],u=c[1],p=Object(a.useState)(""),f=Object(b.a)(p,2),x=f[0],O=f[1],m=Object(h.m)(),v=Object(a.useState)(_t(Y[r])),g=Object(b.a)(v,2),y=g[0],k=g[1],C=Object(a.useState)({}),w=Object(b.a)(C,2),S=w[0],N=(w[1],Object(a.useState)(void 0)),_=Object(b.a)(N,2),D=_[0],P=_[1],R=Object(a.useContext)(Ze).fetched,I=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===R.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,R.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){void 0!==ee[r]&&Object.values(ee[r]).forEach((function(e){return I(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,a,s,c,i,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>0&&void 0!==j[0]?j[0]:{},e.next=3,F(r,t);case 3:a=e.sent,s=a.docs[0],c=_t(y),c=wt(s,c),Object.entries(c).forEach((function(e){e[0].toLowerCase().includes("date")&&(c[e[0]]=ke(e[1]))})),i=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,a,s,i,l,j,b,p,h,f,x,O,m,v,g;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==X[r]){e.next=7;break}for(P({}),t=Object.keys(c),a=0;a<t.length;a++)s=t[a],c=Nt(c,[s],Y,r);return k(c),u(_t(c)),e.abrupt("return");case 7:i={},void 0!==D&&(i=D),l=Object.entries(X[r]),j=0;case 11:if(!(j<l.length)){e.next=40;break}if(b=l[j][0],p=l[j][1],void 0!==c[b]){e.next=16;break}return e.abrupt("continue",37);case 16:if(void 0===p._type||"disable"!==p._type){e.next=23;break}return e.next=19,p.policy(n);case 19:h=e.sent,i[b]=h,e.next=37;break;case 23:f=Object.entries(p),x=0;case 25:if(!(x<f.length)){e.next=37;break}if(console.log({value:p,k:f[x][0],v:f[x][1],val:c[b]}),!1!==Array.isArray(c[b])||void 0!==c[b][f[x][0]]){e.next=29;break}return e.abrupt("continue",34);case 29:if(void 0===f[x][1]._type||"disable"!==f[x][1]._type){e.next=34;break}return e.next=32,f[x][1].policy(n);case 32:O=e.sent,i[b]=Object(d.a)({},f[x][0],O);case 34:x++,e.next=25;break;case 37:j++,e.next=11;break;case 40:for(m=Object.keys(c),v=0;v<m.length;v++)g=m[v],void 0!==i[g]&&!1!==i[g]||(c=Nt(c,[g],Y,r));P(i),k(c),u(_t(c));case 45:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:n};e({filter:JSON.stringify(t)})}),[]);var T=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var a,s,c,l,u,b,p,h,f,x,v,g,k,C,w;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),a=_t(y),s=_t(i),ve(a),ve(s),c={},l=Object.entries(a),u=0;u<l.length;u++)if(b=l[u][0],p=l[u][1],Array.isArray(p)){if(void 0===c[b]&&(c[b]={add:[],remove:[],update:[]}),h=Object(j.a)(s[b]),void 0!==S[b])for(f=0;f<S[b].indexes.length;f++)(x=h.splice(S[b].indexes[f][0],1)[0]).constructor===Object?(v=Object.keys(x)[0],c[b].remove.push(x[v])):c[b].remove.push(x);for(g=0;g<a[b].length;g++)g<h.length&&!ge(a[b][g],h[g])&&(a[b][g].constructor===Object?(C=Object.keys(h[g])[0],c[b].update.push((k={},Object(d.a)(k,C,h[g][C]),Object(d.a)(k,"new",a[b][g]),k))):(c[b].add.push(a[b][g]),c[b].remove.push(h[g]))),g>=h.length&&c[b].add.push(a[b][g]);ge(c[b],{add:[],remove:[],update:[]})&&delete c[b]}else p.constructor===Object||p!==i[b]&&(c[b]=p);if(0!==Object.keys(c).length){e.next=11;break}return O("No changes found"),e.abrupt("return");case 11:return e.prev=11,e.next=14,A(r,c,n);case 14:w=e.sent,w.response,window.alert("Resource successfully edited!"),m("/"+r),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(11),e.t0.error.response,O(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 24:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(ie.jsx)("b",{children:r}),"\xa0of id:\xa0",Object(ie.jsx)("b",{children:n}),"\xa0"]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsx)(kt,{values:y,resource:r,functionalFields:Y,disabledFields:D,handleChangesCallback:function(e,t){var n,a=_t(y),s=a,c=-1;for(n=0;n<t.length-1;n++)s=s[t[n]],"number"===typeof t[n]&&(c=n);if("number"===typeof t[n]&&(c=n),s[t[n]]=e,-1!==c){var i="number"===typeof e?NaN:"";a=Nt(a,t.slice(0,c),Y,r,i)}k(a)},arrayDeleteCallback:function(e){var t,n=_t(y),a=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)a=a[e[t]];var s=a.splice(e[t],1),c="number"===typeof s[0]?NaN:"";n=Nt(n,e.slice(0,t),Y,r,c),1===t&&(void 0===S[e[0]]&&(S[e[0]]={indexes:[],elements:[],minDel:1/0}),Oe(s[0])||(S[e[0]].elements.push(s[0]),S[e[0]].indexes.push(e[t]>=S[e[0]].minDel?e[t]+S[[e[0]]].indexes.filter((function(r){return r>=e[t]})).length:e[t]),e[t]<S[e[0]].minDel&&(S[e[0]].minDel=e[t]))),k(n)},submitFunction:T,backFunction:function(e){e.preventDefault(),m(-1)}}),Object(ie.jsx)("br",{}),Object(ie.jsx)("font",{style:{marginLeft:"5px"},children:x})]})]})}var Dt=r(333),Pt=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(ie.jsxs)(le.a,{onSubmit:e.submitFunction,children:[Object(ie.jsx)(le.a.Label,{children:Object(ie.jsx)("b",{children:re().select_file})}),Object(ie.jsx)(le.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var r=t.target.files[0];e.setFile(r);var n=new FileReader;n.onloadend=function(){var t=n.result;if(r.name.endsWith(".csv")){var a=new RegExp("\\r","g"),s=t.replace(a,"").split("\n");e.setContentHeader(s[0]),s.splice(0,1),e.setContentBody(s),e.setContentPlain(null)}r.name.endsWith(".json")&&(e.setContentHeader(null),e.setContentBody(null),e.setContentPlain(JSON.stringify(JSON.parse(t),null,4)))},n.readAsText(r)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(ie.jsx)(Fe.a,{children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Fe.a.Header,{children:re().file_content}),Object(ie.jsx)(Fe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ie.jsxs)(Re.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:s.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(ie.jsx)("th",{children:e})})))})}),Object(ie.jsx)("tbody",{children:s.a.Children.toArray(e.contentBody.map((function(e){return Object(ie.jsx)("tr",{children:s.a.Children.toArray(e.split(",").map((function(e){return Object(ie.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(ie.jsx)(Fe.a,{children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Fe.a.Header,{children:re().file_content}),Object(ie.jsx)(Fe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ie.jsx)("textarea",{style:{resize:"both"},cols:"120",rows:"10",readOnly:!0,value:e.contentPlain})})]})}),Object(ie.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit},"submit"),"\xa0\xa0\xa0",Object(ie.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:re().cancel},"cancel")]})},Rt=r(72);function Ft(e){var t=Object(h.o)().resource,r=Object(p.c)(),n=Object(b.a)(r,2),s=n[0];n[1];void 0!==e.resource&&(t=e.resource);var c,i=Object(h.m)(),d=Object(a.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],x=Object(a.useState)(""),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(a.useState)(!1),y=Object(b.a)(g,2),k=y[0],C=y[1],S=Object(a.useState)(Rt(Q[t])),_=Object(b.a)(S,2),A=_[0],D=_[1],P=Object(a.useState)(void 0),R=Object(b.a)(P,2),I=R[0],T=R[1],B=Object(a.useState)(null),L=Object(b.a)(B,2),E=L[0],z=L[1],H=Object(a.useState)(null),W=Object(b.a)(H,2),G=W[0],K=W[1],U=Object(a.useState)(null),J=Object(b.a)(U,2),M=J[0],V=J[1],q=Object(a.useContext)(Ze);if(c=void 0!==q?q.fetched:{},Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,c.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();void 0!==ee[t]&&Object.values(ee[t]).forEach((function(t){return e(t)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,n,a,s,c=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,F(t,r);case 3:n=e.sent,a=n.docs[0],s=Rt(A),s=St(s=wt(a,s),Q,t),D(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var r={_id:s.get("from")};e({filter:JSON.stringify(r)})}}),[s,t]),void 0===Q[t])return Object(ie.jsx)("div",{children:"This entity cannot be posted"});var Y=function(e){e.preventDefault(),i(-1)},X=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=void 0,void 0!==(a=Rt(A)).token&&(n=a.token,delete a.token),s=Rt(a),ve(s),e.prev=6,e.next=9,N(t,JSON.stringify(s),n);case 9:l=e.sent,c=l.response,v(c.statusText),C(!1),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),c=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),d="",d=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+d),C(!0);case 24:200===c.status&&(window.alert("Resource successufully posted!"),i("/"+t));case 25:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==I){e.next=5;break}return v(re().no_file),C(!0),e.abrupt("return");case 5:if(!I.name.endsWith(".csv")){e.next=26;break}return(a=new FormData).append("file",I),e.prev=8,e.next=11,w(t,a);case 11:s=e.sent,n=s.response,v(n.statusText),C(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),C(!0);case 26:if(!I.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,N(t,M,void 0);case 30:l=e.sent,n=l.response,v(n.statusText),C(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),n=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=e.t1.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),C(!0);case 45:200===n.status&&(window.alert("Resource posted correctly"),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ie.jsx)("b",{children:t})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Dt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),C(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===s.get("from")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ie.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(kt,{values:A,resource:t,functionalFields:Q,disabledFields:{},handleChangesCallback:function(e,r){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Rt(A),c=s,i=-1;for(n=0;n<r.length-1;n++)c=c[r[n]],"number"===typeof r[n]&&(i=n);c[r[n]]=e,"number"===typeof r[n]&&(i=n),!1===a&&-1!==i&&(s=Nt(s,r.slice(0,i),Q,t)),D(s)},arrayDeleteCallback:function(e){var r,n=Rt(A),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];a.splice(e[r],1),n=Nt(n,e.slice(0,r),Q,t),D(n)},submitFunction:X,backFunction:Y}),Object(ie.jsx)("br",{}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:m})]}),"file"===j&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(Pt,{submitFunction:$,backFunction:Y,setContentBody:K,setContentHeader:z,setContentPlain:V,setFile:T,contentPlain:M,contentHeader:E,contentBody:G}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:m})]})]})]})]})}function It(e){var t=Object(a.useState)(null),r=Object(b.a)(t,2),n=r[0],s=r[1];return Object(ie.jsx)(Fe.a,{size:"lg",children:Object(ie.jsxs)(Fe.a.Item,{eventKey:0,children:[Object(ie.jsx)(Fe.a.Header,{children:re().import+" - "+re().export+" "+re().configuration}),Object(ie.jsx)(Fe.a.Body,{children:Object(ie.jsx)(Ke.a,{children:Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsx)(Je.a,{sm:6,children:Object(ie.jsxs)(le.a,{onSubmit:function(){return e.importValues(n)},children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)("b",{children:"Import configuration from json file"})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsxs)(Je.a,{children:[Object(ie.jsx)(le.a.Label,{children:Object(ie.jsx)("b",{children:re().select_file})}),Object(ie.jsx)(le.a.Control,{className:"mb-3",type:"file",accept:".json",label:"File",onChange:function(e){e.preventDefault();var t=e.target.files[0],r=new FileReader;r.onloadend=function(){var e=r.result;s(e)},r.readAsText(t)}})]})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:"red"},children:e.importMsg})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{type:"submit",variant:"success",children:"Load"})})})]})}),Object(ie.jsxs)(Je.a,{sm:6,children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)("b",{children:"Download configuration as json file"})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"22px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{variant:"primary",onClick:function(){var t=new Blob([JSON.stringify(e.values,null,4)]);Object(lt.saveAs)(t,(""!==e.values._id?e.values._id:"Experiment")+".json")},children:"Download"})})})]})]})})})]})})}var Tt=r(72);function Bt(e){var t="experiments",r=Object(p.c)(),n=Object(b.a)(r,2),c=n[0],i=(n[1],Object(h.m)()),d=Object(a.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],x=Object(a.useState)(""),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(a.useState)(!1),y=Object(b.a)(g,2),k=y[0],C=y[1],S=Object(a.useState)(""),_=Object(b.a)(S,2),A=_[0],D=_[1],P=Object(a.useState)(Tt(Q[t])),R=Object(b.a)(P,2),I=R[0],T=R[1],B=Object(a.useState)({metadata:{name:!0}}),L=Object(b.a)(B,2),E=L[0],z=L[1],H=Object(a.useState)(),W=Object(b.a)(H,2),G=W[0],K=W[1],U=Object(a.useState)(void 0),J=Object(b.a)(U,2),M=J[0],V=J[1],q=Object(a.useState)(null),Y=Object(b.a)(q,2),X=Y[0],$=Y[1],ee=Object(a.useState)(null),te=Object(b.a)(ee,2),ne=te[0],ae=te[1],se=Object(a.useState)(null),ce=Object(b.a)(se,2),oe=ce[0],de=ce[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,n=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,F("protocols",t);case 3:r=e.sent,K(r.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,c]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,n,a,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,F(t,r);case 3:n=e.sent,a=n.docs[0],(s=Tt(I)).protocol="",s.metadata=[{name:"",value:""}],(c=Tt(E)).protocol=!0,z(c),s=wt(a,s),Object.entries(s).forEach((function(e){e[0].toLowerCase().includes("date")&&(s[e[0]]=ke(e[1]))})),s._id=s._id+"_copy",s=St(s,Q,t),T(s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==c.get("from")&&""!==c.get("from")){var r={_id:c.get("from")};e({filter:JSON.stringify(r)})}}),[c,t]),void 0===Q[t])return Object(ie.jsx)("div",{children:"This entity cannot be posted"});var ue=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,a,s,c,i,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,n={_id:t.target.value},a={filter:JSON.stringify(n)},e.next=6,F("protocols",a);case 6:for(s=e.sent,c=s.docs[0],i=[],l=0;l<c.metadata.length;l++)"scalar"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:0}),"text"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:c.metadata[l].name+"_Name"}),"vector"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:[0]});(d=Tt(I)).protocol=r,0!==i.length&&(d.metadata=i),(u=Tt(E)).protocol=!0,z(u),T(d);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=void 0,void 0!==(a=Tt(I)).token&&(n=a.token,delete a.token),s=Tt(a),ve(s),void 0!==s.protocol){e.next=10;break}return v("Please, select a protocol"),C(!0),e.abrupt("return");case 10:if(""!==s._id){e.next=14;break}return v("Please, define an _id"),C(!0),e.abrupt("return");case 14:if(""!==s.state){e.next=18;break}return v("Please, select a state"),C(!0),e.abrupt("return");case 18:return e.prev=18,e.next=21,N(t,JSON.stringify(s),n);case 21:l=e.sent,c=l.response,v(c.statusText),C(!1),e.next=36;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0),c=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),d="",d=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+d),C(!0);case 36:200===c.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 37:case"end":return e.stop()}}),e,null,[[18,27]])})));return function(t){return e.apply(this,arguments)}}(),be=function(e){e.preventDefault(),i(-1)},pe=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==M){e.next=5;break}return v(re().no_file),C(!0),e.abrupt("return");case 5:if(!M.name.endsWith(".csv")){e.next=26;break}return(a=new FormData).append("file",M),e.prev=8,e.next=11,w(t,a);case 11:s=e.sent,n=s.response,v(n.statusText),C(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),C(!0);case 26:if(!M.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,N(t,oe,void 0);case 30:l=e.sent,n=l.response,v(n.statusText),C(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),n=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=e.t1.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),C(!0);case 45:200===n.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ie.jsx)("b",{children:t})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Dt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),C(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===c.get("from")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ie.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&(null===c.get("from")||""===c.get("from"))&&Object(ie.jsx)(It,{values:I,importValues:function(e){try{var t=JSON.parse(e),r=Tt(I);r.protocol="",r.metadata=[{name:"",value:""}];var n=wt(t,r);if(void 0===n._id&&void 0===n.owner&&void 0===n.protocol&&void 0===n.metadata)return void D(re().error_imported_file);D(""),void 0!==n.history&&delete n.history,T(n);var a=Tt(E);a.protocol=!0,z(a)}catch(s){D(re().error_imported_file),console.log(s)}},importMsg:A}),"form"===j&&void 0!==G&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[(null===c.get("from")||""===c.get("from"))&&Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" protocol",onChange:ue,value:I.protocol,children:[Object(ie.jsxs)("option",{children:[re().select," protocol"]}),s.a.Children.toArray(G.map((function(e){return Object(ie.jsx)("option",{value:e,children:e})})))]}),Object(ie.jsx)("br",{}),Object(ie.jsx)(kt,{values:I,resource:t,functionalFields:Q,disabledFields:E,handleChangesCallback:function(e,r){var n,a=Tt(I),s=a,c=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(c=n);if("number"===typeof r[n]&&(c=n),s[r[n]]=e,-1!==c){var i="number"===typeof e?NaN:"";a=Nt(a,r.slice(0,c),Q,t,i)}T(a)},arrayDeleteCallback:function(e){var r,n=Tt(I),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];var s="number"===typeof a.splice(e[r],1)[0]?NaN:"";n=Nt(n,e.slice(0,r),Q,t,s),T(n)},submitFunction:je,backFunction:be}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:m})]}),"file"===j&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(Pt,{submitFunction:pe,backFunction:be,setContentBody:ae,setContentHeader:$,setContentPlain:de,setFile:V,contentPlain:oe,contentHeader:X,contentBody:ne}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:m})]})]})]})]})}var Lt=r(72);function Et(e){var t="measurements",r=Object(p.c)(),n=Object(b.a)(r,2),c=n[0],i=(n[1],Object(a.useState)([])),d=Object(b.a)(i,2),u=d[0],j=d[1],x=Object(a.useState)([]),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(h.m)(),y=Object(a.useState)("form"),k=Object(b.a)(y,2),C=k[0],S=k[1],_=Object(a.useState)(""),A=Object(b.a)(_,2),D=A[0],P=A[1],R=Object(a.useState)(!1),I=Object(b.a)(R,2),T=I[0],B=I[1],L=Object(a.useState)(Lt(Q[t])),E=Object(b.a)(L,2),z=E[0],H=E[1],W=Object(a.useState)({}),G=Object(b.a)(W,2),K=G[0],U=(G[1],Object(a.useState)()),J=Object(b.a)(U,2),M=J[0],V=J[1],q=Object(a.useState)(""),Y=Object(b.a)(q,2),X=Y[0],$=Y[1],te=Object(a.useState)(void 0),ne=Object(b.a)(te,2),ae=ne[0],se=ne[1],ce=Object(a.useState)(null),oe=Object(b.a)(ce,2),de=oe[0],ue=oe[1],je=Object(a.useState)(null),be=Object(b.a)(je,2),pe=be[0],he=be[1],fe=Object(a.useState)(null),xe=Object(b.a)(fe,2),Oe=xe[0],me=xe[1],ge=Object(a.useContext)(Ze).fetched,ye=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ge.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,ge.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0!==ee[t]&&Object.values(ee[t]).forEach((function(e){return ye(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,n=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,F("features",t);case 4:r=e.sent,V(r.docs.map((function(e){return e._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,c]),void 0===Q[t])return Object(ie.jsx)("div",{children:"This entity cannot be posted"});var ke=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,a,s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,n={_id:r},a={filter:JSON.stringify(n)},e.next=6,F("features",a);case 6:return s=e.sent,c=s.docs[0],i=c.items,l=Ce([],i),j(l),v(i),$(r),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e,t){var r=[],n=Lt(e);return t.forEach((function(e){"number"===e.type?0===e.dimension?r.push({name:e.name,value:NaN,type:e.type}):r.push([{name:e.name,value:NaN,type:e.type}]):"text"===e.type?0===e.dimension?r.push({name:e.name,value:"",type:e.type}):r.push([{name:e.name,value:"",type:e.type}]):"enum"===e.type&&(0===e.dimension?r.push({name:e.name,value:"",enumValues:e.range,type:e.type}):r.push([{name:e.name,value:"",enumValues:e.range,type:e.type}]))})),n.push({values:r}),n},we=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=void 0,a=Lt(z),s=u.map((function(e){return{values:e.values.map((function(e){return e.value}))}})),void 0!==a.token&&(n=a.token,delete a.token),ve(a),a.feature=X,a.samples=s,e.prev=8,e.next=11,N(t,JSON.stringify(a),n);case 11:i=e.sent,c=i.response,P(c.statusText),B(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),c=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),B(!0);case 23:200===c.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 24:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){e.preventDefault(),g(-1)},Ne=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var n,a,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==ae){e.next=5;break}return P(re().no_file),B(!0),e.abrupt("return");case 5:if(!ae.name.endsWith(".csv")){e.next=23;break}return(a=new FormData).append("file",ae),e.prev=8,e.next=11,w(t,a);case 11:s=e.sent,n=s.response,P(n.statusText),B(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),B(!0);case 23:if(!ae.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,N(t,Oe,void 0);case 27:c=e.sent,n=c.response,P(n.statusText),B(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),n=e.t1.error.response,P(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),B(!0);case 39:200===n.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ie.jsx)("b",{children:t})]}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Dt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){S(e),P(""),B(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===c.get("from")&&Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ie.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===C&&void 0!==M&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" feature",onChange:ke,value:X,children:[Object(ie.jsxs)("option",{children:[re().select," feature"]}),s.a.Children.toArray(M.map((function(e){return Object(ie.jsx)("option",{value:e,children:e})})))]}),Object(ie.jsx)("hr",{}),Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsxs)("b",{children:["Samples :",u.length]})}),Object(ie.jsx)("br",{}),s.a.Children.toArray(u.map((function(e,t){return Object(ie.jsx)(Ue.a,{style:{padding:10},children:Object(ie.jsx)(Fe.a,{defaultActiveKey:"0",children:Object(ie.jsxs)(Fe.a.Item,{eventKey:t,children:[Object(ie.jsx)(Fe.a.Header,{children:Object(ie.jsx)("b",{children:Object(ie.jsxs)("i",{children:["Sample [",t,"]"]})})}),Object(ie.jsx)(Fe.a.Body,{children:s.a.Children.toArray(Object.values(e.values).map((function(e){return Object(ie.jsxs)(Ue.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px",padding:10},children:[Object(ie.jsx)(Je.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ie.jsx)("b",{children:Object(ie.jsx)("i",{children:e.name})})}),Object(ie.jsx)(Je.a,{sm:2,children:"enum"===e.type?Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" "+e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},children:[Object(ie.jsx)("option",{value:"",children:re().select+" "+e.name}),s.a.Children.toArray(e.enumValues.map((function(e){return Object(ie.jsx)("option",{value:e,children:e})})))]}):"text"===e.type?Object(ie.jsx)(le.a.Control,{type:"text",id:e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},"aria-label":re().enter+" "+e.name}):Object(ie.jsx)(le.a.Control,{type:"number",id:e.name,onChange:function(t){t.preventDefault(),e.value=parseInt(t.target.value,10)},"aria-label":re().enter+" "+e.name})})]})})))})]})})})}))),0!==u.length&&Object(ie.jsx)(f.a,{variant:"link",onClick:function(){var e=Ce(u,m);j(e)},children:Object(ie.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add sample",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})]}),Object(ie.jsx)("hr",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)(kt,{values:z,resource:t,functionalFields:Q,disabledFields:K,handleChangesCallback:function(e,r){var n,a=Lt(z),s=a,c=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(c=n);if("number"===typeof r[n]&&(c=n),s[r[n]]=e,-1!==c){var i="number"===typeof e?NaN:"";a=Nt(a,r.slice(0,c),Q,t,i)}H(a)},arrayDeleteCallback:function(e){var r,n=Lt(z),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];var s="number"===typeof a.splice(e[r],1)[0]?NaN:"";n=Nt(n,e.slice(0,r),Q,t,s),H(n)},submitFunction:we,backFunction:Se}),Object(ie.jsx)("br",{}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:T?"red":"black"},children:D})]}),"file"===C&&Object(ie.jsxs)("div",{style:{margin:"5px"},children:[Object(ie.jsx)(Pt,{submitFunction:Ne,backFunction:Se,setContentBody:he,setContentHeader:ue,setContentPlain:me,setFile:se,contentPlain:Oe,contentHeader:de,contentBody:pe}),Object(ie.jsx)("font",{style:{marginLeft:"5px",color:T?"red":"black"},children:D})]})]})]})]})}var zt=r(326);function Ht(e){return void 0===e.postHistory||void 0===e.arraySepRef||void 0===e.floatSepRef||void 0===e.csvSep||void 0===e.setCsvSep||void 0===e.ovdRef||void 0===e.setCsvHeader||void 0===e.setCsvContent||void 0===e.setFile||void 0===e.file||void 0===e.csvContent||void 0===e.csvHeader?"Loading":Object(ie.jsxs)(le.a,{onSubmit:e.postHistory,children:[Object(ie.jsxs)(Ue.a,{style:{paddingTop:"10px"},children:[Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Column Separator",value:e.csvSep,onChange:function(t){t.preventDefault(),e.setCsvSep(t.target.value)},children:[Object(ie.jsx)("option",{value:",",children:","}),Object(ie.jsx)("option",{value:";",children:";"}),Object(ie.jsx)("option",{value:"-",children:"-"}),Object(ie.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Array separator",ref:e.arraySepRef,children:[Object(ie.jsx)("option",{value:";",children:";"}),Object(ie.jsx)("option",{value:",",children:","}),Object(ie.jsx)("option",{value:".",children:"."}),Object(ie.jsx)("option",{value:"-",children:"-"})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(ie.jsx)(Je.a,{sm:1,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Floating Point separator",ref:e.floatSepRef,children:[Object(ie.jsx)("option",{value:".",children:"."}),Object(ie.jsx)("option",{value:",",children:","})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{sm:3,children:Object(ie.jsx)(le.a.Control,{className:"mb-3",type:"file",accept:".csv",label:"File",onChange:function(t){var r=t.target.files[0],n=new FileReader;n.onloadend=function(){var t=n.result,a=new RegExp("\\r","g"),s=t.replace(a,"").split("\n");e.setCsvHeader(s[0]),e.setFile(r),s.splice(0,1),e.setCsvContent(s)},n.readAsText(r)}})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",label:"Update duplicate steps in History Experiment",ref:e.ovdRef})})})}),null!==e.csvContent&&Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Fe.a,{children:Object(ie.jsxs)(Fe.a.Item,{eventKey:"0",children:[Object(ie.jsx)(Fe.a.Header,{children:re().preview+" - "+e.file.name}),Object(ie.jsx)(Fe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ie.jsxs)(Re.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ie.jsx)("thead",{children:Object(ie.jsx)("tr",{children:s.a.Children.toArray(e.csvHeader.split(e.csvSep).map((function(e){return Object(ie.jsx)("th",{children:e})})))})}),Object(ie.jsx)("tbody",{children:s.a.Children.toArray(e.csvContent.map((function(t){return Object(ie.jsx)("tr",{children:s.a.Children.toArray(t.split(e.csvSep).map((function(e){return Object(ie.jsx)("td",{children:e})})))})})))})]})})]})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit})})})]})}function Wt(e){return void 0===e.experiments||void 0===e.postHistory||void 0===e.values||void 0===e.ovdRef||void 0===e.handleExperimentChange||void 0===e.handleChanges?"Loading":Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:0!==e.experiments.length&&Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" experiment",onChange:e.handleExperimentChange,children:[Object(ie.jsxs)("option",{children:[re().select," experiment to update its history"]}),s.a.Children.toArray(e.experiments.map((function(e){return Object(ie.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",label:"Update step if already present in History Experiment",ref:e.ovdRef})})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(kt,{values:e.values,resource:"updateHistory",functionalFields:{updateHistory:{}},disabledFields:{fields:{name:!0}},handleChangesCallback:e.handleChanges,arrayDeleteCallback:function(){},submitFunction:e.postHistory})})})]})}var Gt=r(72),Kt=s.a.createRef(),Ut=s.a.createRef(),Jt=s.a.createRef(),Mt=s.a.createRef();function Vt(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),r=t[0],n=t[1],s=Object(a.useState)(null),c=Object(b.a)(s,2),i=c[0],d=c[1],u=Object(a.useContext)(Ze).logs,j=Object(a.useState)(0),p=Object(b.a)(j,2),h=p[0],f=p[1],x=Object(a.useState)(null),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(a.useState)("file"),y=Object(b.a)(g,2),k=y[0],C=y[1],w=Object(a.useState)(0),S=Object(b.a)(w,2),N=S[0],_=S[1],A=Object(a.useState)([]),D=Object(b.a)(A,2),P=D[0],R=D[1],I=Object(a.useState)(""),T=Object(b.a)(I,2),B=T[0],L=T[1],E=Object(a.useState)({}),z=Object(b.a)(E,2),H=z[0],W=z[1],G=Object(a.useState)(""),K=Object(b.a)(G,2),U=K[0],J=K[1],M=Object(a.useState)(!1),V=Object(b.a)(M,2),q=V[0],Y=V[1],Q=Object(a.useState)(","),X=Object(b.a)(Q,2),Z=X[0],$=X[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{});case 2:t=e.sent,R(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Ut.current.value,n=Jt.current.value,a=Mt.current.value,s=Kt.current.checked,""!==r&&""!==n&&""!==a){e.next=9;break}return J("Please, define all the separators"),Y(!0),e.abrupt("return");case 9:if(r!==n&&r!==a&&n!==a){e.next=13;break}return J("All the separators should have different values"),Y(!0),e.abrupt("return");case 13:if(null!==m&&void 0!==m){e.next=17;break}return J("Please, choose a file"),Y(!0),e.abrupt("return");case 17:return J(""),Y(!1),f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+N+"-------\n"}),e.next=23,ut(m,s,r,n,a);case 23:u.PushLog({type:"info",msg:"-------End Upload Operation "+N+"-------\n\n"}),_((function(e){return e+1})),f(100);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Gt(H),r=ve(r),void 0!==B&&""!==B){e.next=7;break}return J("Please, select one experiment"),Y(!0),e.abrupt("return");case 7:if(r.fields=r.fields.filter((function(e){return"number"===typeof e.value&&!isNaN(e.value)||"string"===typeof e.value&&""!==e.value||Array.isArray(e.value)&&0!==e.value.length})),!isNaN(r.step)){e.next=12;break}return J("Please, define the step number"),Y(!0),e.abrupt("return");case 12:if(0!==r.fields.length){e.next=16;break}return J("Please, define at least one field"),Y(!0),e.abrupt("return");case 16:return J(""),Y(!1),n={},(a=[]).push(r),n.history={add:a},f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+N+"-------\n"}),e.next=26,bt(B,n,Kt.current.checked);case 26:u.PushLog({type:"info",msg:"-------End Upload Operation "+N+"-------\n\n"}),_((function(e){return e+1})),f(100);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,a,s,c,i,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=P.filter((function(e){return e._id===t.target.value}))[0],n=r.protocol,a={_id:n},s={filter:JSON.stringify(a)},e.next=7,F("protocols",s);case 7:c=e.sent,i=c.docs[0],l=[],i.topics.map((function(e){return e.fields})).forEach((function(e){l=l.concat(e.map((function(e){var t="scalar"===e.type?NaN:"vector"===e.type?[NaN]:(e.type,"");return{name:e.name,value:t}})))})),(d={}).step=NaN,d.fields=l,W(d),L(t.target.value);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsx)("header",{className:"page-header",children:"Update Experiment History"}),Object(ie.jsxs)("main",{className:"page-content",children:[Object(ie.jsxs)(Dt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){C(e),J(""),Y(!1)},defaultActiveKey:"file",children:[Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"form",children:"Form"})}),Object(ie.jsx)(Dt.a.Item,{children:Object(ie.jsx)(Dt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ie.jsxs)(Ke.a,{fluid:!0,children:["form"===k&&Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Wt,{postHistory:te,values:H,ovdRef:Kt,handleExperimentChange:re,handleChanges:function(e,t){var r,n=Gt(H),a=n,s=-1;for(r=0;r<t.length-1;r++)a=a[t[r]],"number"===typeof t[r]&&(s=r);if("number"===typeof t[r]&&(s=r),a[t[r]]=e,-1!==s){var c="number"===typeof e?NaN:"";n=Nt(n,t.slice(0,s),void 0,void 0,c)}W(n)},experiments:P})}),"file"===k&&Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Ht,{postHistory:ee,arraySepRef:Jt,csvSep:Z,setCsvSep:$,floatSepRef:Mt,ovdRef:Kt,setCsvHeader:d,setCsvContent:n,setFile:v,file:m,csvContent:r,csvHeader:i})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:q?"red":"black"},children:U})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(zt.a,{now:h,label:"".concat(h,"%"),variant:100===h?"success":"info"})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Operation logs"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:u.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})]})]})}var qt=r(143),Yt=(r(72),s.a.createRef()),Qt=s.a.createRef(),Xt=s.a.createRef(),Zt=s.a.createRef(),$t=s.a.createRef();function er(){var e=Object(a.useContext)(Ze).logs,t=Object(a.useState)(0),r=Object(b.a)(t,2),n=r[0],c=r[1],i=Object(a.useState)(0),d=Object(b.a)(i,2),u=d[0],j=d[1],p=Object(a.useState)([]),h=Object(b.a)(p,2),x=h[0],O=h[1],m=Object(a.useState)(""),v=Object(b.a)(m,2),g=v[0],y=v[1],k=Object(a.useState)(!1),C=Object(b.a)(k,2),w=C[0],S=C[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{limit:100});case 2:t=e.sent,O(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var N=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,n,a,s,i,l,d,b,p,h,f;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Qt.current.value,n=Xt.current.value,a=Zt.current.value,s=Yt.current.value,i=Yt.current.selectedIndex,l=$t.current.checked,0!==i){t.next=10;break}return y("Please, select one or All experiment"),S(!0),t.abrupt("return");case 10:if(""!==r&&""!==a&&""!==n){t.next=14;break}return y("Please, define all the separators"),S(!0),t.abrupt("return");case 14:if(r!==n&&r!==a&&n!==a){t.next=18;break}return y("Please, define three different separators"),S(!0),t.abrupt("return");case 18:if(y(""),S(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),d=[],"All"!==s){t.next=36;break}b=0;case 25:if(!(b<x.length)){t.next=34;break}return t.next=28,ht(x[b]._id,r,n,a,l);case 28:p=t.sent,d.push(p),c((b+1)/x.length*100);case 31:b++,t.next=25;break;case 34:t.next=40;break;case 36:return t.next=38,ht(s,r,n,a,l);case 38:h=t.sent,d.push(h);case 40:if(!0!==l){t.next=46;break}return t.next=43,Object(qt.a)(d).blob();case 43:f=t.sent,Object(lt.saveAs)(f,"experiments_history.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_history.zip archive\n"});case 46:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 49:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,n,a,s,i,l,d,b,p,h,f,O,m;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Yt.current.value,n=Yt.current.selectedIndex,a=$t.current.checked,0!==n){t.next=7;break}return y("Please, select one or All experiment"),S(!0),t.abrupt("return");case 7:if(y(""),S(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),s=[],"All"===r)for(i=0;i<x.length;i++)l=new Blob([JSON.stringify(x[i],null,4)]),d=x[i]._id+".json",b=null,void 0===a||!1===a?Object(lt.saveAs)(l,d):b=new File([l],d),s.push(b),e.PushLog({type:"info",msg:d+" successfully downloaded.\n"}),c((i+1)/x.length*100);else p=x.filter((function(e){return e._id===r}))[0],h=new Blob([JSON.stringify(p,null,4)]),f=r+".json",O=null,void 0===a||!1===a?Object(lt.saveAs)(h,f):O=new File([h],f),s.push(O),e.PushLog({type:"info",msg:f+" successfully downloaded.\n"});if(!0!==a){t.next=19;break}return t.next=16,Object(qt.a)(s).blob();case 16:m=t.sent,Object(lt.saveAs)(m,"experiments_data.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_data.zip archive\n"});case 19:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsx)("header",{className:"page-header",children:"Download Experiment History"}),Object(ie.jsx)("main",{className:"page-content",children:Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Select experiment"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{sm:3,children:0!==x.length&&Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" experiment",ref:Yt,children:[Object(ie.jsxs)("option",{children:[re().select," experiment"]}),Object(ie.jsx)("option",{children:"All"}),s.a.Children.toArray(x.map((function(e){return Object(ie.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(le.a.Group,{className:"mb-3",children:Object(ie.jsx)(le.a.Check,{type:"checkbox",label:"Compress files in a single .zip archive",ref:$t})})})}),Object(ie.jsxs)(Ue.a,{children:[Object(ie.jsxs)(Je.a,{children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Download history as csv"})})}),Object(ie.jsxs)(Ue.a,{style:{paddingTop:"10px"},children:[Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Column Separator",ref:Qt,children:[Object(ie.jsx)("option",{value:",",children:","}),Object(ie.jsx)("option",{value:";",children:";"}),Object(ie.jsx)("option",{value:"-",children:"-"}),Object(ie.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Array separator",ref:Xt,children:[Object(ie.jsx)("option",{value:";",children:";"}),Object(ie.jsx)("option",{value:",",children:","}),Object(ie.jsx)("option",{value:".",children:"."}),Object(ie.jsx)("option",{value:"-",children:"-"})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(ie.jsx)(Je.a,{sm:2,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsxs)(le.a.Select,{"aria-label":"CSV Floating Point separator",ref:Zt,children:[Object(ie.jsx)("option",{value:".",children:"."}),Object(ie.jsx)("option",{value:",",children:","})]}),Object(ie.jsx)(le.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{variant:"primary",onClick:N,children:"Download History"})})})]}),Object(ie.jsxs)(Je.a,{children:[Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Download experiment data as json"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{variant:"primary",onClick:_,children:"Download Data"})})})]})]}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:g})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(zt.a,{now:n,label:"".concat(n,"%"),variant:100===n?"success":"info"})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Operation logs"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}r(72);var tr=s.a.createRef();function rr(){var e=Object(a.useContext)(Ze).logs,t=Object(a.useState)(0),r=Object(b.a)(t,2),n=r[0],c=r[1],i=Object(a.useState)(0),d=Object(b.a)(i,2),u=d[0],p=d[1],h=Object(a.useState)([]),x=Object(b.a)(h,2),O=x[0],m=x[1],v=Object(a.useState)(),g=Object(b.a)(v,2),y=g[0],k=g[1],C=Object(a.useState)(),w=Object(b.a)(C,2),S=w[0],N=w[1],_=Object(a.useState)(),A=Object(b.a)(_,2),D=A[0],P=(A[1],Object(a.useState)("")),R=Object(b.a)(P,2),I=R[0],T=R[1],B=Object(a.useState)(!1),L=Object(b.a)(B,2),E=L[0],z=L[1];Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{limit:100});case 2:t=e.sent,m(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var H=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,n,a;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==D){t.next=4;break}return T("Please, select one or All experiment"),z(!0),t.abrupt("return");case 4:if(r=[],n=Object(j.a)(S),""!==(a=tr.current.value)){t.next=11;break}return T("Please, define at least one step"),z(!0),t.abrupt("return");case 11:if(a.includes("*")?(r=r.concat(S),n=[]):a.replace(/\s/g,"").split(",").forEach((function(e){if(e.includes("/")){var t=e.split("-"),a=S.indexOf(parseInt(t[0])),s=S.indexOf(parseInt(t[1]));if(-1!==a&&-1!==s)for(var c=a;c<=s;c++)r.push(S[c]),n.splice(n.indexOf(S[c]),1)}else S.includes(parseInt(e))&&(r.push(parseInt(e)),n.splice(n.indexOf(parseInt(e)),1))})),0!==r.length){t.next=16;break}return T("The experiment history does not contain specified steps, please check them"),z(!0),t.abrupt("return");case 16:return T(""),z(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Remove Operation "+u+"-------\n"}),t.next=22,mt(y,r);case 22:e.PushLog({type:"info",msg:"-------End Remove Operation "+u+"-------\n\n"}),p((function(e){return e+1})),c(100),N(n);case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(ie.jsxs)("div",{className:"page",children:[Object(ie.jsx)("header",{className:"page-header",children:"Remove steps from Experiment History"}),Object(ie.jsx)("main",{className:"page-content",children:Object(ie.jsxs)(Ke.a,{fluid:!0,children:[Object(ie.jsx)(Ue.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Select experiment"})})}),Object(ie.jsxs)(Ue.a,{style:{paddingBottom:"10px"},children:[Object(ie.jsx)(Je.a,{sm:3,children:0!==O.length&&Object(ie.jsxs)(le.a.Select,{"aria-label":re().select+" experiment",onChange:function(e){var t=e.target.value;if(0===e.target.selectedIndex)return k(void 0),void N(void 0);var r=O.filter((function(e){return e._id===t}))[0].history.map((function(e){return e.step})).sort((function(e,t){return e-t}));k(t),N(r)},children:[Object(ie.jsxs)("option",{children:[re().select," experiment"]}),s.a.Children.toArray(O.map((function(e){return Object(ie.jsx)("option",{value:e._id,children:e._id})})))]})}),void 0!==y&&Object(ie.jsxs)(Je.a,{children:["History steps contained into ",Object(ie.jsx)("b",{children:y}),": ["," ",S.join(", ")," ]"]})]}),void 0!==S&&0===S.length&&Object(ie.jsx)(Ue.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:"The selected experiment's history does not contain steps"})}),void 0!==S&&0!==S.length&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ue.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{sm:3,children:Object(ie.jsxs)(le.a.Group,{className:"mb-3",children:[Object(ie.jsx)(le.a.Control,{type:"text",ref:tr}),Object(ie.jsxs)(le.a.Text,{className:"text-muted",children:["Define the steps comma separated.",Object(ie.jsx)("br",{})," intervals can be specified as begin-end (included)."," ",Object(ie.jsx)("br",{})," to remove all steps enter * ",Object(ie.jsx)("br",{}),"Example: 2, 3, 5-7"]})]})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(f.a,{onClick:H,children:"Remove steps"})})})]}),Object(ie.jsx)(Ue.a,{style:{paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("font",{style:{marginLeft:"5px",color:E?"red":"black"},children:I})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)(zt.a,{now:n,label:"".concat(n,"%"),variant:100===n?"success":"info"})})}),Object(ie.jsx)(Ue.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("b",{children:"Operation logs"})})}),Object(ie.jsx)(Ue.a,{children:Object(ie.jsx)(Je.a,{children:Object(ie.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}var nr=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1],i=Object(a.useState)([]),f=Object(b.a)(i,2),x=f[0],O=f[1],m=Object(a.useState)(),v=Object(b.a)(m,2),g=v[0],k=v[1],C=Object(a.useState)({}),w=Object(b.a)(C,2),S=w[0],N=w[1],_=s.a.useRef(),A=localStorage.getItem("token");function D(e){c((function(t){return[e].concat(t)}))}function P(e){var t=Object(j.a)(r);t.splice(e,1),c(t)}function R(){c([])}n=void 0!==z?z:window.location.origin+"/v1";var I={notifications:r,PushNotification:D,RemoveNotification:P,ClearNotifications:R};y.ClearNotifications=R,y.PushNotification=D,y.RemoveNotification=P,Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("types",{},"");case 3:t=e.sent,k(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===g)try{e()}catch(t){console.log(t)}}),[]);var T={types:g,data:S,UpdateData:function(e,t){N((function(r){return Object(u.a)(Object(u.a)({},r),{},Object(d.a)({},t,Object(j.a)(e)))}))}};function B(e){O((function(t){return[e].concat(t)}));var t=document.getElementById("logger");null!==t&&void 0!==t&&(t.scrollTop=t.scrollHeight)}function L(e){var t=Object(j.a)(x);t.splice(e,1),O(t)}function E(){O([])}var H={logs:x,PushLog:B,RemoveLog:L,ClearLogs:E};return dt.ClearLogs=E,dt.PushLog=B,dt.RemoveLog=L,1==/Mobi/i.test(window.navigator.userAgent)?_.current="vertical":_.current=G,null===A?Object(ie.jsx)("div",{className:"app",children:Object(ie.jsx)(p.a,{children:Object(ie.jsxs)(h.d,{children:[Object(ie.jsx)(h.b,{path:"/",element:Object(ie.jsx)(be,{})}),Object(ie.jsx)(h.b,{path:"/add/tenants",element:Object(ie.jsx)(Ft,{resource:"tenants"})}),Object(ie.jsx)(h.b,{path:"*",element:Object(ie.jsx)(h.a,{to:"/",replace:!0})})]})})}):Object(ie.jsx)(Ze.Provider,{value:{notifications:I,fetched:T,logs:H},children:Object(ie.jsx)(p.a,{children:Object(ie.jsxs)(Ke.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100vh",width:"99vw"},children:["horizontal"===_.current?Object(ie.jsx)(Ue.a,{style:{padding:0},children:Object(ie.jsx)(ot,{})}):"",Object(ie.jsxs)(Ue.a,{style:{padding:0},children:["vertical"===_.current?Object(ie.jsx)(Je.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(ie.jsx)(Pe,{})}):"",1==/Mobi/i.test(window.navigator.userAgent)&&Object(ie.jsx)(Je.a,{md:"auto",style:{padding:0},children:Object(ie.jsx)(et,{})}),Object(ie.jsx)(Je.a,{style:{paddingLeft:0,paddingRight:0},children:Object(ie.jsxs)(h.d,{children:[Object(ie.jsx)(h.b,{path:"/",element:Object(ie.jsx)(pe,{})}),Object(ie.jsx)(h.b,{path:"/home",element:Object(ie.jsx)(pe,{})}),Object(ie.jsx)(h.b,{path:"/viewProfile",element:Object(ie.jsx)(Me,{})}),Object(ie.jsx)(h.b,{path:"/add/experiments/",element:Object(ie.jsx)(Bt,{})}),Object(ie.jsx)(h.b,{path:"/add/measurements/",element:Object(ie.jsx)(Et,{})}),Object(ie.jsx)(h.b,{path:"/edit/:resource/:id",element:Object(ie.jsx)(At,{})}),Object(ie.jsx)(h.b,{path:"/downloadexperiment",element:Object(ie.jsx)(er,{})}),Object(ie.jsx)(h.b,{path:"/updatehistory",element:Object(ie.jsx)(Vt,{})}),Object(ie.jsx)(h.b,{path:"/removesteps",element:Object(ie.jsx)(rr,{})}),Object(ie.jsx)(h.b,{path:"/add/:resource/",element:Object(ie.jsx)(Ft,{})}),Object(ie.jsx)(h.b,{path:"/:page",element:Object(ie.jsx)(Ge,{res:":page"})}),Object(ie.jsx)(h.b,{path:"/unauthorized",element:Object(ie.jsx)(Ve,{})}),Object(ie.jsx)(h.b,{path:"/404",element:Object(ie.jsx)(he,{})}),Object(ie.jsx)(h.b,{path:"*",element:Object(ie.jsx)(h.a,{to:"/404",replace:!0})})]})}),"vertical"===_.current&&0==/Mobi/i.test(window.navigator.userAgent)&&Object(ie.jsx)(Je.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(ie.jsx)(et,{})})]})]})})})};i.a.render(Object(ie.jsx)(s.a.StrictMode,{children:Object(ie.jsx)(nr,{})}),document.getElementById("root"))}},[[275,1,2]]]);
//# sourceMappingURL=main.a31a54a9.chunk.js.map