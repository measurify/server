(this["webpackJsonpmeasurify-dashboard"]=this["webpackJsonpmeasurify-dashboard"]||[]).push([[0],{108:function(e,t,r){},123:function(e,t,r){},222:function(e,t,r){},248:function(e,t){},250:function(e,t){},265:function(e,t,r){},269:function(e,t,r){},270:function(e,t,r){},271:function(e,t,r){},272:function(e,t,r){},273:function(e,t,r){},274:function(e,t,r){},275:function(e,t,r){},284:function(e,t,r){"use strict";r.r(t);var a,n=r(1),s=r.n(n),c=r(38),i=r.n(c),o=(r(222),r(6)),l=r(9),d=r(4),u=r(5),j=r(19),b=r(3),p=r(23),h=r(16),f=r(323),m={username:"Nome utente",password:"Password",tenant:"Organizzazione",email:"email",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",resources:"Risorse",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",preview:"Anteprima",configuration:"Configurazione",clear_all:"Cancella tutto",no_changes_found:"Nessun cambiamento trovato",resource_successfully_edited:"Resoursa modificata con successo!",resource_successfully_posted:"Resource successufully posted!",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",email_suggestion:"Inserisci la tua email",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",email_change_confirm:"L'indirizzo email verr\xe0 modificato, procedere?",password_changed:"Password cambiata con successo",email_changed:"Email cambiata con successo",password_rules:"La password deve contenere almeno 6 caratteri, almeno una lettera maiuscola e un numero.",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",import:"Importa",export:"Esporta",password_recovery:"Recupero Password",password_reset:"Reset Password",forgot_password_link:"Hai dimenticato la tua password?",go_login_page:"Torna alla pagina di login",email_sent_successfully:"Email inviata, segui le istruzioni contenute per cambiare la tua password",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta",no_file:"Si prega di selezionare un file",duplicate_resource_error:"Nel database \xe8 gi\xe0 presente una risorsa con",error_imported_file:"Nel file sono presenti errori, non \xe8 stato possibile importarlo",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle.",old_pass_empty:"Per favore, inserire la vecchia password",old_pass_wrong:"La vecchia password \xe8 sbagliata",pass_not_null:"La password non pu\xf2 essere vuota",missing_tenant:"Si prega di inserire l'organizzazione",missing_email:"Si prega di inserire l'email",missing_token:"Si prega di inserire il token",missing_password:"Si prega di inserire la propria password",missing_username:"Si prega di inserire il proprio username",stronger_password_required:"Si prega di inserire una password pi\xf9 robusta",email_sent_errors:"Non \xe8 stato possibile inviare la mail, controllare i dati inseriti.",password_not_changed_errors:"Non \xe8 stato possibile cambiare la password.",network_error:"Errore di rete, si prega di controllare la connessione.",empty_email_error:"Il campo email \xe8 vuoto, si prega di inserire un indirizzo email valido.",email_not_match:"L'indirizzo email inserito e la sua conferma non combaciano, si prega di reinserirle.",email_same_as_old:"La nuova email coincide con quella vecchia, si prega di inserire un indirizzo email diverso dal precedente.",generic_file_post_error:"Il file selezionato non pu\xf2 essere caricato perch\xe9 contiene errori."},O={username:"Username",password:"Password",tenant:"Tenant",email:"Email",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",resources:"Resources",tools:"Tools",notifications:"Notifications",file_content:"File content",preview:"Preview",configuration:"Configuration",clear_all:"Clear all",no_changes_found:"No changes found",resource_successfully_edited:"Resource successfully edited!",resource_successfully_posted:"Resource successufully posted!",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",email_suggestion:"Insert your email",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",email_change_confirm:"Email address will be changed, do you confirm?",password_changed:"Password changed successfully",email_changed:"Email changed successfully",password_rules:"Password length should be at least 6 characters, contains at least one uppercase character and one number.",forgot_password_link:"Have you forgot your password?",go_login_page:"Go to login page",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",import:"Import",export:"Export",password_recovery:"Password Recovery",password_reset:"Reset Password",email_sent_successfully:"Email sent, please follow the provided instruction to reset the password",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired",no_file:"Please, select a file",duplicate_resource_error:"The database already contains a resource with",error_imported_file:"File contains errors. It was not possible to import it",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",old_pass_empty:"Please, enter old password",old_pass_wrong:"The old password is wrong",pass_not_null:"Password cannot be empty",missing_tenant:"Please, insert your tenant",missing_email:"Please, insert your email",missing_token:"Please, insert your token",missing_password:"Please, insert your password",missing_username:"Please, insert your username",stronger_password_required:"Please, insert stronger password",email_sent_errors:"It was not possible to send the mail, please check the provided info.",password_not_changed_errors:"It was not possible to change the password.",network_error:"Network error, please check internet connection",empty_email_error:"Email field is empty, please insert a valid email address.",email_not_match:"Provided email and the confirmation do not match. Please insert them again.",email_same_as_old:"The new email is the same as the old email. Please insert a different email address.",generic_file_post_error:"The selected file cannot be uploaded because it contains errors."},x=r(223).default,v=r(241),g=x.create({httpsAgent:new v.Agent({})}),y={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function w(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={username:"".concat(e),password:"".concat(t),tenant:"".concat(r)},c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=a+"/login";return new Promise((function(e,t){g.post(i,s,c).then((function(t){!0===n&&(localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-email",t.data.user.email),localStorage.setItem("user-tenant",r),localStorage.setItem("login-time",(new Date).getTime().toString())),e(t)})).catch((function(e){t(e)}))}))}function _(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:W()}},t=a+"/login";return new Promise((function(r,a){g.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),r(e)})).catch((function(e){a(e)}))}))}function k(e,t){return C.apply(this,arguments)}function C(){return C=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i,l,d=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:{},void 0===(s=d.length>3&&void 0!==d[3]?d[3]:void 0)&&(s=W()),c=a+"/"+t+"/file",console.log("POST file:"+c),i={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:s},Object.entries(n).forEach((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];i[r]=a})),l={headers:i},e.abrupt("return",new Promise((function(e,a){g.post(c,r,l).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),a({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function N(e,t){return S.apply(this,arguments)}function S(){return S=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=W()),s=a+"/"+t+"/",console.log("POST :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,a){g.post(s,r,c).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function P(e,t,r){return D.apply(this,arguments)}function D(){return D=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c,i,l=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a+"/"+t+"/"+n,void 0===(s=l.length>3&&void 0!==l[3]?l[3]:void 0)&&(s=W()),console.log("PUT :"+c),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:s}},e.abrupt("return",new Promise((function(e,a){g.put(c,r,i).then((function(a){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)}),e({response:a})})).catch((function(e){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function A(e,t){return T.apply(this,arguments)}function T(){return T=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a+"/"+t,void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=W()),void 0!==r&&(s+="/"+r),console.log("DELETE :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,a){g.delete(s,c).then((function(a){void 0!==r?y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+r+", of type: "+t}):y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:a})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+r+", of type: "+t+". "+e.message}),404===e.statusCode&&y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),a({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return I=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},s=a+"/"+t+"/",void 0===(n=i.length>2?i[2]:void 0)&&(n=W()),s=void 0!==r.filter?s.concat("?filter="+r.filter):s.concat("?filter="),void 0!==r.limit&&(s=s.concat("&limit="+r.limit)),void 0!==r.page&&(s=s.concat("&page="+r.page)),void 0!==r.select&&0!==r.length&&(s=s.concat('&select=["'+r.select.join('","')+'"]')),console.log("GET :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 11:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function E(e,t,r){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a+"/"+t+"/"+r,void 0===n&&(n=W()),console.log("GET ONE:"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a+"/self/reset?tenant="+t,s=JSON.stringify({email:r}),console.log("POST password reset request:"+n),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,t){g.post(n,s,c).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,r){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a+"/self",console.log("PUT password reset:"+s),c=JSON.stringify({reset:r,password:n,tenant:t}),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,t){g.put(s,c,i).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a+"/types/passwordStrength",console.log("GET password strength:"+t),r={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},e.abrupt("return",new Promise((function(e,a){g.get(t,r).then((function(t){e({response:t})})).catch((function(e){a({error:e})}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return localStorage.getItem("token")}function U(e){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(Object(o.a)().mark((function e(t){var r,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={filter:JSON.stringify({feature:t})},e.prev=1,e.next=4,R("measurements",r);case 4:if(!(e.sent.totalDocs>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return a={filter:JSON.stringify({features:t})},e.next=12,R("devices",a);case 12:if(!(e.sent.totalDocs>0)){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function J(){return!0}function V(){var e={users:["username","type","_actions"],roles:["_id","_actions"],tags:["_id","_actions"],things:["_id","_actions"],features:["_id","_actions"],devices:["_id","tags","_actions"],protocols:["_id","description","_actions"],experiments:["_id","description","protocol","_actions"],measurements:["thing","feature","device","startDate","tags","_actions"]},t={features:{_actions:"Management"},tags:{_actions:"Management"},devices:{_actions:"Management"},things:{_actions:"Management"},users:{_actions:"Management"},roles:{_actions:"Management"},protocols:{_actions:"Management"},experiments:{_actions:"Management"},measurements:{_actions:"Management"}},r={users:["admin"],roles:["admin"],protocols:["admin"]},a={features:["view","edit","duplicate","delete"],users:["view","delete"],roles:["view","delete"],things:["view","delete"],tags:["view","edit","delete"],devices:["view","edit","delete"],protocols:["view","delete"],experiments:["view","edit","duplicate","delete"],measurements:["view","edit","delete"]},n={users:["username","type","email","fieldmask","status"],roles:["_id","default","actions"],features:[{items:["name","type","unit","dimension"]},"tags"],tags:["tags"],things:["_id","visibility","tags"],devices:["_id","features","tags","scripts"],protocols:["_id","description","metadata","topics"],experiments:["_id","description","state","startDate","endDate","manager","place","protocol","metadata","history"],measurements:["thing","feature","device","startDate","visibility","tags","samples"]},s={experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",protocol:"",place:[{name:""}],metadata:[{name:"",value:""}],tags:[""]},features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},tags:{tags:[""]},devices:{visibility:"",tags:[""]},measurements:{tags:[""]}},c={tags:{_id:"",tags:[""]},things:{_id:"",visibility:"",tags:[""]},features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN,range:[""]}],tags:[""]},devices:{_id:"",features:[""]},users:{username:"",password:"",email:"",type:""},roles:{_id:"",default:{create:!1,read:"",update:"",delete:""},actions:[{entity:"",crud:{create:!1,read:"",update:"",delete:""}}]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}]},measurements:{thing:"",device:"",tags:[""]}},i={};i.features={_id:{_type:"disable",policy:U},items:{_type:"disable",policy:U}},i.experiments={protocol:{_type:"disable",policy:J},metadata:{name:{_type:"disable",policy:J}}};var o={tags:["form","file"],things:["form","file"],features:["form","file"],users:["form","file"],roles:["form","file"],devices:["form","file"],protocols:["form","file"],experiments:["form","file"],measurements:["form"]},l={users:{status:"UserStatusTypes"},roles:{default:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"},actions:{crud:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"}}},devices:{measurementBufferPolicy:"MeasurementBufferPolicyTypes",visibility:"VisibilityTypes"},things:{visibility:"VisibilityTypes"},tag:{visibility:"VisibilityTypes"}};l.things={visibility:"VisibilityTypes"},l.scripts={visibility:"VisibilityTypes"},l.rights={type:"RightTypes"},l.features={items:{type:"ItemTypes"}},l.measurements={visibility:"VisibilityTypes"},l.issues={type:"IssueTypes",status:"IssueStatusType"},l.protocols={metadata:{type:"MetadataTypes"},field:{type:"TopicFieldTypes"}},l.experiments={visibility:"VisibilityTypes"},l.constraints={type1:"ConstraintTypes",type2:"ConstraintTypes"};var d={users:{type:"roles"},tags:{tags:"tags"},things:{tags:"tags"},devices:{features:"features"},features:{tags:"tags"},measurements:{device:"devices",thing:"things",tags:"tags"}},u={protocols:{_id:"Please, enter protocol's name.",description:"Please, enter a short protocol's description."},experiments:{_id:"Please, enter experiment's name (N.B. don't use the # character in experiment's name).",state:"Please, enter 0 for ongoing experiment, 1 for finished experiment.",description:"Please, enter a short experiment's description.",manager:"Please, enter the experiment's company name (as a short Acronym).",startDate:"Please, use yyyy/mm/dd format.",endDate:"Please, use yyyy/mm/dd format."},updateHistory:{step:"Please, enter the step number."}};return{operationPages:["updatehistory","downloadexperiment","removesteps"],pages:e,aliasPages:t,restrictionPages:r,pageActions:a,viewFields:n,editFields:s,addFields:c,editFieldsSpecifier:i,addTypes:o,fetchedPageTypes:l,fetchedPageData:d,guidelines:u}}var q=void 0,X="CDB Dashboard",Y=[],Q="vertical",Z=[],$={},ee={},te={},re={},ae={},ne={},se={},ce={},ie={},oe={},le={},de={};function ue(){var e,t=localStorage.getItem("user-tenant");e=""===t||null===t?V():t.startsWith("EM-")?function(){var e={users:["username","type","email","_actions"],roles:["_id","_actions"],protocols:["_id","description","_actions"],experiments:["_id","description","protocol","_actions"]},t={users:{_actions:"Management"},roles:{_actions:"Management"},protocols:{_actions:"Management"},experiments:{_actions:"Management"}},r={users:["admin"],roles:["admin"],protocols:["admin"]},a={users:["view","delete"],roles:["view","delete"],protocols:["view","delete"],experiments:["view","edit","duplicate","delete"]},n={users:["username","type","fieldmask","status"],roles:["_id","default","actions"],protocols:["_id","description","metadata","topics"],experiments:["_id","description","state","startDate","endDate","manager","place","protocol","metadata","history"]},s={experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",protocol:"",place:[{name:""}],metadata:[{name:"",value:""}],tags:[""]}},c={users:{username:"",password:"",email:"",type:""},roles:{_id:"",default:{create:!1,read:"",update:"",delete:""},actions:[{entity:"",crud:{create:!1,read:"",update:"",delete:""}}]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}]}},i={};return i.experiments={protocol:{_type:"disable",policy:J},metadata:{name:{_type:"disable",policy:J}}},{operationPages:["updatehistory","downloadexperiment","removesteps"],pages:e,aliasPages:t,restrictionPages:r,pageActions:a,viewFields:n,editFields:s,addFields:c,editFieldsSpecifier:i,addTypes:{users:["form","file"],roles:["form","file"],protocols:["form","file"],experiments:["form","file"]},fetchedPageTypes:{users:{status:"UserStatusTypes"},roles:{default:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"},actions:{crud:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"}}},protocols:{metadata:{type:"MetadataTypes"},field:{type:"TopicFieldTypes"}},experiments:{visibility:"VisibilityTypes"}},fetchedPageData:{users:{type:"roles"}},guidelines:{protocols:{_id:"Please, enter protocol's name.",description:"Please, enter a short protocol's description."},experiments:{_id:"Please, enter experiment's name (N.B. don't use the # character in experiment's name).",state:"Please, enter 0 for ongoing experiment, 1 for finished experiment.",description:"Please, enter a short experiment's description.",manager:"Please, enter the experiment's company name (as a short Acronym).",startDate:"Please, use yyyy/mm/dd format.",endDate:"Please, use yyyy/mm/dd format."},updateHistory:{step:"Please, enter the step number."}}}}():V(),Object.assign(Z,e.operationPages),Object.assign($,e.pages),Object.assign(ee,e.aliasPages),Object.assign(te,e.restrictionPages),Object.assign(re,e.pageActions),Object.assign(ae,e.viewFields),Object.assign(ne,e.editFields),Object.assign(se,e.addFields),Object.assign(ce,e.editFieldsSpecifier),Object.assign(ie,e.addTypes),Object.assign(oe,e.fetchedPageTypes),Object.assign(le,e.fetchedPageData),Object.assign(de,e.guidelines)}function je(){var e=localStorage.getItem("language");return 0===Y.length?O:(1===Y.length&&(e=Y[0]),"it"===e?m:"en"===e?O:"it"===navigator.language.substring(0,2)?m:(navigator.language.substring(0,2),O))}var be=void 0;function pe(){return he.apply(this,arguments)}function he(){return(he=Object(l.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("user-role"))&&void 0!==t&&""!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,E("roles",t);case 6:void 0!==(r=e.sent)&&localStorage.setItem("role",JSON.stringify(r.response.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function fe(e,t,r){if(void 0===be){var a=localStorage.getItem("role");if(void 0===a||null===a)return function(e,t,r){if("create"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("read"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}}if("update"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("delete"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}return!1}(e,t,r);be=JSON.parse(a)}if(0!==be.actions.length){var n=be.actions.filter((function(e){return e.entity===t}))[0];if(void 0!==n&&void 0!==n[r])return"none"!==n[r]&&!1!==n[r]}return"none"!==be.default[r]&&!1!==be.default[r]}r(123),r(265);var me,Oe,xe,ve=r(0),ge=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(ve.jsxs)("div",{children:[je().language,Object(ve.jsxs)("div",{children:[Y.includes("it")&&Object(ve.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),Y.includes("en")&&Object(ve.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},ye=["title","titleId"];function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ke(e,t){var r=e.title,a=e.titleId,s=_e(e,ye);return n.createElement("svg",we({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 2000 684.1443",style:{enableBackground:"new 0 0 2000 684.1443"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,me||(me=n.createElement("style",{type:"text/css"},"\r\n\t.st0{fill:#412DDC;}\r\n")),Oe||(Oe=n.createElement("g",{id:"Ebene_1"})),xe||(xe=n.createElement("g",{id:"Ebene_2"},n.createElement("g",{id:"Ebene_1_00000087379663538115244230000007289071449435198639_"},n.createElement("g",null,n.createElement("g",null,n.createElement("g",null,n.createElement("path",{className:"st0",d:"M273.8813,0l-18.8949,154.1839h-78.9261L195.0387,0H80.6832L30.1849,411.0756h114.3555l22.154-180.0848 h78.8426l-22.154,180.0848h114.3555L388.2368,0H273.8813z"}),n.createElement("path",{className:"st0",d:"M432.8709,2.2803l-9.2844,75.5039h114.3535l9.2864-75.5039H432.8709z M420.0013,106.6177 l-37.3841,304.4579h114.3555l37.4656-304.4579H420.0013z"})),n.createElement("path",{className:"st0",d:"M1135.3733,165.1794l-0.4077-58.5617h-97.7394l-37.3841,304.4579h114.3535l21.1777-172.0214 c1.7101-14.1721,10.3442-20.1178,29.4857-20.1178h54.7338l14.6614-118.9166 C1191.5726,100.0198,1156.9567,126.4099,1135.3733,165.1794z"}),n.createElement("path",{className:"st0",d:"M1263.7954,106.5778h114.3672l-37.3903,304.5068H1226.417L1263.7954,106.5778z M1276.6091,2.2963h114.3553 l-9.2589,75.5126h-114.3672L1276.6091,2.2963z"}),n.createElement("path",{className:"st0",d:"M1712.9618,106.5778l-136.6525,304.5068h-109.7969l-62.5334-304.5068h116.1033l15.3057,190.612 l61.4706-190.612H1712.9618z"}),n.createElement("path",{className:"st0",d:"M1998.9126,186.153l-11.4437,93.2038h-166.2128l-6.2474,50.948 c-1.2637,10.2274,1.4762,17.8566,24.2103,17.8566c20.8091,0,26.9502-4.3933,28.1194-13.9593l3.0942-25.1787h113.3988 l-2.8462,23.1474c-6.7908,55.294-37.0714,85.4801-150.293,85.4801c-118.9495,0-136.3809-35.7368-129.0587-95.4713 l15.5654-126.6967c7.334-59.7109,33.552-95.4477,152.4896-95.4477C1982.9102,100.0351,2005.6915,130.9535,1998.9126,186.153z  M1861.1619,169.5247c-22.7578,0-27.3518,7.6056-28.6036,17.833l-5.6805,46.2712h52.8138l6.0703-49.4835 C1886.9429,174.5557,1881.9591,169.5247,1861.1619,169.5247z"}),n.createElement("path",{className:"st0",d:"M851.1967,0H701.5729l-18.8969,153.8583h-97.1688l-9.3659,76.8069h97.0872l-22.1541,180.4104h149.6238 c126.5709,0,161.5131-35.2673,169.0873-96.436l26.7972-218.2031C1004.0756,35.2678,977.7676,0,851.1967,0z M881.8218,99.5311 L855.7563,311.626c-1.7101,13.8465-11.076,22.6427-45.6105,22.6427h-35.2683l12.8697-104.9071h-56.1179l9.0397-74.2819h56.1994 l9.6125-78.2729h35.2663C876.3633,76.8069,883.5319,85.6036,881.8218,99.5311z"})),n.createElement("g",null,n.createElement("path",{className:"st0",d:"M110.5972,539.2612l-9.4614,77.0629c-2.2112,18.0159-14.2417,30.3447-54.8392,30.3447H0l16.9143-137.7523 h46.2926C103.8044,508.9164,112.8124,521.2452,110.5972,539.2612z M61.123,525.8904H38.4976L25.7473,629.6988h22.6333 c23.1264,0,28.3363-7.2263,29.2829-14.9139l9.0835-73.9846C87.6895,533.1127,84.2533,525.8904,61.123,525.8904z"}),n.createElement("path",{className:"st0",d:"M216.8713,570.5604l-3.6191,29.4777H149.409l-2.5334,20.6368 c-0.7914,6.4507-0.0398,12.6072,18.6284,12.6072c16.8706,0,20.5652-3.1657,21.2811-9.012l1.4158-11.5056h23.4923 l-1.4556,11.8317c-1.9249,15.6815-12.7026,24.3116-46.6505,24.3116c-36.4256,0-42.3633-12.0424-40.3151-28.7181l5.6235-45.8193 c2.0482-16.6796,10.9408-28.7221,47.3704-28.7221C210.2138,545.6483,218.7962,554.8948,216.8713,570.5604z M174.345,561.278 c-18.6682,0-20.9311,6.1564-21.7225,12.6031l-1.6425,13.3867h40.3509l2.0084-16.3774 C194.0591,565.0403,191.2155,561.278,174.345,561.278z"}),n.createElement("path",{className:"st0",d:"M301.256,583.263l1.6664-13.5696c0.5727-4.6531-2.2709-8.4153-18.5449-8.4153 c-16.2701,0-19.9647,3.1617-20.5374,7.8148l-1.0579,8.6381c-2.076,16.9064,62.1331,9.0398,58.6771,37.2091l-1.376,11.2032 c-1.7817,14.4803-12.6867,22.7645-46.4636,22.7645s-42.5343-9.2307-40.7566-23.7111l1.7061-13.9037h23.4923l-1.6664,13.5736 c-0.5727,4.6531,2.2709,8.4154,19.1414,8.4154c16.8705,0,20.5652-3.1657,21.1379-7.8149l1.0579-8.6421 c2.076-16.9023-61.9581-9.0358-58.5021-37.2051l1.3761-11.2033c1.7777-14.4684,12.5117-22.7685,45.6921-22.7685 c33.1764,0,41.7588,9.2466,39.981,23.715l-1.7061,13.8997H301.256z"}),n.createElement("path",{className:"st0",d:"M353.8004,547.8873h23.6633l-12.1259,98.7814h-23.6673L353.8004,547.8873z M357.9763,513.8679h23.6673 l-2.1953,17.8648H355.785L357.9763,513.8679z"}),n.createElement("path",{className:"st0",d:"M389.017,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4967-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7393,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9527,28.8096-46.8494,28.8096C395.5274,684.1443,387.0921,675.5977,389.017,659.9163z M457.3623,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6867,12.3049l-4.7685,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309C453.7432,625.1053,456.5708,619.2432,457.3623,612.7964z"}),n.createElement("path",{className:"st0",d:"M514.2576,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9497-11.3823 c25.7433,0,34.1149,10.0818,31.8798,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043c-14.1144,0-21.4123,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673 L514.2576,547.8873z"}),n.createElement("path",{className:"st0",d:"M627.2013,547.8873h23.6633l-12.1259,98.7814h-23.6673L627.2013,547.8873z M631.3771,513.8679h23.6673 l-2.1953,17.8648h-23.6633L631.3771,513.8679z"}),n.createElement("path",{className:"st0",d:"M676.0392,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9496-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673L676.0392,547.8873z"}),n.createElement("path",{className:"st0",d:"M775.278,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4968-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7354,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9528,28.8096-46.8494,28.8096C781.7884,684.1443,773.3531,675.5977,775.278,659.9163z M843.6232,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6868,12.3049l-4.7684,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309S842.8318,619.2432,843.6232,612.7964z"}),n.createElement("path",{className:"st0",d:"M1010.4437,612.4146h-42.073l-14.2258,34.2542h-24.5422l61.0076-137.7523h24.3115l26.0894,137.7523 h-25.2104L1010.4437,612.4146z M1007.791,595.4526l-8.8568-56.6289l-23.5201,56.6289H1007.791z"}),n.createElement("path",{className:"st0",d:"M1060.4349,620.6312l8.9324-72.7438h23.6633l-8.7455,71.2445 c-1.1176,9.0795,3.7662,13.8043,17.2842,13.8043s20.8118-5.202,21.9054-14.1065l8.7097-70.9423h23.6674l-12.126,98.7814 h-19.3204l-0.338-9.1432c-6.6417,7.1984-18.028,11.3823-32.6077,11.3823 C1065.6527,648.9078,1058.1998,638.826,1060.4349,620.6312z"}),n.createElement("path",{className:"st0",d:"M1199.8815,620.1062c-0.7915,6.4507,0.1432,11.1078,10.4318,11.1078h14.8383l-1.8971,15.4547h-18.9187 c-25.437,0-30.1101-10.3721-28.0579-27.0478l6.9081-56.2789h-11.1556l1.8931-15.4547h11.1595l2.3147-18.8551l24.7053-8.4671 l-3.3527,27.3222h26.6342l-1.8971,15.4547h-26.6381L1199.8815,620.1062z"}),n.createElement("path",{className:"st0",d:"M1334.0784,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1330.153,545.6483,1336.1265,557.3925,1334.0784,574.0681z M1310.4707,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 c18.6681,0,20.8953-5.8582,21.6868-12.3089L1310.4707,573.5829z"}),n.createElement("path",{className:"st0",d:"M1468.0803,545.6522c22.7526,0,31.2356,9.183,28.9647,27.6761l-9.004,73.3404h-23.6672l8.821-71.837 c1.1533-9.3818-3.8379-13.2037-14.9617-13.2037c-11.1237,0-18.3102,4.2991-19.4397,13.502l-8.7853,71.5388h-22.7924 l8.8171-71.837c1.1533-9.3818-3.8379-13.2037-14.9615-13.2037c-11.1238,0-18.3103,4.2991-19.4397,13.502l-8.7853,71.5388 h-23.6633l12.1299-98.7775h19.3164l0.3619,8.475c6.6178-7.1268,16.3774-10.7181,29.4937-10.7181 c14.3253,0,23.2697,3.7861,26.9364,11.5771c6.4547-7.795,16.5166-11.5771,30.6589-11.5771V545.6522z"}),n.createElement("path",{className:"st0",d:"M1608.5012,574.3704l-8.8767,72.2984h-19.3164l-0.6045-6.4587 c-5.7509,5.3133-16.7155,8.6978-33.8962,8.6978c-27.175,0-33.0531-8.833-31.5419-21.1617l2.1238-17.3041 c1.5153-12.3248,9.5449-20.9868,36.7159-20.9868c14.8025,0,24.0848,2.2072,29.1636,5.8303l2.6288-21.4044 c0.7914-6.4467,0.1233-12.6031-18.1034-12.6031c-15.8326,0-19.4397,3.1617-20.1556,9.0119l-1.5829,12.8737h-23.2576 l1.6425-13.3748c1.9249-15.6814,12.4481-24.1406,45.2745-24.1406C1604.6117,545.6483,1610.5494,557.6907,1608.5012,574.3704z  M1578.3911,626.8791l1.913-15.5701c0.4932-4.0526-3.619-7.2144-21.0901-7.2144c-15.6736,0-18.7677,3.1617-19.2648,7.2144 l-1.913,15.5701c-0.4971,4.0526,1.8215,7.2183,17.495,7.2183C1573.0023,634.0974,1577.894,630.9316,1578.3911,626.8791z"}),n.createElement("path",{className:"st0",d:"M1655.7285,620.1062c-0.7915,6.4507,0.1431,11.1078,10.4316,11.1078h14.8384l-1.8971,15.4547h-18.9187 c-25.4371,0-30.1101-10.3721-28.058-27.0478l6.9081-56.2789h-11.1555l1.8931-15.4547h11.1595l2.3147-18.8551l24.7052-8.4671 l-3.3525,27.3222h26.6342l-1.8971,15.4547h-26.6382L1655.7285,620.1062z"}),n.createElement("path",{className:"st0",d:"M1706.8651,547.8873h23.6633l-12.126,98.7814h-23.6674L1706.8651,547.8873z M1711.041,513.8679h23.6672 l-2.1953,17.8648h-23.6633L1711.041,513.8679z"}),n.createElement("path",{className:"st0",d:"M1838.8468,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1834.9214,545.6483,1840.8949,557.3925,1838.8468,574.0681z M1815.2391,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 s20.8953-5.8582,21.6868-12.3089L1815.2391,573.5829z"}),n.createElement("path",{className:"st0",d:"M1866.0854,547.8873h19.3164l0.338,9.1432c6.9001-7.4131,17.4513-11.3823,32.9497-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9285,72.7399h-23.6672l8.7494-71.2405 c1.1136-9.0836-3.7701-13.8043-17.8846-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6674L1866.0854,547.8873z"})))))))}var Ce=n.forwardRef(ke);r.p;function Ne(){return Object(ve.jsxs)(s.a.Fragment,{children:[Object(ve.jsx)("div",{className:"logo-section",children:Object(ve.jsx)(Ce,{})}),Object(ve.jsx)("div",{className:"title-section",children:"Measurify"}),Object(ve.jsx)("br",{}),Object(ve.jsxs)("div",{className:"subtitle-section",children:["Powered by\xa0",Object(ve.jsx)("a",{target:"_blank",href:"https://measurify.org/",children:"Measurify"})]})]})}var Se=r(340),Pe=s.a.createRef(),De=s.a.createRef(),Ae=s.a.createRef(),Te=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),r=t[0],a=t[1];function s(){return(s=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Pe.current.value,n=De.current.value,s=Ae.current.value,""!==r){e.next=7;break}return a(je().missing_username),e.abrupt("return");case 7:if(""!==n){e.next=10;break}return a(je().missing_password),e.abrupt("return");case 10:return e.prev=10,e.next=13,w(r,n,s);case 13:return e.next=15,pe();case 15:window.location.replace("/"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 22:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return Object(ve.jsxs)("div",{className:"auth-page",children:[Object(ve.jsx)("div",{className:"title-wrapper",children:Object(ve.jsx)(Ne,{})}),Y.length>1&&Object(ve.jsx)("div",{className:"language-wrapper",children:Object(ve.jsx)(ge,{})}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsxs)("div",{className:"login-section",children:[Object(ve.jsx)("h4",{children:je().login}),Object(ve.jsxs)(Se.a,{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"username",children:[Object(ve.jsx)(Se.a.Label,{children:je().username}),Object(ve.jsx)(Se.a.Control,{ref:Pe,type:"text",placeholder:je().username_suggestion})]}),Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ve.jsx)(Se.a.Label,{children:je().password}),Object(ve.jsx)(Se.a.Control,{type:"password",ref:De,placeholder:je().password_suggestion})]}),Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ve.jsx)(Se.a.Label,{children:je().tenant}),Object(ve.jsx)(Se.a.Control,{type:"text",ref:Ae,placeholder:je().tenant_suggestion})]}),Object(ve.jsx)(f.a,{variant:"success",type:"submit",children:je().submit})]}),Object(ve.jsx)("div",{style:{color:"red"},children:r}),Object(ve.jsx)("br",{}),Object(ve.jsx)("div",{className:"form-row row",children:Object(ve.jsx)(p.b,{to:"/passwordrecovery",children:je().forgot_password_link})}),Object(ve.jsx)("br",{}),Object(ve.jsx)("div",{className:"form-row row",children:Object(ve.jsx)(p.b,{to:"/add/tenants",children:Object(ve.jsxs)(f.a,{variant:"outline-success",size:"sm",children:[je().add_tenant,Object(ve.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})},Re=(r(269),function(){return Object(n.useEffect)((function(){})),Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsx)("header",{className:"page-header",children:X}),Object(ve.jsx)("main",{className:"page-content",children:Object(ve.jsx)("div",{className:"home-page",children:Object(ve.jsx)("div",{className:"info-box",children:Object(ve.jsxs)("div",{className:"info-text",children:[je().welcome_hp,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),je().left_bar_descr_hp,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),je().right_bar_descr_hp,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),je().session_expire_info_hp,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:je().github_issue_page_hp}),Object(ve.jsx)("br",{})]})})})})]})}),Ie=(r(270),function(){return Object(ve.jsxs)("div",{className:"notFound-page",children:[je().oh_no,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),je().broken_link,Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:je().github_issue_page_hp})]})}),Ee=(r(271),r(77)),Fe=r(29),Le=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("boolean"===typeof t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var r=!0;return t.forEach((function(t){r=r&&e(t)})),r}if(t.constructor===Object){var a=!0;return Object.entries(t).forEach((function(t){var r=Object(b.a)(t,2),n=(r[0],r[1]);a=a&&e(n)})),a}return!0},ze=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!Le(e)})).length},Be=function e(t){if(Array.isArray(t),t.constructor===Object)for(var r=Object.entries(t),a=0;a<r.length;a++){if(Array.isArray(r[a][1]))for(var n=0;n<r[a][1].length;n++)r[a][1][n].constructor===Object||Array.isArray(r[a][1][n])?(e(r[a][1][n]),Le(r[a][1][n])&&r[a][1].splice(n,1)):Le(r[a][1][n])&&r[a][1].splice(n,1);if(r[a][1].constructor===Object)for(var s=Object.entries(r[a][1]),c=0;c<s.length;c++)s[a][1].constructor===Object||Array.isArray(s[a][1])?e(s[a][1]):Le(s[a][1])&&delete r[a][1][s[a][0]]}return t},Me=function e(t,r){if(void 0===t||void 0===r)return!1;if(t===r)return!0;if(typeof t!==typeof r)return!1;if(Array.isArray(t)&&!Array.isArray(r)||!Array.isArray(t)&&Array.isArray(r))return!1;if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===Object&&r.constructor!==Object||t.constructor!==Object&&r.constructor===Object)return!1;if(t.constructor===Object&&r.constructor===Object){var n=Object.keys(t),s=Object.keys(r);return n.length===s.length&&(!!e(n,s)&&!!e(Object.values(t),Object.values(r)))}return!1};function He(e){return e&&e[0].toUpperCase()+e.slice(1)}function Ge(e){return e.slice(0,10).replaceAll("-","/")}Ee.a.library.add(Fe.g,Fe.a,Fe.l,Fe.j,Fe.i,Fe.k,Fe.h,Fe.b);var We=s.a.createRef(),Ue=s.a.createRef(),Ke=s.a.createRef(),Je=s.a.createRef(),Ve=s.a.createRef(),qe=s.a.createRef(),Xe=s.a.createRef();function Ye(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),r=t[0],a=t[1],c=localStorage.getItem("username"),i=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return qe.current=null!==c?c:"",Ve.current=null!==i?i:"",Xe.current=null!==o&&""!==o?o:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==Ke.current)r=Ke.current-1;else{if(null===Ue.current){var a=localStorage.getItem("login-time");null!==a?(Ue.current=a,t=parseInt(a,10)):(t=Date.now(),Ue.current=t)}else t=parseInt(Ue.current,10);null===Je.current&&(Je.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+Je.current-Date.now())/1e3}if(r<60&&(clearInterval(We.current),_().then((function(){Ke.current=null,Ue.current=null,We.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");Ke.current=parseInt(r,10)}We.current=setInterval((function(){e()}),1e3)}),[]),Object(ve.jsxs)("nav",{className:"app-nav",children:[Object(ve.jsx)(f.a,{className:"app-nav-opener",onClick:function(){return a(!r)},children:r?Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(ve.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(ve.jsx)(p.b,{to:"/home",className:"nav-wrap",children:X}),Object(ve.jsx)("hr",{}),Object(ve.jsx)("div",{className:"app-nav-wrapper ".concat(r?"opened":""),children:Object(ve.jsxs)("div",{className:"app-nav-links",children:[Object(ve.jsx)("hr",{}),Object(ve.jsxs)("div",{className:"data-wrapper",children:[Object(ve.jsxs)(p.b,{to:"/viewProfile/",children:[je().welcome+" ",Object(ve.jsx)("b",{children:qe.current})]},"viewProfile"),Object(ve.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ve.jsxs)("h3",{children:[je().role+" ","admin"===Ve.current?Object(ve.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===Ve.current?Object(ve.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===Ve.current?Object(ve.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===Ve.current?Object(ve.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ve.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(ve.jsx)("div",{style:{paddingLeft:"10px"},children:Object(ve.jsxs)("h3",{children:[je().tenant+" ",Object(ve.jsx)("b",{children:Xe.current})]})}),Object(ve.jsx)("br",{}),Object(ve.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(ve.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:je().logout})}),Y.length>1&&Object(ve.jsxs)(s.a.Fragment,{children:[Object(ve.jsx)("hr",{}),Object(ve.jsx)("h2",{children:Object(ve.jsx)(ge,{})})]})]}),Object(ve.jsx)("hr",{}),Object(ve.jsx)("div",{className:"app-nav-text",children:je().resources}),Object(ve.jsx)("hr",{}),Object.keys($).map((function(e){return!fe(Ve.current,e,"read")||void 0!==te[e]&&!te[e].includes(Ve.current)?"":Object(ve.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:He(e)},e)})),Object(ve.jsx)("hr",{}),0!==Z.length&&Object(ve.jsxs)(ve.Fragment,{children:[Object(ve.jsx)("div",{className:"app-nav-text",children:je().tools})," ",Object(ve.jsx)("hr",{})]}),Z.includes("updatehistory")&&fe(Ve.current,"experiments","update")&&Object(ve.jsx)(p.b,{to:"/updatehistory",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Update Experiments History"}),Z.includes("downloadexperiment")&&fe(Ve.current,"experiments","read")&&Object(ve.jsx)(p.b,{to:"/downloadexperiment",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Download Experiments Data"}),Z.includes("removesteps")&&fe(Ve.current,"experiments","update")&&Object(ve.jsx)(p.b,{to:"/removesteps",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Remove History Steps"})]})})]})}var Qe=r(324),Ze=r(342),$e=r(202),et=r(341);function tt(e){var t={};return ae[e.resType].forEach((function(r){r.constructor===Object?Object.keys(r).forEach((function(a){Array.isArray(e.resource[a])?t[a]=e.resource[a].map((function(e){var t={};return r[a].forEach((function(r){t[r]=e[r]})),t})):t[a]=e.resource[a]})):Object.keys(e.resource).includes(r)&&(t[r]=e.resource[r])})),rt(t)}function rt(e){return Object(ve.jsx)(Ze.a,{defaultActiveKey:0,size:"lg",children:s.a.Children.toArray(Object.entries(e).map((function(e,t){var r=Object(b.a)(e,2),a=r[0],n=r[1];return Object(ve.jsxs)(Ze.a.Item,{eventKey:t,children:[Object(ve.jsx)(Ze.a.Header,{children:Object(ve.jsx)("b",{children:a})}),Object(ve.jsx)(Ze.a.Body,{children:n instanceof Object?Array.isArray(n)?void 0!==n[0]?Object.values(n[0]).some((function(e){return e instanceof Object}))?s.a.Children.toArray(n.map((function(e,t){var r=Object(ve.jsxs)("span",{children:[a," ",Object(ve.jsxs)("i",{children:["[",t,"]"]})]});return"history"===a&&void 0!==e.step&&(r=Object(ve.jsxs)("span",{children:["Step ",Object(ve.jsx)("i",{children:e.step})]})),"metadata"===a&&void 0!==e.name&&(r=Object(ve.jsx)("span",{children:Object(ve.jsx)("i",{children:e.name})})),"topics"===a&&void 0!==e.name&&(r=Object(ve.jsx)("span",{children:Object(ve.jsx)("i",{children:e.name})})),Object(ve.jsx)(Ze.a,{children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsx)(Ze.a.Header,{children:r}),Object(ve.jsx)(Ze.a.Body,{children:rt(e)})]})})}))):n[0]instanceof Object?Object(ve.jsxs)(Qe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(ve.jsx)("thead",{children:Object(ve.jsx)("tr",{children:s.a.Children.toArray(Object.keys(n[0]).map((function(e){return Object(ve.jsx)("th",{children:e})})))})}),Object(ve.jsx)("tbody",{children:s.a.Children.toArray(n.map((function(e){return Object(ve.jsx)("tr",{children:s.a.Children.toArray(Object.values(e).map((function(e){return Array.isArray(e)?Object(ve.jsxs)("td",{children:["[",e.join(", "),"]"]}):Object(ve.jsx)("td",{children:e})})))})})))})]}):"[ "+n.join(" , ")+" ]":"[ ]":Object(ve.jsx)(Qe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(ve.jsx)("tbody",{children:s.a.Children.toArray(Object.entries(n).map((function(e){return Object(ve.jsxs)("tr",{children:[Object(ve.jsx)("td",{children:Object(ve.jsx)("b",{children:e[0]})}),Object(ve.jsx)("td",{children:"string"!==typeof e[1]?e[1].toString():e[1]})]})})))})}):void 0===n||null==n?Object(ve.jsx)("i",{children:"None"}):a.toLowerCase().includes("date")?Ge(n):n})]})})))})}function at(e){var t=Object(n.useState)(void 0),r=Object(b.a)(t,2),a=r[0],s=r[1];Object(n.useEffect)((function(){}),[e]);var c=void 0!==a?Object(ve.jsxs)($e.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(ve.jsx)($e.a.Header,{as:"h3",children:"View Resource"}),Object(ve.jsx)($e.a.Body,{children:Object(ve.jsx)(tt,{resource:a,resType:e.resType})})]}):Object(ve.jsx)($e.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(ve.jsxs)($e.a.Header,{as:"h3",children:["Loading",Object(ve.jsx)($e.a.Body,{})]})});return"view"===e.action?Object(ve.jsx)(et.a,{trigger:"click",placement:"left",overlay:c,rootClose:!0,children:Object(ve.jsx)(f.a,{variant:"link",size:"sm",onClick:function(){s(e.takeSingle(e.id))},children:Object(ve.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(ve.jsx)(f.a,{variant:"link",size:"sm",onClick:Object(l.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,A(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(ve.jsx)(p.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(ve.jsx)(f.a,{variant:"link",size:"sm",children:Object(ve.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(ve.jsx)(p.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(ve.jsx)(f.a,{variant:"link",size:"sm",children:Object(ve.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(ve.jsx)("div",{})}function nt(e){return void 0===e.header||void 0===e.resources||e.header.includes("_actions")&&void 0===e._actions?Object(ve.jsx)("div",{children:"Loading"}):Object(ve.jsx)("div",{children:Object(ve.jsxs)(Qe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ve.jsx)("thead",{children:Object(ve.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(t){return void 0!==ee[e.resType]&&void 0!==ee[e.resType][t]?Object(ve.jsx)("th",{children:ee[e.resType][t]}):Object(ve.jsx)("th",{children:t})})))},"header")}),Object(ve.jsx)("tbody",{children:s.a.Children.toArray(e.resources.map((function(t,r){return Object(ve.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(a){return"_actions"===a?Object(ve.jsxs)("td",{children:[e._actions.includes("view")?Object(ve.jsx)(at,{resType:e.resType,action:"view",k:r+"_view",id:t._id,takeSingle:e.takeSingle}):"",e._actions.includes("edit")&&fe(e.userRole,e.resType,"update")?Object(ve.jsx)(at,{resType:e.resType,action:"edit",k:r+"_edit",id:t._id}):"",e._actions.includes("duplicate")&&fe(e.userRole,e.resType,"create")?Object(ve.jsx)(at,{resType:e.resType,action:"duplicate",k:r+"_duplicate",id:t._id}):"",e._actions.includes("delete")&&fe(e.userRole,e.resType,"delete")?Object(ve.jsx)(at,{resType:e.resType,action:"delete",k:r+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0===t[a]?Object(ve.jsx)("td",{children:"--undefined--"}):Array.isArray(t[a])?Object(ve.jsx)("td",{children:"[ "+t[a].join(" , ")+" ]"}):Object(ve.jsx)("td",{children:t[a]})})))})})))})]})})}Ee.a.library.add(Fe.d,Fe.e,Fe.c);var st=r(348),ct=(r(108),s.a.createContext());Ee.a.library.add(Fe.f);var it=s.a.createRef();function ot(e){var t=Object(h.p)().page,r=Object(p.c)(),a=Object(b.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(void 0),d=Object(b.a)(i,2),u=d[0],j=d[1],m=Object(n.useState)(void 0),O=Object(b.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)(void 0),y=Object(b.a)(g,2),w=y[0],_=y[1],k=Object(n.useState)(1),C=Object(b.a)(k,2),N=C[0],S=C[1],P=Object(n.useState)(1),D=Object(b.a)(P,2),A=D[0],T=D[1],I=Object(n.useState)(),E=Object(b.a)(I,2),F=E[0],L=E[1],z=Object(n.useState)(),B=Object(b.a)(z,2),M=B[0],H=B[1],G=Object(n.useState)(),W=Object(b.a)(G,2),U=W[0],K=W[1],J=Object(n.useState)(),V=Object(b.a)(J,2),q=V[0],X=V[1],Y=Object(n.useState)(),Q=Object(b.a)(Y,2),Z=Q[0],ee=Q[1],te=localStorage.getItem("user-role");it.current=null!==te?te:"";var ae,ne=Object(n.useContext)(ct);ae=void 0!==ne?ne.fetched:{},Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,R(t,r);case 4:a=e.sent,v($[t]),j(a.docs),void 0!==re[t]&&_(re[t]),L(a.hasNextPage),H(a.hasPrevPage),ee(a.totalPages),K(a.prevPage),X(a.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),j(void 0),L(void 0),H(void 0),ee(void 0),K(void 0),X(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;S(r);var a=null!==s.get("limit")?s.get("limit"):10;T(a),e({page:r,limit:a}).catch(console.error)}),[e,t,s]);var ce=function(){var e=parseInt(N,10)-2>0,t=parseInt(N,10)+2<Z;return Object(ve.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(ve.jsxs)(st.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(ve.jsx)(st.a.First,{disabled:1===N,onClick:function(){return c({page:1,limit:A})}}),Object(ve.jsx)(st.a.Prev,{disabled:!M,onClick:function(){return c({page:U,limit:A})}}),e&&Object(ve.jsx)(st.a.Ellipsis,{}),parseInt(N,10)-1>0&&Object(ve.jsx)(st.a.Item,{onClick:function(){return c({page:parseInt(N,10)-1,limit:A})},children:parseInt(N,10)-1}),Object(ve.jsx)(st.a.Item,{children:Object(ve.jsx)("b",{children:N})}),parseInt(N,10)+1<=Z&&Object(ve.jsx)(st.a.Item,{onClick:function(){return c({page:parseInt(N,10)+1,limit:A})},children:parseInt(N,10)+1}),t&&Object(ve.jsx)(st.a.Ellipsis,{}),Object(ve.jsx)(st.a.Next,{disabled:!F,onClick:function(){return c({page:q,limit:A})}}),Object(ve.jsx)(st.a.Last,{disabled:N===Z,onClick:function(){return c({page:Z,limit:A})}})]})})};return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:[He(t),void 0!==se[t]&&fe(it.current,t,"create")&&Object(ve.jsx)(p.b,{to:"/add/"+t+"/",children:Object(ve.jsx)(f.a,{variant:"link",size:"sm",children:Object(ve.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsx)(nt,{resType:t,userRole:it.current,header:x,resources:u,_actions:w,takeSingle:function(e){return u.find((function(t){return t._id===e}))},removeSingle:function(e){var r=u.filter((function(t){return t._id!==e}));ae.RemoveData(t),j(r)}}),Object(ve.jsx)(ce,{})]})]})}var lt=r(325),dt=r(326),ut=r(196),jt=r(147);function bt(e){var t=Object(n.useState)(""),r=Object(b.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(""),i=Object(b.a)(c,2),d=i[0],u=i[1],j=Object(n.useState)(""),p=Object(b.a)(j,2),h=p[0],m=p[1],O=Object(n.useState)(""),x=Object(b.a)(O,2),v=x[0],g=x[1],y=Object(n.useState)(""),_=Object(b.a)(y,2),k=_[0],C=_[1],N=Object(n.useState)(""),S=Object(b.a)(N,2),D=S[0],A=S[1],T=Object(n.useState)(""),R=Object(b.a)(T,2),I=R[0],E=R[1],F=Object(n.useState)(""),L=Object(b.a)(F,2),z=L[0],B=L[1],M=Object(n.useState)(""),G=Object(b.a)(M,2),W=G[0],U=G[1],K=Object(n.useState)(""),J=Object(b.a)(K,2),V=J[0],q=J[1],X=Object(n.useState)(""),Y=Object(b.a)(X,2),Q=Y[0],Z=Y[1],$=Object(n.useState)(!1),ee=Object(b.a)($,2),te=ee[0],re=ee[1];Object(n.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),r=localStorage.getItem("user-tenant"),a=localStorage.getItem("user-email");s(null!==e?e:""),u(null!==t?t:""),m(null!==r&&""!==r?r:"-"),g(null!==a?a:"")}),[]);var ae=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==k){e.next=5;break}return q(je().old_pass_empty),re(!0),e.abrupt("return");case 5:if(D===I){e.next=9;break}return q(je().pass_not_match),re(!0),e.abrupt("return");case 9:if(""!==D&&""!==I){e.next=13;break}return q(je().pass_not_null),re(!0),e.abrupt("return");case 13:return e.prev=13,e.next=16,H();case 16:if(n=e.sent,r=n.response.data.passwordStrength,!(Object(jt.passwordStrength)(D).id<r)){e.next=23;break}return q(je().stronger_password_required),re(!0),e.abrupt("return");case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(13),console.log(e.t0),r=1;case 29:return e.prev=29,e.next=32,w(a,k,"-"!==h?h:"",!1);case 32:e.next=39;break;case 34:return e.prev=34,e.t1=e.catch(29),q(je().old_pass_wrong),re(!0),e.abrupt("return");case 39:if(s=window.confirm(je().pass_change_confirm),re(!1),!s){e.next=55;break}return e.prev=42,e.next=45,P("users",{password:D},a);case 45:c=e.sent,C(""),A(""),E(""),200===c.response.status&&q(je().password_changed),e.next=55;break;case 52:e.prev=52,e.t2=e.catch(42),console.log(e.t2);case 55:case"end":return e.stop()}}),e,null,[[13,25],[29,34],[42,52]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==z&&""!==W){e.next=5;break}return Z(je().empty_email_error),re(!0),e.abrupt("return");case 5:if(z===W){e.next=9;break}return Z(je().email_not_match),re(!0),e.abrupt("return");case 9:if(z!==v){e.next=13;break}return Z(je().email_same_as_old),re(!0),e.abrupt("return");case 13:if(!window.confirm(je().email_change_confirm)){e.next=25;break}return e.prev=15,e.next=18,P("users",{email:z},a);case 18:200===e.sent.response.status&&(B(""),U(""),localStorage.setItem("user-email",z),g(z),re(!1),Z(je().email_changed)),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[15,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:[je().welcome,"\xa0",Object(ve.jsx)("b",{children:a}),":\xa0",je().profile_page_desc]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{xs:1,children:"Username:\xa0"}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:a})})]}),Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{xs:1,children:je().role}),Object(ve.jsxs)(ut.a,{children:[d,"\xa0","admin"===d?Object(ve.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===d?Object(ve.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===d?Object(ve.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===d?Object(ve.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ve.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{xs:1,children:je().email+" "}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:v})})]}),Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{xs:1,children:je().tenant+" "}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:h})})]})]}),Object(ve.jsx)("hr",{}),Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(dt.a,{children:Object(ve.jsx)("b",{children:"Edit email"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a,{onSubmit:ne,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"email",onChange:function(e){e.preventDefault(),B(e.target.value)},value:z,placeholder:je().enter+" new email"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"email",onChange:function(e){e.preventDefault(),U(e.target.value)},value:W,placeholder:je().repeat+" new email"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:te?"red":"black"},children:Q})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",type:"submit",children:je().submit})})})]})})})]}),Object(ve.jsx)("hr",{}),Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(dt.a,{children:Object(ve.jsx)("b",{children:"Edit password"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a,{onSubmit:ae,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"password",onChange:function(e){e.preventDefault(),C(e.target.value)},value:k,placeholder:je().enter+" old password"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"password",onChange:function(e){e.preventDefault(),A(e.target.value)},value:D,placeholder:je().enter+" new password"}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:je().password_rules})]})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"password",onChange:function(e){e.preventDefault(),E(e.target.value)},value:I,placeholder:je().repeat+" new password","aria-describedby":"passwordHelpBlock"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:te?"red":"black"},children:V})})})," ",Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",type:"submit",children:je().submit})})})]})})})]})]})]})}r(272),r(273);function pt(){return Object(ve.jsx)("div",{className:"unAuth-page",children:Object(ve.jsx)("div",{className:"info-box",children:Object(ve.jsx)("div",{className:"info-text",children:je().unauthorised_user})})})}var ht=r(327),ft=r(339),mt=r(328),Ot=r(344),xt=(r(274),s.a.createRef());function vt(e){var t=Object(n.useState)(!1),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(!1),o=Object(b.a)(i,2),l=o[0],d=o[1],u=s.a.useRef(),j=Object(n.useContext)(ct).notifications;xt.current=0;var p=function(){return c(!1)};Object(n.useEffect)((function(){xt.current<j.notifications.length&&(xt.current=j.notifications.length,d(!0),setTimeout((function(){d(!1)}),600))}),[j.notifications]),!0===/Mobi/i.test(window.navigator.userAgent)?u.current="vertical":u.current=Q;var h=j.notifications.filter((function(e){return"error"===e.name}));return Object(ve.jsxs)("div",{className:"notificationBar",style:"vertical"===u.current&&!1===/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(ve.jsxs)(f.a,{variant:"link",onClick:function(){c(!0)},style:{color:"#fff",textDecoration:"none"},children:[je().notifications,"\xa0",Object(ve.jsx)(ht.a,{pill:!0,bg:h.length>0?"danger":"success",className:"element".concat(l?" highlight":""),children:j.notifications.length}),Object(ve.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(ve.jsxs)(ft.a,{style:{backgroundColor:"#123651",color:"#fff"},show:a,onHide:p,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(ve.jsx)(ft.a.Header,{children:Object(ve.jsxs)(ft.a.Title,{children:[je().notifications,"\xa0",Object(ve.jsx)(ht.a,{pill:!0,bg:h.length>0?"danger":"success",children:j.notifications.length}),"\xa0\xa0\xa0",Object(ve.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return p()},children:je().close+" "+je().notifications})]})}),Object(ve.jsx)(ft.a.Body,{children:Object(ve.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==j.notifications.length&&Object(ve.jsx)(f.a,{variant:"warning",onClick:function(){return j.ClearNotifications()},children:je().clear_all}),Object(ve.jsx)(mt.a,{children:j.notifications.map((function(e,t){var r;return"info"===e.name&&(r="success"),"error"===e.name&&(r="danger"),Object(ve.jsxs)(Ot.a,{className:"d-inline-block m-1",bg:r,animation:!0,onClose:function(){j.RemoveNotification(t)},children:[Object(ve.jsxs)(Ot.a.Header,{children:[Object(ve.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(ve.jsx)("strong",{className:"me-auto",children:e.name}),Object(ve.jsx)("small",{children:e.time.slice(0,15)})]}),Object(ve.jsx)(Ot.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}r(275);Ee.a.library.add(Fe.g,Fe.a,Fe.l,Fe.j,Fe.i,Fe.k,Fe.h,Fe.b);var gt=s.a.createRef(),yt=s.a.createRef(),wt=s.a.createRef(),_t=s.a.createRef(),kt=s.a.createRef(),Ct=s.a.createRef(),Nt=s.a.createRef();function St(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),r=(t[0],t[1]),a=localStorage.getItem("username"),c=localStorage.getItem("user-role"),i=localStorage.getItem("user-tenant");return Ct.current=null!==a?a:"",kt.current=null!==c?c:"",Nt.current=null!==i&&""!==i?i:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==wt.current)r=wt.current-1;else{if(null===yt.current){var a=localStorage.getItem("login-time");null!==a?(yt.current=a,t=parseInt(a,10)):(t=Date.now(),yt.current=t)}else t=parseInt(yt.current,10);null===_t.current&&(_t.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+_t.current-Date.now())/1e3}if(r<60&&(clearInterval(gt.current),_().then((function(){wt.current=null,yt.current=null,gt.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");wt.current=parseInt(r,10)}gt.current=setInterval((function(){e()}),1e3)}),[]),Object(ve.jsx)("nav",{className:"horizontal-nav",children:Object(ve.jsx)("div",{className:"horizontal-nav-links",children:Object(ve.jsx)("div",{className:"data-wrapper",children:Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsxs)(dt.a,{style:{padding:0},children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(p.b,{to:"/home",className:"nav-wrap",children:X})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(p.b,{to:"/viewProfile/",children:[je().welcome+" ",Object(ve.jsx)("b",{children:Ct.current})]},"viewProfile")}),Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)("div",{className:"horizontal-nav-text",children:[je().role+" ","admin"===kt.current?Object(ve.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===kt.current?Object(ve.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===kt.current?Object(ve.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===kt.current?Object(ve.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(ve.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)("div",{className:"horizontal-nav-text",children:[je().tenant+" ",Object(ve.jsx)("b",{children:Nt.current})]})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:je().logout})}),Y.length>1&&Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(ge,{})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(vt,{})})]}),Object(ve.jsxs)(dt.a,{style:{padding:0},children:[Object(ve.jsx)("hr",{}),Object(ve.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:je().resources})]}),Object(ve.jsx)(dt.a,{style:{padding:0},children:s.a.Children.toArray(Object.keys($).map((function(e){return fe(kt.current,e,"read")?Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return r(!1)},children:He(e)},e)}):""})))})]})})})})}var Pt=r(64),Dt={PushLog:function(e){},RemoveLog:function(e){},ClearLogs:function(){}},At="#";function Tt(e,t,r,a,n){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(l.a)(Object(o.a)().mark((function e(t,r,n,s,c){var i,l,d,u,j,b,p;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,l=i.split(At)[0],(d=new FormData).append("file",t),u=!1===r||void 0===r?a+"/experiments/"+l+"/file?sep="+n+"&sepArray="+s+"&sepFloat="+c:a+"/experiments/"+l+"/file/?override=true&sep="+n+"&sepArray="+s+"&sepFloat="+c,j={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:W()},b={headers:j},e.prev=7,e.next=10,g.put(u,d,b);case 10:p=e.sent,Dt.PushLog({type:"info",msg:i+", successfully posted: Added: [ "+p.data.report.success.join(", ")+" ] Ignored: ["+p.data.report.ignored.join(", ")+" ] Overridden: ["+p.data.report.overridden.join(", ")+" ]\n"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("error in response"),Dt.PushLog({type:"error",msg:i+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}function It(e,t,r){return Et.apply(this,arguments)}function Et(){return(Et=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1===n||void 0===n?a+"/experiments/"+t:a+"/experiments/"+t+"?override=true",c=r.history.add[0].step,i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:W()}},e.prev=3,e.next=6,g.put(s,JSON.stringify(r),i);case 6:l=e.sent,Dt.PushLog({type:"info",msg:"Step "+c+", successfully posted: Added: [ "+l.data.report.success.join(", ")+" ] Ignored: ["+l.data.report.ignored.join(", ")+" ] Overridden: ["+l.data.report.overridden.join(", ")+" ]\n"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("error in response"),Dt.PushLog({type:"error",msg:"Step "+c+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function Ft(e,t,r,a){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(l.a)(Object(o.a)().mark((function e(t,r,a,n){var s,c,i,l,d,u,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j.length>4&&void 0!==j[4]?j[4]:void 0,c="experiments/"+t+"/history?sep="+r+"&sepArray="+a+"&sepFloat="+n,i=t+"#history.csv",e.prev=3,e.next=6,zt(c);case 6:return l=e.sent,d=new Blob([l]),u=null,void 0===s||!1===s?Object(Pt.saveAs)(d,i):u=new File([d],i),Dt.PushLog({type:"info",msg:i+" successfully downloaded.\n"}),e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])}))),Lt.apply(this,arguments)}function zt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(l.a)(Object(o.a)().mark((function e(t){var r,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"get",url:a+"/"+t,headers:{Authorization:W()}},e.prev=2,e.next=5,g(r);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),Dt.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details:"")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Mt(e,t){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(l.a)(Object(o.a)().mark((function e(t,r){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"put",url:a+"/experiments/"+t,headers:{Authorization:W()},data:{history:{remove:r}}},e.prev=2,e.next=5,g(n);case 5:e.sent,Dt.PushLog({type:"info",msg:"Successfully deleted steps with id: "+r.join(" - ")+"\n"}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),Dt.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"\n")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Gt=r(337),Wt=r(338),Ut=r(346),Kt=function(e){var t,r=Object(n.useContext)(ct);if(t=void 0!==r?r.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(ve.jsxs)(Se.a,{onSubmit:e.submitFunction,children:[Object(ve.jsxs)(lt.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&s.a.Children.toArray(Object.entries(e.values).map((function(r){var a,n=Object(b.a)(r,2),c=n[0],i=n[1];if(void 0!==oe[e.resource]&&void 0!==oe[e.resource][c]&&void 0!==t.types&&void 0!==t.types[oe[e.resource][c]])return function(t,r){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:t})}),Object(ve.jsx)(ut.a,{sm:4,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsxs)(Se.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(ve.jsx)("option",{children:je().select+" "+t}),s.a.Children.toArray(Object.entries(r).map((function(e){var t=Object(b.a)(e,2),r=(t[0],t[1]);return Object(ve.jsx)("option",{value:r,children:r})})))]})})})]})}(c,t.types[oe[e.resource][c]]);if(Array.isArray(i)){if("number"===typeof i[0])return a=c,Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:a})}),Object(ve.jsx)(ut.a,{sm:2,children:s.a.Children.toArray(e.values[a].map((function(t,r){return Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"number",disabled:void 0!==e.disabledFields[a]&&e.disabledFields[a],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[a,r])},value:isNaN(e.values[a][r])?"":e.values[a][r],placeholder:je().enter+" "+a+"["+r+"]"})})})})))})]},a);if("boolean"===typeof i[0])return function(t){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:t})}),Object(ve.jsx)(ut.a,{children:s.a.Children.toArray(e.values[t].map((function(r,a){return Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(f.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(r){r.preventDefault(),e.arrayDeleteCallback([t,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{sm:6,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t,a])},checked:e.values[t][a],placeholder:je().enter+" "+t})})}),Object(ve.jsx)(ut.a,{md:"auto"})]})})))})]},t)}(c);if("string"===typeof i[0])return function(r){var a;t!=={}&&void 0!==t.data[r]&&(a=t.data[r]);var n=void 0!==a?a.map((function(e){return e._id})):[];return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:r})}),Object(ve.jsx)(ut.a,{children:s.a.Children.toArray(e.values[r].map((function(s,c){return Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{sm:Math.max(2,2),children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:void 0!==t.data[r]?Object(ve.jsx)(Wt.a,{disableClearable:!0,disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],id:r,onBlur:function(t){""===t.target.value&&(t.preventDefault(),e.arrayDeleteCallback([r,c]))},onInputChange:function(t){null!==t&&(t.preventDefault(),0!==t.target.value&&e.handleChangesCallback(t.target.value,[r,c]))},onChange:function(t,a){t.preventDefault(),""===a||null===a?e.handleChangesCallback("",[r,c]):e.handleChangesCallback(a._id,[r,c])},value:""===s?null:n.includes(s)?a.filter((function(e){return e._id===s}))[0]:s,options:a,getOptionLabel:function(e){return void 0!==e.optionalLabel?e.optionalLabel:void 0!==e._id?e._id:e},renderOption:function(e,t){return Object(ve.jsx)(Ut.a,Object(u.a)(Object(u.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:void 0!==t.optionalLabel?t.optionalLabel:t._id}))},renderInput:function(e){return Object(ve.jsx)(Gt.a,Object(u.a)(Object(u.a)({},e),{},{label:je().enter+" "+r+"["+c+"]"}))}}):Object(ve.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onBlur:function(t){""===t.target.value&&(t.preventDefault(),e.arrayDeleteCallback([r,c]))},onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],placeholder:je().enter+" "+r+"["+c+"]"})})}),Object(ve.jsx)(ut.a,{md:"auto"})]})})))})]})}(c);if(i[0].constructor===Object)return function(r){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:r})}),Object(ve.jsxs)(ut.a,{children:[Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:[void 0===e.disabledFields[r]&&Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)("b",{children:Object(ve.jsx)("i",{children:"Remove"})})}),s.a.Children.toArray(Object.entries(e.values[r][0]).map((function(e){return Object(ve.jsx)(ut.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(ve.jsx)("b",{children:Object(ve.jsx)("i",{children:He(r)+" "+e[0]})})})})))]}),s.a.Children.toArray(e.values[r].map((function(a,n){return Object(ve.jsxs)(dt.a,{children:[void 0===e.disabledFields[r]&&Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(f.a,{disabled:void 0!==e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(Object.entries(a).map((function(a){var c=Object(b.a)(a,2),i=c[0],o=c[1],l=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][i]?e.disabledFields[r][i]:!0===e.disabledFields[r]);return"number"===typeof o?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i])},disabled:l,value:isNaN(e.values[r][n][i])?"":e.values[r][n][i],placeholder:je().enter+" "+i})})}):"boolean"===typeof o?Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,n,i])},disabled:l,checked:e.values[r][n][i],placeholder:je().enter+" "+i})})}):void 0!==oe[e.resource]&&void 0!==oe[e.resource][r]&&void 0!==oe[e.resource][r][i]&&void 0!==t.types&&void 0!==t.types[oe[e.resource][r][i]]?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsxs)(Se.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i])},value:e.values[r][n][i],disabled:l,children:[Object(ve.jsx)("option",{children:je().select+" "+i}),s.a.Children.toArray(Object.entries(t.types[oe[e.resource][r][i]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(ve.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof o?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i])},value:e.values[r][n][i],placeholder:je().enter+" "+i}),"metadata"===r&&"name"===i&&"Country"===e.values[r][n][i]&&Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(o)?0===o.length?i+" is empty":"range"===i&&"enum"!==e.values[r][n].type?"":Object(ve.jsx)(Ze.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsxs)(Ze.a.Header,{children:[Object(ve.jsx)("b",{children:i})," : ",ze(o)," items"]}),Object(ve.jsx)(Ze.a.Body,{children:Object(ve.jsx)(lt.a,{fluid:!0,children:s.a.Children.toArray(o.map((function(t,a){if(t.constructor===Object){var c=Object.entries(t);return Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(c.map((function(t){var s=Object(b.a)(t,2),c=s[0],o=s[1];return Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a,c])},value:o,placeholder:je().enter+" "+c})})})})))]})}return"number"===typeof t?Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i,a])},value:isNaN(t)?"":t,placeholder:je().enter+" "+i})})]}):"string"===typeof t?Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a])},value:t,placeholder:je().enter+" "+i})})]}):"Unknown data type"})))})})]})}):o.constructor===Object?Object(ve.jsx)(Ze.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsx)(Ze.a.Header,{children:Object(ve.jsx)("b",{children:i})}),Object(ve.jsx)(Ze.a.Body,{children:Object(ve.jsx)(lt.a,{fluid:!0,children:Object(ve.jsx)(dt.a,{children:s.a.Children.toArray(Object.entries(o).map((function(a){return"number"===typeof a[1]?Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i,a[0]],!0)},value:isNaN(a[1])?"":a[1],placeholder:je().enter+" "+a[0]})}):"boolean"===typeof a[1]?Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,n,i,a[0]],!0)},disabled:l,checked:a[1],label:a[0]})})}):void 0!==oe[e.resource]&&void 0!==oe[e.resource][r]&&void 0!==oe[e.resource][r][i]&&void 0!==oe[e.resource][r][i][a[0]]&&void 0!==t.types&&void 0!==oe[e.resource][r][i][a[0]]?Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsxs)(Se.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a[0]],!0)},value:a[1],disabled:l,children:[Object(ve.jsx)("option",{children:je().select+" "+a[0]}),s.a.Children.toArray(Object.entries(t.types[oe[e.resource][r][i][a[0]]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(ve.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof a[1]?Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a[0]],!0)},value:a[1],placeholder:je().enter+" "+a[0]})}):"Unknown data type"})))})})})]})}):"Unknown data type"})))]})})))]})]},r)}(c)}return"number"===typeof i?function(t){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:t})}),Object(ve.jsx)(ut.a,{sm:4,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"number",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(parseInt(r.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:je().enter+" "+t}),void 0!==de[e.resource]&&void 0!==de[e.resource][t]&&Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:de[e.resource][t]})]})})]})}(c):void 0!==le[e.resource]&&void 0!==le[e.resource][c]&&void 0!==t.data[le[e.resource][c]]?function(r,a){var n;return t==={}||void 0===t.data[r]&&void 0===t.data[a]||(n=t.data[void 0!==a?a:r]),Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:r})}),Object(ve.jsx)(ut.a,{sm:4,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Wt.a,{disableClearable:!0,onChange:function(t,a){t.preventDefault(),""===a||null===a?e.handleChangesCallback("",[r]):e.handleChangesCallback(a._id,[r])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:""===e.values[r]?null:n.filter((function(t){return t._id===e.values[r]}))[0],options:n,getOptionLabel:function(e){return void 0!==e.optionalLabel?e.optionalLabel:e._id},renderOption:function(e,t){return Object(ve.jsx)(Ut.a,Object(u.a)(Object(u.a)({component:"li",sx:{"& > img":{mr:2,flexShrink:0}}},e),{},{children:void 0!==t.optionalLabel?t.optionalLabel:t._id}))},renderInput:function(e){return Object(ve.jsx)(Gt.a,Object(u.a)(Object(u.a)({},e),{},{label:je().enter+" "+r}))}})})})]})}(c,le[e.resource][c]):"boolean"===typeof i?function(t){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:t})}),Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Check,{id:t,type:"checkbox",onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],checked:e.values[t]}),void 0!==de[e.resource]&&void 0!==de[e.resource][t]&&Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:de[e.resource][t]})]})})]})}(c):"string"===typeof i?function(t){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:t})}),Object(ve.jsx)(ut.a,{sm:4,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"password"===t?"password":"email"===t?"email":"text",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:je().enter+" "+t}),void 0!==de[e.resource]&&void 0!==de[e.resource][t]&&Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:de[e.resource][t]})]})})]})}(c):i.constructor===Object?function(r){return Object(ve.jsxs)(ve.Fragment,{children:[Object(ve.jsx)(dt.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(e){return Object(ve.jsx)(ut.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(ve.jsx)("b",{children:Object(ve.jsx)("i",{children:He(r)+" "+e[0]})})})})))}),Object(ve.jsx)(dt.a,{children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(a){var n=Object(b.a)(a,2),c=n[0],i=n[1],o=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][c]?e.disabledFields[r][c]:!0===e.disabledFields[r]);return"number"===typeof i?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c])},disabled:o,value:isNaN(e.values[r][c])?"":e.values[r][c],placeholder:je().enter+" "+c})})}):"boolean"===typeof i?Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,c])},disabled:o,checked:e.values[r][c],label:c})})}):void 0!==oe[e.resource]&&void 0!==oe[e.resource][r]&&void 0!==oe[e.resource][r][c]&&void 0!==t.types&&void 0!==t.types[oe[e.resource][r][c]]?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsxs)(Se.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],disabled:o,children:[Object(ve.jsx)("option",{children:je().select+" "+c}),s.a.Children.toArray(Object.entries(t.types[oe[e.resource][r][c]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(ve.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof i?Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],placeholder:je().enter+" "+c}),"metadata"===r&&"name"===c&&"Country"===e.values[r][c]&&Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(i)?0===i.length?c+" is empty":"range"===c&&"enum"!==e.values[r].type?"":Object(ve.jsx)(Ze.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsxs)(Ze.a.Header,{children:[Object(ve.jsx)("b",{children:c})," : ",ze(i)," items"]}),Object(ve.jsx)(Ze.a.Body,{children:Object(ve.jsx)(lt.a,{fluid:!0,children:s.a.Children.toArray(i.map((function(t,a){if(t.constructor===Object){var n=Object.entries(t);return Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(n.map((function(t){var n=Object(b.a)(t,2),s=n[0],i=n[1];return Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,a,s])},value:i,placeholder:je().enter+" "+s})})})})))]})}return"number"===typeof t?Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"number",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c,a])},value:isNaN(t)?"":t,placeholder:je().enter+" "+c})})]}):"string"===typeof t?Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(ve.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,a])},value:t,placeholder:je().enter+" "+c})})]}):"Unknown data type"})))})})]})}):"Unknown data type"})))})]})}(c):""})))]},"form"),Object(ve.jsx)(f.a,{variant:"primary",type:"submit",children:je().submit}),"\xa0\xa0\xa0",void 0!==e.backFunction&&Object(ve.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:je().cancel})]})},Jt=r(73);function Vt(e,t){var r=Object.keys(e),a=Object.keys(t);return(r=r.filter((function(e){return-1!==a.indexOf(e)}))).sort((function(e,t){return a.indexOf(e)-a.indexOf(t)})),r.reduce((function(r,a){if(Array.isArray(e[a])&&0!==e[a].length&&e[a][0].constructor===Object){var n=e[a].map((function(e){return Vt(e,t[a][0])}));r[a]=n}else r[a]=e[a];return r}),{})}function qt(e,t,r){for(var a=Object.keys(e),n=Jt(e),s=0;s<a.length;s++)Array.isArray(n[a[s]])&&(n=Xt(n,[a[s]],t,r));return n}function Xt(e,t,r,a){for(var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=Jt(e),c=s,i=void 0!==r?Jt(r[a]):void 0,o=Object(j.a)(t),l=0;l<o.length&&void 0!==t[l];l++)c=c[t[l]];var d;if(ze(c)<c.length)return s;for(var b=0;b<o.length&&void 0!==t[b]&&void 0!==i;b++)i="number"===typeof t[b]?i[0]:i[t[b]];return void 0===i||Array.isArray(i)?(void 0!==i&&(d=i[0].constructor===Object?Object(u.a)({},i[0]):""),void 0!==n&&void 0===i&&(d=n.constructor===Object?Object(u.a)({},n):n),void 0!==d&&c.push(d),s):s}var Yt=r(73);function Qt(e){var t=Object(h.p)(),r=t.resource,a=t.id,s=Object(n.useState)(),c=Object(b.a)(s,2),i=c[0],u=c[1],p=Object(n.useState)(""),f=Object(b.a)(p,2),m=f[0],O=f[1],x=Object(h.n)(),v=Object(n.useState)(Yt(ne[r])),g=Object(b.a)(v,2),y=g[0],w=g[1],_=Object(n.useState)({}),k=Object(b.a)(_,2),C=k[0],N=(k[1],Object(n.useState)(void 0)),S=Object(b.a)(N,2),D=S[0],A=S[1],T=Object(n.useContext)(ct).fetched,I=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===T.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,R(t,{limit:100,select:["_id","username","name"]});case 5:r=e.sent,T.UpdateData(r.docs.map((function(e){return{_id:e._id,optionalLabel:void 0!==e.name?e.name:void 0!==e.username?e.username:void 0}})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){void 0!==le[r]&&Object.values(le[r]).forEach((function(e){return I(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,s,c,i,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>0&&void 0!==j[0]?j[0]:{},e.next=3,R(r,t);case 3:n=e.sent,s=n.docs[0],c=Yt(y),c=Vt(s,c),Object.entries(c).forEach((function(e){e[0].toLowerCase().includes("date")&&(c[e[0]]=Ge(e[1]))})),i=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,s,i,l,j,b,p,h,f,m,O,x,v,g;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==ce[r]){e.next=7;break}for(A({}),t=Object.keys(c),n=0;n<t.length;n++)s=t[n],c=Xt(c,[s],ne,r);return w(c),u(Yt(c)),e.abrupt("return");case 7:i={},void 0!==D&&(i=D),l=Object.entries(ce[r]),j=0;case 11:if(!(j<l.length)){e.next=39;break}if(b=l[j][0],p=l[j][1],void 0!==c[b]){e.next=16;break}return e.abrupt("continue",36);case 16:if(void 0===p._type||"disable"!==p._type){e.next=23;break}return e.next=19,p.policy(a);case 19:h=e.sent,i[b]=h,e.next=36;break;case 23:f=Object.entries(p),m=0;case 25:if(!(m<f.length)){e.next=36;break}if(!1!==Array.isArray(c[b])||void 0!==c[b][f[m][0]]){e.next=28;break}return e.abrupt("continue",33);case 28:if(void 0===f[m][1]._type||"disable"!==f[m][1]._type){e.next=33;break}return e.next=31,f[m][1].policy(a);case 31:O=e.sent,i[b]=Object(d.a)({},f[m][0],O);case 33:m++,e.next=25;break;case 36:j++,e.next=11;break;case 39:for(x=Object.keys(c),v=0;v<x.length;v++)g=x[v],void 0!==i[g]&&!1!==i[g]||(c=Xt(c,[g],ne,r));A(i),w(c),u(Yt(c));case 44:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:a};e({filter:JSON.stringify(t)})}),[]);var E=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n,s,c,l,u,b,p,h,f,m,v,g,w,_,k;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=Yt(y),s=Yt(i),Be(n),Be(s),c={},l=Object.entries(n),u=0;u<l.length;u++)if(b=l[u][0],p=l[u][1],Array.isArray(p)){if(void 0===c[b]&&(c[b]={add:[],remove:[],update:[]}),h=Object(j.a)(s[b]),void 0!==C[b])for(f=0;f<C[b].indexes.length;f++)(m=h.splice(C[b].indexes[f][0],1)[0]).constructor===Object?(v=Object.keys(m)[0],c[b].remove.push(m[v])):c[b].remove.push(m);for(g=0;g<n[b].length;g++)g<h.length&&!Me(n[b][g],h[g])&&(n[b][g].constructor===Object?(_=Object.keys(h[g])[0],c[b].update.push((w={},Object(d.a)(w,_,h[g][_]),Object(d.a)(w,"new",n[b][g]),w))):(c[b].add.push(n[b][g]),c[b].remove.push(h[g]))),g>=h.length&&c[b].add.push(n[b][g]);Me(c[b],{add:[],remove:[],update:[]})&&delete c[b]}else p.constructor===Object||p!==i[b]&&(c[b]=p);if(0!==Object.keys(c).length){e.next=11;break}return O(je().no_changes_found),e.abrupt("return");case 11:return e.prev=11,e.next=14,P(r,c,a);case 14:k=e.sent,k.response,window.alert(je().resource_successfully_edited),x("/"+r),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(11),e.t0.error.response,O(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 24:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(ve.jsx)("b",{children:r}),"\xa0of id:\xa0",Object(ve.jsx)("b",{children:a}),"\xa0"]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsx)(Kt,{values:y,resource:r,functionalFields:ne,disabledFields:D,handleChangesCallback:function(e,t){var a,n=Yt(y),s=n,c=-1;for(a=0;a<t.length-1;a++)s=s[t[a]],"number"===typeof t[a]&&(c=a);if("number"===typeof t[a]&&(c=a),s[t[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Xt(n,t.slice(0,c),ne,r,i)}w(n)},arrayDeleteCallback:function(e){var t,a=Yt(y),n=a;for(t=0;t<e.length-1&&void 0!==e[t];t++)n=n[e[t]];var s=n.splice(e[t],1),c="number"===typeof s[0]?NaN:"";a=Xt(a,e.slice(0,t),ne,r,c),1===t&&(void 0===C[e[0]]&&(C[e[0]]={indexes:[],elements:[],minDel:1/0}),Le(s[0])||(C[e[0]].elements.push(s[0]),C[e[0]].indexes.push(e[t]>=C[e[0]].minDel?e[t]+C[[e[0]]].indexes.filter((function(r){return r>=e[t]})).length:e[t]),e[t]<C[e[0]].minDel&&(C[e[0]].minDel=e[t]))),w(a)},submitFunction:E,backFunction:function(e){e.preventDefault(),x(-1)}}),Object(ve.jsx)("br",{}),Object(ve.jsx)("font",{style:{marginLeft:"5px"},children:m})]})]})}var Zt=r(343),$t=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader||void 0===e.setMsg||void 0===e.setIsError?"Loading":Object(ve.jsxs)(Se.a,{onSubmit:e.submitFunction,children:[Object(ve.jsx)(Se.a.Label,{children:Object(ve.jsx)("b",{children:je().select_file})}),Object(ve.jsx)(Se.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var r=t.target.files[0];e.setFile(r);var a=new FileReader;a.onloadend=function(){var t=a.result;if(r.name.endsWith(".csv")){var n=new RegExp("\\r","g"),s=t.replace(n,"").split("\n");e.setContentHeader(s[0]),s.splice(0,1),e.setContentBody(s),e.setContentPlain(null)}if(r.name.endsWith(".json"))try{var c=JSON.stringify(JSON.parse(t),null,4);e.setContentHeader(null),e.setContentBody(null),e.setContentPlain(c),e.setMsg(""),e.setIsError(!1)}catch(i){e.setMsg("The selected file cannot be parsed as JSON because it contains errors. Please select another file or fix it before uploading"),e.setIsError(!0)}},a.readAsText(r)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(ve.jsx)(Ze.a,{children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsx)(Ze.a.Header,{children:je().file_content}),Object(ve.jsx)(Ze.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ve.jsxs)(Qe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ve.jsx)("thead",{children:Object(ve.jsx)("tr",{children:s.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(ve.jsx)("th",{children:e})})))})}),Object(ve.jsx)("tbody",{children:s.a.Children.toArray(e.contentBody.map((function(e){return Object(ve.jsx)("tr",{children:s.a.Children.toArray(e.split(",").map((function(e){return Object(ve.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(ve.jsx)(Ze.a,{children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsx)(Ze.a.Header,{children:je().file_content}),Object(ve.jsx)(Ze.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ve.jsx)("textarea",{style:{resize:"both"},cols:"120",rows:"10",readOnly:!0,value:e.contentPlain})})]})}),Object(ve.jsx)(f.a,{variant:"primary",type:"submit",children:je().submit},"submit"),"\xa0\xa0\xa0",Object(ve.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:je().cancel},"cancel")]})},er=r(73);function tr(e){var t=Object(h.p)().resource,r=Object(p.c)(),a=Object(b.a)(r,2),s=a[0];a[1];void 0!==e.resource&&(t=e.resource);var c,i=Object(h.n)(),d=Object(n.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],m=Object(n.useState)(""),O=Object(b.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),w=y[0],_=y[1],C=Object(n.useState)(er(se[t])),S=Object(b.a)(C,2),P=S[0],D=S[1],A=Object(n.useState)(void 0),T=Object(b.a)(A,2),I=T[0],E=T[1],F=Object(n.useState)(null),L=Object(b.a)(F,2),z=L[0],B=L[1],M=Object(n.useState)(null),H=Object(b.a)(M,2),G=H[0],W=H[1],U=Object(n.useState)(null),K=Object(b.a)(U,2),J=K[0],V=K[1],q=Object(n.useContext)(ct);if(c=void 0!==q?q.fetched:{},Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,R(t,{limit:100,select:["_id","username","name"]});case 5:r=e.sent,c.UpdateData(r.docs.map((function(e){return{_id:e._id,optionalLabel:void 0!==e.name?e.name:void 0!==e.username?e.username:void 0}})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();void 0!==le[t]&&Object.values(le[t]).forEach((function(t){return e(t)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n,s,c=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,R(t,r);case 3:a=e.sent,n=a.docs[0],s=er(P),s=qt(s=Vt(n,s),se,t),D(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var r={_id:s.get("from")};e({filter:JSON.stringify(r)})}}),[s,t]),void 0===se[t])return Object(ve.jsx)("div",{children:"This entity cannot be posted"});var X=function(e){e.preventDefault(),i(-1)},Y=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=void 0,void 0!==(n=er(P)).token&&(a=n.token,delete n.token),s=er(n),Be(s),e.prev=6,e.next=9,N(t,JSON.stringify(s),a);case 9:d=e.sent,l=d.response,v(l.statusText),_(!1),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),l=e.t0.error.response,console.log({message:l.data.message,details:l.data.details}),u="",u=l.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+l.data.details.slice(l.data.details.indexOf("{")+1,-1):l.data.details,v(l.data.message+" : "+u),_(!0);case 24:200===l.status&&("tenants"!==t&&c.RemoveData(t),window.alert(je().resource_successfully_posted),i("/"+t));case 25:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==I){e.next=5;break}return v(je().no_file),_(!0),e.abrupt("return");case 5:if(!I.name.endsWith(".csv")){e.next=26;break}return(n=new FormData).append("file",I),e.prev=8,e.next=11,k(t,n);case 11:s=e.sent,a=s.response,v(a.statusText),_(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),_(!0);case 26:if(!I.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,N(t,J,void 0);case 30:l=e.sent,a=l.response,v(a.statusText),_(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),a=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=void 0!==e.t1.error.response.data.details&&e.t1.error.response.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):void 0===e.t1.error.response.data.details&&e.t1.error.response.data.message.includes("Unexpected token")?je().generic_file_post_error:e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),_(!0);case 45:200===a.status&&(window.alert(je().resource_successfully_posted),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ve.jsx)("b",{children:t})]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsxs)(Zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),_(!1)},defaultActiveKey:"form",children:[ie[t].includes("form")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"form",children:"Form"})}),ie[t].includes("file")&&null===s.get("from")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ve.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[Object(ve.jsx)(Kt,{values:P,resource:t,functionalFields:se,disabledFields:{},handleChangesCallback:function(e,r){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=er(P),c=s,i=-1;for(a=0;a<r.length-1;a++)c=c[r[a]],"number"===typeof r[a]&&(i=a);c[r[a]]=e,"number"===typeof r[a]&&(i=a),!1===n&&-1!==i&&(s=Xt(s,r.slice(0,i),se,t)),D(s)},arrayDeleteCallback:function(e){var r,a=er(P),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];n.splice(e[r],1),a=Xt(a,e.slice(0,r),se,t),D(a)},submitFunction:Y,backFunction:X}),Object(ve.jsx)("br",{}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:x})]}),"file"===j&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[Object(ve.jsx)($t,{submitFunction:Q,backFunction:X,setContentBody:W,setContentHeader:B,setContentPlain:V,setFile:E,contentPlain:J,contentHeader:z,contentBody:G,setMsg:v,setIsError:_}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:x})]})]})]})]})}function rr(e){var t=Object(n.useState)(null),r=Object(b.a)(t,2),a=r[0],s=r[1];return Object(ve.jsx)(Ze.a,{size:"lg",children:Object(ve.jsxs)(Ze.a.Item,{eventKey:0,children:[Object(ve.jsx)(Ze.a.Header,{children:je().import+" - "+je().export+" "+je().configuration}),Object(ve.jsx)(Ze.a.Body,{children:Object(ve.jsx)(lt.a,{children:Object(ve.jsxs)(dt.a,{children:[Object(ve.jsx)(ut.a,{sm:6,children:Object(ve.jsxs)(Se.a,{onSubmit:function(){return e.importValues(a)},children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)("b",{children:"Import configuration from json file"})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsxs)(ut.a,{children:[Object(ve.jsx)(Se.a.Label,{children:Object(ve.jsx)("b",{children:je().select_file})}),Object(ve.jsx)(Se.a.Control,{className:"mb-3",type:"file",accept:".json",label:"File",onChange:function(e){e.preventDefault();var t=e.target.files[0],r=new FileReader;r.onloadend=function(){var e=r.result;s(e)},r.readAsText(t)}})]})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:"red"},children:e.importMsg})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{type:"submit",variant:"success",children:"Load"})})})]})}),Object(ve.jsxs)(ut.a,{sm:6,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)("b",{children:"Download configuration as json file"})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"22px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",onClick:function(){var t=new Blob([JSON.stringify(e.values,null,4)]);Object(Pt.saveAs)(t,(""!==e.values._id?e.values._id:"Experiment")+".json")},children:"Download"})})})]})]})})})]})})}var ar=r(73);function nr(e){var t="experiments",r=Object(p.c)(),a=Object(b.a)(r,2),c=a[0],i=(a[1],Object(h.n)()),d=Object(n.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],m=Object(n.useState)(""),O=Object(b.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),w=y[0],_=y[1],C=Object(n.useState)(""),S=Object(b.a)(C,2),P=S[0],D=S[1],A=Object(n.useState)(ar(se[t])),T=Object(b.a)(A,2),I=T[0],E=T[1],F=Object(n.useState)({metadata:{name:!0}}),L=Object(b.a)(F,2),z=L[0],B=L[1],M=Object(n.useState)(),H=Object(b.a)(M,2),G=H[0],W=H[1],U=Object(n.useState)(void 0),K=Object(b.a)(U,2),J=K[0],V=K[1],q=Object(n.useState)(null),X=Object(b.a)(q,2),Y=X[0],Q=X[1],Z=Object(n.useState)(null),$=Object(b.a)(Z,2),ee=$[0],te=$[1],re=Object(n.useState)(null),ae=Object(b.a)(re,2),ne=ae[0],ce=ae[1];if(Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,R("protocols",t);case 3:r=e.sent,W(r.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100,select:["_id","metadata","topics"]})}),[e,c]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,R(t,r);case 3:a=e.sent,n=a.docs[0],(s=ar(I)).protocol="",s.metadata=[{name:"",value:""}],(c=ar(z)).protocol=!0,B(c),s=Vt(n,s),Object.entries(s).forEach((function(e){e[0].toLowerCase().includes("date")&&(s[e[0]]=Ge(e[1]))})),s._id=s._id+"_copy",s=qt(s,se,t),E(s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==c.get("from")&&""!==c.get("from")){var r={_id:c.get("from")};e({filter:JSON.stringify(r),select:["_id","metadata","topics"]})}}),[c,t]),void 0===se[t])return Object(ve.jsx)("div",{children:"This entity cannot be posted"});var oe=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,a={_id:t.target.value},n={filter:JSON.stringify(a)},e.next=6,R("protocols",n);case 6:for(s=e.sent,c=s.docs[0],i=[],l=0;l<c.metadata.length;l++)"scalar"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:0}),"text"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:c.metadata[l].name+"_Name"}),"vector"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:[0]});(d=ar(I)).protocol=r,0!==i.length&&(d.metadata=i),(u=ar(z)).protocol=!0,B(u),E(d);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d,u,j,b;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=void 0,void 0!==(n=ar(I)).token&&(a=n.token,delete n.token),s=ar(n),Be(s),void 0!==s.protocol){e.next=10;break}return v("Please, select a protocol"),_(!0),e.abrupt("return");case 10:if(""!==s._id){e.next=14;break}return v("Please, define an _id"),_(!0),e.abrupt("return");case 14:if(""!==s.state){e.next=18;break}return v("Please, select a state"),_(!0),e.abrupt("return");case 18:return void 0!==s.startDate&&(c=new Date(s.startDate),l=c.getTime()-6e4*c.getTimezoneOffset(),s.startDate=new Date(l).toISOString()),void 0!==s.endDate&&(d=new Date(s.endDate),l=d.getTime()-6e4*d.getTimezoneOffset(),s.endDate=new Date(l).toISOString()),e.prev=20,e.next=23,N(t,JSON.stringify(s),a);case 23:j=e.sent,u=j.response,v(u.statusText),_(!1),e.next=38;break;case 29:e.prev=29,e.t0=e.catch(20),console.log(e.t0),u=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),b="",b=e.t0.error.response.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+b),_(!0);case 38:200===u.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 39:case"end":return e.stop()}}),e,null,[[20,29]])})));return function(t){return e.apply(this,arguments)}}(),de=function(e){e.preventDefault(),i(-1)},ue=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==J){e.next=5;break}return v(je().no_file),_(!0),e.abrupt("return");case 5:if(!J.name.endsWith(".csv")){e.next=26;break}return(n=new FormData).append("file",J),e.prev=8,e.next=11,k(t,n);case 11:s=e.sent,a=s.response,v(a.statusText),_(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),_(!0);case 26:if(!J.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,N(t,ne,void 0);case 30:l=e.sent,a=l.response,v(a.statusText),_(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),a=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=void 0!==e.t1.error.response.data.details&&e.t1.error.response.data.details.includes("duplicate key")?je().duplicate_resource_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):void 0===e.t1.error.response.data.details&&e.t1.error.response.data.message.includes("Unexpected token")?"The selected file cannot be uploaded because it contains errors.":e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),_(!0);case 45:200===a.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ve.jsx)("b",{children:t})]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsxs)(Zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),_(!1)},defaultActiveKey:"form",children:[ie[t].includes("form")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"form",children:"Form"})}),ie[t].includes("file")&&null===c.get("from")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ve.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&(null===c.get("from")||""===c.get("from"))&&Object(ve.jsx)(rr,{values:I,importValues:function(e){try{var t=JSON.parse(e),r=ar(I);null===t.state&&(t.state=NaN),r.protocol="",r.metadata=[{name:"",value:""}];var a=Vt(t,r);if(void 0===a._id&&void 0===a.owner&&void 0===a.protocol&&void 0===a.metadata)return void D(je().error_imported_file);D(""),void 0!==a.history&&delete a.history,E(a);var n=ar(z);n.protocol=!0,B(n)}catch(s){D(je().error_imported_file),console.log(s)}},importMsg:P}),"form"===j&&void 0!==G&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[(null===c.get("from")||""===c.get("from"))&&Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" protocol",onChange:oe,value:I.protocol,children:[Object(ve.jsxs)("option",{children:[je().select," protocol"]}),s.a.Children.toArray(G.map((function(e){return Object(ve.jsx)("option",{value:e,children:e})})))]}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Kt,{values:I,resource:t,functionalFields:se,disabledFields:z,handleChangesCallback:function(e,r){var a,n=ar(I),s=n,c=-1;for(a=0;a<r.length-1;a++)s=s[r[a]],"number"===typeof r[a]&&(c=a);if("number"===typeof r[a]&&(c=a),s[r[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Xt(n,r.slice(0,c),se,t,i)}E(n)},arrayDeleteCallback:function(e){var r,a=ar(I),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];var s="number"===typeof n.splice(e[r],1)[0]?NaN:"";a=Xt(a,e.slice(0,r),se,t,s),E(a)},submitFunction:le,backFunction:de}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:x})]}),"file"===j&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[Object(ve.jsx)($t,{submitFunction:ue,backFunction:de,setContentBody:te,setContentHeader:Q,setContentPlain:ce,setFile:V,contentPlain:ne,contentHeader:Y,contentBody:ee,setMsg:v,setIsError:_}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:x})]})]})]})]})}var sr=r(73);function cr(e){var t="measurements",r=Object(p.c)(),a=Object(b.a)(r,2),c=a[0],i=(a[1],Object(n.useState)([])),d=Object(b.a)(i,2),u=d[0],j=d[1],m=Object(n.useState)([]),O=Object(b.a)(m,2),x=O[0],v=O[1],g=Object(h.n)(),y=Object(n.useState)("form"),w=Object(b.a)(y,2),_=w[0],C=w[1],S=Object(n.useState)(""),P=Object(b.a)(S,2),D=P[0],A=P[1],T=Object(n.useState)(!1),I=Object(b.a)(T,2),E=I[0],F=I[1],L=Object(n.useState)(sr(se[t])),z=Object(b.a)(L,2),B=z[0],M=z[1],H=Object(n.useState)({}),G=Object(b.a)(H,2),W=G[0],U=(G[1],Object(n.useState)()),K=Object(b.a)(U,2),J=K[0],V=K[1],q=Object(n.useState)(""),X=Object(b.a)(q,2),Y=X[0],Q=X[1],Z=Object(n.useState)(void 0),$=Object(b.a)(Z,2),ee=$[0],te=$[1],re=Object(n.useState)(null),ae=Object(b.a)(re,2),ne=ae[0],ce=ae[1],oe=Object(n.useState)(null),de=Object(b.a)(oe,2),ue=de[0],be=de[1],pe=Object(n.useState)(null),he=Object(b.a)(pe,2),fe=he[0],me=he[1],Oe=Object(n.useContext)(ct).fetched,xe=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Oe.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,R(t,{limit:100,select:["_id","username","name"]});case 5:r=e.sent,Oe.UpdateData(r.docs.map((function(e){return{_id:e._id,optionalLabel:void 0!==e.name?e.name:void 0!==e.username?e.username:void 0}})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==le[t]&&Object.values(le[t]).forEach((function(e){return xe(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,R("features",t);case 4:r=e.sent,V(r.docs.map((function(e){return e._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e({limit:100,select:["_id","items"]})}),[e,c]),void 0===se[t])return Object(ve.jsx)("div",{children:"This entity cannot be posted"});var ge=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,a={_id:r},n={filter:JSON.stringify(a)},e.next=6,R("features",n);case 6:return s=e.sent,c=s.docs[0],i=c.items,l=ye([],i),j(l),v(i),Q(r),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(e,t){var r=[],a=sr(e);return t.forEach((function(e){"number"===e.type?0===e.dimension?r.push({name:e.name,value:NaN,type:e.type}):r.push([{name:e.name,value:NaN,type:e.type}]):"text"===e.type?0===e.dimension?r.push({name:e.name,value:"",type:e.type}):r.push([{name:e.name,value:"",type:e.type}]):"enum"===e.type&&(0===e.dimension?r.push({name:e.name,value:"",enumValues:e.range,type:e.type}):r.push([{name:e.name,value:"",enumValues:e.range,type:e.type}]))})),a.push({values:r}),a},we=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=void 0,n=sr(B),s=u.map((function(e){return{values:e.values.map((function(e){return e.value}))}})),void 0!==n.token&&(a=n.token,delete n.token),Be(n),n.feature=Y,n.samples=s,e.prev=8,e.next=11,N(t,JSON.stringify(n),a);case 11:i=e.sent,c=i.response,A(c.statusText),F(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),c=e.t0.error.response,A(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),F(!0);case 23:200===c.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 24:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){e.preventDefault(),g(-1)},ke=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==ee){e.next=5;break}return A(je().no_file),F(!0),e.abrupt("return");case 5:if(!ee.name.endsWith(".csv")){e.next=23;break}return(n=new FormData).append("file",ee),e.prev=8,e.next=11,k(t,n);case 11:s=e.sent,a=s.response,A(a.statusText),F(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,A(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),F(!0);case 23:if(!ee.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,N(t,fe,void 0);case 27:c=e.sent,a=c.response,A(a.statusText),F(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),a=e.t1.error.response,A(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),F(!0);case 39:200===a.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(ve.jsx)("b",{children:t})]}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsxs)(Zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){C(e),A(""),F(!1)},defaultActiveKey:"form",children:[ie[t].includes("form")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"form",children:"Form"})}),ie[t].includes("file")&&null===c.get("from")&&Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ve.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===_&&void 0!==J&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" feature",onChange:ge,value:Y,children:[Object(ve.jsxs)("option",{children:[je().select," feature"]}),s.a.Children.toArray(J.map((function(e){return Object(ve.jsx)("option",{value:e,children:e})})))]}),Object(ve.jsx)("hr",{}),Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsxs)("b",{children:["Samples :",u.length]})}),Object(ve.jsx)("br",{}),s.a.Children.toArray(u.map((function(e,t){return Object(ve.jsx)(dt.a,{style:{padding:10},children:Object(ve.jsx)(Ze.a,{defaultActiveKey:"0",children:Object(ve.jsxs)(Ze.a.Item,{eventKey:t,children:[Object(ve.jsx)(Ze.a.Header,{children:Object(ve.jsx)("b",{children:Object(ve.jsxs)("i",{children:["Sample [",t,"]"]})})}),Object(ve.jsx)(Ze.a.Body,{children:s.a.Children.toArray(Object.values(e.values).map((function(e){return Object(ve.jsxs)(dt.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px",padding:10},children:[Object(ve.jsx)(ut.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(ve.jsx)("b",{children:Object(ve.jsx)("i",{children:e.name})})}),Object(ve.jsx)(ut.a,{sm:2,children:"enum"===e.type?Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" "+e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},children:[Object(ve.jsx)("option",{value:"",children:je().select+" "+e.name}),s.a.Children.toArray(e.enumValues.map((function(e){return Object(ve.jsx)("option",{value:e,children:e})})))]}):"text"===e.type?Object(ve.jsx)(Se.a.Control,{type:"text",id:e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},"aria-label":je().enter+" "+e.name}):Object(ve.jsx)(Se.a.Control,{type:"number",id:e.name,onChange:function(t){t.preventDefault(),e.value=parseInt(t.target.value,10)},"aria-label":je().enter+" "+e.name})})]})})))})]})})})}))),0!==u.length&&Object(ve.jsx)(f.a,{variant:"link",onClick:function(){var e=ye(u,x);j(e)},children:Object(ve.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add sample",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})]}),Object(ve.jsx)("hr",{}),Object(ve.jsx)("br",{}),Object(ve.jsx)(Kt,{values:B,resource:t,functionalFields:se,disabledFields:W,handleChangesCallback:function(e,r){var a,n=sr(B),s=n,c=-1;for(a=0;a<r.length-1;a++)s=s[r[a]],"number"===typeof r[a]&&(c=a);if("number"===typeof r[a]&&(c=a),s[r[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Xt(n,r.slice(0,c),se,t,i)}M(n)},arrayDeleteCallback:function(e){var r,a=sr(B),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];var s="number"===typeof n.splice(e[r],1)[0]?NaN:"";a=Xt(a,e.slice(0,r),se,t,s),M(a)},submitFunction:we,backFunction:_e}),Object(ve.jsx)("br",{}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:E?"red":"black"},children:D})]}),"file"===_&&Object(ve.jsxs)("div",{style:{margin:"5px"},children:[Object(ve.jsx)($t,{submitFunction:ke,backFunction:_e,setContentBody:be,setContentHeader:ce,setContentPlain:me,setFile:te,contentPlain:fe,contentHeader:ne,contentBody:ue}),Object(ve.jsx)("font",{style:{marginLeft:"5px",color:E?"red":"black"},children:D})]})]})]})]})}var ir=r(336);function or(e){return void 0===e.postHistory||void 0===e.arraySepRef||void 0===e.floatSepRef||void 0===e.csvSep||void 0===e.setCsvSep||void 0===e.ovdRef||void 0===e.setCsvHeader||void 0===e.setCsvContent||void 0===e.setFile||void 0===e.file||void 0===e.csvContent||void 0===e.csvHeader?"Loading":Object(ve.jsxs)(Se.a,{onSubmit:e.postHistory,children:[Object(ve.jsxs)(dt.a,{style:{paddingTop:"10px"},children:[Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Column Separator",value:e.csvSep,onChange:function(t){t.preventDefault(),e.setCsvSep(t.target.value)},children:[Object(ve.jsx)("option",{value:",",children:","}),Object(ve.jsx)("option",{value:";",children:";"}),Object(ve.jsx)("option",{value:"-",children:"-"}),Object(ve.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Array separator",ref:e.arraySepRef,children:[Object(ve.jsx)("option",{value:";",children:";"}),Object(ve.jsx)("option",{value:",",children:","}),Object(ve.jsx)("option",{value:".",children:"."}),Object(ve.jsx)("option",{value:"-",children:"-"})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(ve.jsx)(ut.a,{sm:1,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Floating Point separator",ref:e.floatSepRef,children:[Object(ve.jsx)("option",{value:".",children:"."}),Object(ve.jsx)("option",{value:",",children:","})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{sm:3,children:Object(ve.jsx)(Se.a.Control,{className:"mb-3",type:"file",accept:".csv",label:"File",onChange:function(t){var r=t.target.files[0],a=new FileReader;a.onloadend=function(){var t=a.result,n=new RegExp("\\r","g"),s=t.replace(n,"").split("\n");e.setCsvHeader(s[0]),e.setFile(r),s.splice(0,1),e.setCsvContent(s)},a.readAsText(r)}})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",label:"Update duplicate steps in History Experiment",ref:e.ovdRef})})})}),null!==e.csvContent&&Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(Ze.a,{children:Object(ve.jsxs)(Ze.a.Item,{eventKey:"0",children:[Object(ve.jsx)(Ze.a.Header,{children:je().preview+" - "+e.file.name}),Object(ve.jsx)(Ze.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(ve.jsxs)(Qe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(ve.jsx)("thead",{children:Object(ve.jsx)("tr",{children:s.a.Children.toArray(e.csvHeader.split(e.csvSep).map((function(e){return Object(ve.jsx)("th",{children:e})})))})}),Object(ve.jsx)("tbody",{children:s.a.Children.toArray(e.csvContent.map((function(t){return Object(ve.jsx)("tr",{children:s.a.Children.toArray(t.split(e.csvSep).map((function(e){return Object(ve.jsx)("td",{children:e})})))})})))})]})})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",type:"submit",children:je().submit})})})]})}function lr(e){return void 0===e.experiments||void 0===e.postHistory||void 0===e.values||void 0===e.ovdRef||void 0===e.handleExperimentChange||void 0===e.handleChanges?"Loading":Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:0!==e.experiments.length&&Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" experiment",onChange:e.handleExperimentChange,children:[Object(ve.jsxs)("option",{children:[je().select," experiment to update its history"]}),s.a.Children.toArray(e.experiments.map((function(e){return Object(ve.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",label:"Update step if already present in History Experiment",ref:e.ovdRef})})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Kt,{values:e.values,resource:"updateHistory",functionalFields:{updateHistory:{}},disabledFields:{fields:{name:!0}},handleChangesCallback:e.handleChanges,arrayDeleteCallback:function(){},submitFunction:e.postHistory})})})]})}var dr=r(73),ur=s.a.createRef(),jr=s.a.createRef(),br=s.a.createRef();function pr(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(null),c=Object(b.a)(s,2),i=c[0],d=c[1],u=Object(n.useContext)(ct).logs,j=Object(n.useState)(0),p=Object(b.a)(j,2),h=p[0],f=p[1],m=Object(n.useState)(null),O=Object(b.a)(m,2),x=O[0],v=O[1],g=Object(n.useState)("file"),y=Object(b.a)(g,2),w=y[0],_=y[1],k=Object(n.useState)(0),C=Object(b.a)(k,2),N=C[0],S=C[1],P=Object(n.useState)([]),D=Object(b.a)(P,2),A=D[0],T=D[1],I=Object(n.useState)(""),E=Object(b.a)(I,2),F=E[0],L=E[1],z=Object(n.useState)({}),B=Object(b.a)(z,2),M=B[0],H=B[1],G=Object(n.useState)(""),W=Object(b.a)(G,2),U=W[0],K=W[1],J=Object(n.useState)(!1),V=Object(b.a)(J,2),q=V[0],X=V[1],Y=Object(n.useState)(","),Q=Object(b.a)(Y,2),Z=Q[0],$=Q[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("experiments",{});case 2:t=e.sent,T(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Z,a=jr.current.value,n=br.current.value,s=ur.current.checked,""!==r&&""!==a&&""!==n){e.next=9;break}return K("Please, define all the separators"),X(!0),e.abrupt("return");case 9:if(r!==a&&r!==n&&a!==n){e.next=13;break}return K("All the separators should have different values"),X(!0),e.abrupt("return");case 13:if(null!==x&&void 0!==x){e.next=17;break}return K("Please, choose a file"),X(!0),e.abrupt("return");case 17:return K(""),X(!1),f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+N+"-------\n"}),e.next=23,Tt(x,s,r,a,n);case 23:u.PushLog({type:"info",msg:"-------End Upload Operation "+N+"-------\n\n"}),S((function(e){return e+1})),f(100);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=dr(M),r=Be(r),void 0!==F&&""!==F){e.next=7;break}return K("Please, select one experiment"),X(!0),e.abrupt("return");case 7:if(r.fields=r.fields.filter((function(e){return"number"===typeof e.value&&!isNaN(e.value)||"string"===typeof e.value&&""!==e.value||Array.isArray(e.value)&&0!==e.value.length})),!isNaN(r.step)){e.next=12;break}return K("Please, define the step number"),X(!0),e.abrupt("return");case 12:if(0!==r.fields.length){e.next=16;break}return K("Please, define at least one field"),X(!0),e.abrupt("return");case 16:return K(""),X(!1),a={},(n=[]).push(r),a.history={add:n},f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+N+"-------\n"}),e.next=26,It(F,a,ur.current.checked);case 26:u.PushLog({type:"info",msg:"-------End Upload Operation "+N+"-------\n\n"}),S((function(e){return e+1})),f(100);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=A.filter((function(e){return e._id===t.target.value}))[0],a=r.protocol,n={_id:a},s={filter:JSON.stringify(n)},e.next=7,R("protocols",s);case 7:c=e.sent,i=c.docs[0],l=[],i.topics.map((function(e){return e.fields})).forEach((function(e){l=l.concat(e.map((function(e){var t="scalar"===e.type?NaN:"vector"===e.type?[NaN]:(e.type,"");return{name:e.name,value:t}})))})),(d={}).step=NaN,d.fields=l,H(d),L(t.target.value);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsx)("header",{className:"page-header",children:"Update Experiment History"}),Object(ve.jsxs)("main",{className:"page-content",children:[Object(ve.jsxs)(Zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){_(e),K(""),X(!1)},defaultActiveKey:"file",children:[Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"form",children:"Form"})}),Object(ve.jsx)(Zt.a.Item,{children:Object(ve.jsx)(Zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(ve.jsxs)(lt.a,{fluid:!0,children:["form"===w&&Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(lr,{postHistory:te,values:M,ovdRef:ur,handleExperimentChange:re,handleChanges:function(e,t){var r,a=dr(M),n=a,s=-1;for(r=0;r<t.length-1;r++)n=n[t[r]],"number"===typeof t[r]&&(s=r);if("number"===typeof t[r]&&(s=r),n[t[r]]=e,-1!==s){var c="number"===typeof e?NaN:"";a=Xt(a,t.slice(0,s),void 0,void 0,c)}H(a)},experiments:A})}),"file"===w&&Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(or,{postHistory:ee,arraySepRef:jr,csvSep:Z,setCsvSep:$,floatSepRef:br,ovdRef:ur,setCsvHeader:d,setCsvContent:a,setFile:v,file:x,csvContent:r,csvHeader:i})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:q?"red":"black"},children:U})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(ir.a,{now:h,label:"".concat(h,"%"),variant:100===h?"success":"info"})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Operation logs"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:u.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})]})]})}var hr=r(152),fr=(r(73),s.a.createRef()),mr=s.a.createRef(),Or=s.a.createRef(),xr=s.a.createRef(),vr=s.a.createRef();function gr(){var e=Object(n.useContext)(ct).logs,t=Object(n.useState)(0),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(0),d=Object(b.a)(i,2),u=d[0],j=d[1],p=Object(n.useState)([]),h=Object(b.a)(p,2),m=h[0],O=h[1],x=Object(n.useState)(""),v=Object(b.a)(x,2),g=v[0],y=v[1],w=Object(n.useState)(!1),_=Object(b.a)(w,2),k=_[0],C=_[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("experiments",{limit:100});case 2:t=e.sent,O(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var N=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n,s,i,l,d,b,p,h,f;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=mr.current.value,a=Or.current.value,n=xr.current.value,s=fr.current.value,i=fr.current.selectedIndex,l=vr.current.checked,0!==i){t.next=10;break}return y("Please, select one or All experiment"),C(!0),t.abrupt("return");case 10:if(""!==r&&""!==n&&""!==a){t.next=14;break}return y("Please, define all the separators"),C(!0),t.abrupt("return");case 14:if(r!==a&&r!==n&&a!==n){t.next=18;break}return y("Please, define three different separators"),C(!0),t.abrupt("return");case 18:if(y(""),C(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),d=[],"All"!==s){t.next=36;break}b=0;case 25:if(!(b<m.length)){t.next=34;break}return t.next=28,Ft(m[b]._id,r,a,n,l);case 28:p=t.sent,d.push(p),c((b+1)/m.length*100);case 31:b++,t.next=25;break;case 34:t.next=40;break;case 36:return t.next=38,Ft(s,r,a,n,l);case 38:h=t.sent,d.push(h);case 40:if(!0!==l){t.next=46;break}return t.next=43,Object(hr.a)(d).blob();case 43:f=t.sent,Object(Pt.saveAs)(f,"experiments_history.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_history.zip archive\n"});case 46:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 49:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n,s,i,l,d,b,p,h,f,O,x;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=fr.current.value,a=fr.current.selectedIndex,n=vr.current.checked,0!==a){t.next=7;break}return y("Please, select one or All experiment"),C(!0),t.abrupt("return");case 7:if(y(""),C(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),s=[],"All"===r)for(i=0;i<m.length;i++)l=new Blob([JSON.stringify(m[i],null,4)]),d=m[i]._id+".json",b=null,void 0===n||!1===n?Object(Pt.saveAs)(l,d):b=new File([l],d),s.push(b),e.PushLog({type:"info",msg:d+" successfully downloaded.\n"}),c((i+1)/m.length*100);else p=m.filter((function(e){return e._id===r}))[0],h=new Blob([JSON.stringify(p,null,4)]),f=r+".json",O=null,void 0===n||!1===n?Object(Pt.saveAs)(h,f):O=new File([h],f),s.push(O),e.PushLog({type:"info",msg:f+" successfully downloaded.\n"});if(!0!==n){t.next=19;break}return t.next=16,Object(hr.a)(s).blob();case 16:x=t.sent,Object(Pt.saveAs)(x,"experiments_data.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_data.zip archive\n"});case 19:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsx)("header",{className:"page-header",children:"Download Experiment History"}),Object(ve.jsx)("main",{className:"page-content",children:Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Select experiment"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{sm:3,children:0!==m.length&&Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" experiment",ref:fr,children:[Object(ve.jsxs)("option",{children:[je().select," experiment"]}),Object(ve.jsx)("option",{children:"All"}),s.a.Children.toArray(m.map((function(e){return Object(ve.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",children:Object(ve.jsx)(Se.a.Check,{type:"checkbox",label:"Compress files in a single .zip archive",ref:vr})})})}),Object(ve.jsxs)(dt.a,{children:[Object(ve.jsxs)(ut.a,{children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Download history as csv"})})}),Object(ve.jsxs)(dt.a,{style:{paddingTop:"10px"},children:[Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Column Separator",ref:mr,children:[Object(ve.jsx)("option",{value:",",children:","}),Object(ve.jsx)("option",{value:";",children:";"}),Object(ve.jsx)("option",{value:"-",children:"-"}),Object(ve.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Array separator",ref:Or,children:[Object(ve.jsx)("option",{value:";",children:";"}),Object(ve.jsx)("option",{value:",",children:","}),Object(ve.jsx)("option",{value:".",children:"."}),Object(ve.jsx)("option",{value:"-",children:"-"})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(ve.jsx)(ut.a,{sm:2,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsxs)(Se.a.Select,{"aria-label":"CSV Floating Point separator",ref:xr,children:[Object(ve.jsx)("option",{value:".",children:"."}),Object(ve.jsx)("option",{value:",",children:","})]}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",onClick:N,children:"Download History"})})})]}),Object(ve.jsxs)(ut.a,{children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Download experiment data as json"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{variant:"primary",onClick:S,children:"Download Data"})})})]})]}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:g})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(ir.a,{now:a,label:"".concat(a,"%"),variant:100===a?"success":"info"})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Operation logs"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}r(73);var yr=s.a.createRef();function wr(){var e=Object(n.useContext)(ct).logs,t=Object(n.useState)(0),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(0),d=Object(b.a)(i,2),u=d[0],p=d[1],h=Object(n.useState)([]),m=Object(b.a)(h,2),O=m[0],x=m[1],v=Object(n.useState)(),g=Object(b.a)(v,2),y=g[0],w=g[1],_=Object(n.useState)(),k=Object(b.a)(_,2),C=k[0],N=k[1],S=Object(n.useState)(),P=Object(b.a)(S,2),D=P[0],A=(P[1],Object(n.useState)("")),T=Object(b.a)(A,2),I=T[0],E=T[1],F=Object(n.useState)(!1),L=Object(b.a)(F,2),z=L[0],B=L[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("experiments",{limit:100});case 2:t=e.sent,x(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==D){t.next=4;break}return E("Please, select one or All experiment"),B(!0),t.abrupt("return");case 4:if(r=[],a=Object(j.a)(C),""!==(n=yr.current.value)){t.next=11;break}return E("Please, define at least one step"),B(!0),t.abrupt("return");case 11:if(n.includes("*")?(r=r.concat(C),a=[]):n.replace(/\s/g,"").split(",").forEach((function(e){if(e.includes("/")){var t=e.split("-"),n=C.indexOf(parseInt(t[0])),s=C.indexOf(parseInt(t[1]));if(-1!==n&&-1!==s)for(var c=n;c<=s;c++)r.push(C[c]),a.splice(a.indexOf(C[c]),1)}else C.includes(parseInt(e))&&(r.push(parseInt(e)),a.splice(a.indexOf(parseInt(e)),1))})),0!==r.length){t.next=16;break}return E("The experiment history does not contain specified steps, please check them"),B(!0),t.abrupt("return");case 16:return E(""),B(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Remove Operation "+u+"-------\n"}),t.next=22,Mt(y,r);case 22:e.PushLog({type:"info",msg:"-------End Remove Operation "+u+"-------\n\n"}),p((function(e){return e+1})),c(100),N(a);case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(ve.jsxs)("div",{className:"page",children:[Object(ve.jsx)("header",{className:"page-header",children:"Remove steps from Experiment History"}),Object(ve.jsx)("main",{className:"page-content",children:Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{style:{paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Select experiment"})})}),Object(ve.jsxs)(dt.a,{style:{paddingBottom:"10px"},children:[Object(ve.jsx)(ut.a,{sm:3,children:0!==O.length&&Object(ve.jsxs)(Se.a.Select,{"aria-label":je().select+" experiment",onChange:function(e){var t=e.target.value;if(0===e.target.selectedIndex)return w(void 0),void N(void 0);var r=O.filter((function(e){return e._id===t}))[0].history.map((function(e){return e.step})).sort((function(e,t){return e-t}));w(t),N(r)},children:[Object(ve.jsxs)("option",{children:[je().select," experiment"]}),s.a.Children.toArray(O.map((function(e){return Object(ve.jsx)("option",{value:e._id,children:e._id})})))]})}),void 0!==y&&Object(ve.jsxs)(ut.a,{children:["History steps contained into ",Object(ve.jsx)("b",{children:y}),": ["," ",C.join(", ")," ]"]})]}),void 0!==C&&0===C.length&&Object(ve.jsx)(dt.a,{style:{paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:"The selected experiment's history does not contain steps"})}),void 0!==C&&0!==C.length&&Object(ve.jsxs)(ve.Fragment,{children:[Object(ve.jsx)(dt.a,{style:{paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{sm:3,children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(ve.jsx)(Se.a.Control,{type:"text",ref:yr}),Object(ve.jsxs)(Se.a.Text,{className:"text-muted",children:["Define the steps comma separated.",Object(ve.jsx)("br",{})," intervals can be specified as begin-end (included)."," ",Object(ve.jsx)("br",{})," to remove all steps enter * ",Object(ve.jsx)("br",{}),"Example: 2, 3, 5-7"]})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(f.a,{onClick:M,children:"Remove steps"})})})]}),Object(ve.jsx)(dt.a,{style:{paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("font",{style:{marginLeft:"5px",color:z?"red":"black"},children:I})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(ir.a,{now:a,label:"".concat(a,"%"),variant:100===a?"success":"info"})})}),Object(ve.jsx)(dt.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("b",{children:"Operation logs"})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}var _r=s.a.createRef(),kr=s.a.createRef();function Cr(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),r=t[0],a=t[1],s=Object(h.n)();function c(){return(c=Object(l.a)(Object(o.a)().mark((function e(t){var r,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=_r.current.value,""!==(n=kr.current.value)){e.next=6;break}return a(je().missing_tenant),e.abrupt("return");case 6:if(""!==r){e.next=9;break}return a(je().missing_email),e.abrupt("return");case 9:return e.prev=9,e.next=12,L(n,r);case 12:200===e.sent.response.status?a(je().email_sent_successfully):a(je().email_sent_errors),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}return Object(ve.jsxs)("div",{className:"auth-page",children:[Object(ve.jsx)("div",{className:"title-wrapper",children:Object(ve.jsx)(Ne,{})}),Y.length>1&&Object(ve.jsx)("div",{className:"language-wrapper",children:Object(ve.jsx)(ge,{})}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsxs)("div",{className:"login-section",children:[Object(ve.jsx)(Se.a,{onSubmit:function(e){return c.apply(this,arguments)},children:Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("h4",{children:je().password_recovery})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ve.jsx)(Se.a.Label,{children:je().tenant}),Object(ve.jsx)(Se.a.Control,{ref:kr,type:"text",placeholder:je().tenant_suggestion})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(ve.jsx)(Se.a.Label,{children:je().email}),Object(ve.jsx)(Se.a.Control,{type:"email",ref:_r,placeholder:je().email_suggestion})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsxs)(ut.a,{children:[Object(ve.jsx)(f.a,{variant:"success",type:"submit",children:je().submit})," ","\xa0\xa0\xa0",Object(ve.jsx)(f.a,{variant:"secondary",onClick:function(e){e.preventDefault(),s(-1)},children:je().cancel})]})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("div",{style:{color:"red"},children:r})})})]})}),Object(ve.jsx)("br",{})]})]})}var Nr=s.a.createRef(),Sr=s.a.createRef(),Pr=s.a.createRef();function Dr(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),r=t[0],a=t[1],s=Object(p.c)(),c=Object(b.a)(s,2),i=c[0],d=(c[1],Object(n.useState)(i.get("token"))),u=Object(b.a)(d,2),j=u[0],m=u[1],O=Object(h.n)();function x(){return(x=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,H();case 4:n=e.sent,r=n.response.data.passwordStrength,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),r=1;case 12:if(s=Nr.current.value,c=Sr.current.value,i=Pr.current.value,""!==c&&""!==i){e.next=18;break}return a(je().pass_not_null),e.abrupt("return");case 18:if(c===i){e.next=21;break}return a(je().pass_not_match),e.abrupt("return");case 21:if(""!==s){e.next=24;break}return a(je().missing_email),e.abrupt("return");case 24:if(""!==j&&void 0!=j){e.next=27;break}return a(je().missing_token),e.abrupt("return");case 27:if(!(Object(jt.passwordStrength)(c).id<r)){e.next=31;break}return a(je().stronger_password_required),e.abrupt("return");case 31:return e.prev=31,e.next=34,B(s,j,c);case 34:200===e.sent.response.status?a(je().password_changed):a(je().password_not_changed_errors),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),console.log(e.t1),"Network Error"!==e.t1.error.message){e.next=44;break}return a(je().network_error),e.abrupt("return");case 44:a(e.t1.response.data.message+" : "+e.t1.response.data.details);case 45:case"end":return e.stop()}}),e,null,[[1,8],[31,38]])})))).apply(this,arguments)}return Object(ve.jsxs)("div",{className:"auth-page",children:[Object(ve.jsx)("div",{className:"title-wrapper",children:Object(ve.jsx)(Ne,{})}),Y.length>1&&Object(ve.jsx)("div",{className:"language-wrapper",children:Object(ve.jsx)(ge,{})}),Object(ve.jsx)("br",{}),Object(ve.jsx)("br",{}),Object(ve.jsxs)("div",{className:"login-section",children:[Object(ve.jsx)(Se.a,{onSubmit:function(e){return x.apply(this,arguments)},children:Object(ve.jsxs)(lt.a,{fluid:!0,children:[Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("h4",{children:je().password_reset})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ve.jsx)(Se.a.Label,{children:je().tenant}),Object(ve.jsx)(Se.a.Control,{ref:Nr,type:"text",placeholder:je().tenant_suggestion})]})})})," ",(null===i.get("token")||""===i.get("token"))&&Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"token",children:[Object(ve.jsx)(Se.a.Label,{children:"Token"}),Object(ve.jsx)(Se.a.Control,{onChange:function(e){e.preventDefault(),m(e.target.value)},type:"text",placeholder:je().enter+" token"})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsxs)(Se.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(ve.jsx)(Se.a.Label,{children:je().password}),Object(ve.jsx)(Se.a.Control,{ref:Sr,type:"password",placeholder:je().enter+" new password"}),Object(ve.jsx)(Se.a.Text,{className:"text-muted",children:je().password_rules})]})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)(Se.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(ve.jsx)(Se.a.Control,{type:"password",ref:Pr,placeholder:je().repeat+" new password"})})})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsxs)(ut.a,{children:[Object(ve.jsx)(f.a,{variant:"success",type:"submit",children:je().submit})," ","\xa0\xa0\xa0",Object(ve.jsx)(f.a,{variant:"secondary",onClick:function(){O("/")},children:je().go_login_page})]})}),Object(ve.jsx)(dt.a,{children:Object(ve.jsx)(ut.a,{children:Object(ve.jsx)("div",{style:{color:"red"},children:r})})})]})}),Object(ve.jsx)("br",{})]})]})}var Ar=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1],i=Object(n.useState)([]),f=Object(b.a)(i,2),m=f[0],O=f[1],x=Object(n.useState)(),v=Object(b.a)(x,2),g=v[0],w=v[1],_=Object(n.useState)({}),k=Object(b.a)(_,2),C=k[0],N=k[1],S=s.a.useRef(),P=localStorage.getItem("token");function D(e){c((function(t){return[e].concat(t)}))}function A(e){var t=Object(j.a)(r);t.splice(e,1),c(t)}function T(){c([])}Z.length=0,Object.keys($).forEach((function(e){return delete $[e]})),Object.keys(ee).forEach((function(e){return delete ee[e]})),Object.keys(te).forEach((function(e){return delete te[e]})),Object.keys(re).forEach((function(e){return delete re[e]})),Object.keys(ae).forEach((function(e){return delete ae[e]})),Object.keys(ne).forEach((function(e){return delete ne[e]})),Object.keys(se).forEach((function(e){return delete se[e]})),Object.keys(ce).forEach((function(e){return delete ce[e]})),Object.keys(ie).forEach((function(e){return delete ie[e]})),Object.keys(oe).forEach((function(e){return delete oe[e]})),Object.keys(le).forEach((function(e){return delete le[e]})),Object.keys(de).forEach((function(e){return delete de[e]})),se.tenants={token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:""},ie.tenants=["form"],a=void 0!==q?q:window.location.origin+"/v1";var I={notifications:r,PushNotification:D,RemoveNotification:A,ClearNotifications:T};y.ClearNotifications=T,y.PushNotification=D,y.RemoveNotification=A,Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R("types",{},"");case 3:t=e.sent,w(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===g)try{e()}catch(t){console.log(t)}}),[]);var E={types:g,data:C,UpdateData:function(e,t){N((function(r){return Object(u.a)(Object(u.a)({},r),{},Object(d.a)({},t,Object(j.a)(e)))}))},RemoveData:function(e){N((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(d.a)({},e,void 0))}))}};function F(e){O((function(t){return[e].concat(t)}));var t=document.getElementById("logger");null!==t&&void 0!==t&&(t.scrollTop=t.scrollHeight)}function L(e){var t=Object(j.a)(m);t.splice(e,1),O(t)}function z(){O([])}var B={logs:m,PushLog:F,RemoveLog:L,ClearLogs:z};return Dt.ClearLogs=z,Dt.PushLog=F,Dt.RemoveLog=L,!0===/Mobi/i.test(window.navigator.userAgent)?S.current="vertical":S.current=Q,null===P?Object(ve.jsx)("div",{className:"app",children:Object(ve.jsx)(p.a,{children:Object(ve.jsxs)(h.d,{children:[Object(ve.jsx)(h.b,{path:"/",element:Object(ve.jsx)(Te,{})}),Object(ve.jsx)(h.b,{path:"/passwordrecovery",element:Object(ve.jsx)(Cr,{})}),Object(ve.jsx)(h.b,{path:"/passwordreset",element:Object(ve.jsx)(Dr,{})}),Object(ve.jsx)(h.b,{path:"/add/tenants",element:Object(ve.jsx)(tr,{resource:"tenants"})}),Object(ve.jsx)(h.b,{path:"*",element:Object(ve.jsx)(h.a,{to:"/",replace:!0})})]})})}):(ue(),Object(ve.jsx)(ct.Provider,{value:{notifications:I,fetched:E,logs:B},children:Object(ve.jsx)(p.a,{children:Object(ve.jsxs)(lt.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100vh",width:"99vw"},children:["horizontal"===S.current?Object(ve.jsx)(dt.a,{style:{padding:0},children:Object(ve.jsx)(St,{})}):"",Object(ve.jsxs)(dt.a,{style:{padding:0},children:["vertical"===S.current?Object(ve.jsx)(ut.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(ve.jsx)(Ye,{})}):"",!0===/Mobi/i.test(window.navigator.userAgent)&&Object(ve.jsx)(ut.a,{md:"auto",style:{padding:0},children:Object(ve.jsx)(vt,{})}),Object(ve.jsx)(ut.a,{style:{paddingLeft:0,paddingRight:0},children:Object(ve.jsxs)(h.d,{children:[Object(ve.jsx)(h.b,{path:"/",element:Object(ve.jsx)(Re,{})}),Object(ve.jsx)(h.b,{path:"/home",element:Object(ve.jsx)(Re,{})}),Object(ve.jsx)(h.b,{path:"/viewProfile",element:Object(ve.jsx)(bt,{})}),Object(ve.jsx)(h.b,{path:"/add/experiments/",element:Object(ve.jsx)(nr,{})}),Object(ve.jsx)(h.b,{path:"/add/measurements/",element:Object(ve.jsx)(cr,{})}),Object(ve.jsx)(h.b,{path:"/edit/:resource/:id",element:Object(ve.jsx)(Qt,{})}),Object(ve.jsx)(h.b,{path:"/downloadexperiment",element:Object(ve.jsx)(gr,{})}),Object(ve.jsx)(h.b,{path:"/updatehistory",element:Object(ve.jsx)(pr,{})}),Object(ve.jsx)(h.b,{path:"/removesteps",element:Object(ve.jsx)(wr,{})}),Object(ve.jsx)(h.b,{path:"/add/:resource/",element:Object(ve.jsx)(tr,{})}),Object(ve.jsx)(h.b,{path:"/:page",element:Object(ve.jsx)(ot,{res:":page"})}),Object(ve.jsx)(h.b,{path:"/unauthorized",element:Object(ve.jsx)(pt,{})}),Object(ve.jsx)(h.b,{path:"/404",element:Object(ve.jsx)(Ie,{})}),Object(ve.jsx)(h.b,{path:"*",element:Object(ve.jsx)(h.a,{to:"/404",replace:!0})})]})}),"vertical"===S.current&&!1===/Mobi/i.test(window.navigator.userAgent)&&Object(ve.jsx)(ut.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(ve.jsx)(vt,{})})]})]})})}))};i.a.render(Object(ve.jsx)(s.a.StrictMode,{children:Object(ve.jsx)(Ar,{})}),document.getElementById("root"))}},[[284,1,2]]]);
//# sourceMappingURL=main.c442250d.chunk.js.map