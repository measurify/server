{"version":3,"sources":["common/localizations/localization_it.js","common/localizations/localization_en.js","services/http_operations.js","config.js","common/locale.ts","components/languageSelector/languageSelector.tsx","services/userRolesManagement.js","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","components/navigation/navigation.comp.jsx","components/actionsManager/actionsManager.jsx","services/misc_functions.js","components/contentTable/contentTable.jsx","components/contentCards/contentCards.jsx","components/page/page.jsx","components/profilePage/profilePage.jsx","components/unauthorizedPage/unauthorizedPage.tsx","components/passwordRecoveryPage/PasswordRecoveryPage.jsx","components/PasswordResetPage/PasswordResetPage.jsx","context.jsx","components/formManager/formManager.jsx","services/objects_manipulation.js","components/editContentPage/editContentPage.jsx","components/formFileComp/formFile.jsx","components/addPage/addPage.jsx","components/addMeasurementsPage/controlloForm.jsx","components/addMeasurementsPage/addMeasurementsPage.jsx","components/analyzeDataPage/analyzeDataPage.jsx","App.tsx","index.js"],"names":["localization_it","username","password","tenant","email","keep_logged","select","language","welcome","role","session_expire_in","resources","tools","notifications","file_content","preview","configuration","clear_all","no_changes_found","resource_successfully_edited","resource_successfully_posted","enter","username_suggestion","password_suggestion","tenant_suggestion","email_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","geo_update","geo_failed","profile_page_desc","pass_change_confirm","email_change_confirm","password_changed","email_changed","password_rules","oh_no","broken_link","submit","cancel","login","logout","repeat","close","import","export","password_recovery","password_reset","forgot_password_link","go_login_page","email_sent_successfully","login_error","unauthorised_user","session_expired","no_file","duplicate_resource_error","error_imported_file","pass_not_match","old_pass_empty","old_pass_wrong","pass_not_null","missing_tenant","missing_email","missing_token","missing_password","missing_username","stronger_password_required","email_sent_errors","password_not_changed_errors","network_error","empty_email_error","email_not_match","email_same_as_old","generic_file_post_error","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","body","options","headers","url_string","api_url","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","type","Date","getTime","toString","catch","error","post_file_generic","resource_type","formData","additionalHeader","undefined","GetToken","console","log","tempH","Authorization","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_generic","put_generic","put","padStart","length","JSON","stringify","message","delete_generic","delete","statusCode","get_generic","qs","url","filter","concat","limit","page","sort","by","order","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","get_generic_pipe","get_one_generic","getItem","getBigDataCloudLocation","latitude","longitude","res","continent","continentCode","countryName","countryCode","principalSubdivision","city","locality","requestPasswordReset","resetPassword","reset","getPasswordStrength","website_name","languages","pages","aliasPages","pageActions","viewFields","editFields","tags","addFields","_id","organization","address","phone","admin_username","admin_password","passwordhash","thing","device","editFieldsSpecifier","addTypes","fetchedPageTypes","visibility","fetchedPageData","restrictionPages","locale","tkn","navigator","substring","LanguageSelector","setSessionLanguage","window","location","reload","includes","Button","variant","onClick","roleCache","SetRoleDefinition","canDo","userRole","resource","actionCRUD","tmp","canDoDeprecated","parse","actions","entityDef","el","entity","userRef","React","createRef","pswRef","_tenant","AuthPage","useState","setMsg","e","preventDefault","current","value","psw","replace","details","className","Form","onSubmit","Group","controlId","Label","Control","ref","placeholder","style","color","to","HomePage","useEffect","href","target","rel","title","NotFoundPage","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","intervalRef","loginTime","remainingSeconds","duration","Navigation","isOpened","setIsOpened","usr","rl","tn","canReadMeas","CalcEnding","t0","remainingSec","retryLoginTime","parseInt","now","exp","endsWith","slice","DurationToMilliSeconds","clearInterval","refreshToken","setInterval","clear","paddingLeft","paddingBottom","document","Fragment","navData","isActive","ActionContent","props","toShow","resType","constructor","keys","subK","Array","isArray","map","row","f","UnrollView","item","Accordion","defaultActiveKey","size","Children","toArray","i","key","Item","eventKey","Header","Body","values","some","single","Table","responsive","striped","bordered","hover","join","ActionManager","setRes","viewPopover","Popover","width","minWidth","test","userAgent","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","height","marginRight","opacity","confirm","status","removeSingle","faEye","faPencilAlt","faCopy","isDefault","isNaN","def","elem","nonDefaultLength","removeDefaultElements","entr","j","splice","subEntr","areEqual","obj1","obj2","k1","k2","FormatDate","dt","getDate","getMonth","getFullYear","convertJsonToCSV","header","template","fromEntries","regexComma","RegExp","regexTerm","sorted","assign","ContentTable","orderBy","sortHandler","ascending","index","str","faPlusCircle","faDownload","faList","ContentCards","CardGroup","date","samples","numPerson","Set","person","report","ListGroup","negPerson","push","Card","border","Text","toDateString","Page","params","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","setActions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","disabled","Prev","Ellipsis","Next","Last","find","r","ProfilePage","setUsername","setRole","setTenant","emailShow","setEmailShow","oldPassword","setOldPassword","setPassword","passwordConfirm","setPasswordConfirm","setEmail","emailConfirm","setEmailConfirm","msgPass","setMsgPass","msgEmail","setMsgEmail","isError","setisError","_email","submitPassword","requiredStr","passwordStrength","result","submitEmail","Container","fluid","Row","Col","xs","onChange","UnauthorizedPage","emailRef","PasswordRecoveryPage","navigate","useNavigate","pswConfirmRef","PasswordResetPage","setToken","pswConfirm","resp","AppContext","createContext","FormManager","myFetched","context","useContext","fetched","disabledFields","functionalFields","submitFunction","backFunction","handleChangesCallback","arrayDeleteCallback","types","val","borderBottomStyle","borderBottomWidth","marginBottom","sm","borderRightStyle","borderRightWidth","Select","SelectFormRow","Autocomplete","newValue","renderInput","TextField","label","md","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","NumericFormRow","alias","FetchedFormRow","StringFormRow","cloneDeep","sortObject","sortingKeys","ob","indexOf","a","b","reduce","accumulator","maintainEmptyElements","original","fieldSpecifier","copy","maintainEmptyElement","path","tmpPtr","fieldSpecifierCpy","tmpPath","EditContentPage","setOriginal","setValues","deleted","setDisabledFields","UpdateData","tmpValues","evaluateSpecifiers","_key","specsEntries","policy","fst","tmpOrig","toSend","remove","update","origArr","indexes","removed","statusText","tmpVals","valuesPtr","lastIndexNumber","NaN","elements","minDel","Infinity","FormFile","setContentHeader","setContentPlain","setContentBody","setFile","contentBody","contentPlain","contentHeader","select_file","accept","file","files","fileReader","FileReader","onloadend","content","regex","splitted","split","readAsText","overflow","h","AddPage","postType","setPostType","back","postBody","postFile","FormData","append","Nav","justify","onSelect","Link","backgroundColor","borderRadius","borderStyle","borderColor","borderWidth","margin","faMinusCircle","ControlloForm","handleAddItemArray","handleRemoveItemArray","items","getAddress","handleChanges","refreshLocation","addrMsg","paddingRight","UnrollObjectControllo","newPath","min","max","rows","d","defaultValue","toLocaleString","year","month","day","filtered","range","textDecoration","padding","faMapPin","_feature","_device","_thing","_tags","loadedBody","AddMeasurementsPage","setItems","setAddrMsg","fetchFeature","feature","addr","today","getHours","getMinutes","indirizzo","note","ora","veicolo","persone","età","genere","nazionalità","risultato","UnrollValues","vals","smpls","last","sostanze","pers","alert","sos","sostanza","livello","geolocation","getCurrentPosition","position","coords","updateAddress","complete","short","country","sub","lastKey","CSVheader","AnalyzeDataPage","setOrderBy","isAscending","setIsAscending","processedSamples","control","ret","results","flat","Luogo","Mezzo","Anni","Sesso","Nazionalità","Data","Ora","Risultato","Sostanza","Livello","Note","sortBy","downloadDataHandler","JSONresponse","CSVdata","csvBlob","Blob","saveAs","set","ord","asc","App","setNotifications","setTypes","setData","useRef","prev","notificationManagement","getLocation","fetchTypes","fetchedManagement","element","Provider","minHeight","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9c196938.chunk.js","sourcesContent":["const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  email: \"email\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadrà in \",\r\n  resources: \"Risorse\",\r\n  tools: \"Strumenti\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n  preview: \"Anteprima\",\r\n  configuration: \"Configurazione\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n  no_changes_found: \"Nessun cambiamento trovato\",\r\n  resource_successfully_edited: \"Resoursa modificata con successo!\",\r\n  resource_successfully_posted: \"Resource successufully posted!\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  email_suggestion: \"Inserisci la tua email\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo di Measurify!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.\",\r\n  right_bar_descr_hp:\r\n    'La barra a destra può essere aperta cliccando sul pulsante \"Notifiche\" per mostrare la lista delle notifiche.',\r\n  session_expire_info_hp: ``,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //geolocalization messages\r\n  geo_update: \"Posizione aggiornata\",\r\n  geo_failed: \"Non è stato possibile aggiornare la posizione\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"questa è la pagina in cui puoi visionare il tuo profilo o modificare la password\",\r\n  pass_change_confirm: \"La password verrà modificata, procedere?\",\r\n  email_change_confirm: \"L'indirizzo email verrà modificato, procedere?\",\r\n\r\n  password_changed: \"Password cambiata con successo\",\r\n  email_changed: \"Email cambiata con successo\",\r\n  password_rules:\r\n    \"La password deve contenere almeno 6 caratteri, almeno una lettera maiuscola e un numero.\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  repeat: \"Ripeti\",\r\n  close: \"Chiudi\",\r\n  import: \"Importa\",\r\n  export: \"Esporta\",\r\n\r\n  password_recovery: \"Recupero Password\",\r\n  password_reset: \"Reset Password\",\r\n  forgot_password_link: \"Hai dimenticato la tua password?\",\r\n  go_login_page: \"Torna alla pagina di login\",\r\n  email_sent_successfully:\r\n    \"Email inviata, segui le istruzioni contenute per cambiare la tua password\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n  no_file: \"Si prega di selezionare un file\",\r\n  duplicate_resource_error: \"Nel database è già presente una risorsa con\",\r\n  error_imported_file:\r\n    \"Nel file sono presenti errori, non è stato possibile importarlo\",\r\n  pass_not_match:\r\n    \"La password inserita e la conferma non combaciano, si prega di reinserirle.\",\r\n  old_pass_empty: \"Per favore, inserire la vecchia password\",\r\n  old_pass_wrong: \"La vecchia password è sbagliata\",\r\n  pass_not_null: \"La password non può essere vuota\",\r\n  missing_tenant: \"Si prega di inserire l'organizzazione\",\r\n  missing_email: \"Si prega di inserire l'email\",\r\n  missing_token: \"Si prega di inserire il token\",\r\n  missing_password: \"Si prega di inserire la propria password\",\r\n  missing_username: \"Si prega di inserire il proprio username\",\r\n  stronger_password_required: \"Si prega di inserire una password più robusta\",\r\n  email_sent_errors:\r\n    \"Non è stato possibile inviare la mail, controllare i dati inseriti.\",\r\n\r\n  password_not_changed_errors: \"Non è stato possibile cambiare la password.\",\r\n  network_error: \"Errore di rete, si prega di controllare la connessione.\",\r\n  empty_email_error:\r\n    \"Il campo email è vuoto, si prega di inserire un indirizzo email valido.\",\r\n  email_not_match:\r\n    \"L'indirizzo email inserito e la sua conferma non combaciano, si prega di reinserirle.\",\r\n  email_same_as_old:\r\n    \"La nuova email coincide con quella vecchia, si prega di inserire un indirizzo email diverso dal precedente.\",\r\n  generic_file_post_error:\r\n    \"Il file selezionato non può essere caricato perché contiene errori.\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  email: \"Email\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  resources: \"Resources\",\r\n  tools: \"Tools\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n  preview: \"Preview\",\r\n  configuration: \"Configuration\",\r\n\r\n  clear_all: \"Clear all\",\r\n  no_changes_found: \"No changes found\",\r\n  resource_successfully_edited: \"Resource successfully edited!\",\r\n  resource_successfully_posted: \"Resource successufully posted!\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  email_suggestion: \"Insert your email\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to the Administration dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains the information about your account and  the list of tabs\",\r\n  right_bar_descr_hp:\r\n    'The right bar contains the notification bar (Click on \"Notifications\" to open).',\r\n  session_expire_info_hp: \"\",\r\n  github_page_hp: \"\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"from this page you can view your own profile or change the password\",\r\n  pass_change_confirm: \"Password will be changed, do you confirm?\",\r\n  email_change_confirm: \"Email address will be changed, do you confirm?\",\r\n  password_changed: \"Password changed successfully\",\r\n  email_changed: \"Email changed successfully\",\r\n  password_rules:\r\n    \"Password length should be at least 6 characters, contains at least one uppercase character and one number.\",\r\n  forgot_password_link: \"Have you forgot your password?\",\r\n  go_login_page: \"Go to login page\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link: \"It looks like you have clicked on a broken link.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  repeat: \"Repeat\",\r\n  close: \"Close\",\r\n  import: \"Import\",\r\n  export: \"Export\",\r\n\r\n  password_recovery: \"Password Recovery\",\r\n  password_reset: \"Reset Password\",\r\n  email_sent_successfully:\r\n    \"Email sent, please follow the provided instruction to reset the password\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n  no_file: \"Please, select a file\",\r\n  duplicate_resource_error: \"The database already contains a resource with\",\r\n  error_imported_file: \"File contains errors. It was not possible to import it\",\r\n  pass_not_match:\r\n    \"Provided password and the confirmation do not match. Please insert them again\",\r\n  old_pass_empty: \"Please, enter old password\",\r\n  old_pass_wrong: \"The old password is wrong\",\r\n  pass_not_null: \"Password cannot be empty\",\r\n  missing_tenant: \"Please, insert your tenant\",\r\n  missing_email: \"Please, insert your email\",\r\n  missing_token: \"Please, insert your token\",\r\n  missing_password: \"Please, insert your password\",\r\n  missing_username: \"Please, insert your username\",\r\n  stronger_password_required: \"Please, insert stronger password\",\r\n  email_sent_errors:\r\n    \"It was not possible to send the mail, please check the provided info.\",\r\n  password_not_changed_errors: \"It was not possible to change the password.\",\r\n  network_error: \"Network error, please check internet connection\",\r\n  empty_email_error:\r\n    \"Email field is empty, please insert a valid email address.\",\r\n  email_not_match:\r\n    \"Provided email and the confirmation do not match. Please insert them again.\",\r\n  email_same_as_old:\r\n    \"The new email is the same as the old email. Please insert a different email address.\",\r\n  generic_file_post_error:\r\n    \"The selected file cannot be uploaded because it contains errors.\",\r\n};\r\n\r\nexport default localization_en;\r\n","import { api_url } from \"../config\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nconst instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    //unsafe, delete in prod\r\n    //rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => {},\r\n  RemoveNotification: (id) => {},\r\n  ClearNotifications: () => {},\r\n};\r\n\r\n//login\r\nexport function login(username, password, tenant) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      //Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        localStorage.setItem(\"username\", response.data.user.username);\r\n        localStorage.setItem(\"user-role\", response.data.user.type);\r\n        localStorage.setItem(\"user-email\", response.data.user.email);\r\n        localStorage.setItem(\"user-tenant\", tenant);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(resource_type, qs = {}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n  if (qs.sort !== undefined && qs.sort.by !== \"\") {\r\n    url = url.concat(\r\n      '&sort={\"' +\r\n        qs.sort.by +\r\n        '\":' +\r\n        (qs.sort.order === \"ascending\" ? '\"asc\"' : '\"desc\"') +\r\n        \"}\"\r\n    );\r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic_pipe(resource_type, qs = {}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/pipe/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n\r\n  console.log(\"GET PIPE:\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_one_generic(resource_type, id, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"GET ONE:\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//return the login token from the localstorage\r\nfunction GetToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\n//get location from bigDataCloud APIs\r\nexport function getBigDataCloudLocation(latitude, longitude) {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const url =\r\n    \"https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=\" +\r\n    latitude +\r\n    \"&longitude=\" +\r\n    longitude +\r\n    \"&localityLanguage=it\";\r\n  console.log(\"GET location: \" + url);\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((res) => {\r\n        //set response into localStorage (it will be cleared on logout)\r\n        localStorage.setItem(\"continent\", res.data.continent);\r\n        localStorage.setItem(\"continentCode\", res.data.continentCode);\r\n        localStorage.setItem(\"countryName\", res.data.countryName);\r\n        localStorage.setItem(\"countryCode\", res.data.countryCode);\r\n        localStorage.setItem(\r\n          \"principalSubdivision\",\r\n          res.data.principalSubdivision\r\n        );\r\n        localStorage.setItem(\"city\", res.data.city);\r\n        localStorage.setItem(\"locality\", res.data.locality);\r\n\r\n        resolve(res);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//function to request a password reset\r\nexport async function requestPasswordReset(tenant, email) {\r\n  console.log({ email, tenant });\r\n\r\n  const url_string = api_url + \"/self/reset?tenant=\" + tenant;\r\n  const body = JSON.stringify({ email: email });\r\n  console.log(\"POST password reset request:\" + url_string);\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//function to reset the password from token\r\nexport async function resetPassword(tenant, token, password) {\r\n  const url_string = api_url + \"/self\";\r\n  console.log(\"PUT password reset:\" + url_string);\r\n  const body = JSON.stringify({\r\n    reset: token,\r\n    password: password,\r\n    tenant: tenant,\r\n  });\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//get required password strength from the API\r\nexport async function getPasswordStrength() {\r\n  const url_string = api_url + \"/types/passwordStrength\";\r\n  console.log(\"GET password strength:\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url_string, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n","import { isFeatureInUse, alwaysTrue } from \"./services/validations\";\r\n\r\n//url of APIs\r\n//export const api_url = \"https://hi-drive.measurify.org:8080/v1\";\r\nexport const api_url = \"https://think.measurify.org/v1\";\r\n//export const api_url = \"https://localhost/v1\";\r\n\r\n//name of this dashboard, shown to users\r\nexport const website_name = \"Pensaci Prima\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\n//export const languages = [\"en\", \"it\"];\r\nexport const languages = [\"it\"];\r\n\r\n//gui layout\r\n// options are \"horizontal\" or \"vertical\"\r\nexport const layout = \"vertical\";\r\n\r\n//dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const pages = {};\r\n//pages[\"users\"] = [\"username\", \"type\", \"actions\"];\r\n//pages[\"tags\"] = [\"_id\", \"actions\"];\r\n//pages[\"things\"] = [\"_id\", \"actions\"];\r\n//pages[\"features\"] = [\"_id\", \"actions\"];\r\n//pages[\"devices\"] = [\"_id\", \"tags\", \"actions\"];\r\n//pages[\"protocols\"] = [\"_id\", \"description\", \"actions\"];\r\n//pages[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"actions\"];\r\npages[\"measurements\"] = [\"samples\", \"actions\"];\r\n\r\n//alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\nexport const aliasPages = {};\r\n//aliasPages[\"features\"] = { _id: \"Feature Name\", actions: \"Actions\" };\r\n//aliasPages[\"tags\"] = { _id: \"Tag Name\", actions: \"Actions\" };\r\n//aliasPages[\"devices\"] = { _id: \"Device Name\", actions: \"Actions\" };\r\n\r\n//actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\"\r\nexport const pageActions = {};\r\n//pageActions[\"features\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n//pageActions[\"users\"] = [\"view\", \"delete\"];\r\n//pageActions[\"things\"] = [\"view\", \"delete\"];\r\n//pageActions[\"tags\"] = [\"view\", \"edit\", \"delete\"];\r\n//pageActions[\"devices\"] = [\"view\", \"edit\", \"delete\"];\r\n//pageActions[\"protocols\"] = [\"view\", \"delete\"];\r\n//pageActions[\"experiments\"] = [\"view\", \"delete\"];\r\npageActions[\"measurements\"] = [\"view\", \"delete\"];\r\n\r\n//view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\n/*viewFields[\"users\"] = [\"username\", \"type\", \"actions\", \"fieldmask\", \"status\"];\r\nviewFields[\"features\"] = [\r\n  { items: [\"name\", \"type\", \"unit\", \"dimension\"] },\r\n  \"tags\",\r\n];\r\nviewFields[\"tags\"] = [\"tags\"];\r\nviewFields[\"things\"] = [\"_id\", \"visibility\", \"tags\"];\r\nviewFields[\"devices\"] = [\"_id\", \"features\", \"tags\", \"scripts\"];\r\nviewFields[\"protocols\"] = [\"_id\", \"description\", \"metadata\"];\r\nviewFields[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"metadata\"];*/\r\nviewFields[\"measurements\"] = [\"samples\"];\r\n\r\n//edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the object that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const editFields = {};\r\n/*editFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN }],\r\n  tags: [\"\"],\r\n};\r\neditFields[\"tags\"] = {\r\n  tags: [\"\"],\r\n};\r\neditFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };*/\r\neditFields[\"measurements\"] = { tags: [\"\"] };\r\n//add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const addFields = {};\r\naddFields[\"tenants\"] = {\r\n  token: \"\",\r\n  _id: \"\",\r\n  organization: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  admin_username: \"\",\r\n  admin_password: \"\",\r\n  passwordhash: \"\",\r\n};\r\n/*addFields[\"tags\"] = { _id: \"\", tags: [\"\"] };\r\naddFields[\"things\"] = { _id: \"\", visibility: \"\", tags: [\"\"] };\r\naddFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN, range: [\"\"] }],\r\n  tags: [\"\"],\r\n};\r\naddFields[\"users\"] = { username: \"\", password: \"\", type: \"\" };\r\n\r\naddFields[\"devices\"] = {\r\n  _id: \"\",\r\n  features: [\"\"],\r\n};\r\n\r\naddFields[\"protocols\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  metadata: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      type: \"\",\r\n    },\r\n  ],\r\n  topics: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      fields: [{ name: \"\", description: \"\", type: \"\" }],\r\n    },\r\n  ],\r\n};\r\n\r\n//NOTE: experiments page works differently, so keep it empty\r\naddFields[\"experiments\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  state: \"\",\r\n};\r\n*/\r\n//NOTE: measurements page works differently, so keep it empty\r\naddFields[\"measurements\"] = {\r\n  thing: \"\",\r\n  device: \"\",\r\n  tags: [\"\"],\r\n};\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\n/*editFieldsSpecifier[\"features\"] = {\r\n  _id: { type: \"disable\", policy: isFeatureInUse },\r\n  items: { type: \"disable\", policy: isFeatureInUse },\r\n};*/\r\n\r\n//dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\nexport const addTypes = {};\r\n/*addTypes[\"tags\"] = [\"form\", \"file\"];\r\naddTypes[\"things\"] = [\"form\", \"file\"];\r\naddTypes[\"features\"] = [\"form\", \"file\"];\r\naddTypes[\"users\"] = [\"form\", \"file\"];\r\naddTypes[\"devices\"] = [\"form\", \"file\"];\r\naddTypes[\"tenants\"] = [\"form\"];\r\naddTypes[\"protocols\"] = [\"form\", \"file\"];\r\naddTypes[\"experiments\"] = [\"form\", \"file\"];*/\r\naddTypes[\"measurements\"] = [\"form\"];\r\n\r\n//dictionary for fetched types\r\n//types are fetched on the /types route and matched with fields following this dictionary\r\nexport const fetchedPageTypes = {};\r\n/*fetchedPageTypes[\"users\"] = { type: \"UserRoles\", status: \"UserStatusTypes\" };\r\nfetchedPageTypes[\"devices\"] = {\r\n  measurementBufferPolicy: \"MeasurementBufferPolicyTypes\",\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"things\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"tag\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"things\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"scripts\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n};\r\nfetchedPageTypes[\"rights\"] = {\r\n  type: \"RightTypes\",\r\n};\r\nfetchedPageTypes[\"features\"] = {\r\n  items: { type: \"ItemTypes\" },\r\n};*/\r\nfetchedPageTypes[\"measurements\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n}; /*\r\nfetchedPageTypes[\"issues\"] = {\r\n  type: \"IssueTypes\",\r\n  status: \"IssueStatusType\",\r\n};\r\nfetchedPageTypes[\"protocols\"] = {\r\n  metadata: { type: \"MetadataTypes\" },\r\n  field: { type: \"TopicFieldTypes\" },\r\n};\r\nfetchedPageTypes[\"experiments\"] = {\r\n  visibility: \"VisibilityTypes\",\r\n  state: \"ExperimentStateTypes\",\r\n};\r\nfetchedPageTypes[\"constraints\"] = {\r\n  type1: \"ConstraintTypes\",\r\n  type2: \"ConstraintTypes\",\r\n};*/\r\n\r\n//dictionary for fetched data\r\n//data is fetched on the according resource route and matched with fields following this dictionary\r\n//the value of the specified field is the route to search for data. _ids of that route will be used as options\r\nexport const fetchedPageData = {};\r\n/*fetchedPageData[\"tags\"] = { tags: \"tags\" };\r\nfetchedPageData[\"things\"] = { tags: \"tags\" };\r\nfetchedPageData[\"devices\"] = { features: \"features\" };\r\nfetchedPageData[\"features\"] = { tags: \"tags\" };*/\r\nfetchedPageData[\"measurements\"] = {\r\n  device: \"devices\",\r\n  thing: \"things\",\r\n  tags: \"tags\",\r\n};\r\n\r\n//restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\nexport const restrictionPages = {};\r\nrestrictionPages[\"measurements\"] = [\"admin\", \"provider\"];\r\nrestrictionPages[\"analyzedata\"] = [\"admin\", \"analyst\"];\r\n","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../config\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  email: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  resources: string;\r\n  tools: string;\r\n  notifications: string;\r\n  file_content: string;\r\n  preview: string;\r\n  configuration: string;\r\n\r\n  clear_all: string;\r\n  no_changes_found: string;\r\n  resource_successfully_edited: string;\r\n  resource_successfully_posted: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  email_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //geolocalization messages\r\n  geo_update: string;\r\n  geo_failed: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //profile page\r\n  profile_page_desc: string;\r\n  pass_change_confirm: string;\r\n  email_change_confirm: string;\r\n  password_rules: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n  repeat: string;\r\n  close: string;\r\n  import: string;\r\n  export: string;\r\n\r\n  //\r\n  password_recovery: string;\r\n  password_reset: string;\r\n  forgot_password_link: string;\r\n  go_login_page: string;\r\n  email_sent_successfully: string;\r\n  password_changed: string;\r\n  email_changed: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n  no_file: string;\r\n  error_imported_file: string;\r\n  duplicate_resource_error: string;\r\n  pass_not_match: string;\r\n  old_pass_empty: string;\r\n  old_pass_wrong: string;\r\n  pass_not_null: string;\r\n  missing_tenant: string;\r\n  missing_email: string;\r\n  missing_token: string;\r\n  missing_username: string;\r\n  missing_password: string;\r\n  stronger_password_required: string;\r\n  email_sent_errors: string;\r\n  password_not_changed_errors: string;\r\n  network_error: string;\r\n  empty_email_error: string;\r\n  email_not_match: string;\r\n  email_same_as_old: string;\r\n  generic_file_post_error: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../config\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        {languages.includes(\"it\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"it\")}\r\n          >\r\n            Ita\r\n          </Button>\r\n        )}\r\n        {languages.includes(\"en\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"en\")}\r\n          >\r\n            Eng\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import { get_one_generic } from \"./http_operations\";\r\n\r\n//variable to store role as a simple cache\r\nlet roleCache = undefined;\r\n\r\n//get and set the role definition\r\nexport async function SetRoleDefinition() {\r\n  const role = localStorage.getItem(\"user-role\");\r\n  if (role === null || role === undefined || role === \"\") return;\r\n  const response = await get_one_generic(\"roles\", role);\r\n  if (response !== undefined)\r\n    localStorage.setItem(\"role\", JSON.stringify(response.response.data));\r\n}\r\n\r\n//check if an user is allowed to do a specific action\r\n//returns true if the use can perform the action, false otherwise\r\nexport function canDo(userRole, resource, actionCRUD) {\r\n  //check if cache-like variable is set\r\n  if (roleCache === undefined) {\r\n    //get role from localstorage (saved there after login)\r\n    const tmp = localStorage.getItem(\"role\");\r\n\r\n    //if the role is not defined, use the hardcoded version\r\n    if (tmp === undefined || tmp === null)\r\n      return canDoDeprecated(userRole, resource, actionCRUD);\r\n\r\n    //if role was found from the localstorage, set the cache-like variable\r\n    roleCache = JSON.parse(tmp);\r\n  }\r\n\r\n  //check if action list is not empty\r\n  if (roleCache.actions.length !== 0) {\r\n    //find the corresponding resource in action list\r\n    const entityDef = roleCache.actions.filter(\r\n      (el) => el.entity === resource\r\n    )[0];\r\n    //check if the action is actually found and if the action has a corresponding in crud object\r\n    if (entityDef !== undefined && entityDef[actionCRUD] !== undefined) {\r\n      return (\r\n        //return true when the crud action is not none nor false\r\n        entityDef[actionCRUD] !== \"none\" && entityDef[actionCRUD] !== false\r\n      );\r\n    }\r\n  }\r\n\r\n  //default case (action list is empty or action list does not contains the specified resource)\r\n  //return true when default of the action is not none nor false\r\n  return (\r\n    roleCache.default[actionCRUD] !== \"none\" &&\r\n    roleCache.default[actionCRUD] !== false\r\n  );\r\n}\r\n\r\n//hardcoded check for user rights\r\nfunction canDoDeprecated(userRole, resource, actionCRUD) {\r\n  if (actionCRUD === \"create\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  if (actionCRUD === \"read\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n  }\r\n  if (actionCRUD === \"update\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  if (actionCRUD === \"delete\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport { SetRoleDefinition } from \"../../services/userRolesManagement\";\r\nconst userRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nconst _tenant = \"think-before-tenant\";\r\n//const _tenant = \"\";\r\n\r\nconst AuthPageComp = () => {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const user = userRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const tenant = _tenant;\r\n\r\n    try {\r\n      await login(user, psw, tenant);\r\n      await SetRoleDefinition();\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Pensaci Prima</div>\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <Form onSubmit={submitForm} className=\"rounded p-4 p-sm-3\">\r\n        <h4>{locale().login}</h4>\r\n        <Form.Group className=\"mb-3\" controlId=\"username\">\r\n          <Form.Label>{locale().username}</Form.Label>\r\n          <Form.Control\r\n            ref={userRef}\r\n            type=\"text\"\r\n            placeholder={locale().username_suggestion}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n          <Form.Label>{locale().password}</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            ref={pswRef}\r\n            placeholder={locale().password_suggestion}\r\n          />\r\n        </Form.Group>\r\n        <Button variant=\"primary\" type=\"submit\">\r\n          {locale().submit}\r\n        </Button>\r\n      </Form>\r\n      <br />\r\n      <div style={{ color: \"red\" }}>{msg}</div>\r\n      <div className=\"form-row row\">\r\n        <NavLink to={`/passwordrecovery`}>\r\n          {locale().forgot_password_link}\r\n        </NavLink>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../config\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      {locale().oh_no}\r\n      <br />\r\n      <br />\r\n      {locale().broken_link}\r\n      <br />\r\n      <br />\r\n      <a\r\n        href=\"https://github.com/measurify/server/issues\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        title=\"https://github.com/measurify/server/issues\"\r\n      >\r\n        {locale().github_issue_page_hp}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport { pages, languages, website_name, restrictionPages } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function Navigation() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  console.log({\r\n    role: rl,\r\n    canReadMeas: canDo(role.current, \"measurements\", \"read\"),\r\n    restrictionPages,\r\n  });\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <NavLink\r\n        to=\"/\" //{role.current === \"analyst\" ? \"/analyzedata\" : \"/add/measurements\"}\r\n        className=\"nav-wrap\"\r\n      >\r\n        {website_name}\r\n      </NavLink>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <hr />\r\n          <div className=\"data-wrapper\">\r\n            <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n              {locale().welcome + \" \"}\r\n              <b>{username.current}</b>\r\n            </NavLink>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().role + \" \"}\r\n                {renderIconRole()}\r\n              </h3>\r\n            </div>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().tenant + \" \"}\r\n                <b>{tenant.current}</b>\r\n              </h3>\r\n            </div>\r\n            <br />\r\n            <div style={{ paddingLeft: 20 + \"px\", paddingBottom: 20 + \"px\" }}>\r\n              <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                {locale().logout}\r\n              </Button>\r\n            </div>\r\n            {languages.length > 1 && (\r\n              <React.Fragment>\r\n                <hr />\r\n                <h2>\r\n                  <LanguageSelector />\r\n                </h2>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"app-nav-text\">{locale().resources}</div>\r\n          <hr />\r\n          {canDo(role.current, \"measurements\", \"read\") &&\r\n            (restrictionPages[\"measurements\"] === undefined ||\r\n              restrictionPages[\"measurements\"].includes(role.current)) && (\r\n              <NavLink\r\n                to={`/measurements`}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={\"measurements\"}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                Controlli\r\n              </NavLink>\r\n            )}\r\n          {canDo(role.current, \"measurements\", \"read\") &&\r\n            (restrictionPages[\"analyzedata\"] === undefined ||\r\n              restrictionPages[\"analyzedata\"].includes(role.current)) && (\r\n              <NavLink\r\n                to={`/analyzedata`}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={\"analyzedata\"}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                Analisi dati\r\n              </NavLink>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { viewFields } from \"../../config\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic } from \"../../services/http_operations\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  viewFields[props.resType].forEach((k) => {\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).forEach((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].forEach((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size={\"lg\"}>\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>\r\n                                    {key} <i>[{i}]</i>\r\n                                  </Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    \"AAAA\"\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{\r\n          width: 20 + \"vw\",\r\n          minWidth:\r\n            /Mobi/i.test(window.navigator.userAgent) == true ? 250 : 400 + \"px\",\r\n        }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\r\n            \"Sei sicuro di voler eliminare il controllo?\"\r\n          );\r\n          if (result) {\r\n            try {\r\n              const response = await delete_generic(props.resType, props.id);\r\n\r\n              if (response.response.status === 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink to={`/edit/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title=\"Edit\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  return <div />;\r\n}\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n//format string date into yyyy/mm/dd\r\n\r\nexport function FormatDate(dt) {\r\n  return dt.getDate() + \"/\" + (dt.getMonth() + 1) + \"/\" + dt.getFullYear();\r\n}\r\n\r\nexport function convertJsonToCSV(data, header) {\r\n  console.log({ data, header });\r\n\r\n  //template to sort objects\r\n  const template = Object.fromEntries(header.map((e) => [e, \"\"]));\r\n  //regex to find commas\r\n  const regexComma = new RegExp(/,/g);\r\n  //regex to find string terminators\r\n  const regexTerm = new RegExp(/\\n/g);\r\n\r\n  //convert JSON into csv by assigning the nested object to sort it to the template, then unroll and join\r\n  //also process date (to show in format dd/mm/yyyy) and notes (to remove all commas)\r\n  const CSVdata = header\r\n    .join(\",\")\r\n    .concat(\"\\n\")\r\n    .concat(\r\n      data\r\n        .map((row) => {\r\n          const sorted = Object.assign(template, row);\r\n          return Object.entries(sorted)\r\n            .map((entr) => {\r\n              return typeof entr[1] === \"string\"\r\n                ? entr[1].replace(regexComma, \"-\").replace(regexTerm, \"\")\r\n                : entr[0] === \"Data\"\r\n                ? FormatDate(new Date(entr[1]))\r\n                : entr[1];\r\n            })\r\n            .join(\",\");\r\n        })\r\n        .join(\"\\n\")\r\n    );\r\n\r\n  return CSVdata;\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../config\";\r\n\r\nimport { Table, Button } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\nimport { FormatDate } from \"../../services/misc_functions\";\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport {\r\n  faPlusCircle,\r\n  faDownload,\r\n  faList,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faPlusCircle, faDownload, faList);\r\n\r\nexport default function ContentTable(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return (\r\n                      <th>\r\n                        {aliasPages[props.resType][e]}\r\n                        {e !== \"Sostanza\" && e !== \"Livello\" && (\r\n                          <React.Fragment>\r\n                            {\" \"}\r\n                            <Button\r\n                              variant={props.orderBy === e ? \"link\" : \"light\"}\r\n                              size=\"sm\"\r\n                              onClick={() => {\r\n                                props.sortHandler(e);\r\n                              }}\r\n                            >\r\n                              <b>\r\n                                {props.ascending === true && props.orderBy === e\r\n                                  ? \"^\"\r\n                                  : \"V\"}\r\n                              </b>\r\n                            </Button>\r\n                            <i\r\n                              className={\"fa fa-list\"}\r\n                              title=\"\"\r\n                              style={{\r\n                                width: 20 + \"px\",\r\n                                height: 20 + \"px\",\r\n                                opacity: 0.85,\r\n                              }}\r\n                            ></i>\r\n                          </React.Fragment>\r\n                        )}\r\n                      </th>\r\n                    );\r\n\r\n                return (\r\n                  <th>\r\n                    {e}\r\n                    {e !== \"Sostanza\" && e !== \"Livello\" && (\r\n                      <React.Fragment>\r\n                        <Button\r\n                          variant={props.orderBy === e ? \"link\" : \"light\"}\r\n                          size=\"sm\"\r\n                          onClick={() => {\r\n                            props.sortHandler(e);\r\n                          }}\r\n                        >\r\n                          <b>\r\n                            {props.ascending === true && props.orderBy === e\r\n                              ? \"^\"\r\n                              : \"V\"}\r\n                          </b>\r\n                        </Button>\r\n                        <i\r\n                          className={\"fa fa-list\"}\r\n                          title=\"\"\r\n                          style={{\r\n                            width: 20 + \"px\",\r\n                            height: 20 + \"px\",\r\n                            opacity: 0.85,\r\n                          }}\r\n                        ></i>\r\n                      </React.Fragment>\r\n                    )}\r\n                  </th>\r\n                );\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props.actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"edit\") &&\r\n                            canDo(props.userRole, props.resType, \"update\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"duplicate\") &&\r\n                            canDo(props.userRole, props.resType, \"create\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"delete\") &&\r\n                            canDo(props.userRole, props.resType, \"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return;\r\n                      if (Array.isArray(row[e])) {\r\n                        if (\r\n                          row[e][0] !== undefined &&\r\n                          row[e][0].constructor === Object\r\n                        ) {\r\n                          const str =\r\n                            \"[ \" +\r\n                            row[e]\r\n                              .map((el) => Object.values(el).join(\" - \"))\r\n                              .join(\" -- \") +\r\n                            \" ]\";\r\n                          return (\r\n                            <td>\r\n                              {str.length <= 100\r\n                                ? str\r\n                                : str.slice(0, 97) + \"...\"}\r\n                            </td>\r\n                          );\r\n                        }\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      }\r\n\r\n                      if (e === \"Data\")\r\n                        return <td>{FormatDate(new Date(row[e]))}</td>;\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../config\";\r\n\r\nimport { Card, ListGroup, CardGroup } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\n\r\nexport default function ContentCards(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n\r\n  if (props.resources.length === 0)\r\n    return <div>Non sono presenti controlli</div>;\r\n  return (\r\n    <CardGroup>\r\n      {React.Children.toArray(\r\n        props.resources.map((res) => {\r\n          const date = new Date(res.samples[0].values[2]);\r\n\r\n          const numPerson = new Set(\r\n            res.samples.map((person) => person.values[4])\r\n          ).size;\r\n          const report = res.samples\r\n            .filter((person) => person.values[11] !== \"nullo\")\r\n            .map((person) => {\r\n              return (\r\n                <ListGroup.Item>\r\n                  {person.values[7] +\r\n                    \"_\" +\r\n                    person.values[5] +\r\n                    \" (\" +\r\n                    person.values[6] +\r\n                    \") : \" +\r\n                    person.values[10] +\r\n                    \" \" +\r\n                    person.values[11]}\r\n                </ListGroup.Item>\r\n              );\r\n            });\r\n\r\n          if (report.length !== numPerson) {\r\n            const negPerson = res.samples\r\n              .filter((person) => person.values[9] === \"negativo\")\r\n              .map((e) => [\r\n                e.values[7],\r\n                e.values[5],\r\n                e.values[6],\r\n                e.values[9],\r\n              ])[0];\r\n            //wrongly inserted measurement\r\n            if (negPerson === undefined) {\r\n              report.push(\r\n                <ListGroup.Item>\r\n                  {res.samples[0].values[7] +\r\n                    \"_\" +\r\n                    res.samples[0].values[5] +\r\n                    \" (\" +\r\n                    res.samples[0].values[6] +\r\n                    \") : \" +\r\n                    res.samples[0].values[9]}\r\n                </ListGroup.Item>\r\n              );\r\n            } else {\r\n              report.push(\r\n                <ListGroup.Item>\r\n                  {negPerson[0] +\r\n                    \"_\" +\r\n                    negPerson[1] +\r\n                    \" (\" +\r\n                    negPerson[2] +\r\n                    \") : \" +\r\n                    negPerson[3]}\r\n                </ListGroup.Item>\r\n              );\r\n            }\r\n          }\r\n          return (\r\n            <Card border=\"primary\" style={{ width: \"18rem\" }}>\r\n              <Card.Header>\r\n                {res.samples[0].values[0]}{\" \"}\r\n                <ActionManager\r\n                  resType={props.resType}\r\n                  action=\"delete\"\r\n                  id={res._id}\r\n                  removeSingle={props.removeSingle}\r\n                />\r\n              </Card.Header>\r\n              <Card.Body>\r\n                <Card.Text>{date.toDateString()}</Card.Text>\r\n                <Card.Text>{res.samples[0].values[1]}</Card.Text>\r\n              </Card.Body>\r\n              <ListGroup className=\"list-group-flush\">\r\n                {React.Children.toArray(report)}\r\n              </ListGroup>\r\n            </Card>\r\n          );\r\n        })\r\n      )}\r\n    </CardGroup>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic, get_generic_pipe } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport ContentCards from \"../contentCards/contentCards\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport \"./page.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nlet role = React.createRef();\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  role.current = rl !== null ? rl : \"\";\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) setActions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        <b>Controlli</b>\r\n        {addFields[page] !== undefined &&\r\n          canDo(role.current, page, \"create\") && (\r\n            <NavLink to={`/add/` + page + \"/\"}>\r\n              <Button variant=\"link\" size=\"sm\">\r\n                <i\r\n                  className=\"fa fa-plus-circle\"\r\n                  aria-hidden=\"true\"\r\n                  title={\"Add\"}\r\n                  style={{\r\n                    width: 30 + \"px\",\r\n                    height: 30 + \"px\",\r\n                    //marginRight: 10 + \"px\",\r\n                    opacity: 0.85,\r\n                  }}\r\n                ></i>\r\n              </Button>\r\n            </NavLink>\r\n          )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <br />\r\n        <ContentCards\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  put_generic,\r\n  login,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport \"../page/page.scss\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\n\r\nexport default function ProfilePage(params) {\r\n  //save in status informations of profile\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [emailShow, setEmailShow] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailConfirm, setEmailConfirm] = useState(\"\");\r\n  const [msgPass, setMsgPass] = useState(\"\");\r\n  const [msgEmail, setMsgEmail] = useState(\"\");\r\n  const [isError, setisError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"user-role\");\r\n    const tenant = localStorage.getItem(\"user-tenant\");\r\n    const _email = localStorage.getItem(\"user-email\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n    setEmailShow(_email !== null ? _email : \"\");\r\n  }, []);\r\n\r\n  const submitPassword = async (e) => {\r\n    e.preventDefault();\r\n    if (oldPassword === \"\") {\r\n      setMsgPass(locale().old_pass_empty);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (password !== passwordConfirm) {\r\n      setMsgPass(locale().pass_not_match);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (password === \"\" || passwordConfirm === \"\") {\r\n      setMsgPass(locale().pass_not_null);\r\n      setisError(true);\r\n      return;\r\n    }\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n\r\n      const pswDetails = passwordStrength(password);\r\n\r\n      if (pswDetails.id < requiredStr) {\r\n        setMsgPass(locale().stronger_password_required);\r\n        setisError(true);\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    try {\r\n      await login(username, oldPassword, tenant !== \"-\" ? tenant : \"\", false);\r\n    } catch (error) {\r\n      setMsgPass(locale().old_pass_wrong);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().pass_change_confirm);\r\n\r\n    setisError(false);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\r\n          \"users\",\r\n          { password: password },\r\n          username\r\n        );\r\n        setOldPassword(\"\");\r\n        setPassword(\"\");\r\n        setPasswordConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setMsgPass(locale().password_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitEmail = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (email === \"\" || emailConfirm === \"\") {\r\n      setMsgEmail(locale().empty_email_error);\r\n      setisError(true);\r\n      return;\r\n    }\r\n\r\n    if (email !== emailConfirm) {\r\n      setMsgEmail(locale().email_not_match);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (email === emailShow) {\r\n      setMsgEmail(locale().email_same_as_old);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().email_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\"users\", { email: email }, username);\r\n\r\n        if (response.response.status === 200) {\r\n          setEmail(\"\");\r\n          setEmailConfirm(\"\");\r\n          localStorage.setItem(\"user-email\", email);\r\n          setEmailShow(email);\r\n\r\n          setisError(false);\r\n          setMsgEmail(locale().email_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {locale().welcome}&nbsp;<b>{username}</b>:&nbsp;\r\n        {locale().profile_page_desc}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col xs={1}>Username:&nbsp;</Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <b>{username}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>Email:&nbsp;</Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <b>{emailShow}</b>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Modifica email</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitEmail}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmail(e.target.value);\r\n                      }}\r\n                      value={email}\r\n                      placeholder={locale().enter + \" nuova email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmailConfirm(e.target.value);\r\n                      }}\r\n                      value={emailConfirm}\r\n                      placeholder={locale().repeat + \" nuova email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font\r\n                      style={{\r\n                        marginLeft: 5 + \"px\",\r\n                        color: isError ? \"red\" : \"black\",\r\n                      }}\r\n                    >\r\n                      {msgEmail}\r\n                    </font>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Modifica password</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitPassword}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setOldPassword(e.target.value);\r\n                      }}\r\n                      value={oldPassword}\r\n                      placeholder={locale().enter + \" vecchia password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      value={password}\r\n                      placeholder={locale().enter + \" nuova password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPasswordConfirm(e.target.value);\r\n                      }}\r\n                      value={passwordConfirm}\r\n                      placeholder={locale().repeat + \" nuova password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font\r\n                      style={{\r\n                        marginLeft: 5 + \"px\",\r\n                        color: isError ? \"red\" : \"black\",\r\n                      }}\r\n                    >\r\n                      {msgPass}\r\n                    </font>\r\n                  </Col>\r\n                </Row>\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { requestPasswordReset } from \"../../services/http_operations\";\r\nimport { languages } from \"../../config\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst emailRef = React.createRef();\r\n\r\nconst _tenant = \"think-before-tenant\";\r\n\r\nexport default function PasswordRecoveryPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const email = emailRef.current.value;\r\n    const tenant = _tenant;\r\n\r\n    if (email === \"\") {\r\n      setMsg(locale().missing_email);\r\n      return;\r\n    }\r\n    try {\r\n      await requestPasswordReset(tenant, email);\r\n\r\n      setMsg(locale().email_sent_successfully);\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n\r\n      setMsg(locale().email_sent_errors);\r\n      //setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Pensaci Prima</div>\r\n      </div>\r\n\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_recovery}</h4>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>{locale().email}</Form.Label>\r\n                  <Form.Control\r\n                    type=\"email\"\r\n                    ref={emailRef}\r\n                    placeholder={locale().email_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={back}>\r\n                  {locale().cancel}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: \"black\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  resetPassword,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport { useParams, useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\nconst pswRef = React.createRef();\r\nconst pswConfirmRef = React.createRef();\r\n\r\nconst _tenant = \"think-before-tenant\";\r\n\r\nexport default function PasswordResetPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [token, setToken] = useState(searchParams.get(\"token\"));\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const go_login = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n    } catch (error) {\r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    const tenant = _tenant;\r\n    const psw = pswRef.current.value;\r\n    const pswConfirm = pswConfirmRef.current.value;\r\n\r\n    if (psw === \"\" || pswConfirm === \"\") {\r\n      setMsg(locale().pass_not_null);\r\n      return;\r\n    }\r\n\r\n    if (psw !== pswConfirm) {\r\n      setMsg(locale().pass_not_match);\r\n      return;\r\n    }\r\n\r\n    if (token === \"\" || token == undefined) {\r\n      setMsg(locale().missing_token);\r\n      return;\r\n    }\r\n    const pswDetails = passwordStrength(psw);\r\n\r\n    if (pswDetails.id < requiredStr) {\r\n      setMsg(locale().stronger_password_required);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const resp = await resetPassword(tenant, token, psw);\r\n      console.log(resp);\r\n      setMsg(locale().password_changed);\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.error.message === \"Network Error\") {\r\n        setMsg(locale().network_error);\r\n        return;\r\n      }\r\n      setMsg(locale().password_not_changed_errors);\r\n      //setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Pensaci Prima</div>\r\n      </div>\r\n\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_reset}</h4>\r\n              </Col>\r\n            </Row>\r\n\r\n            {(searchParams.get(\"token\") === null ||\r\n              searchParams.get(\"token\") === \"\") && (\r\n              <Row>\r\n                <Col>\r\n                  <Form.Group className=\"mb-3\" controlId=\"token\">\r\n                    <Form.Label>Token</Form.Label>\r\n                    <Form.Control\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setToken(e.target.value);\r\n                      }}\r\n                      type=\"text\"\r\n                      placeholder={locale().enter + \" token\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().password}</Form.Label>\r\n                  <Form.Control\r\n                    ref={pswRef}\r\n                    type=\"password\"\r\n                    placeholder={locale().enter + \" new password\"}\r\n                  />\r\n                  <Form.Text className=\"text-muted\">\r\n                    {locale().password_rules}\r\n                  </Form.Text>\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Control\r\n                    type=\"password\"\r\n                    ref={pswConfirmRef}\r\n                    placeholder={locale().repeat + \" new password\"}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={go_login}>\r\n                  {locale().go_login_page}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: \"black\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n  /*\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    backFunction: props.backFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n    fetchedData: myFetched.data,\r\n    fetchedTypes: fetchedPageTypes,\r\n  });\r\n*/\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string for row component\r\n  const StringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type={key === \"password\" ? \"password\" : \"text\"}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //fetched data for row component\r\n  const FetchedFormRow = (key, alias) => {\r\n    let options;\r\n    if (\r\n      myFetched !== {} &&\r\n      (myFetched.data[key] !== undefined || myFetched.data[alias] !== undefined)\r\n    ) {\r\n      options = myFetched.data[alias !== undefined ? alias : key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Autocomplete\r\n              id={key}\r\n              onChange={(e, newValue) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(newValue, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key] === \"\" ? null : props.values[key]}\r\n              options={options}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label={locale().enter + \" \" + key} />\r\n              )}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={k}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>\r\n                      Insert <b>{k}</b>\r\n                      <i>[{index}]</i>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    let options;\r\n    if (myFetched !== {} && myFetched.data[key] !== undefined) {\r\n      options = myFetched.data[key];\r\n    }\r\n\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={4}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      {myFetched.data[key] !== undefined ? (\r\n                        <Autocomplete\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          id={key}\r\n                          onChange={(e, newValue) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(newValue, [key, index]);\r\n                          }}\r\n                          value={\r\n                            props.values[key][index] === \"\"\r\n                              ? null\r\n                              : props.values[key][index]\r\n                          }\r\n                          options={options}\r\n                          renderInput={(params) => (\r\n                            <TextField\r\n                              {...params}\r\n                              label={locale().enter + \" \" + key}\r\n                            />\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          value={props.values[key][index]}\r\n                          placeholder={locale().enter + \" \" + key}\r\n                        />\r\n                      )}\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={2}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                key={key + k + index + \"\"}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's an enum\r\n                      if (\r\n                        fetchedPageTypes[props.resource] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key][k] !==\r\n                          undefined &&\r\n                        myFetched.types !== undefined &&\r\n                        myFetched.types[\r\n                          fetchedPageTypes[props.resource][key][k]\r\n                        ] !== undefined\r\n                      ) {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Select\r\n                                aria-label=\"Default select\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                              >\r\n                                <option>{locale().select + \" \" + k}</option>\r\n                                {React.Children.toArray(\r\n                                  Object.entries(\r\n                                    myFetched.types[\r\n                                      fetchedPageTypes[props.resource][key][k]\r\n                                    ]\r\n                                  ).map(([k, v]) => {\r\n                                    return <option value={k}>{v}</option>;\r\n                                  })\r\n                                )}\r\n                              </Form.Select>\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n\r\n                        //only show range field when enum type is selected, otherwise skip it\r\n                        if (\r\n                          k === \"range\" &&\r\n                          props.values[key][index][\"type\"] !== \"enum\"\r\n                        )\r\n                          return \"\";\r\n                        return (\r\n                          <Row>\r\n                            <Accordion defaultActiveKey=\"0\">\r\n                              <Accordion.Item eventKey=\"0\">\r\n                                <Accordion.Header>\r\n                                  <b>{k}</b> : {nonDefaultLength(value)} items\r\n                                </Accordion.Header>\r\n                                <Accordion.Body>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={1}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col sm={3}>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={\r\n                                                          props.disabledFields[\r\n                                                            key\r\n                                                          ] !== undefined\r\n                                                            ? props\r\n                                                                .disabledFields[\r\n                                                                key\r\n                                                              ]\r\n                                                            : false\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      }\r\n                                      return \"Unknown data type\";\r\n                                    })\r\n                                  )}\r\n                                </Accordion.Body>\r\n                              </Accordion.Item>\r\n                            </Accordion>\r\n                          </Row>\r\n                        );\r\n                      }\r\n                      return \"Unknown data type\";\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return \"TODO ObjectFormRow\";\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //enum type defined by config\r\n              //check if all the required resources are defined\r\n\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return SelectFormRow(\r\n                  key,\r\n                  myFetched.types[fetchedPageTypes[props.resource][key]]\r\n                );\r\n              }\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n              //input field for fetched data\r\n\r\n              if (\r\n                fetchedPageData[props.resource] !== undefined &&\r\n                fetchedPageData[props.resource][key] !== undefined &&\r\n                myFetched.data[fetchedPageData[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return FetchedFormRow(\r\n                  key,\r\n                  fetchedPageData[props.resource][key]\r\n                );\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow();\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import { isDefault, removeDefaultElements } from \"./misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n// this function sort keys of an object and of its array-of-objects values (recursively) based on a template\r\nexport function sortObject(obj, template) {\r\n  //keys of the object to sort\r\n  let keys = Object.keys(obj);\r\n  //sorted array of keys\r\n  const sortingKeys = Object.keys(template);\r\n  //remove uncommon keys between the two arrays from the key array\r\n  keys = keys.filter((ob) => {\r\n    return sortingKeys.indexOf(ob) !== -1;\r\n  });\r\n  //sort the keys in the key array\r\n  keys.sort((a, b) => sortingKeys.indexOf(a) - sortingKeys.indexOf(b));\r\n\r\n  const sorted = keys.reduce((accumulator, key) => {\r\n    if (\r\n      Array.isArray(obj[key]) &&\r\n      obj[key].length !== 0 &&\r\n      obj[key][0].constructor === Object\r\n    ) {\r\n      const tmp = obj[key].map((el) => {\r\n        return sortObject(el, template[key][0]);\r\n      });\r\n\r\n      accumulator[key] = tmp;\r\n    } else accumulator[key] = obj[key];\r\n\r\n    return accumulator;\r\n  }, {});\r\n  return sorted;\r\n}\r\n\r\n//this function will check of each field of the object if it's an array, and then, only for array values, check if empty elements are contained into that array\r\nexport function maintainEmptyElements(original, fieldSpecifier, resource) {\r\n  const keys = Object.keys(original);\r\n  let copy = cloneDeep(original);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (Array.isArray(copy[keys[i]])) {\r\n      copy = maintainEmptyElement(copy, [keys[i]], fieldSpecifier, resource);\r\n    }\r\n  }\r\n  return copy;\r\n}\r\n\r\nexport function maintainEmptyElement(\r\n  original,\r\n  path,\r\n  fieldSpecifier,\r\n  resource,\r\n  item = undefined\r\n) {\r\n  let tmp = cloneDeep(original);\r\n  let tmpPtr = tmp;\r\n  let fieldSpecifierCpy = cloneDeep(fieldSpecifier[resource]);\r\n  const tmpPath = [...path];\r\n\r\n  //get more nested array\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    tmpPtr = tmpPtr[path[i]];\r\n  }\r\n\r\n  //get the appropriate item, if possible\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    if (fieldSpecifierCpy === undefined) break;\r\n    //ignore indexes for fieldSpecifierCpy\r\n    if (typeof path[i] === \"number\") fieldSpecifierCpy = fieldSpecifierCpy[0];\r\n    else fieldSpecifierCpy = fieldSpecifierCpy[path[i]];\r\n  }\r\n\r\n  //non array case\r\n  if (!Array.isArray(fieldSpecifierCpy)) return tmp;\r\n\r\n  //add item according to addfield dictionary\r\n  if (fieldSpecifierCpy !== undefined) {\r\n    //0-length array\r\n    if (tmpPtr.length === 0) {\r\n      if (fieldSpecifierCpy[0].constructor === Object) {\r\n        tmpPtr.push({\r\n          ...fieldSpecifierCpy[0],\r\n        });\r\n      } else {\r\n        tmpPtr.push(\"\");\r\n      }\r\n    }\r\n    //else 0-length array\r\n    else {\r\n      if (tmpPtr[0].constructor === Object) {\r\n        //check if there are no default elements in array\r\n        if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n          tmpPtr.push({\r\n            ...fieldSpecifierCpy[0],\r\n          });\r\n        }\r\n      } else {\r\n        if (!tmpPtr.includes(\"\")) {\r\n          tmpPtr.push(\"\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  //add item according to params\r\n  if (item !== undefined && fieldSpecifierCpy === undefined) {\r\n    if (tmpPtr.length === 0) {\r\n      if (item.constructor === Object) {\r\n        tmpPtr.push({ ...item });\r\n      } else {\r\n        tmpPtr.push(item);\r\n      }\r\n    }\r\n    //else 0-length array\r\n    else {\r\n      if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n        if (item.constructor === Object) {\r\n          tmpPtr.push({ ...item });\r\n        } else {\r\n          tmpPtr.push(item);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return tmp;\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport { editFields, editFieldsSpecifier, fetchedPageData } from \"../../config\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;from:\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { Button, Form, Accordion, Table } from \"react-bootstrap\";\r\n\r\nexport const FormFile = (props) => {\r\n  //return \"loading\" if something is undefined\r\n  /*console.log({\r\n    submit: props.submitFunction,\r\n    back: props.backFunction,\r\n    setContHead: props.setContentHeader,\r\n    setContBdy: props.setContentBody,\r\n    setContPln: props.setContentPlain,\r\n    setFl: props.setFile,\r\n    contBod: props.contentBody,\r\n    contPln: props.contentPlain,\r\n    contHdr: props.contentHeader,\r\n  });*/\r\n  if (\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.setContentHeader === undefined ||\r\n    props.setContentPlain === undefined ||\r\n    props.setContentBody === undefined ||\r\n    props.setFile === undefined ||\r\n    props.contentBody === undefined ||\r\n    props.contentPlain === undefined ||\r\n    props.contentHeader === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Form.Label>\r\n        <b>{locale().select_file}</b>\r\n      </Form.Label>\r\n      <Form.Control\r\n        className=\"mb-3\"\r\n        type=\"file\"\r\n        accept=\".csv, .json\"\r\n        label=\"File\"\r\n        onChange={(e) => {\r\n          const file = e.target.files[0];\r\n          props.setFile(file);\r\n          const fileReader = new FileReader();\r\n\r\n          fileReader.onloadend = () => {\r\n            const content = fileReader.result;\r\n            if (file.name.endsWith(\".csv\")) {\r\n              const regex = new RegExp(\"\\\\r\", \"g\");\r\n              let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n              props.setContentHeader(splitted[0]);\r\n              splitted.splice(0, 1);\r\n              props.setContentBody(splitted);\r\n            }\r\n            if (file.name.endsWith(\".json\")) {\r\n              const content = fileReader.result;\r\n              props.setContentPlain(content);\r\n            }\r\n          };\r\n          fileReader.readAsText(file);\r\n        }}\r\n      />\r\n      {props.contentBody !== null && props.contentHeader !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <Table responsive striped bordered hover>\r\n                <thead>\r\n                  <tr>\r\n                    {React.Children.toArray(\r\n                      props.contentHeader.split(\",\").map((h) => {\r\n                        return <th>{h}</th>;\r\n                      })\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {React.Children.toArray(\r\n                    props.contentBody.map((e) => {\r\n                      return (\r\n                        <tr>\r\n                          {React.Children.toArray(\r\n                            e.split(\",\").map((h) => {\r\n                              return <td>{h}</td>;\r\n                            })\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      {props.contentPlain !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              {props.contentPlain}\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../config\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") === true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Accordion,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  InputGroup,\r\n} from \"react-bootstrap\";\r\nimport { getBigDataCloudLocation } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faMinusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nfontawesome.library.add(faMinusCircle);\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport const ControlloForm = (props) => {\r\n  //return if something is undefined\r\n  if (\r\n    props.values === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.handleAddItemArray === undefined ||\r\n    props.handleRemoveItemArray === undefined ||\r\n    props.items === undefined ||\r\n    props.getAddress === undefined ||\r\n    props.msg === undefined ||\r\n    props.handleChanges === undefined ||\r\n    props.refreshLocation === undefined ||\r\n    props.addrMsg === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  const UnrollObjectControllo = (obj, path) => {\r\n    return React.Children.toArray(\r\n      Object.entries(obj).map((entr) => {\r\n        const newPath = [...path];\r\n        newPath.push(entr[0]);\r\n        //address case (with button for geolocalization)\r\n        if (entr[0] === \"address\" || entr[0] === \"indirizzo\") {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={9}>\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    value={entr[1]}\r\n                    onChange={(e) => {\r\n                      e.preventDefault();\r\n                      props.handleChanges(e.target.value, newPath);\r\n                    }}\r\n                    placeholder={locale().enter + \" \" + entr[0]}\r\n                  />\r\n                  <Form.Text className=\"text-muted\">{props.addrMsg}</Form.Text>\r\n                </Form.Group>\r\n              </Col>\r\n              <Col xs>\r\n                <Button\r\n                  variant=\"link\"\r\n                  onClick={async () => {\r\n                    await props.refreshLocation();\r\n                  }}\r\n                >\r\n                  <i\r\n                    className=\"fa fa-map-pin\"\r\n                    aria-hidden=\"true\"\r\n                    title={\"Refresh Position\"}\r\n                    style={{\r\n                      width: 20 + \"px\",\r\n                      height: 20 + \"px\",\r\n                      marginRight: 10 + \"px\",\r\n                      opacity: 0.85,\r\n                    }}\r\n                  ></i>\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n        //età case (number)\r\n        if (entr[0] === \"età\") {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={9}>\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    type=\"number\"\r\n                    min={14}\r\n                    max={150}\r\n                    value={isNaN(entr[1]) ? \"\" : entr[1]}\r\n                    onChange={(e) => {\r\n                      e.preventDefault();\r\n                      props.handleChanges(\r\n                        parseInt(e.target.value, 10),\r\n                        newPath\r\n                      );\r\n                    }}\r\n                    aria-label={locale().enter + \" \" + entr[0]}\r\n                    placeholder={locale().enter + \" \" + entr[0]}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n        //età case (number)\r\n        if (entr[0] === \"time\" || entr[0] === \"ora\") {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={9}>\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    type=\"time\"\r\n                    className=\"modalTextField\"\r\n                    value={entr[1]}\r\n                    onChange={(e) => {\r\n                      e.preventDefault();\r\n                      props.handleChanges(e.target.value, newPath);\r\n                    }}\r\n                    aria-label={locale().enter + \" \" + entr[0]}\r\n                    placeholder={locale().enter + \" \" + entr[0]}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n\r\n        //index case (number) -- functional purpouse\r\n        if (entr[0] === \"index\") {\r\n          return \"\";\r\n        }\r\n\r\n        //note case (textarea)\r\n        if (entr[0] === \"note\") {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={12}>\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    as=\"textarea\"\r\n                    rows={3}\r\n                    type=\"text\"\r\n                    value={entr[1]}\r\n                    onChange={(e) => {\r\n                      e.preventDefault();\r\n                      props.handleChanges(e.target.value, newPath);\r\n                    }}\r\n                    placeholder={locale().enter + \" \" + entr[0]}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n        //date case\r\n        if (entr[0] === \"date\" || entr[0] === \"data\") {\r\n          const d = new Date();\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={9}>\r\n                <Form.Control\r\n                  type=\"date\"\r\n                  defaultValue={[\r\n                    d.toLocaleString(\"default\", { year: \"numeric\" }),\r\n                    d.toLocaleString(\"default\", { month: \"2-digit\" }),\r\n                    d.toLocaleString(\"default\", { day: \"2-digit\" }),\r\n                  ].join(\"-\")}\r\n                  onChange={(e) => {\r\n                    const dt = new Date(e.target.value).getTime();\r\n                    props.handleChanges(dt, newPath);\r\n                  }}\r\n                  aria-label={locale().enter + \" \" + entr[0]}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n        //enum case\r\n        const filtered = props.items.filter(\r\n          (e) => e.type === \"enum\" && e.name === entr[0]\r\n        )[0];\r\n        let options = null;\r\n        if (filtered !== undefined) options = filtered.range;\r\n        if (options !== null) {\r\n          return (\r\n            <Row\r\n              style={{\r\n                paddingBottom: 10 + \"px\",\r\n              }}\r\n            >\r\n              <Col xs={9}>\r\n                <Form.Select\r\n                  xs={9}\r\n                  aria-label={locale().select + \" \" + entr[0]}\r\n                  value={entr[1]}\r\n                  onChange={(e) => {\r\n                    e.preventDefault();\r\n                    props.handleChanges(e.target.value, newPath);\r\n                  }}\r\n                >\r\n                  <option value=\"\">{locale().select + \" \" + entr[0]}</option>\r\n                  {React.Children.toArray(\r\n                    options.map((e) => {\r\n                      return <option value={e}>{e}</option>;\r\n                    })\r\n                  )}\r\n                </Form.Select>\r\n              </Col>\r\n            </Row>\r\n          );\r\n        }\r\n\r\n        //array case (persone e sostanze)\r\n        if (Array.isArray(entr[1])) {\r\n          return React.Children.toArray(\r\n            entr[1].map((e, i) => {\r\n              const newPath = [...path];\r\n              newPath.push(entr[0]);\r\n              newPath.push(i);\r\n              return (\r\n                <Row>\r\n                  <Accordion>\r\n                    <Accordion.Item>\r\n                      <Accordion.Header>\r\n                        {entr[0] === \"persone\" ? \"Persona\" : \"Sostanza\"} {i + 1}\r\n                      </Accordion.Header>\r\n                      <Accordion.Body>\r\n                        <Row\r\n                          style={{\r\n                            paddingBottom: 10 + \"px\",\r\n                          }}\r\n                        >\r\n                          <Col>\r\n                            <Button\r\n                              variant=\"outline-danger\"\r\n                              onClick={(e) => {\r\n                                e.preventDefault();\r\n                                props.handleRemoveItemArray(newPath);\r\n                              }}\r\n                              style={{ textDecoration: \"none\" }}\r\n                            >\r\n                              <i\r\n                                className=\"fa fa-minus-circle\"\r\n                                aria-hidden=\"true\"\r\n                                title={\"Remove\"}\r\n                                style={{\r\n                                  width: 25 + \"px\",\r\n                                  height: 25 + \"px\",\r\n                                  opacity: 0.85,\r\n                                }}\r\n                              ></i>\r\n                              &nbsp;Rimuovi&nbsp;\r\n                              {entr[0] === \"persone\" ? \"persona\" : \"sostanza\"}\r\n                              &nbsp;\r\n                              {i + 1}\r\n                            </Button>\r\n                          </Col>\r\n                        </Row>\r\n                        {UnrollObjectControllo(e, newPath)}\r\n                        {i === entr[1].length - 1 && (\r\n                          <Row>\r\n                            <Col>\r\n                              <Button\r\n                                variant=\"link\"\r\n                                onClick={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleAddItemArray(newPath);\r\n                                }}\r\n                                style={{ textDecoration: \"none\" }}\r\n                              >\r\n                                <i\r\n                                  className=\"fa fa-plus-circle\"\r\n                                  aria-hidden=\"true\"\r\n                                  title={\"Add\"}\r\n                                  style={{\r\n                                    width: 25 + \"px\",\r\n                                    height: 25 + \"px\",\r\n                                    opacity: 0.85,\r\n                                  }}\r\n                                ></i>\r\n                                &nbsp;Aggiungi&nbsp;\r\n                                {entr[0] === \"persone\" ? \"persona\" : \"sostanza\"}\r\n                              </Button>\r\n                            </Col>\r\n                          </Row>\r\n                        )}\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                </Row>\r\n              );\r\n            })\r\n          );\r\n        }\r\n\r\n        return <Row>{entr[0] + entr[1]}</Row>;\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      fluid\r\n      style={{\r\n        paddingRight: 20 + \"px\",\r\n        paddingLeft: 20 + \"px\",\r\n      }}\r\n    >\r\n      {UnrollObjectControllo(props.values, [])}\r\n      <Row\r\n        style={{\r\n          padding: 10 + \"px\",\r\n        }}\r\n      >\r\n        <Col>\r\n          <Button variant=\"primary\" onClick={props.submitFunction}>\r\n            {locale().submit}\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <font>{props.msg}</font>\r\n    </Container>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../config\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  getBigDataCloudLocation,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageData } from \"../../config\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faMapPin } from \"@fortawesome/fontawesome-free-solid\";\r\nimport { ControlloForm } from \"./controlloForm\";\r\nfontawesome.library.add(faMapPin);\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\n//hardcoded part for \"Pensaci Prima\" project\r\n\r\nconst _feature = \"controllo\";\r\nconst _device = \"think-before-device\";\r\nconst _thing = \"Genova\";\r\nconst _tags = [];\r\n\r\nconst loadedBody = React.createRef();\r\n\r\nexport default function AddMeasurementsPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"measurements\";\r\n  //get from attribute from search param\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [samples, setSamples] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n  const [values, setValues] = useState({});\r\n  //addr msg\r\n  const [addrMsg, setAddrMsg] = useState(\"\");\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, { limit: 100 });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => e._id),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) => fetchData(e));\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    //handle changes to selected feature\r\n    const fetchFeature = async () => {\r\n      const fst = { _id: _feature };\r\n      const qs = { filter: JSON.stringify(fst) };\r\n\r\n      try {\r\n        const res = await get_generic(\"features\", qs);\r\n        const feature = res.docs[0];\r\n\r\n        const addr = getAddress();\r\n        const items = feature.items;\r\n        const today = new Date();\r\n        const time =\r\n          today.getHours().toString().padStart(2, \"0\") +\r\n          \":\" +\r\n          today.getMinutes().toString().padStart(2, \"0\");\r\n        //tmp = updateAddress(tmp);\r\n\r\n        //values structure\r\n        const val = {\r\n          indirizzo: addr,\r\n          note: \"\",\r\n          data: Date.now(),\r\n          ora: time,\r\n          veicolo: \"\",\r\n          persone: [\r\n            {\r\n              index: 0,\r\n              età: NaN,\r\n              genere: \"\",\r\n              nazionalità: \"\",\r\n              risultato: \"\",\r\n            },\r\n          ],\r\n        };\r\n        setValues(val);\r\n        //setSamples(tmp);\r\n        setItems(items);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n      return;\r\n    };\r\n\r\n    fetchFeature();\r\n  }, [props, searchParams]);\r\n\r\n  //get values from the previous form, then reset the prev (useful for failed posts)\r\n  useEffect(() => {\r\n    if (loadedBody.current !== null) {\r\n      setValues(loadedBody.current);\r\n    }\r\n  });\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    //reset loaded body\r\n    loadedBody.current = null;\r\n    let tmpValues = cloneDeep(values);\r\n    let valuesPtr = tmpValues;\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //add sostanze array when result is positive\r\n    if (path[i] === \"risultato\" && val === \"positivo\") {\r\n      valuesPtr[\"sostanze\"] = [{ sostanza: \"\", livello: \"\" }];\r\n    }\r\n    //check if an array is present\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  const handleRemoveItemArray = (path) => {\r\n    //reset loaded body\r\n    loadedBody.current = null;\r\n    let val = cloneDeep(values);\r\n\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n    if (tmpPtr.length === 1) {\r\n      return;\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n    setValues(val);\r\n  };\r\n  const addItemArray = (path) => {\r\n    //reset loaded body\r\n    loadedBody.current = null;\r\n    const tmpValues = cloneDeep(values);\r\n    let tmpPtr = tmpValues;\r\n\r\n    let lastKey = null;\r\n    for (let i = 0; i < path.length - 1; i++) {\r\n      tmpPtr = tmpPtr[path[i]];\r\n      lastKey = path[i];\r\n    }\r\n    if (lastKey === \"sostanze\") {\r\n      tmpPtr.push({ sostanza: \"\", livello: \"\" });\r\n    }\r\n    if (lastKey === \"persone\") {\r\n      tmpPtr.push({\r\n        index: tmpPtr.length,\r\n        età: NaN,\r\n        genere: \"\",\r\n        nazionalità: \"\",\r\n        risultato: \"\",\r\n      });\r\n    }\r\n\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  //unroll the data structure into arrays\r\n  const UnrollValues = (obj, vals, smpls) => {\r\n    const tmpVals = [...vals];\r\n    let last = true;\r\n    if (obj.constructor === Object) {\r\n      Object.values(obj).forEach((v) => {\r\n        if (Array.isArray(v)) {\r\n          last = false;\r\n          v.forEach((e) => UnrollValues(e, tmpVals, smpls));\r\n        } else {\r\n          tmpVals.push(v);\r\n        }\r\n      });\r\n    }\r\n    if (last === true) smpls.push(tmpVals);\r\n    return smpls;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone formValues\r\n    let token = undefined;\r\n\r\n    const sostanze = items.filter((e) => e.name === \"sostanza\")[0].range;\r\n\r\n    //clone values\r\n    const tmpValues = cloneDeep(values);\r\n\r\n    //set values to notes compatible with databases requirements\r\n    if (\r\n      tmpValues[\"note\"] === \"\" ||\r\n      tmpValues[\"note\"] === undefined ||\r\n      tmpValues[\"note\"] === null\r\n    )\r\n      tmpValues[\"note\"] = \"--\";\r\n\r\n    const wrongAges = tmpValues.persone.filter(\r\n      (pers) => isNaN(pers[\"età\"]) || pers[\"età\"] < 14 || pers[\"età\"] > 150\r\n    );\r\n\r\n    if (wrongAges.length > 0) {\r\n      window.alert(\r\n        \"Errore, non è stato possibile salvare i dati. Controllare di aver specificato tutte le voci correttamente\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    //add all the negative controls when required\r\n    tmpValues.persone.forEach((person) => {\r\n      sostanze.forEach((sos) => {\r\n        if (person.sostanze === undefined) person.sostanze = [];\r\n        if (person.sostanze.map((e) => e.sostanza).includes(sos) === false) {\r\n          person.sostanze.push({ sostanze: sos, livello: \"nullo\" });\r\n        }\r\n      });\r\n    });\r\n    const vals = UnrollValues(tmpValues, [], []);\r\n    const smpls = vals.map((e) => {\r\n      return { values: e };\r\n    });\r\n    let body = {};\r\n    body[\"feature\"] = _feature;\r\n    body[\"tags\"] = _tags;\r\n    body[\"thing\"] = _thing;\r\n    body[\"device\"] = _device;\r\n    body[\"samples\"] = smpls;\r\n\r\n    //return;\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(resource, JSON.stringify(body), token);\r\n      res = resp.response;\r\n    } catch (error) {\r\n      console.log(error);\r\n      //save values on error to prevent form reset\r\n      loadedBody.current = values;\r\n      res = error.error.response;\r\n      window.alert(\r\n        \"Errore, non è stato possibile salvare i dati. Controllare di aver specificato tutte le voci correttamente\"\r\n      );\r\n    }\r\n    if (res.status === 200) {\r\n      loadedBody.current = null;\r\n      window.alert(\"Controllo caricato con successo\");\r\n\r\n      navigate(\"/add/measurements\");\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const refreshLocation = async () => {\r\n    if (navigator.geolocation) {\r\n      let latitude;\r\n      let longitude;\r\n      navigator.geolocation.getCurrentPosition(async (position) => {\r\n        latitude = position.coords.latitude;\r\n        longitude = position.coords.longitude;\r\n\r\n        try {\r\n          await getBigDataCloudLocation(latitude, longitude);\r\n\r\n          //update all the address\r\n          const val = updateAddress();\r\n          setValues(val);\r\n          setAddrMsg(locale().geo_update);\r\n        } catch (error) {\r\n          console.log(\"Error while connecting to Geolocalization APIs\");\r\n          console.log(error);\r\n          setAddrMsg(locale().geo_failed);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"Geolocation is not supported by this browser.\");\r\n      setAddrMsg(locale().geo_failed);\r\n    }\r\n  };\r\n\r\n  const updateAddress = () => {\r\n    let tmpValues = cloneDeep(values);\r\n    if (tmpValues[\"indirizzo\"] !== undefined) {\r\n      tmpValues[\"indirizzo\"] = getAddress();\r\n    }\r\n    if (tmpValues[\"address\"] !== undefined) {\r\n      tmpValues[\"address\"] = getAddress();\r\n    }\r\n    return tmpValues;\r\n  };\r\n\r\n  const getAddress = (complete = false, short = false) => {\r\n    const continent = localStorage.getItem(\"continent\");\r\n    const continentCode = localStorage.getItem(\"continentCode\");\r\n    const country = localStorage.getItem(\"countryName\");\r\n    const countryCode = localStorage.getItem(\"countryCode\");\r\n    const sub = localStorage.getItem(\"principalSubdivision\");\r\n    const city = localStorage.getItem(\"city\");\r\n    const locality = localStorage.getItem(\"locality\");\r\n\r\n    if (complete === true) {\r\n      if (short === true) {\r\n        return (\r\n          continentCode +\r\n          \" - \" +\r\n          countryCode +\r\n          \" - \" +\r\n          sub +\r\n          \" - \" +\r\n          city +\r\n          \" - \" +\r\n          locality\r\n        );\r\n      } else {\r\n        return (\r\n          continent +\r\n          \" - \" +\r\n          country +\r\n          \" - \" +\r\n          sub +\r\n          \" - \" +\r\n          city +\r\n          \" - \" +\r\n          locality\r\n        );\r\n      }\r\n    }\r\n\r\n    return city + \" - \" + locality;\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Aggiungi&nbsp;<b>Controllo</b>\r\n      </header>\r\n      <main>\r\n        <ControlloForm\r\n          values={values}\r\n          items={items}\r\n          submitFunction={postBody}\r\n          backFunction={back}\r\n          getAddress={getAddress}\r\n          msg={msg}\r\n          handleAddItemArray={addItemArray}\r\n          handleRemoveItemArray={handleRemoveItemArray}\r\n          handleChanges={handleChanges}\r\n          refreshLocation={refreshLocation}\r\n          addrMsg={addrMsg}\r\n        />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic, get_generic_pipe } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport \"../page/page.scss\";\r\nimport { convertJsonToCSV } from \"../../services/misc_functions\";\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle, faDownload } from \"@fortawesome/fontawesome-free-solid\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { tsConstructSignatureDeclaration } from \"@babel/types\";\r\nfontawesome.library.add(faPlusCircle, faDownload);\r\n\r\n//header for csv and table\r\nconst CSVheader = [\r\n  \"Luogo\",\r\n  \"Mezzo\",\r\n  \"Anni\",\r\n  \"Sesso\",\r\n  \"Nazionalità\",\r\n  \"Data\",\r\n  \"Ora\",\r\n  \"Risultato\",\r\n  \"Sostanza\",\r\n  \"Livello\",\r\n  \"Note\",\r\n];\r\n\r\nexport default function AnalyzeDataPage(params) {\r\n  //const { page } = useParams();\r\n  const page = \"measurements\";\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  const [orderBy, setOrderBy] = useState(\"\");\r\n  const [isAscending, setIsAscending] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        const samples = response.docs.map((d) => d.samples);\r\n\r\n        const processedSamples = samples.map((control) => {\r\n          if (control[0].values[9] === \"positivo\") {\r\n            const report = control.filter(\r\n              (person) => person.values[11] !== \"nullo\"\r\n            );\r\n            if (report.length === 0) {\r\n              const ret = control[0];\r\n              ret.values[10] = \"Non specificato\";\r\n              ret.values[11] = \"Non specificato\";\r\n              return ret;\r\n            }\r\n            return report;\r\n          } else {\r\n            const report = control[0];\r\n            report.values[10] = \"--\";\r\n            report.values[11] = \"NA\";\r\n            return [report];\r\n          }\r\n        });\r\n\r\n        const results = processedSamples\r\n          .flat()\r\n          .map((e) => e.values)\r\n          .map((v) => {\r\n            return {\r\n              Luogo: v[0],\r\n              Mezzo: v[4],\r\n              Anni: v[6],\r\n              Sesso: v[7],\r\n              Nazionalità: v[8],\r\n              Data: v[2],\r\n              Ora: v[3],\r\n              Risultato: v[9],\r\n              Sostanza: v[10],\r\n              Livello: v[11],\r\n              Note: v[1],\r\n            };\r\n          });\r\n\r\n        // set state with the result\r\n        setHeader(CSVheader);\r\n\r\n        setResource(results);\r\n        setActions([]);\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    const keys_of_entries = [\r\n      \"Luogo\",\r\n      \"Note\",\r\n      \"Data\",\r\n      \"Ora\",\r\n      \"Mezzo\",\r\n      \"ID\",\r\n      \"Anni\",\r\n      \"Sesso\",\r\n      \"Nazionalità\",\r\n      \"Risultato\",\r\n      \"Sostanza\",\r\n      \"Livello\",\r\n    ];\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    let sortBy =\r\n      searchParams.get(\"sortBy\") !== null ? searchParams.get(\"sortBy\") : \"\";\r\n    const order =\r\n      searchParams.get(\"order\") !== null ? searchParams.get(\"order\") : \"\";\r\n\r\n    if (sortBy !== \"\")\r\n      sortBy = \"samples.values.\" + keys_of_entries.indexOf(sortBy);\r\n    const qs = { page: num, limit: limit, sort: { order: order, by: sortBy } };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    setResource(tmp);\r\n  };\r\n\r\n  const sortHandler = (e) => {\r\n    let ord = searchParams.get(\"order\");\r\n    let asc = false;\r\n    //toggle ordering\r\n    if (ord === null) {\r\n      ord = \"descending\";\r\n    } else if (ord === \"ascending\") {\r\n      ord = \"descending\";\r\n    } else {\r\n      ord = \"ascending\";\r\n      asc = true;\r\n    }\r\n\r\n    //set searchparams\r\n    searchParams.set(\"sortBy\", e);\r\n    searchParams.set(\"order\", ord);\r\n\r\n    setOrderBy(e);\r\n    setIsAscending(asc);\r\n    setSearchParams(searchParams);\r\n  };\r\n\r\n  const downloadDataHandler = async () => {\r\n    const response = await get_generic_pipe(\"measurements\", {});\r\n    //correct response\r\n    const regex = new RegExp(/}{/g);\r\n    const test = response.data.replace(regex, \"},{\");\r\n\r\n    //convert to JSON object and then extract all the values nested into arrays\r\n    const JSONresponse = JSON.parse(\"[\" + test + \"]\")\r\n      .map((el) => el.samples)\r\n      .map((control) => {\r\n        if (control[0].values[9] === \"positivo\") {\r\n          const report = control.filter(\r\n            (person) => person.values[11] !== \"nullo\"\r\n          );\r\n          if (report.length === 0) {\r\n            const ret = control[0];\r\n            ret.values[10] = \"Non specificato\";\r\n            ret.values[11] = \"Non specificato\";\r\n            return ret;\r\n          }\r\n          return report;\r\n        } else {\r\n          const report = control[0];\r\n          report.values[10] = \"--\";\r\n          report.values[11] = \"NA\";\r\n          return [report];\r\n        }\r\n      })\r\n      .flat()\r\n      .map((e) => e.values)\r\n      .map((v) => {\r\n        return {\r\n          Luogo: v[0],\r\n          Mezzo: v[4],\r\n          Anni: v[6],\r\n          Sesso: v[7],\r\n          Nazionalità: v[8],\r\n          Data: v[2],\r\n          Ora: v[3],\r\n          Risultato: v[9],\r\n          Sostanza: v[10],\r\n          Livello: v[11],\r\n          Note: v[1],\r\n        };\r\n      });\r\n\r\n    const CSVdata = convertJsonToCSV(JSONresponse, CSVheader);\r\n\r\n    const csvBlob = new Blob([CSVdata], { type: \"text/plain;charset=utf-8\" });\r\n\r\n    saveAs(csvBlob, \"Dati_Pensaci_Prima.csv\");\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => {\r\n              searchParams.set(\"page\", 1);\r\n              setSearchParams(searchParams);\r\n            }}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() => {\r\n              searchParams.set(\"page\", prevPage);\r\n              setSearchParams(searchParams);\r\n            }}\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() => {\r\n                searchParams.set(\"page\", parseInt(pageNum, 10) - 1);\r\n                setSearchParams(searchParams);\r\n              }}\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() => {\r\n                searchParams.set(\"page\", parseInt(pageNum, 10) + 1);\r\n                setSearchParams(searchParams);\r\n              }}\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() => {\r\n              searchParams.set(\"page\", parseInt(pageNum, 10) + 1);\r\n              setSearchParams(searchParams);\r\n            }}\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() => {\r\n              searchParams.set(\"page\", totalPages);\r\n              setSearchParams(searchParams);\r\n            }}\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        <b>Analizza dati raccolti</b>\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            downloadDataHandler();\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-download\"\r\n            aria-hidden=\"true\"\r\n            title={\"Download\"}\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <br />\r\n        <ContentTable\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n          orderBy={orderBy}\r\n          ascending={isAscending}\r\n          sortHandler={sortHandler}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport Navigation from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\nimport ProfilePage from \"./components/profilePage/profilePage\";\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport HorizontalNavigationBar from \"./components/horizontalNavigationBar/horizontalNavigationBar\";\r\nimport PasswordRecoveryPage from \"./components/passwordRecoveryPage/PasswordRecoveryPage\";\r\nimport PasswordResetPage from \"./components/PasswordResetPage/PasswordResetPage\";\r\nimport AppContext from \"./context\";\r\n\r\nimport {\r\n  notificationManager,\r\n  get_generic,\r\n  getBigDataCloudLocation,\r\n} from \"./services/http_operations\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport { layout } from \"./config\";\r\nimport AddMeasurementsPage from \"./components/addMeasurementsPage/addMeasurementsPage\";\r\nimport AnalyzeDataPage from \"./components/analyzeDataPage/analyzeDataPage\";\r\nimport cloneDeep from \"clone-deep\";\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const [types, setTypes] = useState<Object | undefined>();\r\n  const [data, setData] = useState<Object>({});\r\n\r\n  let layoutRef = React.useRef<string | null>();\r\n  const tkn = localStorage.getItem(\"token\");\r\n  const location = localStorage.getItem(\"city\");\r\n\r\n  ////////////////NOTIFICATION MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationManagement = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  ///////////////END NOTIFICATION MANAGEMENT FRAGMENT\r\n\r\n  ////////////////////////////GET COORDINATES FROM BROWSER\r\n\r\n  useEffect(() => {\r\n    const getLocation = async () => {\r\n      if (navigator.geolocation) {\r\n        let latitude;\r\n        let longitude;\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          latitude = position.coords.latitude;\r\n          longitude = position.coords.longitude;\r\n        });\r\n        try {\r\n          await getBigDataCloudLocation(latitude, longitude);\r\n        } catch (error) {\r\n          console.log(\"Error while connecting to Geolocalization APIs\");\r\n        }\r\n      } else {\r\n        console.log(\"Geolocation is not supported by this browser.\");\r\n      }\r\n    };\r\n\r\n    //if location has been already set, return\r\n    if (location !== null) {\r\n      return;\r\n    }\r\n    // call the function\r\n    try {\r\n      getLocation();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, []);\r\n\r\n  ///////////////////////////////////////\r\n\r\n  ///////////////FETCHED TYPES AND DATA MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function UpdateData(fetched: string[], key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: [...fetched] };\r\n    });\r\n  }\r\n\r\n  //use effect to fetch static data from the server /types\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, \"\");\r\n\r\n        setTypes(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    //if types has been already set, ignore it\r\n    if (types !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  const fetchedManagement = {\r\n    types: types,\r\n    data: data,\r\n    UpdateData: UpdateData,\r\n  };\r\n  ///////////////END FETCHED TYPES MANAGEMENT FRAGMENT\r\n\r\n  //not logged => show auth page\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/passwordrecovery\"\r\n              element={<PasswordRecoveryPage />}\r\n            />\r\n            <Route path=\"/passwordreset\" element={<PasswordResetPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        notifications: notificationManagement,\r\n        fetched: fetchedManagement,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Container\r\n          fluid\r\n          style={{\r\n            paddingLeft: 0 + \"px\",\r\n            paddingRight: 0 + \"px\",\r\n            minHeight: 100 + \"vh\",\r\n            //border: \"2px dashed teal\",\r\n          }}\r\n        >\r\n          <Row\r\n            style={{\r\n              padding: 0 + \"px\",\r\n              height:\r\n                /Mobi/i.test(window.navigator.userAgent) == true\r\n                  ? \"auto\"\r\n                  : 100 + \"vh\",\r\n              //border: \"2px dashed green\",\r\n            }}\r\n          >\r\n            <Col\r\n              md=\"auto\"\r\n              style={{\r\n                padding: 0 + \"px\",\r\n                //border: \"2px dashed red\",\r\n              }}\r\n            >\r\n              <Navigation />\r\n            </Col>\r\n\r\n            <Col style={{ paddingLeft: 0 + \"px\", paddingRight: 0 + \"px\" }}>\r\n              <Routes>\r\n                <Route\r\n                  path=\"/\"\r\n                  element={\r\n                    <Navigate\r\n                      replace\r\n                      to={\r\n                        localStorage.getItem(\"user-role\") === \"analyst\"\r\n                          ? \"/analyzedata\"\r\n                          : \"/add/measurements\"\r\n                      }\r\n                    />\r\n                  }\r\n                />\r\n\r\n                <Route path=\"/home\" element={<HomePage />} />\r\n                <Route path=\"/viewProfile\" element={<ProfilePage />} />\r\n                <Route path=\"/analyzedata\" element={<AnalyzeDataPage />} />\r\n                <Route\r\n                  path=\"/add/measurements/\"\r\n                  element={<AddMeasurementsPage />}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/edit/:resource/:id\"\r\n                  element={<EditContentPage />}\r\n                />\r\n                <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n                <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n                <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n                <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n                <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n              </Routes>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}