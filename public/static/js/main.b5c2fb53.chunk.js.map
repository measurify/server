{"version":3,"sources":["services/http_operations.js","common/localizations/localization_it.js","common/localizations/localization_en.js","services/validations.js","configs/complete_config.js","configManager.js","configs/EM_config.js","common/locale.ts","services/userRolesManagement.js","resources/Hi_Drive_Logo_Claim_rgb.svg","components/languageSelector/languageSelector.tsx","components/logoHolder/logoHolder.jsx","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","services/misc_functions.js","components/navigation/navigation.comp.jsx","components/actionsManager/actionsManager.jsx","components/contentTable/contentTable.jsx","context.jsx","components/page/page.jsx","components/profilePage/profilePage.jsx","components/unauthorizedPage/unauthorizedPage.tsx","components/notificationBar/notificationBar.jsx","components/horizontalNavigationBar/horizontalNavigationBar.jsx","services/operation_tool_services.js","components/formManager/formManager.jsx","services/objects_manipulation.js","components/editContentPage/editContentPage.jsx","components/formFileComp/formFile.jsx","components/addPage/addPage.jsx","components/importExportValues/importExportValues.jsx","components/addExperimentPage/addExperimentPage.jsx","components/addMeasurementsPage/addMeasurementsPage.jsx","components/OperationToolPages/updateSteps/updateHistoryFileForm.jsx","components/OperationToolPages/updateSteps/updateHistoryForm.jsx","components/OperationToolPages/updateSteps/updateHistory.jsx","components/OperationToolPages/download/downloadExperiment.jsx","components/OperationToolPages/removeSteps/removeSteps.jsx","components/passwordRecoveryPage/PasswordRecoveryPage.jsx","components/PasswordResetPage/PasswordResetPage.jsx","App.tsx","index.js"],"names":["api_url","localization_it","username","password","tenant","email","keep_logged","select","language","welcome","role","session_expire_in","resources","tools","notifications","file_content","preview","configuration","clear_all","no_changes_found","resource_successfully_edited","resource_successfully_posted","enter","username_suggestion","password_suggestion","tenant_suggestion","email_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","profile_page_desc","pass_change_confirm","email_change_confirm","password_changed","email_changed","password_rules","oh_no","broken_link","submit","cancel","login","logout","repeat","close","import","export","password_recovery","password_reset","forgot_password_link","go_login_page","email_sent_successfully","login_error","unauthorised_user","session_expired","no_file","duplicate_resource_error","error_imported_file","pass_not_match","old_pass_empty","old_pass_wrong","pass_not_null","missing_tenant","missing_email","missing_token","missing_password","missing_username","stronger_password_required","email_sent_errors","password_not_changed_errors","network_error","empty_email_error","email_not_match","email_same_as_old","generic_file_post_error","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","saveToken","body","options","headers","url_string","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","type","Date","getTime","toString","catch","error","refreshToken","Authorization","GetToken","put","post_file_generic","resource_type","formData","a","additionalHeader","undefined","console","log","tempH","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_generic","put_generic","padStart","length","JSON","stringify","message","delete_generic","delete","statusCode","get_generic","qs","url","filter","concat","limit","page","join","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","get_one_generic","requestPasswordReset","resetPassword","reset","getPasswordStrength","getItem","isFeatureInUse","feature","features","alwaysTrue","Complete_configuration","pages","aliasPages","_actions","restrictionPages","pageActions","viewFields","items","editFields","_id","description","state","NaN","startDate","endDate","manager","protocol","place","metadata","value","tags","unit","dimension","visibility","addFields","range","read","update","actions","entity","crud","topics","fields","thing","device","editFieldsSpecifier","_type","policy","addTypes","fetchedPageTypes","status","measurementBufferPolicy","field","type1","type2","fetchedPageData","guidelines","step","operationPages","base_api_url","website_name","languages","layout","LoadConfig","conf","tenantName","startsWith","EM_configuration","assign","locale","tkn","navigator","substring","roleCache","SetRoleDefinition","canDo","userRole","resource","actionCRUD","tmp","canDoDeprecated","parse","entityDef","el","_style","_g","_g2","LanguageSelector","setSessionLanguage","window","location","reload","includes","Button","variant","onClick","_excluded","_extends","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgHiDriveLogoClaimRgb","_ref","svgRef","title","titleId","props","xmlns","xmlnsXlink","x","y","viewBox","style","enableBackground","xmlSpace","ref","className","d","ForwardRef","LogoHolder","Fragment","href","userRef","React","createRef","pswRef","tenantRef","AuthPage","useState","setMsg","e","preventDefault","current","psw","replace","details","Form","onSubmit","Group","controlId","Label","Control","placeholder","color","to","size","width","height","marginRight","opacity","HomePage","useEffect","rel","NotFoundPage","isDefault","isNaN","Array","isArray","def","elem","constructor","nonDefaultLength","removeDefaultElements","entr","j","splice","subEntr","areEqual","obj1","obj2","k1","k2","values","Capitalize","s","toUpperCase","slice","FormatDate","dt","replaceAll","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","intervalRef","loginTime","remainingSeconds","duration","Navigation","isOpened","setIsOpened","usr","rl","tn","CalcEnding","t0","remainingSec","retryLoginTime","parseInt","now","exp","endsWith","DurationToMilliSeconds","clearInterval","setInterval","clear","paddingLeft","paddingBottom","document","map","navData","isActive","ActionContent","toShow","resType","subK","row","f","UnrollView","item","Accordion","defaultActiveKey","Children","toArray","Item","eventKey","Header","Body","some","single","Table","responsive","striped","bordered","hover","toLowerCase","ActionManager","res","setRes","viewPopover","Popover","minWidth","test","userAgent","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","confirm","removeSingle","ContentTable","header","index","faEye","faPencilAlt","faCopy","AppContext","createContext","faPlusCircle","Page","params","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","set_Actions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","myFetched","context","useContext","fetched","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","disabled","Prev","Ellipsis","Next","Last","find","r","RemoveData","ProfilePage","setUsername","setRole","setTenant","emailShow","setEmailShow","oldPassword","setOldPassword","setPassword","passwordConfirm","setPasswordConfirm","setEmail","emailConfirm","setEmailConfirm","msgPass","setMsgPass","msgEmail","setMsgEmail","isError","setisError","_email","submitPassword","requiredStr","passwordStrength","result","submitEmail","Container","fluid","Row","Col","xs","onChange","Text","UnauthorizedPage","oldNotifications","NotificationBar","show","setShow","highlight","setHighlight","layoutRef","useRef","myNotifications","handleClose","setTimeout","errorNot","textDecoration","Badge","pill","bg","Offcanvas","backgroundColor","onHide","scroll","backdrop","keyboard","Title","ToastContainer","notification","Toast","animation","onClose","src","alt","HorizontalNavigationBar","padding","justifyContent","alignItems","logsManager","PushLog","RemoveLog","ClearLogs","postHistoryFile","file","ovd","csvSep","arrSep","floatSep","filename","expName","split","FormData","append","report","success","ignored","overridden","postHistoryStep","history","downloadHistory","experiment_id","compress","fileName","getHistoryCSV","blob","Blob","saveAs","File","resource_path","config","method","deleteHistorySteps","selected","toDelete","remove","FormManager","disabledFields","functionalFields","submitFunction","handleChangesCallback","arrayDeleteCallback","types","val","borderBottomStyle","borderBottomWidth","marginBottom","sm","borderRightStyle","borderRightWidth","Select","SelectFormRow","Check","checked","md","ArrayBooleanFormRow","allowedVal","Math","max","Autocomplete","disableClearable","onBlur","onInputChange","newValue","getOptionLabel","option","optionalLabel","renderOption","Box","component","sx","mr","flexShrink","renderInput","TextField","label","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","NumericFormRow","alias","FetchedFormRow","BooleanFormRow","StringFormRow","ObjectFormRow","backFunction","cloneDeep","sortObject","template","sortingKeys","ob","sort","b","reduce","accumulator","maintainEmptyElements","original","fieldSpecifier","copy","maintainEmptyElement","path","tmpPtr","fieldSpecifierCpy","tmpPath","element","nonDefLen","len","push","EditContentPage","setOriginal","navigate","useNavigate","setValues","deleted","setDisabledFields","fetchRequiredData","UpdateData","tmpValues","evaluateSpecifiers","_key","specsEntries","resp","fst","tmpOrig","toSend","origArr","indexes","removed","alert","tmpVals","valuesPtr","lastIndexNumber","elements","minDel","Infinity","FormFile","setContentHeader","setContentPlain","setContentBody","setFile","contentBody","contentPlain","contentHeader","setIsError","select_file","accept","files","fileReader","FileReader","onloadend","content","regex","RegExp","splitted","readAsText","overflow","h","resize","cols","rows","readOnly","AddPage","postType","setPostType","fetchSingle","back","postBody","statusText","det","postFile","Nav","justify","onSelect","Link","borderRadius","borderStyle","borderColor","borderWidth","margin","ignoreAdd","ImportExportValues","setContent","importValues","_content","importMsg","paddingTop","AddExperimentPage","setImportMsg","protocols","setProtocols","fetchDataDuplicate","tmpDisabled","handleProtocolChange","selectedProtocol","importedValues","imported","sorted","AddMeasurementsPage","samples","setSamples","setItems","formValues","setFormValues","setFeatures","setFeature","handleFeatureChange","selectedFeature","addSample","tmpSample","enumValues","tmpSamples","sample","sampl","formValuesPtr","UpdateHistoryFileForm","postHistory","arraySepRef","floatSepRef","setCsvSep","ovdRef","setCsvHeader","setCsvContent","csvContent","csvHeader","_file","experiments","handleExperimentChange","handleChanges","updateHistory","UpdateHistoryPage","myLogs","logs","setNow","operationindex","setOperationIndex","setExperiments","experiment","setExperiment","getExperiments","_csvSep","arraySep","prev","postStep","ex","expProtocol","_values","ProgressBar","l","reverse","experimentSelectRef","csvSepRef","compressRef","DownloadHistoryPage","downloadHistoryHandler","expIndex","selectedIndex","downloadZip","downloadDataHandler","stepsStringRef","RemoveStepsPage","steps","setSteps","experimentIndex","deleteStepsHandler","toRemove","newSteps","stepsString","interval","begin","end","_steps","emailRef","PasswordRecoveryPage","pswConfirmRef","PasswordResetPage","setToken","pswConfirm","App","setNotifications","setLogs","setTypes","setData","organization","address","phone","admin_username","admin_password","origin","notificationManagement","fetchTypes","fetchedManagement","textarea","getElementById","scrollTop","scrollHeight","logsManagement","Provider","paddingRight","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b5c2fb53.chunk.js","sourcesContent":["import { base_api_url } from \"../configManager\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nexport let api_url;\r\n\r\nexport const instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    //unsafe, delete in prod\r\n    //rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => {},\r\n  RemoveNotification: (id) => {},\r\n  ClearNotifications: () => {},\r\n};\r\n\r\n//set APIs url according to configuration or GUI host\r\nexport function SetAPIUrl() {\r\n  api_url =\r\n    base_api_url !== undefined ? base_api_url : window.location.origin + \"/v1\";\r\n}\r\n\r\n//login\r\nexport function login(username, password, tenant, saveToken = true) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      //Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        if (saveToken === true) {\r\n          localStorage.setItem(\"token\", response.data.token);\r\n          localStorage.setItem(\r\n            \"token-expiration-time\",\r\n            response.data.token_expiration_time\r\n          );\r\n          localStorage.setItem(\"username\", response.data.user.username);\r\n          localStorage.setItem(\"user-role\", response.data.user.type);\r\n          localStorage.setItem(\"user-email\", response.data.user.email);\r\n          localStorage.setItem(\"user-tenant\", tenant);\r\n          localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        }\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"token\", response.data.token);\r\n        localStorage.setItem(\"login-time\", new Date().getTime().toString());\r\n        localStorage.setItem(\r\n          \"token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        //obscure password in notification bar\r\n        if (body[\"password\"] !== undefined)\r\n          body[\"password\"] = \"\".padStart(body[\"password\"].length, \"*\");\r\n\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(resource_type, qs = {}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n  if (qs.select !== undefined && qs.length !== 0) {\r\n    url = url.concat('&select=[\"' + qs.select.join('\",\"') + '\"]');\r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        console.log(response.data.docs);\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_one_generic(resource_type, id, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"GET ONE:\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//function to request a password reset\r\nexport async function requestPasswordReset(tenant, email) {\r\n  console.log({ email, tenant });\r\n\r\n  const url_string = api_url + \"/self/reset?tenant=\" + tenant;\r\n  const body = JSON.stringify({ email: email });\r\n  console.log(\"POST password reset request:\" + url_string);\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//function to reset the password from token\r\nexport async function resetPassword(tenant, token, password) {\r\n  const url_string = api_url + \"/self\";\r\n  console.log(\"PUT password reset:\" + url_string);\r\n  const body = JSON.stringify({\r\n    reset: token,\r\n    password: password,\r\n    tenant: tenant,\r\n  });\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\n//get required password strength from the API\r\nexport async function getPasswordStrength() {\r\n  const url_string = api_url + \"/types/passwordStrength\";\r\n  console.log(\"GET password strength:\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url_string, options)\r\n      .then((response) => {\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n//return the login token from the localstorage\r\nexport function GetToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n","const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  email: \"email\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadr in \",\r\n  resources: \"Risorse\",\r\n  tools: \"Strumenti\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n  preview: \"Anteprima\",\r\n  configuration: \"Configurazione\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n  no_changes_found: \"Nessun cambiamento trovato\",\r\n  resource_successfully_edited: \"Resoursa modificata con successo!\",\r\n  resource_successfully_posted: \"Resource successufully posted!\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  email_suggestion: \"Inserisci la tua email\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo di Measurify!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.\",\r\n  right_bar_descr_hp:\r\n    'La barra a destra pu essere aperta cliccando sul pulsante \"Notifiche\" per mostrare la lista delle notifiche.',\r\n  session_expire_info_hp: ``,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"questa  la pagina in cui puoi visionare il tuo profilo o modificare la password\",\r\n  pass_change_confirm: \"La password verr modificata, procedere?\",\r\n  email_change_confirm: \"L'indirizzo email verr modificato, procedere?\",\r\n\r\n  password_changed: \"Password cambiata con successo\",\r\n  email_changed: \"Email cambiata con successo\",\r\n  password_rules:\r\n    \"La password deve contenere almeno 6 caratteri, almeno una lettera maiuscola e un numero.\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  repeat: \"Ripeti\",\r\n  close: \"Chiudi\",\r\n  import: \"Importa\",\r\n  export: \"Esporta\",\r\n\r\n  password_recovery: \"Recupero Password\",\r\n  password_reset: \"Reset Password\",\r\n  forgot_password_link: \"Hai dimenticato la tua password?\",\r\n  go_login_page: \"Torna alla pagina di login\",\r\n  email_sent_successfully:\r\n    \"Email inviata, segui le istruzioni contenute per cambiare la tua password\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n  no_file: \"Si prega di selezionare un file\",\r\n  duplicate_resource_error: \"Nel database  gi presente una risorsa con\",\r\n  error_imported_file:\r\n    \"Nel file sono presenti errori, non  stato possibile importarlo\",\r\n  pass_not_match:\r\n    \"La password inserita e la conferma non combaciano, si prega di reinserirle.\",\r\n  old_pass_empty: \"Per favore, inserire la vecchia password\",\r\n  old_pass_wrong: \"La vecchia password  sbagliata\",\r\n  pass_not_null: \"La password non pu essere vuota\",\r\n  missing_tenant: \"Si prega di inserire l'organizzazione\",\r\n  missing_email: \"Si prega di inserire l'email\",\r\n  missing_token: \"Si prega di inserire il token\",\r\n  missing_password: \"Si prega di inserire la propria password\",\r\n  missing_username: \"Si prega di inserire il proprio username\",\r\n  stronger_password_required: \"Si prega di inserire una password pi robusta\",\r\n  email_sent_errors:\r\n    \"Non  stato possibile inviare la mail, controllare i dati inseriti.\",\r\n\r\n  password_not_changed_errors: \"Non  stato possibile cambiare la password.\",\r\n  network_error: \"Errore di rete, si prega di controllare la connessione.\",\r\n  empty_email_error:\r\n    \"Il campo email  vuoto, si prega di inserire un indirizzo email valido.\",\r\n  email_not_match:\r\n    \"L'indirizzo email inserito e la sua conferma non combaciano, si prega di reinserirle.\",\r\n  email_same_as_old:\r\n    \"La nuova email coincide con quella vecchia, si prega di inserire un indirizzo email diverso dal precedente.\",\r\n  generic_file_post_error:\r\n    \"Il file selezionato non pu essere caricato perch contiene errori.\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  email: \"Email\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  resources: \"Resources\",\r\n  tools: \"Tools\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n  preview: \"Preview\",\r\n  configuration: \"Configuration\",\r\n\r\n  clear_all: \"Clear all\",\r\n  no_changes_found: \"No changes found\",\r\n  resource_successfully_edited: \"Resource successfully edited!\",\r\n  resource_successfully_posted: \"Resource successufully posted!\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  email_suggestion: \"Insert your email\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to the Administration dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains the information about your account and  the list of tabs\",\r\n  right_bar_descr_hp:\r\n    'The right bar contains the notification bar (Click on \"Notifications\" to open).',\r\n  session_expire_info_hp: \"\",\r\n  github_page_hp: \"\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //profile page\r\n  profile_page_desc:\r\n    \"from this page you can view your own profile or change the password\",\r\n  pass_change_confirm: \"Password will be changed, do you confirm?\",\r\n  email_change_confirm: \"Email address will be changed, do you confirm?\",\r\n  password_changed: \"Password changed successfully\",\r\n  email_changed: \"Email changed successfully\",\r\n  password_rules:\r\n    \"Password length should be at least 6 characters, contains at least one uppercase character and one number.\",\r\n  forgot_password_link: \"Have you forgot your password?\",\r\n  go_login_page: \"Go to login page\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link: \"It looks like you have clicked on a broken link.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  repeat: \"Repeat\",\r\n  close: \"Close\",\r\n  import: \"Import\",\r\n  export: \"Export\",\r\n\r\n  password_recovery: \"Password Recovery\",\r\n  password_reset: \"Reset Password\",\r\n  email_sent_successfully:\r\n    \"Email sent, please follow the provided instruction to reset the password\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n  no_file: \"Please, select a file\",\r\n  duplicate_resource_error: \"The database already contains a resource with\",\r\n  error_imported_file: \"File contains errors. It was not possible to import it\",\r\n  pass_not_match:\r\n    \"Provided password and the confirmation do not match. Please insert them again\",\r\n  old_pass_empty: \"Please, enter old password\",\r\n  old_pass_wrong: \"The old password is wrong\",\r\n  pass_not_null: \"Password cannot be empty\",\r\n  missing_tenant: \"Please, insert your tenant\",\r\n  missing_email: \"Please, insert your email\",\r\n  missing_token: \"Please, insert your token\",\r\n  missing_password: \"Please, insert your password\",\r\n  missing_username: \"Please, insert your username\",\r\n  stronger_password_required: \"Please, insert stronger password\",\r\n  email_sent_errors:\r\n    \"It was not possible to send the mail, please check the provided info.\",\r\n  password_not_changed_errors: \"It was not possible to change the password.\",\r\n  network_error: \"Network error, please check internet connection\",\r\n  empty_email_error:\r\n    \"Email field is empty, please insert a valid email address.\",\r\n  email_not_match:\r\n    \"Provided email and the confirmation do not match. Please insert them again.\",\r\n  email_same_as_old:\r\n    \"The new email is the same as the old email. Please insert a different email address.\",\r\n  generic_file_post_error:\r\n    \"The selected file cannot be uploaded because it contains errors.\",\r\n};\r\n\r\nexport default localization_en;\r\n","//validation functions used for input disable/validation etc.\r\n//the can be defined when required and used as \"pointer to function\" into the appropriate dict config.js\r\n//return must be coherent with name: i.e isInUse => true when is used\r\n\r\nimport { get_generic } from \"./http_operations\";\r\n\r\n//this function return true if the feature is in use (check on measurements/devices)\r\nexport async function isFeatureInUse(feature) {\r\n  const qs = { filter: JSON.stringify({ feature: feature }) };\r\n\r\n  try {\r\n    //check if feature has associated measurements\r\n    const res = await get_generic(\"measurements\", qs);\r\n    if (res.totalDocs > 0) {\r\n      //has measurements, so it's in use\r\n      return true;\r\n    } else {\r\n      //if the feature has no measurements, check if it has device associated\r\n      const qs = { filter: JSON.stringify({ features: feature }) };\r\n      const res = await get_generic(\"devices\", qs);\r\n\r\n      if (res.totalDocs > 0) {\r\n        //has a device, so it's in use\r\n        return true;\r\n      } else return false;\r\n    }\r\n  } catch (errors) {\r\n    console.log(errors);\r\n    return false;\r\n  }\r\n}\r\n\r\n//this function always return true\r\nexport function alwaysTrue() {\r\n  return true;\r\n}\r\n","//the exported configuration for EM database\r\nimport { isFeatureInUse, alwaysTrue } from \"../services/validations\";\r\n\r\nexport default function Complete_configuration() {\r\n  //operation pages\r\n  //those are the pages of operations performed on experiments,\r\n  // which are: updatehistory, downloadexperiment, removesteps\r\n  const operationPages = [\"updatehistory\", \"downloadexperiment\", \"removesteps\"];\r\n\r\n  //dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n  //action is a special field that will enable actions for each row || still required, future version may have it removed\r\n  const pages = {};\r\n  pages[\"users\"] = [\"username\", \"type\", \"_actions\"];\r\n  pages[\"roles\"] = [\"_id\", \"_actions\"];\r\n  pages[\"tags\"] = [\"_id\", \"_actions\"];\r\n  pages[\"things\"] = [\"_id\", \"_actions\"];\r\n  pages[\"features\"] = [\"_id\", \"_actions\"];\r\n  pages[\"devices\"] = [\"_id\", \"tags\", \"_actions\"];\r\n  pages[\"protocols\"] = [\"_id\", \"description\", \"_actions\"];\r\n  pages[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"_actions\"];\r\n  pages[\"measurements\"] = [\r\n    \"thing\",\r\n    \"feature\",\r\n    \"device\",\r\n    \"startDate\",\r\n    \"tags\",\r\n    \"_actions\",\r\n  ];\r\n\r\n  //alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\n  const aliasPages = {};\r\n  aliasPages[\"features\"] = { _actions: \"Management\" };\r\n  aliasPages[\"tags\"] = { _actions: \"Management\" };\r\n  aliasPages[\"devices\"] = { _actions: \"Management\" };\r\n  aliasPages[\"things\"] = { _actions: \"Management\" };\r\n  aliasPages[\"users\"] = { _actions: \"Management\" };\r\n  aliasPages[\"roles\"] = { _actions: \"Management\" };\r\n  aliasPages[\"protocols\"] = { _actions: \"Management\" };\r\n  aliasPages[\"experiments\"] = { _actions: \"Management\" };\r\n  aliasPages[\"measurements\"] = { _actions: \"Management\" };\r\n\r\n  //restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\n  const restrictionPages = {};\r\n\r\n  restrictionPages[\"users\"] = [\"admin\"];\r\n  restrictionPages[\"roles\"] = [\"admin\"];\r\n  restrictionPages[\"protocols\"] = [\"admin\"];\r\n\r\n  //actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\" | \"duplicate\"\r\n  const pageActions = {};\r\n  pageActions[\"features\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n  pageActions[\"users\"] = [\"view\", \"delete\"];\r\n  pageActions[\"roles\"] = [\"view\", \"delete\"];\r\n  pageActions[\"things\"] = [\"view\", \"delete\"];\r\n  pageActions[\"tags\"] = [\"view\", \"edit\", \"delete\"];\r\n  pageActions[\"devices\"] = [\"view\", \"edit\", \"delete\"];\r\n  pageActions[\"protocols\"] = [\"view\", \"delete\"];\r\n  pageActions[\"experiments\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n  pageActions[\"measurements\"] = [\"view\", \"edit\", \"delete\"];\r\n\r\n  //view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\n  const viewFields = {};\r\n  viewFields[\"users\"] = [\"username\", \"type\", \"email\", \"fieldmask\", \"status\"];\r\n  viewFields[\"roles\"] = [\"_id\", \"default\", \"actions\"];\r\n  viewFields[\"features\"] = [\r\n    { items: [\"name\", \"type\", \"unit\", \"dimension\"] },\r\n    \"tags\",\r\n  ];\r\n  viewFields[\"tags\"] = [\"tags\"];\r\n  viewFields[\"things\"] = [\"_id\", \"visibility\", \"tags\"];\r\n  viewFields[\"devices\"] = [\"_id\", \"features\", \"tags\", \"scripts\"];\r\n  viewFields[\"protocols\"] = [\"_id\", \"description\", \"metadata\", \"topics\"];\r\n  viewFields[\"experiments\"] = [\r\n    \"_id\",\r\n    \"description\",\r\n    \"state\",\r\n    \"startDate\",\r\n    \"endDate\",\r\n    \"manager\",\r\n    \"place\",\r\n    \"protocol\",\r\n    \"metadata\",\r\n    \"history\",\r\n  ];\r\n  viewFields[\"measurements\"] = [\r\n    \"thing\",\r\n    \"feature\",\r\n    \"device\",\r\n    \"startDate\",\r\n    \"visibility\",\r\n    \"tags\",\r\n    \"samples\",\r\n  ];\r\n\r\n  //edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n  //fields should be specified in the same format of the object that will be represented:\r\n  // - key:\"\" for an string field,\r\n  // - key:NaN for a numeric field\r\n  // - key:[\"\"] for an array of string\r\n  // - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\n  const editFields = {};\r\n\r\n  editFields[\"experiments\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    state: NaN,\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    manager: \"\",\r\n    protocol: \"\",\r\n    place: [{ name: \"\" }],\r\n    metadata: [{ name: \"\", value: \"\" }],\r\n    tags: [\"\"],\r\n  };\r\n\r\n  editFields[\"features\"] = {\r\n    _id: \"\",\r\n    items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN }],\r\n    tags: [\"\"],\r\n  };\r\n  editFields[\"tags\"] = {\r\n    tags: [\"\"],\r\n  };\r\n  editFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };\r\n  editFields[\"measurements\"] = { tags: [\"\"] };\r\n\r\n  //add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n  //fields should be specified in the same format of the objet that will be represented:\r\n  // - key:\"\" for an string field,\r\n  // - key:NaN for a numeric field\r\n  // - key:[\"\"] for an array of string\r\n  // - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\n  const addFields = {};\r\n  addFields[\"tags\"] = { _id: \"\", tags: [\"\"] };\r\n  addFields[\"things\"] = { _id: \"\", visibility: \"\", tags: [\"\"] };\r\n  addFields[\"features\"] = {\r\n    _id: \"\",\r\n    items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN, range: [\"\"] }],\r\n    tags: [\"\"],\r\n  };\r\n\r\n  addFields[\"devices\"] = {\r\n    _id: \"\",\r\n    features: [\"\"],\r\n  };\r\n\r\n  addFields[\"users\"] = { username: \"\", password: \"\", email: \"\", type: \"\" };\r\n  addFields[\"roles\"] = {\r\n    _id: \"\",\r\n    default: {\r\n      create: false,\r\n      read: \"\",\r\n      update: \"\",\r\n      delete: \"\",\r\n    },\r\n    actions: [\r\n      {\r\n        entity: \"\",\r\n        crud: {\r\n          create: false,\r\n          read: \"\",\r\n          update: \"\",\r\n          delete: \"\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n  addFields[\"protocols\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    metadata: [\r\n      {\r\n        name: \"\",\r\n        description: \"\",\r\n        type: \"\",\r\n      },\r\n    ],\r\n    topics: [\r\n      {\r\n        name: \"\",\r\n        description: \"\",\r\n        fields: [{ name: \"\", description: \"\", type: \"\" }],\r\n      },\r\n    ],\r\n  };\r\n\r\n  //NOTE: experiments page works differently, so keep it empty\r\n  addFields[\"experiments\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    state: NaN,\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    manager: \"\",\r\n    place: [{ name: \"\" }],\r\n  };\r\n\r\n  //NOTE: measurements page works differently, so keep it empty\r\n  addFields[\"measurements\"] = {\r\n    thing: \"\",\r\n    device: \"\",\r\n    tags: [\"\"],\r\n  };\r\n\r\n  //edit fields specifiers dictionary\r\n  //this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n  // type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n  //\r\n  const editFieldsSpecifier = {};\r\n  editFieldsSpecifier[\"features\"] = {\r\n    _id: { _type: \"disable\", policy: isFeatureInUse },\r\n    items: { _type: \"disable\", policy: isFeatureInUse },\r\n  };\r\n  editFieldsSpecifier[\"experiments\"] = {\r\n    protocol: { _type: \"disable\", policy: alwaysTrue },\r\n    metadata: { name: { _type: \"disable\", policy: alwaysTrue } },\r\n  };\r\n\r\n  //dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\n  const addTypes = {};\r\n  addTypes[\"tags\"] = [\"form\", \"file\"];\r\n  addTypes[\"things\"] = [\"form\", \"file\"];\r\n  addTypes[\"features\"] = [\"form\", \"file\"];\r\n  addTypes[\"users\"] = [\"form\", \"file\"];\r\n  addTypes[\"roles\"] = [\"form\", \"file\"];\r\n  addTypes[\"devices\"] = [\"form\", \"file\"];\r\n  addTypes[\"protocols\"] = [\"form\", \"file\"];\r\n  addTypes[\"experiments\"] = [\"form\", \"file\"];\r\n  addTypes[\"measurements\"] = [\"form\"];\r\n\r\n  //dictionary for fetched types\r\n  //types are fetched on the /types route and matched with fields following this dictionary\r\n  const fetchedPageTypes = {};\r\n  fetchedPageTypes[\"users\"] = { status: \"UserStatusTypes\" };\r\n  fetchedPageTypes[\"roles\"] = {\r\n    default: {\r\n      read: \"RoleCrudTypes\",\r\n      update: \"RoleCrudTypes\",\r\n      delete: \"RoleCrudTypes\",\r\n    },\r\n    actions: {\r\n      crud: {\r\n        read: \"RoleCrudTypes\",\r\n        update: \"RoleCrudTypes\",\r\n        delete: \"RoleCrudTypes\",\r\n      },\r\n    },\r\n  };\r\n  fetchedPageTypes[\"devices\"] = {\r\n    measurementBufferPolicy: \"MeasurementBufferPolicyTypes\",\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"things\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"tag\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"things\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"scripts\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"rights\"] = {\r\n    type: \"RightTypes\",\r\n  };\r\n  fetchedPageTypes[\"features\"] = {\r\n    items: { type: \"ItemTypes\" },\r\n  };\r\n  fetchedPageTypes[\"measurements\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n  };\r\n  fetchedPageTypes[\"issues\"] = {\r\n    type: \"IssueTypes\",\r\n    status: \"IssueStatusType\",\r\n  };\r\n  fetchedPageTypes[\"protocols\"] = {\r\n    metadata: { type: \"MetadataTypes\" },\r\n    field: { type: \"TopicFieldTypes\" },\r\n  };\r\n  fetchedPageTypes[\"experiments\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n    //state: \"ExperimentStateTypes\",\r\n  };\r\n  fetchedPageTypes[\"constraints\"] = {\r\n    type1: \"ConstraintTypes\",\r\n    type2: \"ConstraintTypes\",\r\n  };\r\n\r\n  //dictionary for fetched data\r\n  //data is fetched on the according resource route and matched with fields following this dictionary\r\n  //the value of the specified field is the route to search for data. _ids of that route will be used as options\r\n  const fetchedPageData = {};\r\n  fetchedPageData[\"users\"] = { type: \"roles\" };\r\n  fetchedPageData[\"tags\"] = { tags: \"tags\" };\r\n  fetchedPageData[\"things\"] = { tags: \"tags\" };\r\n  fetchedPageData[\"devices\"] = { features: \"features\" };\r\n  fetchedPageData[\"features\"] = { tags: \"tags\" };\r\n  fetchedPageData[\"measurements\"] = {\r\n    device: \"devices\",\r\n    thing: \"things\",\r\n    tags: \"tags\",\r\n  };\r\n\r\n  const guidelines = {};\r\n  guidelines[\"protocols\"] = {\r\n    _id: \"Please, enter protocol's name.\",\r\n    description: \"Please, enter a short protocol's description.\",\r\n  };\r\n  guidelines[\"experiments\"] = {\r\n    _id: \"Please, enter experiment's name (N.B. don't use the # character in experiment's name).\",\r\n    state: \"Please, enter 0 for ongoing experiment, 1 for finished experiment.\",\r\n    description: \"Please, enter a short experiment's description.\",\r\n    manager:\r\n      \"Please, enter the experiment's company name (as a short Acronym).\",\r\n    startDate: \"Please, use yyyy/mm/dd format.\",\r\n    endDate: \"Please, use yyyy/mm/dd format.\",\r\n  };\r\n\r\n  guidelines[\"updateHistory\"] = {\r\n    step: \"Please, enter the step number.\",\r\n  };\r\n  return {\r\n    operationPages,\r\n    pages,\r\n    aliasPages,\r\n    restrictionPages,\r\n    pageActions,\r\n    viewFields,\r\n    editFields,\r\n    addFields,\r\n    editFieldsSpecifier,\r\n    addTypes,\r\n    fetchedPageTypes,\r\n    fetchedPageData,\r\n    guidelines,\r\n  };\r\n}\r\n","import EM_configuration from \"./configs/EM_config\";\r\nimport Complete_configuration from \"./configs/complete_config\";\r\n\r\n//this script manages several configuration according to the tenant name\r\n//config dictionaries are imported into variables exportedwithin this script once the login has been successful\r\n//basic configuration (i.e., the add tenant config and the base api url) is loaded in the ResetConfig function\r\n//to add a new configuration for a specific tenant, define a new file in the /configs/ folder\r\n//(considering the template of already present configurations)\r\n//then add the import in this file and edit the LoadConfig function to load the desired configuration when required\r\n\r\n//base url of APIs (define it as undefined if you want to use the url where the GUI is actually hosted)\r\n//export const base_api_url = \"https://localhost/v1\";\r\n//export const base_api_url = \"https://hi-drive.measurify.org/v1\";\r\nexport const base_api_url = undefined;\r\n\r\n//name of this dashboard, shown to users\r\nexport const website_name = \"CDB Dashboard\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\n//export const languages = [\"en\", \"it\"];\r\nexport const languages = [];\r\n\r\n//gui layout\r\n// options are \"horizontal\" or \"vertical\"\r\nexport const layout = \"vertical\";\r\n\r\n//operation pages\r\n//those are the pages of operations performed on experiments,\r\n// which are: updatehistory, downloadexperiment, removesteps\r\nexport const operationPages = [];\r\n\r\n//dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n//action is a special field that will enable actions for each row || still required, future version may have it removed\r\nexport const pages = {};\r\n\r\n//alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\nexport const aliasPages = {};\r\n\r\n//restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\nexport const restrictionPages = {};\r\n\r\n//actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\" | \"duplicate\"\r\nexport const pageActions = {};\r\n\r\n//view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\n\r\n//edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the object that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\nexport const editFields = {};\r\n\r\n//add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:NaN for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\nexport const addFields = {};\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\n\r\n//dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\nexport const addTypes = {};\r\n\r\n//dictionary for fetched types\r\n//types are fetched on the /types route and matched with fields following this dictionary\r\nexport const fetchedPageTypes = {};\r\n\r\n//dictionary for fetched data\r\n//data is fetched on the according resource route and matched with fields following this dictionary\r\n//the value of the specified field is the route to search for data. _ids of that route will be used as options\r\nexport const fetchedPageData = {};\r\n\r\nexport const guidelines = {};\r\n\r\nexport function ResetConfig() {\r\n  //clear all the fields from objects and empty arrays while keeping references\r\n  operationPages.length = 0;\r\n  Object.keys(pages).forEach((key) => delete pages[key]);\r\n  Object.keys(aliasPages).forEach((key) => delete aliasPages[key]);\r\n  Object.keys(restrictionPages).forEach((key) => delete restrictionPages[key]);\r\n  Object.keys(pageActions).forEach((key) => delete pageActions[key]);\r\n  Object.keys(viewFields).forEach((key) => delete viewFields[key]);\r\n  Object.keys(editFields).forEach((key) => delete editFields[key]);\r\n  Object.keys(addFields).forEach((key) => delete addFields[key]);\r\n  Object.keys(editFieldsSpecifier).forEach(\r\n    (key) => delete editFieldsSpecifier[key]\r\n  );\r\n  Object.keys(addTypes).forEach((key) => delete addTypes[key]);\r\n  Object.keys(fetchedPageTypes).forEach((key) => delete fetchedPageTypes[key]);\r\n  Object.keys(fetchedPageData).forEach((key) => delete fetchedPageData[key]);\r\n  Object.keys(guidelines).forEach((key) => delete guidelines[key]);\r\n\r\n  //add fields required before the login\r\n  addFields[\"tenants\"] = {\r\n    token: \"\",\r\n    _id: \"\",\r\n    organization: \"\",\r\n    address: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    admin_username: \"\",\r\n    admin_password: \"\",\r\n    //passwordhash: true,\r\n  };\r\n\r\n  addTypes[\"tenants\"] = [\"form\"];\r\n}\r\n\r\nexport function LoadConfig() {\r\n  const tenantName = localStorage.getItem(\"user-tenant\");\r\n\r\n  let conf;\r\n\r\n  //if tenant is deafult or not found in localstorage, show complete config\r\n  if (tenantName === \"\" || tenantName === null) {\r\n    conf = Complete_configuration();\r\n  } else if (tenantName.startsWith(\"EM-\")) {\r\n    conf = EM_configuration();\r\n  }\r\n  //default config is the complete one\r\n  else {\r\n    conf = Complete_configuration();\r\n  }\r\n\r\n  Object.assign(operationPages, conf.operationPages);\r\n  Object.assign(pages, conf.pages);\r\n  Object.assign(aliasPages, conf.aliasPages);\r\n  Object.assign(restrictionPages, conf.restrictionPages);\r\n  Object.assign(pageActions, conf.pageActions);\r\n  Object.assign(viewFields, conf.viewFields);\r\n  Object.assign(editFields, conf.editFields);\r\n  Object.assign(addFields, conf.addFields);\r\n  Object.assign(editFieldsSpecifier, conf.editFieldsSpecifier);\r\n\r\n  Object.assign(addTypes, conf.addTypes);\r\n  Object.assign(fetchedPageTypes, conf.fetchedPageTypes);\r\n  Object.assign(fetchedPageData, conf.fetchedPageData);\r\n  Object.assign(guidelines, conf.guidelines);\r\n\r\n  return;\r\n}\r\n","//the exported configuration for EM database\r\nimport { isFeatureInUse, alwaysTrue } from \"../services/validations\";\r\n\r\nexport default function EM_configuration() {\r\n  //operation pages\r\n  //those are the pages of operations performed on experiments,\r\n  // which are: updatehistory, downloadexperiment, removesteps\r\n  const operationPages = [\"updatehistory\", \"downloadexperiment\", \"removesteps\"];\r\n\r\n  //dictionary of pages: key is the route for the API REST, value is an array that contains the fields shown to users\r\n  //action is a special field that will enable actions for each row || still required, future version may have it removed\r\n  const pages = {};\r\n  pages[\"users\"] = [\"username\", \"type\", \"email\", \"_actions\"];\r\n  pages[\"roles\"] = [\"_id\", \"_actions\"];\r\n  pages[\"protocols\"] = [\"_id\", \"description\", \"_actions\"];\r\n  pages[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"_actions\"];\r\n\r\n  //alias dictionary: key is the page, value are object with pairs of the fields that will be renamed into page table header (\"key\" is renamed as \"value\")\r\n  const aliasPages = {};\r\n  aliasPages[\"users\"] = { _actions: \"Management\" };\r\n  aliasPages[\"roles\"] = { _actions: \"Management\" };\r\n  aliasPages[\"protocols\"] = { _actions: \"Management\" };\r\n  aliasPages[\"experiments\"] = { _actions: \"Management\" };\r\n\r\n  //restriction dictionary: key is the page, value is an array of roles allowed to access to that page\r\n  const restrictionPages = {};\r\n\r\n  restrictionPages[\"users\"] = [\"admin\"];\r\n  restrictionPages[\"roles\"] = [\"admin\"];\r\n  restrictionPages[\"protocols\"] = [\"admin\"];\r\n\r\n  //actions dictionary: key is the page, value is an array that contains actions || working actions arae \"view\" | \"edit\" | \"delete\" | \"duplicate\"\r\n  const pageActions = {};\r\n  ///pageActions[\"features\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n  pageActions[\"users\"] = [\"view\", \"delete\"];\r\n  pageActions[\"roles\"] = [\"view\", \"delete\"];\r\n  pageActions[\"protocols\"] = [\"view\", \"delete\"];\r\n  pageActions[\"experiments\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\n\r\n  //view dictionary: key is the page, value is an array that contains the fields shown to the user with \"view\" action\r\n  const viewFields = {};\r\n  viewFields[\"users\"] = [\"username\", \"type\", \"fieldmask\", \"status\"];\r\n  viewFields[\"roles\"] = [\"_id\", \"default\", \"actions\"];\r\n  viewFields[\"protocols\"] = [\"_id\", \"description\", \"metadata\", \"topics\"];\r\n  viewFields[\"experiments\"] = [\r\n    \"_id\",\r\n    \"description\",\r\n    \"state\",\r\n    \"startDate\",\r\n    \"endDate\",\r\n    \"manager\",\r\n    \"place\",\r\n    \"protocol\",\r\n    \"metadata\",\r\n    \"history\",\r\n  ];\r\n\r\n  //edit dictionary: key is the page, value is an array that contains the fields that can be edited with \"edit\" action\r\n  //fields should be specified in the same format of the object that will be represented:\r\n  // - key:\"\" for an string field,\r\n  // - key:NaN for a numeric field\r\n  // - key:[\"\"] for an array of string\r\n  // - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\n  const editFields = {};\r\n\r\n  editFields[\"experiments\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    state: NaN,\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    manager: \"\",\r\n    protocol: \"\",\r\n    place: [{ name: \"\" }],\r\n    metadata: [{ name: \"\", value: \"\" }],\r\n    tags: [\"\"],\r\n  };\r\n\r\n  //add dictionary: key is the page, value is an array that contains the fields that can will be used to post the entity\r\n  //fields should be specified in the same format of the objet that will be represented:\r\n  // - key:\"\" for an string field,\r\n  // - key:NaN for a numeric field\r\n  // - key:[\"\"] for an array of string\r\n  // - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n\r\n  const addFields = {};\r\n\r\n  addFields[\"users\"] = { username: \"\", password: \"\", email: \"\", type: \"\" };\r\n  addFields[\"roles\"] = {\r\n    _id: \"\",\r\n    default: {\r\n      create: false,\r\n      read: \"\",\r\n      update: \"\",\r\n      delete: \"\",\r\n    },\r\n    actions: [\r\n      {\r\n        entity: \"\",\r\n        crud: {\r\n          create: false,\r\n          read: \"\",\r\n          update: \"\",\r\n          delete: \"\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n  addFields[\"protocols\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    metadata: [\r\n      {\r\n        name: \"\",\r\n        description: \"\",\r\n        type: \"\",\r\n      },\r\n    ],\r\n    topics: [\r\n      {\r\n        name: \"\",\r\n        description: \"\",\r\n        fields: [{ name: \"\", description: \"\", type: \"\" }],\r\n      },\r\n    ],\r\n  };\r\n\r\n  //NOTE: experiments page works differently, so keep it empty\r\n  addFields[\"experiments\"] = {\r\n    _id: \"\",\r\n    description: \"\",\r\n    state: NaN,\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    manager: \"\",\r\n    place: [{ name: \"\" }],\r\n  };\r\n\r\n  //edit fields specifiers dictionary\r\n  //this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n  // type can be \"disable\" -> policy is applied to fields to be disabled, true when field should be disabled\r\n  //\r\n  const editFieldsSpecifier = {};\r\n\r\n  editFieldsSpecifier[\"experiments\"] = {\r\n    protocol: { _type: \"disable\", policy: alwaysTrue },\r\n    metadata: { name: { _type: \"disable\", policy: alwaysTrue } },\r\n  };\r\n\r\n  //dictionary to select the way to post entity/ies, it's an array which can contain \"form\", \"file\", or both\r\n  const addTypes = {};\r\n  addTypes[\"users\"] = [\"form\", \"file\"];\r\n  addTypes[\"roles\"] = [\"form\", \"file\"];\r\n  addTypes[\"protocols\"] = [\"form\", \"file\"];\r\n  addTypes[\"experiments\"] = [\"form\", \"file\"];\r\n\r\n  //dictionary for fetched types\r\n  //types are fetched on the /types route and matched with fields following this dictionary\r\n  const fetchedPageTypes = {};\r\n  fetchedPageTypes[\"users\"] = { status: \"UserStatusTypes\" };\r\n  fetchedPageTypes[\"roles\"] = {\r\n    default: {\r\n      read: \"RoleCrudTypes\",\r\n      update: \"RoleCrudTypes\",\r\n      delete: \"RoleCrudTypes\",\r\n    },\r\n    actions: {\r\n      crud: {\r\n        read: \"RoleCrudTypes\",\r\n        update: \"RoleCrudTypes\",\r\n        delete: \"RoleCrudTypes\",\r\n      },\r\n    },\r\n  };\r\n\r\n  fetchedPageTypes[\"protocols\"] = {\r\n    metadata: { type: \"MetadataTypes\" },\r\n    field: { type: \"TopicFieldTypes\" },\r\n  };\r\n  fetchedPageTypes[\"experiments\"] = {\r\n    visibility: \"VisibilityTypes\",\r\n    //state: \"ExperimentStateTypes\",\r\n  };\r\n\r\n  //dictionary for fetched data\r\n  //data is fetched on the according resource route and matched with fields following this dictionary\r\n  //the value of the specified field is the route to search for data. _ids of that route will be used as options\r\n  const fetchedPageData = {};\r\n  fetchedPageData[\"users\"] = { type: \"roles\" };\r\n\r\n  const guidelines = {};\r\n  guidelines[\"protocols\"] = {\r\n    _id: \"Please, enter protocol's name.\",\r\n    description: \"Please, enter a short protocol's description.\",\r\n  };\r\n  guidelines[\"experiments\"] = {\r\n    _id: \"Please, enter experiment's name (N.B. don't use the # character in experiment's name).\",\r\n    state: \"Please, enter 0 for ongoing experiment, 1 for finished experiment.\",\r\n    description: \"Please, enter a short experiment's description.\",\r\n    manager:\r\n      \"Please, enter the experiment's company name (as a short Acronym).\",\r\n    startDate: \"Please, use yyyy/mm/dd format.\",\r\n    endDate: \"Please, use yyyy/mm/dd format.\",\r\n  };\r\n\r\n  guidelines[\"updateHistory\"] = {\r\n    step: \"Please, enter the step number.\",\r\n  };\r\n\r\n  return {\r\n    operationPages,\r\n    pages,\r\n    aliasPages,\r\n    restrictionPages,\r\n    pageActions,\r\n    viewFields,\r\n    editFields,\r\n    addFields,\r\n    editFieldsSpecifier,\r\n    addTypes,\r\n    fetchedPageTypes,\r\n    fetchedPageData,\r\n    guidelines,\r\n  };\r\n}\r\n","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../configManager\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  email: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  resources: string;\r\n  tools: string;\r\n  notifications: string;\r\n  file_content: string;\r\n  preview: string;\r\n  configuration: string;\r\n\r\n  clear_all: string;\r\n  no_changes_found: string;\r\n  resource_successfully_edited: string;\r\n  resource_successfully_posted: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  email_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //profile page\r\n  profile_page_desc: string;\r\n  pass_change_confirm: string;\r\n  email_change_confirm: string;\r\n  password_rules: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n  repeat: string;\r\n  close: string;\r\n  import: string;\r\n  export: string;\r\n\r\n  //\r\n  password_recovery: string;\r\n  password_reset: string;\r\n  forgot_password_link: string;\r\n  go_login_page: string;\r\n  email_sent_successfully: string;\r\n  password_changed: string;\r\n  email_changed: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n  no_file: string;\r\n  error_imported_file: string;\r\n  duplicate_resource_error: string;\r\n  pass_not_match: string;\r\n  old_pass_empty: string;\r\n  old_pass_wrong: string;\r\n  pass_not_null: string;\r\n  missing_tenant: string;\r\n  missing_email: string;\r\n  missing_token: string;\r\n  missing_username: string;\r\n  missing_password: string;\r\n  stronger_password_required: string;\r\n  email_sent_errors: string;\r\n  password_not_changed_errors: string;\r\n  network_error: string;\r\n  empty_email_error: string;\r\n  email_not_match: string;\r\n  email_same_as_old: string;\r\n  generic_file_post_error: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","import { get_one_generic } from \"./http_operations\";\r\n\r\n//variable to store role as a simple cache\r\nlet roleCache = undefined;\r\n\r\n//get and set the role definition\r\nexport async function SetRoleDefinition() {\r\n  const role = localStorage.getItem(\"user-role\");\r\n  if (role === null || role === undefined || role === \"\") return;\r\n  try {\r\n    const response = await get_one_generic(\"roles\", role);\r\n    if (response !== undefined)\r\n      localStorage.setItem(\"role\", JSON.stringify(response.response.data));\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\n//check if an user is allowed to do a specific action\r\n//returns true if the use can perform the action, false otherwise\r\nexport function canDo(userRole, resource, actionCRUD) {\r\n  //check if cache-like variable is set\r\n  if (roleCache === undefined) {\r\n    //get role from localstorage (saved there after login)\r\n    const tmp = localStorage.getItem(\"role\");\r\n\r\n    //if the role is not defined, use the hardcoded version\r\n    if (tmp === undefined || tmp === null)\r\n      return canDoDeprecated(userRole, resource, actionCRUD);\r\n\r\n    //if role was found from the localstorage, set the cache-like variable\r\n    roleCache = JSON.parse(tmp);\r\n  }\r\n\r\n  //check if action list is not empty\r\n  if (roleCache.actions.length !== 0) {\r\n    //find the corresponding resource in action list\r\n    const entityDef = roleCache.actions.filter(\r\n      (el) => el.entity === resource\r\n    )[0];\r\n    //check if the action is actually found and if the action has a corresponding in crud object\r\n    if (entityDef !== undefined && entityDef[actionCRUD] !== undefined) {\r\n      return (\r\n        //return true when the crud action is not none nor false\r\n        entityDef[actionCRUD] !== \"none\" && entityDef[actionCRUD] !== false\r\n      );\r\n    }\r\n  }\r\n\r\n  //default case (action list is empty or action list does not contains the specified resource)\r\n  //return true when default of the action is not none nor false\r\n  return (\r\n    roleCache.default[actionCRUD] !== \"none\" &&\r\n    roleCache.default[actionCRUD] !== false\r\n  );\r\n}\r\n\r\n//hardcoded check for user rights\r\nfunction canDoDeprecated(userRole, resource, actionCRUD) {\r\n  if (actionCRUD === \"create\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  if (actionCRUD === \"read\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n  }\r\n  if (actionCRUD === \"update\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  if (actionCRUD === \"delete\") {\r\n    if (userRole === \"admin\") return true;\r\n    if (userRole === \"provider\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return true;\r\n    }\r\n    if (userRole === \"supplier\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n    if (userRole === \"analyst\") {\r\n      if (resource === \"users\") return false;\r\n      if (resource === \"protocols\") return false;\r\n      if (resource === \"experiments\") return false;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n","var _style, _g, _g2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgHiDriveLogoClaimRgb(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 2000 684.1443\",\n    style: {\n      enableBackground: \"new 0 0 2000 684.1443\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", {\n    type: \"text/css\"\n  }, \"\\r\\n\\t.st0{fill:#412DDC;}\\r\\n\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_1\"\n  })), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Ebene_1_00000087379663538115244230000007289071449435198639_\"\n  }, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M273.8813,0l-18.8949,154.1839h-78.9261L195.0387,0H80.6832L30.1849,411.0756h114.3555l22.154-180.0848 h78.8426l-22.154,180.0848h114.3555L388.2368,0H273.8813z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M432.8709,2.2803l-9.2844,75.5039h114.3535l9.2864-75.5039H432.8709z M420.0013,106.6177 l-37.3841,304.4579h114.3555l37.4656-304.4579H420.0013z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1135.3733,165.1794l-0.4077-58.5617h-97.7394l-37.3841,304.4579h114.3535l21.1777-172.0214 c1.7101-14.1721,10.3442-20.1178,29.4857-20.1178h54.7338l14.6614-118.9166 C1191.5726,100.0198,1156.9567,126.4099,1135.3733,165.1794z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1263.7954,106.5778h114.3672l-37.3903,304.5068H1226.417L1263.7954,106.5778z M1276.6091,2.2963h114.3553 l-9.2589,75.5126h-114.3672L1276.6091,2.2963z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1712.9618,106.5778l-136.6525,304.5068h-109.7969l-62.5334-304.5068h116.1033l15.3057,190.612 l61.4706-190.612H1712.9618z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1998.9126,186.153l-11.4437,93.2038h-166.2128l-6.2474,50.948 c-1.2637,10.2274,1.4762,17.8566,24.2103,17.8566c20.8091,0,26.9502-4.3933,28.1194-13.9593l3.0942-25.1787h113.3988 l-2.8462,23.1474c-6.7908,55.294-37.0714,85.4801-150.293,85.4801c-118.9495,0-136.3809-35.7368-129.0587-95.4713 l15.5654-126.6967c7.334-59.7109,33.552-95.4477,152.4896-95.4477C1982.9102,100.0351,2005.6915,130.9535,1998.9126,186.153z  M1861.1619,169.5247c-22.7578,0-27.3518,7.6056-28.6036,17.833l-5.6805,46.2712h52.8138l6.0703-49.4835 C1886.9429,174.5557,1881.9591,169.5247,1861.1619,169.5247z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M851.1967,0H701.5729l-18.8969,153.8583h-97.1688l-9.3659,76.8069h97.0872l-22.1541,180.4104h149.6238 c126.5709,0,161.5131-35.2673,169.0873-96.436l26.7972-218.2031C1004.0756,35.2678,977.7676,0,851.1967,0z M881.8218,99.5311 L855.7563,311.626c-1.7101,13.8465-11.076,22.6427-45.6105,22.6427h-35.2683l12.8697-104.9071h-56.1179l9.0397-74.2819h56.1994 l9.6125-78.2729h35.2663C876.3633,76.8069,883.5319,85.6036,881.8218,99.5311z\"\n  })), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M110.5972,539.2612l-9.4614,77.0629c-2.2112,18.0159-14.2417,30.3447-54.8392,30.3447H0l16.9143-137.7523 h46.2926C103.8044,508.9164,112.8124,521.2452,110.5972,539.2612z M61.123,525.8904H38.4976L25.7473,629.6988h22.6333 c23.1264,0,28.3363-7.2263,29.2829-14.9139l9.0835-73.9846C87.6895,533.1127,84.2533,525.8904,61.123,525.8904z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M216.8713,570.5604l-3.6191,29.4777H149.409l-2.5334,20.6368 c-0.7914,6.4507-0.0398,12.6072,18.6284,12.6072c16.8706,0,20.5652-3.1657,21.2811-9.012l1.4158-11.5056h23.4923 l-1.4556,11.8317c-1.9249,15.6815-12.7026,24.3116-46.6505,24.3116c-36.4256,0-42.3633-12.0424-40.3151-28.7181l5.6235-45.8193 c2.0482-16.6796,10.9408-28.7221,47.3704-28.7221C210.2138,545.6483,218.7962,554.8948,216.8713,570.5604z M174.345,561.278 c-18.6682,0-20.9311,6.1564-21.7225,12.6031l-1.6425,13.3867h40.3509l2.0084-16.3774 C194.0591,565.0403,191.2155,561.278,174.345,561.278z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M301.256,583.263l1.6664-13.5696c0.5727-4.6531-2.2709-8.4153-18.5449-8.4153 c-16.2701,0-19.9647,3.1617-20.5374,7.8148l-1.0579,8.6381c-2.076,16.9064,62.1331,9.0398,58.6771,37.2091l-1.376,11.2032 c-1.7817,14.4803-12.6867,22.7645-46.4636,22.7645s-42.5343-9.2307-40.7566-23.7111l1.7061-13.9037h23.4923l-1.6664,13.5736 c-0.5727,4.6531,2.2709,8.4154,19.1414,8.4154c16.8705,0,20.5652-3.1657,21.1379-7.8149l1.0579-8.6421 c2.076-16.9023-61.9581-9.0358-58.5021-37.2051l1.3761-11.2033c1.7777-14.4684,12.5117-22.7685,45.6921-22.7685 c33.1764,0,41.7588,9.2466,39.981,23.715l-1.7061,13.8997H301.256z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M353.8004,547.8873h23.6633l-12.1259,98.7814h-23.6673L353.8004,547.8873z M357.9763,513.8679h23.6673 l-2.1953,17.8648H355.785L357.9763,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M389.017,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4967-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7393,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9527,28.8096-46.8494,28.8096C395.5274,684.1443,387.0921,675.5977,389.017,659.9163z M457.3623,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6867,12.3049l-4.7685,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309C453.7432,625.1053,456.5708,619.2432,457.3623,612.7964z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M514.2576,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9497-11.3823 c25.7433,0,34.1149,10.0818,31.8798,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043c-14.1144,0-21.4123,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673 L514.2576,547.8873z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M627.2013,547.8873h23.6633l-12.1259,98.7814h-23.6673L627.2013,547.8873z M631.3771,513.8679h23.6673 l-2.1953,17.8648h-23.6633L631.3771,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M676.0392,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9496-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673L676.0392,547.8873z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M775.278,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4968-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7354,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9528,28.8096-46.8494,28.8096C781.7884,684.1443,773.3531,675.5977,775.278,659.9163z M843.6232,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6868,12.3049l-4.7684,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309S842.8318,619.2432,843.6232,612.7964z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1010.4437,612.4146h-42.073l-14.2258,34.2542h-24.5422l61.0076-137.7523h24.3115l26.0894,137.7523 h-25.2104L1010.4437,612.4146z M1007.791,595.4526l-8.8568-56.6289l-23.5201,56.6289H1007.791z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1060.4349,620.6312l8.9324-72.7438h23.6633l-8.7455,71.2445 c-1.1176,9.0795,3.7662,13.8043,17.2842,13.8043s20.8118-5.202,21.9054-14.1065l8.7097-70.9423h23.6674l-12.126,98.7814 h-19.3204l-0.338-9.1432c-6.6417,7.1984-18.028,11.3823-32.6077,11.3823 C1065.6527,648.9078,1058.1998,638.826,1060.4349,620.6312z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1199.8815,620.1062c-0.7915,6.4507,0.1432,11.1078,10.4318,11.1078h14.8383l-1.8971,15.4547h-18.9187 c-25.437,0-30.1101-10.3721-28.0579-27.0478l6.9081-56.2789h-11.1556l1.8931-15.4547h11.1595l2.3147-18.8551l24.7053-8.4671 l-3.3527,27.3222h26.6342l-1.8971,15.4547h-26.6381L1199.8815,620.1062z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1334.0784,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1330.153,545.6483,1336.1265,557.3925,1334.0784,574.0681z M1310.4707,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 c18.6681,0,20.8953-5.8582,21.6868-12.3089L1310.4707,573.5829z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1468.0803,545.6522c22.7526,0,31.2356,9.183,28.9647,27.6761l-9.004,73.3404h-23.6672l8.821-71.837 c1.1533-9.3818-3.8379-13.2037-14.9617-13.2037c-11.1237,0-18.3102,4.2991-19.4397,13.502l-8.7853,71.5388h-22.7924 l8.8171-71.837c1.1533-9.3818-3.8379-13.2037-14.9615-13.2037c-11.1238,0-18.3103,4.2991-19.4397,13.502l-8.7853,71.5388 h-23.6633l12.1299-98.7775h19.3164l0.3619,8.475c6.6178-7.1268,16.3774-10.7181,29.4937-10.7181 c14.3253,0,23.2697,3.7861,26.9364,11.5771c6.4547-7.795,16.5166-11.5771,30.6589-11.5771V545.6522z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1608.5012,574.3704l-8.8767,72.2984h-19.3164l-0.6045-6.4587 c-5.7509,5.3133-16.7155,8.6978-33.8962,8.6978c-27.175,0-33.0531-8.833-31.5419-21.1617l2.1238-17.3041 c1.5153-12.3248,9.5449-20.9868,36.7159-20.9868c14.8025,0,24.0848,2.2072,29.1636,5.8303l2.6288-21.4044 c0.7914-6.4467,0.1233-12.6031-18.1034-12.6031c-15.8326,0-19.4397,3.1617-20.1556,9.0119l-1.5829,12.8737h-23.2576 l1.6425-13.3748c1.9249-15.6814,12.4481-24.1406,45.2745-24.1406C1604.6117,545.6483,1610.5494,557.6907,1608.5012,574.3704z  M1578.3911,626.8791l1.913-15.5701c0.4932-4.0526-3.619-7.2144-21.0901-7.2144c-15.6736,0-18.7677,3.1617-19.2648,7.2144 l-1.913,15.5701c-0.4971,4.0526,1.8215,7.2183,17.495,7.2183C1573.0023,634.0974,1577.894,630.9316,1578.3911,626.8791z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1655.7285,620.1062c-0.7915,6.4507,0.1431,11.1078,10.4316,11.1078h14.8384l-1.8971,15.4547h-18.9187 c-25.4371,0-30.1101-10.3721-28.058-27.0478l6.9081-56.2789h-11.1555l1.8931-15.4547h11.1595l2.3147-18.8551l24.7052-8.4671 l-3.3525,27.3222h26.6342l-1.8971,15.4547h-26.6382L1655.7285,620.1062z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1706.8651,547.8873h23.6633l-12.126,98.7814h-23.6674L1706.8651,547.8873z M1711.041,513.8679h23.6672 l-2.1953,17.8648h-23.6633L1711.041,513.8679z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1838.8468,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1834.9214,545.6483,1840.8949,557.3925,1838.8468,574.0681z M1815.2391,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 s20.8953-5.8582,21.6868-12.3089L1815.2391,573.5829z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st0\",\n    d: \"M1866.0854,547.8873h19.3164l0.338,9.1432c6.9001-7.4131,17.4513-11.3823,32.9497-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9285,72.7399h-23.6672l8.7494-71.2405 c1.1136-9.0836-3.7701-13.8043-17.8846-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6674L1866.0854,547.8873z\"\n  })))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHiDriveLogoClaimRgb);\nexport default __webpack_public_path__ + \"static/media/Hi_Drive_Logo_Claim_rgb.e39905c1.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../configManager\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        {languages.includes(\"it\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"it\")}\r\n          >\r\n            Ita\r\n          </Button>\r\n        )}\r\n        {languages.includes(\"en\") && (\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => setSessionLanguage(\"en\")}\r\n          >\r\n            Eng\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React from \"react\";\r\nimport { ReactComponent as Logo } from \"../../resources/Hi_Drive_Logo_Claim_rgb.svg\";\r\nimport \"../authPage/authPage.scss\";\r\n\r\n//this component define the top left logo section of the authpage, password recovery page and password reset page\r\nexport default function LogoHolder() {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"logo-section\">\r\n        <Logo />\r\n      </div>\r\n      <div className=\"title-section\">Consolidated Database Dashboard</div>\r\n      <br />\r\n      <div className=\"subtitle-section\">\r\n        Powered by&nbsp;\r\n        <a target=\"_blank\" href=\"https://measurify.org/\">\r\n          Measurify\r\n        </a>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { SetRoleDefinition } from \"../../services/userRolesManagement\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../configManager\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nconst userRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nconst AuthPageComp = () => {\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const user = userRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n    if (user === \"\") {\r\n      setMsg(locale().missing_username);\r\n      return;\r\n    }\r\n    if (psw === \"\") {\r\n      setMsg(locale().missing_password);\r\n      return;\r\n    }\r\n    try {\r\n      await login(user, psw, tenant);\r\n      await SetRoleDefinition();\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <h4>{locale().login}</h4>\r\n        <Form onSubmit={submitForm}>\r\n          <Form.Group className=\"mb-3\" controlId=\"username\">\r\n            <Form.Label>{locale().username}</Form.Label>\r\n            <Form.Control\r\n              ref={userRef}\r\n              type=\"text\"\r\n              placeholder={locale().username_suggestion}\r\n            />\r\n          </Form.Group>\r\n\r\n          <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n            <Form.Label>{locale().password}</Form.Label>\r\n            <Form.Control\r\n              type=\"password\"\r\n              ref={pswRef}\r\n              placeholder={locale().password_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n            <Form.Label>{locale().tenant}</Form.Label>\r\n            <Form.Control\r\n              type=\"text\"\r\n              ref={tenantRef}\r\n              placeholder={locale().tenant_suggestion}\r\n            />\r\n          </Form.Group>\r\n          <Button variant=\"success\" type=\"submit\">\r\n            {locale().submit}\r\n          </Button>\r\n        </Form>\r\n        <div style={{ color: \"red\" }}>{msg}</div>\r\n        <br />\r\n        <div className=\"form-row row\">\r\n          <NavLink to={`/passwordrecovery`}>\r\n            {locale().forgot_password_link}\r\n          </NavLink>\r\n        </div>\r\n        <br />\r\n        <div className=\"form-row row\">\r\n          <NavLink to={`/add/tenants`}>\r\n            <Button variant=\"outline-success\" size=\"sm\">\r\n              {locale().add_tenant}\r\n              <i\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../configManager\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      {locale().oh_no}\r\n      <br />\r\n      <br />\r\n      {locale().broken_link}\r\n      <br />\r\n      <br />\r\n      <a\r\n        href=\"https://github.com/measurify/server/issues\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        title=\"https://github.com/measurify/server/issues\"\r\n      >\r\n        {locale().github_issue_page_hp}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n\r\n  //boolean are considered always default since no default value can be considered\r\n  if (typeof obj === \"boolean\") {\r\n    return true;\r\n  }\r\n\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n  return true;\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n//Capitalize the first letter of a string\r\nexport function Capitalize(s) {\r\n  return s && s[0].toUpperCase() + s.slice(1);\r\n}\r\n\r\n//format string date into yyyy/mm/dd\r\nexport function FormatDate(dt) {\r\n  return dt.slice(0, 10).replaceAll(\"-\", \"/\");\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport {\r\n  pages,\r\n  languages,\r\n  website_name,\r\n  operationPages,\r\n  restrictionPages,\r\n} from \"../../configManager\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport { Capitalize } from \"../../services/misc_functions\";\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function Navigation() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <NavLink to=\"/home\" className=\"nav-wrap\">\r\n        {website_name}\r\n      </NavLink>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <hr />\r\n          <div className=\"data-wrapper\">\r\n            <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n              {locale().welcome + \" \"}\r\n              <b>{username.current}</b>\r\n            </NavLink>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().role + \" \"}\r\n                {renderIconRole()}\r\n              </h3>\r\n            </div>\r\n            <div style={{ paddingLeft: 10 + \"px\" }}>\r\n              <h3>\r\n                {locale().tenant + \" \"}\r\n                <b>{tenant.current}</b>\r\n              </h3>\r\n            </div>\r\n            <br />\r\n            <div style={{ paddingLeft: 20 + \"px\", paddingBottom: 20 + \"px\" }}>\r\n              <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                {locale().logout}\r\n              </Button>\r\n            </div>\r\n            {languages.length > 1 && (\r\n              <React.Fragment>\r\n                <hr />\r\n                <h2>\r\n                  <LanguageSelector />\r\n                </h2>\r\n              </React.Fragment>\r\n            )}\r\n          </div>\r\n          <hr />\r\n          <div className=\"app-nav-text\">{locale().resources}</div>\r\n          <hr />\r\n          {Object.keys(pages).map((k) => {\r\n            //check if user can access to the page\r\n            if (\r\n              !canDo(role.current, k, \"read\") ||\r\n              (restrictionPages[k] !== undefined &&\r\n                !restrictionPages[k].includes(role.current))\r\n            ) {\r\n              return \"\";\r\n            }\r\n            return (\r\n              <NavLink\r\n                to={`/` + k}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={k}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                {Capitalize(k)}\r\n              </NavLink>\r\n            );\r\n          })}\r\n          <hr />\r\n          {operationPages.length !== 0 && (\r\n            <>\r\n              <div className=\"app-nav-text\">{locale().tools}</div> <hr />\r\n            </>\r\n          )}\r\n          {operationPages.includes(\"updatehistory\") &&\r\n            canDo(role.current, \"experiments\", \"update\") && (\r\n              <NavLink\r\n                to={`/updatehistory`}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                Update Experiments History\r\n              </NavLink>\r\n            )}\r\n          {operationPages.includes(\"downloadexperiment\") &&\r\n            canDo(role.current, \"experiments\", \"read\") && (\r\n              <NavLink\r\n                to={`/downloadexperiment`}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                Download Experiments Data\r\n              </NavLink>\r\n            )}\r\n          {operationPages.includes(\"removesteps\") &&\r\n            canDo(role.current, \"experiments\", \"update\") && (\r\n              <NavLink\r\n                to={`/removesteps`}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                Remove History Steps\r\n              </NavLink>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { viewFields } from \"../../configManager\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic } from \"../../services/http_operations\";\r\nimport { FormatDate } from \"../../services/misc_functions\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  //this should be optimised\r\n  viewFields[props.resType].forEach((k) => {\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).forEach((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].forEach((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n  //end of optimitazion block\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size={\"lg\"}>\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            let title = (\r\n                              <span>\r\n                                {key} <i>[{i}]</i>\r\n                              </span>\r\n                            );\r\n                            //specific titles depending on key\r\n                            if (key === \"history\" && single.step !== undefined)\r\n                              title = (\r\n                                <span>\r\n                                  Step <i>{single.step}</i>\r\n                                </span>\r\n                              );\r\n                            if (key === \"metadata\" && single.name !== undefined)\r\n                              title = (\r\n                                <span>\r\n                                  <i>{single.name}</i>\r\n                                </span>\r\n                              );\r\n                            if (key === \"topics\" && single.name !== undefined)\r\n                              title = (\r\n                                <span>\r\n                                  <i>{single.name}</i>\r\n                                </span>\r\n                              );\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>{title}</Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        if (Array.isArray(v))\r\n                                          return <td>[{v.join(\", \")}]</td>;\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    <Table responsive striped bordered hover size=\"sm\">\r\n                      <tbody>\r\n                        {React.Children.toArray(\r\n                          Object.entries(value).map((entr) => {\r\n                            return (\r\n                              <tr>\r\n                                <td>\r\n                                  <b>{entr[0]}</b>\r\n                                </td>\r\n                                <td>\r\n                                  {typeof entr[1] !== \"string\"\r\n                                    ? entr[1].toString()\r\n                                    : entr[1]}\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </tbody>\r\n                    </Table>\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : key.toLowerCase().includes(\"date\") ? (\r\n                  FormatDate(value)\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{\r\n          width: 20 + \"vw\",\r\n          minWidth:\r\n            /Mobi/i.test(window.navigator.userAgent) == true ? 250 : 400 + \"px\",\r\n        }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n          if (result) {\r\n            try {\r\n              const response = await delete_generic(props.resType, props.id);\r\n\r\n              if (response.response.status === 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink to={`/edit/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title=\"Edit\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  return <div />;\r\n}\r\n","import React from \"react\";\r\nimport { aliasPages } from \"../../configManager\";\r\n\r\nimport { Table } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\n\r\nexport default function ContentTable(props) {\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"_actions\") && props._actions === undefined)\r\n    return <div>Loading</div>;\r\n\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return <th>{aliasPages[props.resType][e]}</th>;\r\n                return <th>{e}</th>;\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"_actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props._actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props._actions.includes(\"edit\") &&\r\n                            canDo(props.userRole, props.resType, \"update\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props._actions.includes(\"duplicate\") &&\r\n                            canDo(props.userRole, props.resType, \"create\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props._actions.includes(\"delete\") &&\r\n                            canDo(props.userRole, props.resType, \"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return <td>--undefined--</td>;\r\n                      if (Array.isArray(row[e]))\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { pages, pageActions, addFields } from \"../../configManager\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport \"./page.scss\";\r\nimport { Capitalize } from \"../../services/misc_functions\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\nimport AppContext from \"../../context\";\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nlet role = React.createRef();\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [_actions, set_Actions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  const rl = localStorage.getItem(\"user-role\");\r\n\r\n  role.current = rl !== null ? rl : \"\";\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) set_Actions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    myFetched.RemoveData(page);\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {Capitalize(page)}\r\n\r\n        {addFields[page] !== undefined &&\r\n          canDo(role.current, page, \"create\") && (\r\n            <NavLink to={`/add/` + page + \"/\"} key={page + \"_add_navlink\"}>\r\n              <Button variant=\"link\" size=\"sm\" key={page + \"button\"}>\r\n                <i\r\n                  key={page + \"icon\"}\r\n                  className=\"fa fa-plus-circle\"\r\n                  aria-hidden=\"true\"\r\n                  title={\"Add\"}\r\n                  style={{\r\n                    width: 30 + \"px\",\r\n                    height: 30 + \"px\",\r\n                    marginRight: 10 + \"px\",\r\n                    opacity: 0.85,\r\n                  }}\r\n                ></i>\r\n              </Button>\r\n            </NavLink>\r\n          )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={page}\r\n          userRole={role.current}\r\n          header={header}\r\n          resources={resource}\r\n          _actions={_actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  put_generic,\r\n  login,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport \"../page/page.scss\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\n\r\nexport default function ProfilePage(params) {\r\n  //save in status informations of profile\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [emailShow, setEmailShow] = useState(\"\");\r\n  const [oldPassword, setOldPassword] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [emailConfirm, setEmailConfirm] = useState(\"\");\r\n  const [msgPass, setMsgPass] = useState(\"\");\r\n  const [msgEmail, setMsgEmail] = useState(\"\");\r\n  const [isError, setisError] = useState(false);\r\n\r\n  function renderIconRole() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"username\");\r\n    const role = localStorage.getItem(\"user-role\");\r\n    const tenant = localStorage.getItem(\"user-tenant\");\r\n    const _email = localStorage.getItem(\"user-email\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n    setEmailShow(_email !== null ? _email : \"\");\r\n  }, []);\r\n\r\n  const submitPassword = async (e) => {\r\n    e.preventDefault();\r\n    if (oldPassword === \"\") {\r\n      setMsgPass(locale().old_pass_empty);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (password !== passwordConfirm) {\r\n      setMsgPass(locale().pass_not_match);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (password === \"\" || passwordConfirm === \"\") {\r\n      setMsgPass(locale().pass_not_null);\r\n      setisError(true);\r\n      return;\r\n    }\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n\r\n      const pswDetails = passwordStrength(password);\r\n\r\n      if (pswDetails.id < requiredStr) {\r\n        setMsgPass(locale().stronger_password_required);\r\n        setisError(true);\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    try {\r\n      await login(username, oldPassword, tenant !== \"-\" ? tenant : \"\", false);\r\n    } catch (error) {\r\n      setMsgPass(locale().old_pass_wrong);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().pass_change_confirm);\r\n\r\n    setisError(false);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\r\n          \"users\",\r\n          { password: password },\r\n          username\r\n        );\r\n        setOldPassword(\"\");\r\n        setPassword(\"\");\r\n        setPasswordConfirm(\"\");\r\n        if (response.response.status === 200) {\r\n          setMsgPass(locale().password_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const submitEmail = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (email === \"\" || emailConfirm === \"\") {\r\n      setMsgEmail(locale().empty_email_error);\r\n      setisError(true);\r\n      return;\r\n    }\r\n\r\n    if (email !== emailConfirm) {\r\n      setMsgEmail(locale().email_not_match);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    if (email === emailShow) {\r\n      setMsgEmail(locale().email_same_as_old);\r\n      setisError(true);\r\n      return;\r\n    }\r\n    const result = window.confirm(locale().email_change_confirm);\r\n    if (result) {\r\n      try {\r\n        const response = await put_generic(\"users\", { email: email }, username);\r\n\r\n        if (response.response.status === 200) {\r\n          setEmail(\"\");\r\n          setEmailConfirm(\"\");\r\n          localStorage.setItem(\"user-email\", email);\r\n          setEmailShow(email);\r\n\r\n          setisError(false);\r\n          setMsgEmail(locale().email_changed);\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {locale().welcome}&nbsp;<b>{username}</b>:&nbsp;\r\n        {locale().profile_page_desc}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col xs={1}>Username:&nbsp;</Col>\r\n            <Col>\r\n              <b>{username}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().role}</Col>\r\n            <Col>\r\n              {role}&nbsp;\r\n              {renderIconRole()}\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().email + \" \"}</Col>\r\n            <Col>\r\n              <b>{emailShow}</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col xs={1}>{locale().tenant + \" \"}</Col>\r\n            <Col>\r\n              <b>{tenant}</b>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit email</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitEmail}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmail(e.target.value);\r\n                      }}\r\n                      value={email}\r\n                      placeholder={locale().enter + \" new email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"email\"\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setEmailConfirm(e.target.value);\r\n                      }}\r\n                      value={emailConfirm}\r\n                      placeholder={locale().repeat + \" new email\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font\r\n                      style={{\r\n                        marginLeft: 5 + \"px\",\r\n                        color: isError ? \"red\" : \"black\",\r\n                      }}\r\n                    >\r\n                      {msgEmail}\r\n                    </font>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n        <hr />\r\n        <Container fluid>\r\n          <Col>\r\n            <Row>\r\n              <b>Edit password</b>\r\n            </Row>\r\n          </Col>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form onSubmit={submitPassword}>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setOldPassword(e.target.value);\r\n                      }}\r\n                      value={oldPassword}\r\n                      placeholder={locale().enter + \" old password\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPassword(e.target.value);\r\n                      }}\r\n                      value={password}\r\n                      placeholder={locale().enter + \" new password\"}\r\n                    />\r\n                    <Form.Text className=\"text-muted\">\r\n                      {locale().password_rules}\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type={\"password\"}\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setPasswordConfirm(e.target.value);\r\n                      }}\r\n                      value={passwordConfirm}\r\n                      placeholder={locale().repeat + \" new password\"}\r\n                      aria-describedby=\"passwordHelpBlock\"\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n                <Row>\r\n                  <Col>\r\n                    <font\r\n                      style={{\r\n                        marginLeft: 5 + \"px\",\r\n                        color: isError ? \"red\" : \"black\",\r\n                      }}\r\n                    >\r\n                      {msgPass}\r\n                    </font>\r\n                  </Col>\r\n                </Row>{\" \"}\r\n                <Row>\r\n                  <Col>\r\n                    <Button variant=\"primary\" type=\"submit\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Form>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  Badge,\r\n  Offcanvas,\r\n  Toast,\r\n  ToastContainer,\r\n} from \"react-bootstrap\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport \"./notificationBar.scss\";\r\nimport AppContext from \"../../context\";\r\nimport { layout } from \"../../configManager\";\r\nconst oldNotifications = React.createRef();\r\n\r\nexport default function NotificationBar(props) {\r\n  const [show, setShow] = useState(false);\r\n  const [highlight, setHighlight] = useState(false);\r\n\r\n  let layoutRef = React.useRef();\r\n  const myNotifications = useContext(AppContext).notifications;\r\n  oldNotifications.current = 0;\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  /*\r\n  handleClick = () => {\r\n    this.setState({ highlight: true });\r\n    setTimeout(() => {\r\n      this.setState({ highlight: false });\r\n    }, 2000);\r\n  };*/\r\n\r\n  useEffect(() => {\r\n    if (oldNotifications.current < myNotifications.notifications.length) {\r\n      oldNotifications.current = myNotifications.notifications.length;\r\n\r\n      setHighlight(true);\r\n      setTimeout(() => {\r\n        setHighlight(false);\r\n      }, 600);\r\n    }\r\n  }, [myNotifications.notifications]);\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) === true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n  const errorNot = myNotifications.notifications.filter(\r\n    (e) => e.name === \"error\"\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className=\"notificationBar\"\r\n      style={\r\n        layoutRef.current === \"vertical\" &&\r\n        /Mobi/i.test(window.navigator.userAgent) === false\r\n          ? { height: 100 + \"vh\" }\r\n          : {}\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          handleShow();\r\n        }}\r\n        style={{\r\n          color: \"#fff\",\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        {locale().notifications}&nbsp;\r\n        <Badge\r\n          pill\r\n          bg={errorNot.length > 0 ? \"danger\" : \"success\"}\r\n          className={`element${highlight ? \" highlight\" : \"\"}`}\r\n        >\r\n          {myNotifications.notifications.length}\r\n        </Badge>\r\n        <span className=\"visually-hidden\">Unread notifications</span>\r\n      </Button>\r\n\r\n      <Offcanvas\r\n        style={{\r\n          backgroundColor: \"#123651\",\r\n          color: \"#fff\",\r\n        }}\r\n        show={show}\r\n        onHide={handleClose}\r\n        placement=\"end\"\r\n        name={\"notification_bar\"}\r\n        scroll={false}\r\n        backdrop={true}\r\n        keyboard={true}\r\n      >\r\n        <Offcanvas.Header>\r\n          <Offcanvas.Title>\r\n            {locale().notifications}\r\n            &nbsp;\r\n            <Badge pill bg={errorNot.length > 0 ? \"danger\" : \"success\"}>\r\n              {myNotifications.notifications.length}\r\n            </Badge>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <Button variant=\"outline-secondary\" onClick={() => handleClose()}>\r\n              {locale().close + \" \" + locale().notifications}\r\n            </Button>\r\n          </Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div\r\n            style={{\r\n              width: 100 + \"%\",\r\n              height: 100 + \"%\",\r\n            }}\r\n          >\r\n            {myNotifications.notifications.length !== 0 && (\r\n              <Button\r\n                variant=\"warning\"\r\n                onClick={() => myNotifications.ClearNotifications()}\r\n              >\r\n                {locale().clear_all}\r\n              </Button>\r\n            )}\r\n\r\n            <ToastContainer>\r\n              {myNotifications.notifications.map((notification, index) => {\r\n                let type;\r\n                if (notification.name === \"info\") type = \"success\";\r\n                if (notification.name === \"error\") type = \"danger\";\r\n                return (\r\n                  <Toast\r\n                    className=\"d-inline-block m-1\"\r\n                    key={\"notification_\" + index}\r\n                    bg={type}\r\n                    animation={true}\r\n                    onClose={() => {\r\n                      myNotifications.RemoveNotification(index);\r\n                    }}\r\n                  >\r\n                    <Toast.Header>\r\n                      <img\r\n                        src=\"holder.js/20x20?text=%20\"\r\n                        className=\"rounded me-2\"\r\n                        alt=\"\"\r\n                      />\r\n                      <strong className=\"me-auto\">{notification.name}</strong>\r\n                      <small>{notification.time.slice(0, 15)}</small>\r\n                    </Toast.Header>\r\n                    <Toast.Body>{notification.msg}</Toast.Body>\r\n                  </Toast>\r\n                );\r\n              })}\r\n            </ToastContainer>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button, Container, Row, Col } from \"react-bootstrap\";\r\nimport NotificationBar from \"../notificationBar/notificationBar\";\r\nimport \"./horizontalNavigationBar.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages, website_name } from \"../../configManager\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { canDo } from \"../../services/userRolesManagement\";\r\nimport { Capitalize } from \"../../services/misc_functions\";\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nlet intervalRef = React.createRef();\r\nlet loginTime = React.createRef();\r\n\r\nlet remainingSeconds = React.createRef();\r\nlet duration = React.createRef();\r\n\r\nlet role = React.createRef();\r\nlet username = React.createRef();\r\nlet tenant = React.createRef();\r\n\r\nexport default function HorizontalNavigationBar() {\r\n  const [isOpened, setIsOpened] = useState(false);\r\n\r\n  const usr = localStorage.getItem(\"username\");\r\n  const rl = localStorage.getItem(\"user-role\");\r\n  const tn = localStorage.getItem(\"user-tenant\");\r\n\r\n  username.current = usr !== null ? usr : \"\";\r\n  role.current = rl !== null ? rl : \"\";\r\n  tenant.current = tn !== null && tn !== \"\" ? tn : \"-\";\r\n\r\n  //useeffect on change time\r\n  useEffect(() => {\r\n    //convert duration time in string format to milliseconds\r\n    function DurationToMilliSeconds() {\r\n      let exp = localStorage.getItem(\"token-expiration-time\");\r\n\r\n      if (exp === null) return 300;\r\n      if (exp.endsWith(\"h\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n      } else if (exp.endsWith(\"m\")) {\r\n        return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n      } else if (exp.endsWith(\"s\")) {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n      //default case, right now the same as seconds\r\n      else {\r\n        return parseInt(exp.slice(0, -1)) * 1000;\r\n      }\r\n    }\r\n\r\n    //calculate remaining seconds and refresh token if required\r\n    function CalcEnding() {\r\n      let t0;\r\n      let remainingSec;\r\n      //if remaining time is already calculated, just decrement that number by 1\r\n      if (remainingSeconds.current !== null) {\r\n        remainingSec = remainingSeconds.current - 1;\r\n      }\r\n      //otherwise, calculate remaining seconds\r\n      else {\r\n        //check if login time is already defined, if it's null get it from localstorage or current time (refresh case)\r\n        if (loginTime.current === null) {\r\n          const retryLoginTime = localStorage.getItem(\"login-time\");\r\n          //if localstorage containst login time, use it and store it into state\r\n          if (retryLoginTime !== null) {\r\n            loginTime.current = retryLoginTime;\r\n            t0 = parseInt(retryLoginTime, 10);\r\n          }\r\n          //otherwise get it from current time and store it into state\r\n          else {\r\n            t0 = Date.now();\r\n            loginTime.current = t0;\r\n          }\r\n        }\r\n        //use logintime stored into state\r\n        else {\r\n          t0 = parseInt(loginTime.current, 10);\r\n        }\r\n        if (duration.current === null)\r\n          duration.current = DurationToMilliSeconds();\r\n        const endTime = t0 + duration.current;\r\n\r\n        remainingSec = (endTime - Date.now()) / 1000;\r\n      }\r\n\r\n      if (remainingSec < 60) {\r\n        clearInterval(intervalRef.current);\r\n        refreshToken().then(() => {\r\n          remainingSeconds.current = null;\r\n          loginTime.current = null;\r\n\r\n          intervalRef.current = setInterval(() => {\r\n            CalcEnding();\r\n          }, 1000);\r\n          return;\r\n        });\r\n      }\r\n      if (remainingSec <= 0) {\r\n        localStorage.clear();\r\n        //session expired, automatically logout\r\n        window.location.replace(\"/\");\r\n        return;\r\n      }\r\n\r\n      //const mins = Math.floor(remainingSec / 60);\r\n      //const secs = Math.floor(remainingSec % 60);\r\n\r\n      remainingSeconds.current = parseInt(remainingSec, 10);\r\n    }\r\n\r\n    intervalRef.current = setInterval(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, []);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role.current === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role.current === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role.current === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role.current === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"horizontal-nav\">\r\n      <div className=\"horizontal-nav-links\">\r\n        <div className=\"data-wrapper\">\r\n          <Container fluid>\r\n            <Row style={{ padding: 0 }}>\r\n              <Col>\r\n                <NavLink to=\"/home\" className=\"nav-wrap\">\r\n                  {website_name}\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <NavLink to={`/viewProfile/`} key={`viewProfile`}>\r\n                  {locale().welcome + \" \"}\r\n                  <b>{username.current}</b>\r\n                </NavLink>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().role + \" \"}\r\n                  {renderIconRole()}\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <div className=\"horizontal-nav-text\">\r\n                  {locale().tenant + \" \"}\r\n                  <b>{tenant.current}</b>\r\n                </div>\r\n              </Col>\r\n              <Col>\r\n                <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n                  {locale().logout}\r\n                </Button>\r\n              </Col>\r\n\r\n              {languages.length > 1 && (\r\n                <Col>\r\n                  <LanguageSelector />\r\n                </Col>\r\n              )}\r\n              <Col>\r\n                <NotificationBar />\r\n              </Col>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              <hr />\r\n              <div\r\n                style={{\r\n                  justifyContent: \"center\",\r\n                  alignItems: \"center\",\r\n                  alignSelf: \"flex-start\",\r\n                }}\r\n              >\r\n                {locale().resources}\r\n              </div>\r\n            </Row>\r\n            <Row style={{ padding: 0 }}>\r\n              {React.Children.toArray(\r\n                Object.keys(pages).map((k) => {\r\n                  //check if user can access to the page\r\n                  if (!canDo(role.current, k, \"read\")) {\r\n                    return \"\";\r\n                  }\r\n                  return (\r\n                    <Col>\r\n                      <NavLink\r\n                        to={`/` + k}\r\n                        className={(navData) =>\r\n                          navData.isActive ? \"active\" : \"\"\r\n                        }\r\n                        //activeClassName=\"active\"\r\n                        key={k}\r\n                        onClick={() => setIsOpened(false)}\r\n                      >\r\n                        {Capitalize(k)}\r\n                      </NavLink>\r\n                    </Col>\r\n                  );\r\n                })\r\n              )}\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n","import { GetToken, api_url } from \"./http_operations\";\r\nimport { instance } from \"./http_operations\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\nexport let logsManager = {\r\n  PushLog: (obj) => {},\r\n  RemoveLog: (id) => {},\r\n  ClearLogs: () => {},\r\n};\r\n\r\n//experiment name separator\r\nconst experimentFileSeparator = \"#\";\r\n\r\n//upload file containing history steps\r\nexport async function postHistoryFile(file, ovd, csvSep, arrSep, floatSep) {\r\n  const filename = file.name;\r\n  const expName = filename.split(experimentFileSeparator)[0];\r\n\r\n  const data = new FormData();\r\n  data.append(\"file\", file);\r\n  //data.append(\"file\", createReadStream(file));\r\n\r\n  let url =\r\n    ovd === false || ovd === undefined\r\n      ? api_url +\r\n        \"/experiments/\" +\r\n        expName +\r\n        \"/file?sep=\" +\r\n        csvSep +\r\n        \"&sepArray=\" +\r\n        arrSep +\r\n        \"&sepFloat=\" +\r\n        floatSep\r\n      : api_url +\r\n        \"/experiments/\" +\r\n        expName +\r\n        \"/file/?override=true&sep=\" +\r\n        csvSep +\r\n        \"&sepArray=\" +\r\n        arrSep +\r\n        \"&sepFloat=\" +\r\n        floatSep;\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: GetToken(),\r\n  };\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  let response;\r\n  try {\r\n    response = await instance.put(url, data, options);\r\n    logsManager.PushLog({\r\n      type: \"info\",\r\n      msg:\r\n        filename +\r\n        \", successfully posted: Added: [ \" +\r\n        response.data.report.success.join(\", \") +\r\n        \" ] Ignored: [\" +\r\n        response.data.report.ignored.join(\", \") +\r\n        \" ] Overridden: [\" +\r\n        response.data.report.overridden.join(\", \") +\r\n        \" ]\\n\",\r\n    });\r\n  } catch (error) {\r\n    console.log(\"error in response\");\r\n    logsManager.PushLog({\r\n      type: \"error\",\r\n      msg:\r\n        filename +\r\n        \" was not posted: \" +\r\n        error.response.data.message +\r\n        \" \" +\r\n        (error.response.data.details !== undefined\r\n          ? error.response.data.details + \"\\n\"\r\n          : \"\"),\r\n    });\r\n  }\r\n}\r\n\r\n//upload a single step\r\nexport async function postHistoryStep(expName, body, ovd) {\r\n  let url =\r\n    ovd === false || ovd === undefined\r\n      ? api_url + \"/experiments/\" + expName\r\n      : api_url + \"/experiments/\" + expName + \"?override=true\";\r\n\r\n  const step = body.history.add[0].step;\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n  let response;\r\n  try {\r\n    response = await instance.put(url, JSON.stringify(body), options);\r\n    logsManager.PushLog({\r\n      type: \"info\",\r\n      msg:\r\n        \"Step \" +\r\n        step +\r\n        \", successfully posted: Added: [ \" +\r\n        response.data.report.success.join(\", \") +\r\n        \" ] Ignored: [\" +\r\n        response.data.report.ignored.join(\", \") +\r\n        \" ] Overridden: [\" +\r\n        response.data.report.overridden.join(\", \") +\r\n        \" ]\\n\",\r\n    });\r\n  } catch (error) {\r\n    console.log(\"error in response\");\r\n    logsManager.PushLog({\r\n      type: \"error\",\r\n      msg:\r\n        \"Step \" +\r\n        step +\r\n        \" was not posted: \" +\r\n        error.response.data.message +\r\n        \" \" +\r\n        (error.response.data.details !== undefined\r\n          ? error.response.data.details + \"\\n\"\r\n          : \"\"),\r\n    });\r\n  }\r\n}\r\n\r\nexport async function downloadHistory(\r\n  experiment_id,\r\n  csvSep,\r\n  arrSep,\r\n  floatSep,\r\n  compress = undefined\r\n) {\r\n  const url =\r\n    \"experiments/\" +\r\n    experiment_id +\r\n    \"/history?sep=\" +\r\n    csvSep +\r\n    \"&sepArray=\" +\r\n    arrSep +\r\n    \"&sepFloat=\" +\r\n    floatSep;\r\n  const fileName = experiment_id + \"#history.csv\";\r\n\r\n  try {\r\n    const data = await getHistoryCSV(url);\r\n    const blob = new Blob([data]);\r\n    let file = null;\r\n    if (compress === undefined || compress === false) {\r\n      saveAs(blob, fileName);\r\n    } else {\r\n      file = new File([blob], fileName);\r\n    }\r\n\r\n    logsManager.PushLog({\r\n      type: \"info\",\r\n      msg: fileName + \" successfully downloaded.\\n\",\r\n    });\r\n    return file;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nexport async function getHistoryCSV(resource_path) {\r\n  const url = api_url + \"/\" + resource_path;\r\n  const config = {\r\n    method: \"get\",\r\n    url: url,\r\n    headers: {\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  let response;\r\n  try {\r\n    response = await instance(config);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.log(\"error in response\");\r\n    console.log(error);\r\n    logsManager.PushLog({\r\n      type: \"error\",\r\n      msg:\r\n        error.response.data.message +\r\n        \" \" +\r\n        (error.response.data.details !== undefined\r\n          ? error.response.data.details\r\n          : \"\"),\r\n    });\r\n  }\r\n}\r\n\r\nexport async function deleteHistorySteps(selected, toDelete) {\r\n  const url = api_url + \"/experiments/\" + selected;\r\n\r\n  const config = {\r\n    method: \"put\",\r\n    url: url,\r\n    headers: {\r\n      Authorization: GetToken(),\r\n    },\r\n    data: { history: { remove: toDelete } },\r\n  };\r\n\r\n  let response;\r\n  try {\r\n    response = await instance(config);\r\n    logsManager.PushLog({\r\n      type: \"info\",\r\n      msg: \"Successfully deleted steps with id: \" + toDelete.join(\" - \") + \"\\n\",\r\n    });\r\n  } catch (error) {\r\n    console.log(\"error in response\");\r\n    console.log(error);\r\n    logsManager.PushLog({\r\n      type: \"error\",\r\n      msg:\r\n        error.response.data.message +\r\n        \" \" +\r\n        (error.response.data.details !== undefined\r\n          ? error.response.data.details + \"\\n\"\r\n          : \"\\n\"),\r\n    });\r\n  }\r\n}\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength, Capitalize } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Autocomplete from \"@mui/material/Autocomplete\";\r\nimport Box from \"@mui/material/Box\";\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  fetchedPageTypes,\r\n  fetchedPageData,\r\n  guidelines,\r\n} from \"../../configManager\";\r\n\r\n/////////form width constant variables\r\n//row name\r\nconst rowNameWidth = 2;\r\n//single section\r\nconst boolWidth = 1;\r\nconst numberWidth = 4;\r\nconst stringWidth = 4;\r\nconst selectWidth = 4;\r\n\r\n//arrays section\r\nconst boolArrayWidth = 1;\r\nconst numberArrayWidth = 2;\r\nconst stringArrayWidth = 2;\r\nconst selectArrayWidth = 2;\r\nconst deleteArrayWidth = 1;\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n  /*\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    backFunction: props.backFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n    fetchedData: myFetched.data,\r\n    fetchedTypes: fetchedPageTypes,\r\n  });\r\n*/\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={numberWidth}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n            {guidelines[props.resource] !== undefined &&\r\n              guidelines[props.resource][key] !== undefined && (\r\n                <Form.Text className=\"text-muted\">\r\n                  {guidelines[props.resource][key]}\r\n                </Form.Text>\r\n              )}\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string form row component\r\n  const StringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={stringWidth}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type={\r\n                key === \"password\"\r\n                  ? \"password\"\r\n                  : key === \"email\"\r\n                  ? \"email\"\r\n                  : \"text\"\r\n              }\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n            {guidelines[props.resource] !== undefined &&\r\n              guidelines[props.resource][key] !== undefined && (\r\n                <Form.Text className=\"text-muted\">\r\n                  {guidelines[props.resource][key]}\r\n                </Form.Text>\r\n              )}\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //boolean form row component\r\n  const BooleanFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={boolWidth}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Check\r\n              id={key}\r\n              type=\"checkbox\"\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.checked, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              checked={props.values[key]}\r\n            />\r\n            {guidelines[props.resource] !== undefined &&\r\n              guidelines[props.resource][key] !== undefined && (\r\n                <Form.Text className=\"text-muted\">\r\n                  {guidelines[props.resource][key]}\r\n                </Form.Text>\r\n              )}\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //fetched data for row component\r\n  const FetchedFormRow = (key, alias) => {\r\n    let options;\r\n    if (\r\n      myFetched !== {} &&\r\n      (myFetched.data[key] !== undefined || myFetched.data[alias] !== undefined)\r\n    ) {\r\n      options = myFetched.data[alias !== undefined ? alias : key];\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={selectWidth}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Autocomplete\r\n              disableClearable\r\n              onChange={(e, newValue) => {\r\n                e.preventDefault();\r\n                if (newValue === \"\" || newValue === null)\r\n                  props.handleChangesCallback(\"\", [key]);\r\n                else props.handleChangesCallback(newValue._id, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={\r\n                props.values[key] === \"\"\r\n                  ? null\r\n                  : options.filter((e) => e._id === props.values[key])[0]\r\n              }\r\n              options={options}\r\n              getOptionLabel={(option) => {\r\n                return option.optionalLabel !== undefined\r\n                  ? option.optionalLabel\r\n                  : option._id;\r\n              }}\r\n              renderOption={(props, option) => (\r\n                <Box\r\n                  component=\"li\"\r\n                  sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                  {...props}\r\n                >\r\n                  {option.optionalLabel !== undefined\r\n                    ? option.optionalLabel\r\n                    : option._id}\r\n                </Box>\r\n              )}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label={locale().enter + \" \" + key} />\r\n              )}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={selectWidth}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={v}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return (\r\n      <>\r\n        <Row\r\n          style={{\r\n            borderBottomStyle: \"dashed\",\r\n            borderBottomWidth: 1 + \"px\",\r\n            marginBottom: 5 + \"px\",\r\n          }}\r\n        >\r\n          {React.Children.toArray(\r\n            Object.entries(props.values[key]).map((e) => {\r\n              return (\r\n                <Col\r\n                  sm={\r\n                    typeof e[1] === \"boolean\"\r\n                      ? boolArrayWidth\r\n                      : typeof e[1] === \"number\"\r\n                      ? numberArrayWidth\r\n                      : typeof e[1] === \"string\"\r\n                      ? stringArrayWidth\r\n                      : selectArrayWidth\r\n                  }\r\n                >\r\n                  <b>\r\n                    <i>{Capitalize(key) + \" \" + e[0]}</i>\r\n                  </b>\r\n                </Col>\r\n              );\r\n            })\r\n          )}\r\n        </Row>\r\n        <Row>\r\n          {React.Children.toArray(\r\n            Object.entries(props.values[key]).map(([k, value]) => {\r\n              const disabled =\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key][k] !== undefined\r\n                    ? props.disabledFields[key][k]\r\n                    : props.disabledFields[key] === true\r\n                    ? true\r\n                    : false\r\n                  : false;\r\n              //check if it's number\r\n              if (typeof value === \"number\") {\r\n                return (\r\n                  <Col sm={numberArrayWidth}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Control\r\n                        type=\"number\"\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          props.handleChangesCallback(\r\n                            parseInt(e.target.value, 10),\r\n                            [key, k]\r\n                          );\r\n                        }}\r\n                        disabled={disabled}\r\n                        value={\r\n                          isNaN(props.values[key][k])\r\n                            ? \"\"\r\n                            : props.values[key][k]\r\n                        }\r\n                        placeholder={locale().enter + \" \" + k}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                );\r\n              }\r\n              //check if it's boolean\r\n              if (typeof value === \"boolean\") {\r\n                return (\r\n                  <Col sm={boolArrayWidth}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Check\r\n                        type=\"checkbox\"\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          props.handleChangesCallback(e.target.checked, [\r\n                            key,\r\n                            k,\r\n                          ]);\r\n                        }}\r\n                        disabled={disabled}\r\n                        checked={props.values[key][k]}\r\n                        label={k}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                );\r\n              }\r\n              //check if it's an enum\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                fetchedPageTypes[props.resource][key][k] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key][k]] !==\r\n                  undefined\r\n              ) {\r\n                return (\r\n                  <Col sm={selectArrayWidth}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Select\r\n                        aria-label=\"Default select\"\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          props.handleChangesCallback(e.target.value, [key, k]);\r\n                        }}\r\n                        value={props.values[key][k]}\r\n                        disabled={disabled}\r\n                      >\r\n                        <option>{locale().select + \" \" + k}</option>\r\n                        {React.Children.toArray(\r\n                          Object.entries(\r\n                            myFetched.types[\r\n                              fetchedPageTypes[props.resource][key][k]\r\n                            ]\r\n                          ).map(([k, v]) => {\r\n                            return <option value={k}>{v}</option>;\r\n                          })\r\n                        )}\r\n                      </Form.Select>\r\n                    </Form.Group>\r\n                  </Col>\r\n                );\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return (\r\n                  <Col sm={stringArrayWidth}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        disabled={disabled}\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          props.handleChangesCallback(e.target.value, [key, k]);\r\n                        }}\r\n                        value={props.values[key][k]}\r\n                        placeholder={locale().enter + \" \" + k}\r\n                      />\r\n                      {key === \"metadata\" &&\r\n                        k === \"name\" &&\r\n                        props.values[key][k] === \"Country\" && (\r\n                          <Form.Text className=\"text-muted\">\r\n                            Please, enter 2-letter country code (i.e., It, De,\r\n                            Fr, etc...).\r\n                          </Form.Text>\r\n                        )}\r\n                    </Form.Group>\r\n                  </Col>\r\n                );\r\n              }\r\n              //the object contains an array\r\n              if (Array.isArray(value)) {\r\n                if (value.length === 0) return k + \" is empty\";\r\n\r\n                //only show range field when enum type is selected, otherwise skip it\r\n                if (k === \"range\" && props.values[key][\"type\"] !== \"enum\")\r\n                  return \"\";\r\n                return (\r\n                  <Accordion\r\n                    defaultActiveKey=\"0\"\r\n                    style={{ paddingBottom: 10 + \"px\", width: \"auto\" }}\r\n                  >\r\n                    <Accordion.Item eventKey=\"0\">\r\n                      <Accordion.Header>\r\n                        <b>{k}</b> : {nonDefaultLength(value)} items\r\n                      </Accordion.Header>\r\n                      <Accordion.Body>\r\n                        <Container fluid>\r\n                          {React.Children.toArray(\r\n                            value.map((e, idx) => {\r\n                              if (e.constructor === Object) {\r\n                                const entr = Object.entries(e);\r\n                                return (\r\n                                  <Row>\r\n                                    <Col\r\n                                      sm={deleteArrayWidth}\r\n                                      style={{\r\n                                        borderRightStyle: \"dotted\",\r\n                                        borderRightWidth: 1 + \"px\",\r\n                                      }}\r\n                                    ></Col>\r\n                                    <Col sm={deleteArrayWidth}>\r\n                                      <Button\r\n                                        disabled={\r\n                                          props.disabledFields[key] !==\r\n                                          undefined\r\n                                            ? props.disabledFields[key]\r\n                                            : false\r\n                                        }\r\n                                        variant=\"link\"\r\n                                        size=\"sm\"\r\n                                        onClick={(e) => {\r\n                                          e.preventDefault();\r\n                                          props.arrayDeleteCallback([\r\n                                            key,\r\n                                            k,\r\n                                            idx,\r\n                                          ]);\r\n                                        }}\r\n                                      >\r\n                                        <i\r\n                                          className=\"fa fa-times\"\r\n                                          aria-hidden=\"true\"\r\n                                          title=\"Remove element\"\r\n                                          style={{\r\n                                            width: 30 + \"px\",\r\n                                            height: 30 + \"px\",\r\n                                            marginRight: 10 + \"px\",\r\n                                            opacity: 0.85,\r\n                                          }}\r\n                                        ></i>\r\n                                      </Button>\r\n                                    </Col>\r\n                                    {React.Children.toArray(\r\n                                      entr.map(([_k, _v]) => {\r\n                                        return (\r\n                                          <Col>\r\n                                            <Form.Group className=\"mb-3\">\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={disabled}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, k, idx, _k]\r\n                                                  );\r\n                                                }}\r\n                                                value={_v}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + _k\r\n                                                }\r\n                                              />\r\n                                            </Form.Group>\r\n                                          </Col>\r\n                                        );\r\n                                      })\r\n                                    )}\r\n                                  </Row>\r\n                                );\r\n                              } else if (typeof e === \"number\") {\r\n                                return (\r\n                                  <Row>\r\n                                    <Col>\r\n                                      <Button\r\n                                        disabled={disabled}\r\n                                        variant=\"link\"\r\n                                        size=\"sm\"\r\n                                        onClick={(e) => {\r\n                                          e.preventDefault();\r\n\r\n                                          props.arrayDeleteCallback([\r\n                                            key,\r\n                                            k,\r\n                                            idx,\r\n                                          ]);\r\n                                        }}\r\n                                      >\r\n                                        <i\r\n                                          className=\"fa fa-times\"\r\n                                          aria-hidden=\"true\"\r\n                                          title=\"Remove element\"\r\n                                          style={{\r\n                                            width: 30 + \"px\",\r\n                                            height: 30 + \"px\",\r\n                                            marginRight: 10 + \"px\",\r\n                                            opacity: 0.85,\r\n                                          }}\r\n                                        ></i>\r\n                                      </Button>\r\n                                    </Col>\r\n                                    <Col>\r\n                                      <Form.Control\r\n                                        type=\"number\"\r\n                                        disabled={disabled}\r\n                                        onChange={(e) => {\r\n                                          e.preventDefault();\r\n                                          props.handleChangesCallback(\r\n                                            parseInt(e.target.value, 10),\r\n                                            [key, k, idx]\r\n                                          );\r\n                                        }}\r\n                                        value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                        placeholder={locale().enter + \" \" + k}\r\n                                      />\r\n                                    </Col>\r\n                                  </Row>\r\n                                );\r\n                              } else if (typeof e === \"string\") {\r\n                                return (\r\n                                  <Row>\r\n                                    <Col>\r\n                                      <Button\r\n                                        disabled={disabled}\r\n                                        variant=\"link\"\r\n                                        size=\"sm\"\r\n                                        onClick={(e) => {\r\n                                          e.preventDefault();\r\n\r\n                                          props.arrayDeleteCallback([\r\n                                            key,\r\n                                            k,\r\n                                            idx,\r\n                                          ]);\r\n                                        }}\r\n                                      >\r\n                                        <i\r\n                                          className=\"fa fa-times\"\r\n                                          aria-hidden=\"true\"\r\n                                          title=\"Remove element\"\r\n                                          style={{\r\n                                            width: 30 + \"px\",\r\n                                            height: 30 + \"px\",\r\n                                            marginRight: 10 + \"px\",\r\n                                            opacity: 0.85,\r\n                                          }}\r\n                                        ></i>\r\n                                      </Button>\r\n                                    </Col>\r\n                                    <Col>\r\n                                      <Form.Control\r\n                                        type=\"text\"\r\n                                        disabled={\r\n                                          props.disabledFields[k] !== undefined\r\n                                            ? props.disabledFields[k]\r\n                                            : false\r\n                                        }\r\n                                        onChange={(e) => {\r\n                                          e.preventDefault();\r\n                                          props.handleChangesCallback(\r\n                                            e.target.value,\r\n                                            [key, k, idx]\r\n                                          );\r\n                                        }}\r\n                                        value={e}\r\n                                        placeholder={locale().enter + \" \" + k}\r\n                                      />\r\n                                    </Col>\r\n                                  </Row>\r\n                                );\r\n                              }\r\n                              return \"Unknown data type\";\r\n                            })\r\n                          )}\r\n                        </Container>\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                );\r\n              }\r\n              return \"Unknown data type\";\r\n            })\r\n          )}\r\n        </Row>\r\n      </>\r\n    );\r\n  };\r\n\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n        key={k}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={numberArrayWidth}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k + \"[\" + index + \"]\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    let options;\r\n    if (myFetched !== {} && myFetched.data[key] !== undefined) {\r\n      options = myFetched.data[key];\r\n    }\r\n    const allowedVal = options !== undefined ? options.map((e) => e._id) : [];\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={deleteArrayWidth}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={Math.max(stringArrayWidth, selectArrayWidth)}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      {myFetched.data[key] !== undefined ? (\r\n                        <Autocomplete\r\n                          disableClearable\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          id={key}\r\n                          onBlur={(e) => {\r\n                            if (e.target.value === \"\") {\r\n                              e.preventDefault();\r\n                              props.arrayDeleteCallback([key, index]);\r\n                            }\r\n                          }}\r\n                          onInputChange={(e) => {\r\n                            if (e === null) return;\r\n                            e.preventDefault();\r\n                            if (e.target.value === 0) return;\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          onChange={(e, newValue) => {\r\n                            e.preventDefault();\r\n                            if (newValue === \"\" || newValue === null)\r\n                              props.handleChangesCallback(\"\", [key, index]);\r\n                            else\r\n                              props.handleChangesCallback(newValue._id, [\r\n                                key,\r\n                                index,\r\n                              ]);\r\n                          }}\r\n                          value={\r\n                            value === \"\"\r\n                              ? null\r\n                              : allowedVal.includes(value)\r\n                              ? options.filter((e) => e._id === value)[0]\r\n                              : value\r\n                          }\r\n                          options={options}\r\n                          getOptionLabel={(option) => {\r\n                            return option.optionalLabel !== undefined\r\n                              ? option.optionalLabel\r\n                              : option._id !== undefined\r\n                              ? option._id\r\n                              : option;\r\n                          }}\r\n                          renderOption={(props, option) => (\r\n                            <Box\r\n                              component=\"li\"\r\n                              sx={{ \"& > img\": { mr: 2, flexShrink: 0 } }}\r\n                              {...props}\r\n                            >\r\n                              {option.optionalLabel !== undefined\r\n                                ? option.optionalLabel\r\n                                : option._id}\r\n                            </Box>\r\n                          )}\r\n                          renderInput={(params) => (\r\n                            <TextField\r\n                              {...params}\r\n                              label={\r\n                                locale().enter + \" \" + key + \"[\" + index + \"]\"\r\n                              }\r\n                            />\r\n                          )}\r\n                        />\r\n                      ) : (\r\n                        <Form.Control\r\n                          type=\"text\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onBlur={(e) => {\r\n                            if (e.target.value === \"\") {\r\n                              e.preventDefault();\r\n                              props.arrayDeleteCallback([key, index]);\r\n                            }\r\n                          }}\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.value, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          value={props.values[key][index]}\r\n                          placeholder={\r\n                            locale().enter + \" \" + key + \"[\" + index + \"]\"\r\n                          }\r\n                        />\r\n                      )}\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //boolean array form row component\r\n  const ArrayBooleanFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n        key={key}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={6}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      {\r\n                        <Form.Check\r\n                          type=\"checkbox\"\r\n                          disabled={\r\n                            props.disabledFields[key] !== undefined\r\n                              ? props.disabledFields[key]\r\n                              : false\r\n                          }\r\n                          onChange={(e) => {\r\n                            e.preventDefault();\r\n                            props.handleChangesCallback(e.target.checked, [\r\n                              key,\r\n                              index,\r\n                            ]);\r\n                          }}\r\n                          checked={props.values[key][index]}\r\n                          placeholder={locale().enter + \" \" + key}\r\n                        />\r\n                      }\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n        key={key}\r\n      >\r\n        <Col\r\n          sm={rowNameWidth}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          <Row\r\n            style={{\r\n              borderBottomStyle: \"dashed\",\r\n              borderBottomWidth: 1 + \"px\",\r\n              marginBottom: 5 + \"px\",\r\n            }}\r\n          >\r\n            {props.disabledFields[key] === undefined && (\r\n              <Col sm={deleteArrayWidth}>\r\n                <b>\r\n                  <i>Remove</i>\r\n                </b>\r\n              </Col>\r\n            )}\r\n            {React.Children.toArray(\r\n              Object.entries(props.values[key][0]).map((e) => {\r\n                return (\r\n                  <Col\r\n                    sm={\r\n                      typeof e[1] === \"boolean\"\r\n                        ? boolArrayWidth\r\n                        : typeof e[1] === \"number\"\r\n                        ? numberArrayWidth\r\n                        : typeof e[1] === \"string\"\r\n                        ? stringArrayWidth\r\n                        : selectArrayWidth\r\n                    }\r\n                  >\r\n                    <b>\r\n                      <i>{Capitalize(key) + \" \" + e[0]}</i>\r\n                    </b>\r\n                  </Col>\r\n                );\r\n              })\r\n            )}\r\n          </Row>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  {props.disabledFields[key] === undefined && (\r\n                    <Col sm={deleteArrayWidth}>\r\n                      <Button\r\n                        disabled={\r\n                          props.disabledFields[key] !== undefined ? true : false\r\n                        }\r\n                        variant=\"link\"\r\n                        size=\"sm\"\r\n                        onClick={(e) => {\r\n                          e.preventDefault();\r\n                          props.arrayDeleteCallback([key, index]);\r\n                        }}\r\n                      >\r\n                        <i\r\n                          className=\"fa fa-times\"\r\n                          aria-hidden=\"true\"\r\n                          title=\"Remove element\"\r\n                          style={{\r\n                            width: 30 + \"px\",\r\n                            height: 30 + \"px\",\r\n                            marginRight: 10 + \"px\",\r\n                            opacity: 0.85,\r\n                          }}\r\n                        ></i>\r\n                      </Button>\r\n                    </Col>\r\n                  )}\r\n\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      const disabled =\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key][k] !== undefined\r\n                            ? props.disabledFields[key][k]\r\n                            : props.disabledFields[key] === true\r\n                            ? true\r\n                            : false\r\n                          : false;\r\n                      //check if it's number\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={numberArrayWidth}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                disabled={disabled}\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's boolean\r\n                      if (typeof value === \"boolean\") {\r\n                        return (\r\n                          <Col sm={boolArrayWidth}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Check\r\n                                type=\"checkbox\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    e.target.checked,\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                disabled={disabled}\r\n                                checked={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //check if it's an enum\r\n                      if (\r\n                        fetchedPageTypes[props.resource] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key] !== undefined &&\r\n                        fetchedPageTypes[props.resource][key][k] !==\r\n                          undefined &&\r\n                        myFetched.types !== undefined &&\r\n                        myFetched.types[\r\n                          fetchedPageTypes[props.resource][key][k]\r\n                        ] !== undefined\r\n                      ) {\r\n                        return (\r\n                          <Col sm={selectArrayWidth}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Select\r\n                                aria-label=\"Default select\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                disabled={disabled}\r\n                              >\r\n                                <option>{locale().select + \" \" + k}</option>\r\n                                {React.Children.toArray(\r\n                                  Object.entries(\r\n                                    myFetched.types[\r\n                                      fetchedPageTypes[props.resource][key][k]\r\n                                    ]\r\n                                  ).map(([k, v]) => {\r\n                                    return <option value={k}>{v}</option>;\r\n                                  })\r\n                                )}\r\n                              </Form.Select>\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={stringArrayWidth}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={disabled}\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                              {key === \"metadata\" &&\r\n                                k === \"name\" &&\r\n                                props.values[key][index][k] === \"Country\" && (\r\n                                  <Form.Text className=\"text-muted\">\r\n                                    Please, enter 2-letter country code (i.e.,\r\n                                    It, De, Fr, etc...).\r\n                                  </Form.Text>\r\n                                )}\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n\r\n                        //only show range field when enum type is selected, otherwise skip it\r\n                        if (\r\n                          k === \"range\" &&\r\n                          props.values[key][index][\"type\"] !== \"enum\"\r\n                        )\r\n                          return \"\";\r\n                        return (\r\n                          <Accordion\r\n                            defaultActiveKey=\"0\"\r\n                            style={{\r\n                              paddingBottom: 10 + \"px\",\r\n                              width: \"auto\",\r\n                            }}\r\n                          >\r\n                            <Accordion.Item eventKey=\"0\">\r\n                              <Accordion.Header>\r\n                                <b>{k}</b> : {nonDefaultLength(value)} items\r\n                              </Accordion.Header>\r\n                              <Accordion.Body>\r\n                                <Container fluid>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={deleteArrayWidth}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={deleteArrayWidth}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={disabled}\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col>\r\n                                              <Button\r\n                                                disabled={disabled}\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={disabled}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col>\r\n                                              <Button\r\n                                                disabled={disabled}\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={e}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      }\r\n                                      return \"Unknown data type\";\r\n                                    })\r\n                                  )}\r\n                                </Container>\r\n                              </Accordion.Body>\r\n                            </Accordion.Item>\r\n                          </Accordion>\r\n                        );\r\n                      }\r\n                      if (value.constructor === Object) {\r\n                        return (\r\n                          <Accordion\r\n                            defaultActiveKey=\"0\"\r\n                            style={{\r\n                              paddingBottom: 10 + \"px\",\r\n                              width: \"auto\",\r\n                            }}\r\n                          >\r\n                            <Accordion.Item eventKey=\"0\">\r\n                              <Accordion.Header>\r\n                                <b>{k}</b>\r\n                              </Accordion.Header>\r\n                              <Accordion.Body>\r\n                                <Container fluid>\r\n                                  <Row>\r\n                                    {React.Children.toArray(\r\n                                      Object.entries(value).map((entr) => {\r\n                                        if (typeof entr[1] === \"number\") {\r\n                                          return (\r\n                                            <Col>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={disabled}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, entr[0]],\r\n                                                    true\r\n                                                  );\r\n                                                }}\r\n                                                value={\r\n                                                  isNaN(entr[1]) ? \"\" : entr[1]\r\n                                                } //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + entr[0]\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          );\r\n                                        }\r\n                                        //check if it's boolean\r\n                                        if (typeof entr[1] === \"boolean\") {\r\n                                          return (\r\n                                            <Col>\r\n                                              <Form.Group className=\"mb-3\">\r\n                                                <Form.Check\r\n                                                  type=\"checkbox\"\r\n                                                  onChange={(e) => {\r\n                                                    e.preventDefault();\r\n                                                    props.handleChangesCallback(\r\n                                                      e.target.checked,\r\n                                                      [key, index, k, entr[0]],\r\n                                                      true\r\n                                                    );\r\n                                                  }}\r\n                                                  disabled={disabled}\r\n                                                  checked={entr[1]}\r\n                                                  label={entr[0]}\r\n                                                />\r\n                                              </Form.Group>\r\n                                            </Col>\r\n                                          );\r\n                                        }\r\n                                        //check if it's an enum\r\n\r\n                                        if (\r\n                                          fetchedPageTypes[props.resource] !==\r\n                                            undefined &&\r\n                                          fetchedPageTypes[props.resource][\r\n                                            key\r\n                                          ] !== undefined &&\r\n                                          fetchedPageTypes[props.resource][key][\r\n                                            k\r\n                                          ] !== undefined &&\r\n                                          fetchedPageTypes[props.resource][key][\r\n                                            k\r\n                                          ][entr[0]] !== undefined &&\r\n                                          myFetched.types !== undefined &&\r\n                                          fetchedPageTypes[props.resource][key][\r\n                                            k\r\n                                          ][entr[0]] !== undefined\r\n                                        ) {\r\n                                          return (\r\n                                            <Col>\r\n                                              <Form.Group className=\"mb-3\">\r\n                                                <Form.Select\r\n                                                  aria-label=\"Default select\"\r\n                                                  onChange={(e) => {\r\n                                                    e.preventDefault();\r\n                                                    props.handleChangesCallback(\r\n                                                      e.target.value,\r\n                                                      [key, index, k, entr[0]],\r\n                                                      true\r\n                                                    );\r\n                                                  }}\r\n                                                  value={entr[1]}\r\n                                                  disabled={disabled}\r\n                                                >\r\n                                                  <option>\r\n                                                    {locale().select +\r\n                                                      \" \" +\r\n                                                      entr[0]}\r\n                                                  </option>\r\n                                                  {React.Children.toArray(\r\n                                                    Object.entries(\r\n                                                      myFetched.types[\r\n                                                        fetchedPageTypes[\r\n                                                          props.resource\r\n                                                        ][key][k][entr[0]]\r\n                                                      ]\r\n                                                    ).map(([k, v]) => {\r\n                                                      return (\r\n                                                        <option value={k}>\r\n                                                          {v}\r\n                                                        </option>\r\n                                                      );\r\n                                                    })\r\n                                                  )}\r\n                                                </Form.Select>\r\n                                              </Form.Group>\r\n                                            </Col>\r\n                                          );\r\n                                        }\r\n                                        if (typeof entr[1] === \"string\") {\r\n                                          return (\r\n                                            <Col>\r\n                                              <Form.Control\r\n                                                type=\"text\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    e.target.value,\r\n                                                    [key, index, k, entr[0]],\r\n                                                    true\r\n                                                  );\r\n                                                }}\r\n                                                value={entr[1]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + entr[0]\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          );\r\n                                        }\r\n                                        return \"Unknown data type\";\r\n                                      })\r\n                                    )}\r\n                                  </Row>\r\n                                </Container>\r\n                              </Accordion.Body>\r\n                            </Accordion.Item>\r\n                          </Accordion>\r\n                        );\r\n                      }\r\n                      return \"Unknown data type\";\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid key={\"form\"}>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //enum type defined by config\r\n              //check if all the required resources are defined\r\n\r\n              if (\r\n                fetchedPageTypes[props.resource] !== undefined &&\r\n                fetchedPageTypes[props.resource][key] !== undefined &&\r\n                myFetched.types !== undefined &&\r\n                myFetched.types[fetchedPageTypes[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return SelectFormRow(\r\n                  key,\r\n                  myFetched.types[fetchedPageTypes[props.resource][key]]\r\n                );\r\n              }\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"boolean\") {\r\n                  return ArrayBooleanFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n              //input field for fetched data\r\n\r\n              if (\r\n                fetchedPageData[props.resource] !== undefined &&\r\n                fetchedPageData[props.resource][key] !== undefined &&\r\n                myFetched.data[fetchedPageData[props.resource][key]] !==\r\n                  undefined\r\n              ) {\r\n                return FetchedFormRow(\r\n                  key,\r\n                  fetchedPageData[props.resource][key]\r\n                );\r\n              }\r\n              //input field is a boolean\r\n              if (typeof value === \"boolean\") {\r\n                return BooleanFormRow(key);\r\n              }\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow(key);\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\">\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      {props.backFunction !== undefined && (\r\n        <Button variant=\"secondary\" onClick={props.backFunction}>\r\n          {locale().cancel}\r\n        </Button>\r\n      )}\r\n    </Form>\r\n  );\r\n};\r\n","import {\r\n  isDefault,\r\n  removeDefaultElements,\r\n  nonDefaultLength,\r\n} from \"./misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n// this function sort keys of an object and of its array-of-objects values (recursively) based on a template\r\nexport function sortObject(obj, template) {\r\n  //keys of the object to sort\r\n  let keys = Object.keys(obj);\r\n  //sorted array of keys\r\n  const sortingKeys = Object.keys(template);\r\n  //remove uncommon keys between the two arrays from the key array\r\n  keys = keys.filter((ob) => {\r\n    return sortingKeys.indexOf(ob) !== -1;\r\n  });\r\n  //sort the keys in the key array\r\n  keys.sort((a, b) => sortingKeys.indexOf(a) - sortingKeys.indexOf(b));\r\n\r\n  const sorted = keys.reduce((accumulator, key) => {\r\n    if (\r\n      Array.isArray(obj[key]) &&\r\n      obj[key].length !== 0 &&\r\n      obj[key][0].constructor === Object\r\n    ) {\r\n      const tmp = obj[key].map((el) => {\r\n        return sortObject(el, template[key][0]);\r\n      });\r\n\r\n      accumulator[key] = tmp;\r\n    } else accumulator[key] = obj[key];\r\n\r\n    return accumulator;\r\n  }, {});\r\n  return sorted;\r\n}\r\n\r\n//this function will check of each field of the object if it's an array, and then, only for array values, check if empty elements are contained into that array\r\nexport function maintainEmptyElements(original, fieldSpecifier, resource) {\r\n  const keys = Object.keys(original);\r\n  let copy = cloneDeep(original);\r\n  for (let i = 0; i < keys.length; i++) {\r\n    if (Array.isArray(copy[keys[i]])) {\r\n      copy = maintainEmptyElement(copy, [keys[i]], fieldSpecifier, resource);\r\n    }\r\n  }\r\n  return copy;\r\n}\r\n\r\n//this function check if an array contains a default element,\r\n//a default element is added when required\r\n//this causes issue for array of boolean, since boolean has no default value is difficult to know when to add an item\r\n\r\nexport function maintainEmptyElement(\r\n  original,\r\n  path,\r\n  fieldSpecifier,\r\n  resource,\r\n  item = undefined\r\n) {\r\n  let tmp = cloneDeep(original);\r\n  let tmpPtr = tmp;\r\n  let fieldSpecifierCpy =\r\n    fieldSpecifier !== undefined\r\n      ? cloneDeep(fieldSpecifier[resource])\r\n      : undefined;\r\n  const tmpPath = [...path];\r\n\r\n  //get the appropriate array to validate\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    if (path[i] === undefined) break;\r\n    tmpPtr = tmpPtr[path[i]];\r\n  }\r\n  const nonDefLen = nonDefaultLength(tmpPtr);\r\n  const len = tmpPtr.length;\r\n\r\n  //if at least one element is non default, can return\r\n  if (nonDefLen < len) {\r\n    return tmp;\r\n  }\r\n  //otherwise, need to get the appropriate item to append to array\r\n\r\n  let element;\r\n\r\n  //get the appropriate item, travelling the fieldSpecified (addFields or editFields) according to path\r\n  //fieldSpecifierCpy becomes undefined when the item cannot be found there\r\n  for (let i = 0; i < tmpPath.length; i++) {\r\n    //if path or fieldSpecifier becomes undefined, break\r\n    if (path[i] === undefined) break;\r\n    if (fieldSpecifierCpy === undefined) break;\r\n    //indexes of path should be treated as 0\r\n    if (typeof path[i] === \"number\") fieldSpecifierCpy = fieldSpecifierCpy[0];\r\n    else fieldSpecifierCpy = fieldSpecifierCpy[path[i]];\r\n  }\r\n\r\n  //item found in fieldSpecifierCpy exist and it's not an array return\r\n  if (fieldSpecifierCpy !== undefined && !Array.isArray(fieldSpecifierCpy))\r\n    return tmp;\r\n\r\n  //add item according to addfield/editfield dictionary\r\n  if (fieldSpecifierCpy !== undefined) {\r\n    if (fieldSpecifierCpy[0].constructor === Object) {\r\n      element = {\r\n        ...fieldSpecifierCpy[0],\r\n      };\r\n    } else {\r\n      element = \"\";\r\n    }\r\n  }\r\n\r\n  //add item according to param item\r\n  if (item !== undefined && fieldSpecifierCpy === undefined) {\r\n    if (item.constructor === Object) {\r\n      element = { ...item };\r\n    } else {\r\n      element = item;\r\n    }\r\n  }\r\n  if (element !== undefined) tmpPtr.push(element);\r\n  return tmp;\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n  FormatDate,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport {\r\n  editFields,\r\n  editFieldsSpecifier,\r\n  fetchedPageData,\r\n} from \"../../configManager\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport locale from \"../../common/locale\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  //const [mounted, setMounted] = useState(false);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchRequiredData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, {\r\n        limit: 100,\r\n        select: [\"_id\", \"username\", \"name\"],\r\n      });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => {\r\n          return {\r\n            _id: e._id,\r\n            optionalLabel:\r\n              e.name !== undefined\r\n                ? e.name\r\n                : e.username !== undefined\r\n                ? e.username\r\n                : undefined,\r\n          };\r\n        }),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) =>\r\n        fetchRequiredData(e)\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      Object.entries(tmpValues).forEach((e) => {\r\n        if (e[0].toLowerCase().includes(\"date\")) {\r\n          tmpValues[e[0]] = FormatDate(e[1]);\r\n        }\r\n      });\r\n\r\n      //this function evaluate if a field should be disabled or not\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          //check if key is in values\r\n          if (tmpValues[key] === undefined) continue;\r\n          //check if value contains the type\r\n          if (value._type !== undefined && value._type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n          //check if the disable specification is inside the nested object\r\n          else {\r\n            const entr = Object.entries(value);\r\n            for (let j = 0; j < entr.length; j++) {\r\n              console.log({\r\n                value,\r\n                k: entr[j][0],\r\n                v: entr[j][1],\r\n                val: tmpValues[key],\r\n              });\r\n              //check if the subkey is in values, in case of array i trust the configuration\r\n              if (\r\n                Array.isArray(tmpValues[key]) === false &&\r\n                tmpValues[key][entr[j][0]] === undefined\r\n              )\r\n                continue;\r\n              if (\r\n                entr[j][1]._type !== undefined &&\r\n                entr[j][1]._type === \"disable\"\r\n              ) {\r\n                const resp = await entr[j][1].policy(id);\r\n\r\n                disabled[key] = { [entr[j][0]]: resp };\r\n              }\r\n            }\r\n          }\r\n        }\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(\r\n              tmpValues,\r\n              [_key],\r\n              editFields,\r\n              resource\r\n            );\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        editFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      editFields,\r\n      resource,\r\n      item\r\n    );\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //no changes found, so do not send request\r\n    if (Object.keys(toSend).length === 0) {\r\n      setMsg(locale().no_changes_found);\r\n      return;\r\n    }\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      window.alert(locale().resource_successfully_edited);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n          backFunction={back}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { Button, Form, Accordion, Table } from \"react-bootstrap\";\r\n\r\nexport const FormFile = (props) => {\r\n  //return \"loading\" if something is undefined\r\n  /*console.log({\r\n    submit: props.submitFunction,\r\n    back: props.backFunction,\r\n    setContHead: props.setContentHeader,\r\n    setContBdy: props.setContentBody,\r\n    setContPln: props.setContentPlain,\r\n    setFl: props.setFile,\r\n    contBod: props.contentBody,\r\n    contPln: props.contentPlain,\r\n    contHdr: props.contentHeader,\r\n  });*/\r\n  if (\r\n    props.submitFunction === undefined ||\r\n    props.backFunction === undefined ||\r\n    props.setContentHeader === undefined ||\r\n    props.setContentPlain === undefined ||\r\n    props.setContentBody === undefined ||\r\n    props.setFile === undefined ||\r\n    props.contentBody === undefined ||\r\n    props.contentPlain === undefined ||\r\n    props.contentHeader === undefined ||\r\n    props.setMsg === undefined ||\r\n    props.setIsError === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Form.Label>\r\n        <b>{locale().select_file}</b>\r\n      </Form.Label>\r\n      <Form.Control\r\n        className=\"mb-3\"\r\n        type=\"file\"\r\n        accept=\".csv, .json\"\r\n        label=\"File\"\r\n        onChange={(e) => {\r\n          const file = e.target.files[0];\r\n          props.setFile(file);\r\n          const fileReader = new FileReader();\r\n\r\n          fileReader.onloadend = () => {\r\n            const content = fileReader.result;\r\n            if (file.name.endsWith(\".csv\")) {\r\n              const regex = new RegExp(\"\\\\r\", \"g\");\r\n              let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n              props.setContentHeader(splitted[0]);\r\n              splitted.splice(0, 1);\r\n              props.setContentBody(splitted);\r\n              props.setContentPlain(null);\r\n            }\r\n            if (file.name.endsWith(\".json\")) {\r\n              try {\r\n                const contentPlain = JSON.stringify(\r\n                  JSON.parse(content),\r\n                  null,\r\n                  4\r\n                );\r\n                props.setContentHeader(null);\r\n                props.setContentBody(null);\r\n                props.setContentPlain(contentPlain);\r\n                props.setMsg(\"\");\r\n                props.setIsError(false);\r\n              } catch (error) {\r\n                props.setMsg(\r\n                  \"The selected file cannot be parsed as JSON because it contains errors. Please select another file or fix it before uploading\"\r\n                );\r\n                props.setIsError(true);\r\n              }\r\n            }\r\n          };\r\n          fileReader.readAsText(file);\r\n        }}\r\n      />\r\n      {props.contentBody !== null && props.contentHeader !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <Table responsive striped bordered hover>\r\n                <thead>\r\n                  <tr>\r\n                    {React.Children.toArray(\r\n                      props.contentHeader.split(\",\").map((h) => {\r\n                        return <th>{h}</th>;\r\n                      })\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {React.Children.toArray(\r\n                    props.contentBody.map((e) => {\r\n                      return (\r\n                        <tr>\r\n                          {React.Children.toArray(\r\n                            e.split(\",\").map((h) => {\r\n                              return <td>{h}</td>;\r\n                            })\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </Table>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      {props.contentPlain !== null && (\r\n        <Accordion>\r\n          <Accordion.Item eventKey=\"0\">\r\n            <Accordion.Header>{locale().file_content}</Accordion.Header>\r\n            <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n              <textarea\r\n                style={{ resize: \"both\" }}\r\n                cols=\"120\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={props.contentPlain}\r\n              ></textarea>\r\n            </Accordion.Body>\r\n          </Accordion.Item>\r\n        </Accordion>\r\n      )}\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        {locale().submit}\r\n      </Button>\r\n      &nbsp;&nbsp;&nbsp;\r\n      <Button variant=\"secondary\" key={\"cancel\"} onClick={props.backFunction}>\r\n        {locale().cancel}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../configManager\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageTypes, fetchedPageData } from \"../../configManager\";\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  let myFetched;\r\n  if (context !== undefined) myFetched = context.fetched;\r\n  else myFetched = {};\r\n\r\n  useEffect(() => {\r\n    /////////////FETCH REQUIRED RESOURCES\r\n    const fetchRequiredData = async (res) => {\r\n      if (myFetched.data[res] !== undefined) return;\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(res, {\r\n          limit: 100,\r\n          select: [\"_id\", \"username\", \"name\"],\r\n        });\r\n        myFetched.UpdateData(\r\n          response.docs.map((e) => {\r\n            return {\r\n              _id: e._id,\r\n              optionalLabel:\r\n                e.name !== undefined\r\n                  ? e.name\r\n                  : e.username !== undefined\r\n                  ? e.username\r\n                  : undefined,\r\n            };\r\n          }),\r\n          res\r\n        );\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) =>\r\n        fetchRequiredData(e)\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchSingle = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchSingle(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path, ignoreAdd = false) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n\r\n    if (ignoreAdd === false && lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource\r\n      );\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i), addFields, resource);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {\r\n    setPostType(eventKey);\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      setIsError(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      console.log({\r\n        message: res.data.message,\r\n        details: res.data.details,\r\n      });\r\n\r\n      let det = \"\";\r\n      if (res.data.details.includes(\"duplicate key\")) {\r\n        det =\r\n          locale().duplicate_resource_error +\r\n          \" \" +\r\n          res.data.details.slice(res.data.details.indexOf(\"{\") + 1, -1);\r\n      }\r\n      //default case: show details from error message\r\n      else {\r\n        det = res.data.details;\r\n      }\r\n      //add details\r\n      setMsg(res.data.message + \" : \" + det);\r\n      setIsError(true);\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (resource !== \"tenants\") myFetched.RemoveData(resource);\r\n      window.alert(locale().resource_successfully_posted);\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file === undefined) {\r\n      setMsg(locale().no_file);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        console.log({\r\n          message: error.error.response.data.message,\r\n          details: error.error.response.data.details,\r\n        });\r\n\r\n        let det = \"\";\r\n        if (error.error.response.data.details.includes(\"duplicate key\")) {\r\n          det =\r\n            locale().duplicate_resource_error +\r\n            \" \" +\r\n            error.error.response.data.details.slice(\r\n              error.error.response.data.details.indexOf(\"{\") + 1,\r\n              -1\r\n            );\r\n        }\r\n        //default case: show details from error message\r\n        else {\r\n          det = error.error.response.data.details;\r\n        }\r\n        //add details\r\n        setMsg(error.error.response.data.message + \" : \" + det);\r\n        setIsError(true);\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        console.log({\r\n          message: error.error.response.data.message,\r\n          details: error.error.response.data.details,\r\n        });\r\n\r\n        let det = \"\";\r\n        if (\r\n          error.error.response.data.details !== undefined &&\r\n          error.error.response.data.details.includes(\"duplicate key\")\r\n        ) {\r\n          det =\r\n            locale().duplicate_resource_error +\r\n            \" \" +\r\n            error.error.response.data.details.slice(\r\n              error.error.response.data.details.indexOf(\"{\") + 1,\r\n              -1\r\n            );\r\n        } else if (\r\n          error.error.response.data.details === undefined &&\r\n          error.error.response.data.message.includes(\"Unexpected token\")\r\n        ) {\r\n          det = locale().generic_file_post_error;\r\n        }\r\n        //default case: show details from error message\r\n        else {\r\n          det = error.error.response.data.details;\r\n        }\r\n        //add details\r\n        setMsg(error.error.response.data.message + \" : \" + det);\r\n        setIsError(true);\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      window.alert(locale().resource_successfully_posted);\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n              <br />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n                setMsg={setMsg}\r\n                setIsError={setIsError}\r\n              />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Form,\r\n  Nav,\r\n  Accordion,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nexport default function ImportExportValues(props) {\r\n  const [content, setContent] = useState(null);\r\n  return (\r\n    <Accordion size={\"lg\"}>\r\n      <Accordion.Item eventKey={0}>\r\n        <Accordion.Header>\r\n          {locale().import +\r\n            \" - \" +\r\n            locale().export +\r\n            \" \" +\r\n            locale().configuration}\r\n        </Accordion.Header>\r\n        <Accordion.Body>\r\n          <Container>\r\n            <Row>\r\n              <Col sm={6}>\r\n                <Form onSubmit={() => props.importValues(content)}>\r\n                  <Row>\r\n                    <b>Import configuration from json file</b>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>\r\n                      <Form.Label>\r\n                        <b>{locale().select_file}</b>\r\n                      </Form.Label>\r\n                      <Form.Control\r\n                        className=\"mb-3\"\r\n                        type=\"file\"\r\n                        accept=\".json\"\r\n                        label=\"File\"\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          const file = e.target.files[0];\r\n                          //props.setFile(file);\r\n                          const fileReader = new FileReader();\r\n\r\n                          fileReader.onloadend = () => {\r\n                            const _content = fileReader.result;\r\n                            setContent(_content);\r\n                          };\r\n                          fileReader.readAsText(file);\r\n                        }}\r\n                      />\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>\r\n                      <font\r\n                        style={{\r\n                          marginLeft: 5 + \"px\",\r\n                          color: \"red\",\r\n                        }}\r\n                      >\r\n                        {props.importMsg}\r\n                      </font>\r\n                    </Col>\r\n                  </Row>\r\n                  <Row>\r\n                    <Col>\r\n                      <Button type=\"submit\" variant=\"success\">\r\n                        Load\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </Form>\r\n              </Col>\r\n              <Col sm={6}>\r\n                <Row>\r\n                  <b>Download configuration as json file</b>\r\n                </Row>\r\n                <Row style={{ paddingTop: 22 + \"px\" }}>\r\n                  <Col>\r\n                    <Button\r\n                      variant=\"primary\"\r\n                      onClick={() => {\r\n                        const blob = new Blob([\r\n                          JSON.stringify(props.values, null, 4),\r\n                        ]);\r\n                        saveAs(\r\n                          blob,\r\n                          (props.values[\"_id\"] !== \"\"\r\n                            ? props.values[\"_id\"]\r\n                            : \"Experiment\") + \".json\"\r\n                        );\r\n                      }}\r\n                    >\r\n                      Download\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Accordion.Body>\r\n      </Accordion.Item>\r\n    </Accordion>\r\n  );\r\n}\r\n\r\n/*\r\n\r\n                  {props.contentBody !== null && props.contentHeader !== null && (\r\n                    <Accordion>\r\n                      <Accordion.Item eventKey=\"0\">\r\n                        <Accordion.Header>\r\n                          {locale().file_content}\r\n                        </Accordion.Header>\r\n                        <Accordion.Body\r\n                          style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                        >\r\n                          <Table responsive striped bordered hover>\r\n                            <thead>\r\n                              <tr>\r\n                                {React.Children.toArray(\r\n                                  props.contentHeader.split(\",\").map((h) => {\r\n                                    return <th>{h}</th>;\r\n                                  })\r\n                                )}\r\n                              </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                              {React.Children.toArray(\r\n                                props.contentBody.map((e) => {\r\n                                  return (\r\n                                    <tr>\r\n                                      {React.Children.toArray(\r\n                                        e.split(\",\").map((h) => {\r\n                                          return <td>{h}</td>;\r\n                                        })\r\n                                      )}\r\n                                    </tr>\r\n                                  );\r\n                                })\r\n                              )}\r\n                            </tbody>\r\n                          </Table>\r\n                        </Accordion.Body>\r\n                      </Accordion.Item>\r\n                    </Accordion>\r\n                  )}\r\n                  {props.contentPlain !== null && (\r\n                    <Accordion>\r\n                      <Accordion.Item eventKey=\"0\">\r\n                        <Accordion.Header>\r\n                          {locale().file_content}\r\n                        </Accordion.Header>\r\n                        <Accordion.Body\r\n                          style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                        >\r\n                          <textarea\r\n                            //style={{ resize: \"both;\" }}\r\n                            cols=\"120\"\r\n                            rows=\"10\"\r\n                            readOnly\r\n                          >\r\n                            {props.contentPlain}\r\n                          </textarea>\r\n                        </Accordion.Body>\r\n                      </Accordion.Item>\r\n                    </Accordion>\r\n                  )}\r\n\r\n\r\n*/\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../configManager\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Form, Nav } from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\nimport ImportExportValues from \"../importExportValues/importExportValues\";\r\nimport { FormatDate } from \"../../services/misc_functions\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddExperimentPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"experiments\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n  //import message for user\r\n  const [importMsg, setImportMsg] = useState(\"\");\r\n  //values\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({\r\n    metadata: { name: true },\r\n  });\r\n\r\n  //protocols\r\n  const [protocols, setProtocols] = useState();\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  //useeffect to get protocols\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      const response = await get_generic(\"protocols\", qs);\r\n\r\n      setProtocols(response.docs.map((e) => e._id));\r\n    };\r\n    const qs = { limit: 100, select: [\"_id\", \"metadata\", \"topics\"] };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //useeffect to get resource if required (for the \"duplicate\" actions)\r\n  useEffect(() => {\r\n    const fetchDataDuplicate = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      //add metadata and protocol fields\r\n      tmpValues[\"protocol\"] = \"\";\r\n      tmpValues[\"metadata\"] = [{ name: \"\", value: \"\" }];\r\n\r\n      //disable protocol fields\r\n      const tmpDisabled = cloneDeep(disabledFields);\r\n      tmpDisabled[\"protocol\"] = true;\r\n\r\n      setDisabledFields(tmpDisabled);\r\n\r\n      tmpValues = sortObject(data, tmpValues);\r\n\r\n      Object.entries(tmpValues).forEach((e) => {\r\n        if (e[0].toLowerCase().includes(\"date\")) {\r\n          tmpValues[e[0]] = FormatDate(e[1]);\r\n        }\r\n      });\r\n\r\n      //add \"_copy\" to id to avoid duplicate key error\r\n\r\n      tmpValues[\"_id\"] = tmpValues[\"_id\"] + \"_copy\";\r\n\r\n      tmpValues = maintainEmptyElements(tmpValues, addFields, resource);\r\n      setValues(tmpValues);\r\n    };\r\n\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = {\r\n      filter: JSON.stringify(fst),\r\n      select: [\"_id\", \"metadata\", \"topics\"],\r\n    };\r\n    fetchDataDuplicate(qs);\r\n  }, [searchParams, resource]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {\r\n    setPostType(eventKey);\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n  };\r\n\r\n  //handle changes to selected protocols\r\n  const handleProtocolChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedProtocol = e.target.value;\r\n    const fst = { _id: e.target.value };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n\r\n    const metadata = [];\r\n    for (let i = 0; i < protocol.metadata.length; i++) {\r\n      if (protocol.metadata[i].type === \"scalar\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: 0,\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"text\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: protocol.metadata[i].name + \"_Name\",\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"vector\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: [0],\r\n        });\r\n      }\r\n    }\r\n\r\n    const tmpValues = cloneDeep(values);\r\n    tmpValues[\"protocol\"] = selectedProtocol;\r\n    if (metadata.length !== 0) tmpValues[\"metadata\"] = metadata;\r\n\r\n    const tmpDisabled = cloneDeep(disabledFields);\r\n    tmpDisabled[\"protocol\"] = true;\r\n\r\n    setDisabledFields(tmpDisabled);\r\n    //setProtocol(selectedProtocol);\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n    if (tmpValues[\"protocol\"] === undefined) {\r\n      setMsg(\"Please, select a protocol\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (tmpValues[\"_id\"] === \"\") {\r\n      setMsg(\"Please, define an _id\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (tmpValues[\"state\"] === \"\") {\r\n      setMsg(\"Please, select a state\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      setIsError(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      console.log({\r\n        message: error.error.response.data.message,\r\n        details: error.error.response.data.details,\r\n      });\r\n\r\n      let det = \"\";\r\n      if (error.error.response.data.details.includes(\"duplicate key\")) {\r\n        det =\r\n          locale().duplicate_resource_error +\r\n          \" \" +\r\n          error.error.response.data.details.slice(\r\n            error.error.response.data.details.indexOf(\"{\") + 1,\r\n            -1\r\n          );\r\n      }\r\n      //default case: show details from error message\r\n      else {\r\n        det = error.error.response.data.details;\r\n      }\r\n      //add details\r\n      setMsg(error.error.response.data.message + \" : \" + det);\r\n      setIsError(true);\r\n    }\r\n    if (res.status === 200) {\r\n      window.alert(\"Experiment successufully posted!\");\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const importValues = (importedValues) => {\r\n    try {\r\n      const imported = JSON.parse(importedValues);\r\n      const template = cloneDeep(values);\r\n      if (imported[\"state\"] === null) imported[\"state\"] = NaN;\r\n\r\n      template[\"protocol\"] = \"\";\r\n      template[\"metadata\"] = [{ name: \"\", value: \"\" }];\r\n      const sorted = sortObject(imported, template);\r\n\r\n      if (\r\n        sorted[\"_id\"] === undefined &&\r\n        sorted[\"owner\"] === undefined &&\r\n        sorted[\"protocol\"] === undefined &&\r\n        sorted[\"metadata\"] === undefined\r\n      ) {\r\n        setImportMsg(locale().error_imported_file);\r\n        return;\r\n      }\r\n      setImportMsg(\"\");\r\n\r\n      //remove history when present\r\n      if (sorted[\"history\"] !== undefined) delete sorted[\"history\"];\r\n      setValues(sorted);\r\n\r\n      const tmpDisabled = cloneDeep(disabledFields);\r\n      tmpDisabled[\"protocol\"] = true;\r\n\r\n      setDisabledFields(tmpDisabled);\r\n    } catch (error) {\r\n      setImportMsg(locale().error_imported_file);\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file === undefined) {\r\n      setMsg(locale().no_file);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        console.log({\r\n          message: error.error.response.data.message,\r\n          details: error.error.response.data.details,\r\n        });\r\n\r\n        let det = \"\";\r\n        if (error.error.response.data.details.includes(\"duplicate key\")) {\r\n          det =\r\n            locale().duplicate_resource_error +\r\n            \" \" +\r\n            error.error.response.data.details.slice(\r\n              error.error.response.data.details.indexOf(\"{\") + 1,\r\n              -1\r\n            );\r\n        }\r\n        //default case: show details from error message\r\n        else {\r\n          det = error.error.response.data.details;\r\n        }\r\n        //add details\r\n        setMsg(error.error.response.data.message + \" : \" + det);\r\n        setIsError(true);\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        console.log({\r\n          message: error.error.response.data.message,\r\n          details: error.error.response.data.details,\r\n        });\r\n\r\n        let det = \"\";\r\n        if (\r\n          error.error.response.data.details !== undefined &&\r\n          error.error.response.data.details.includes(\"duplicate key\")\r\n        ) {\r\n          det =\r\n            locale().duplicate_resource_error +\r\n            \" \" +\r\n            error.error.response.data.details.slice(\r\n              error.error.response.data.details.indexOf(\"{\") + 1,\r\n              -1\r\n            );\r\n        } else if (\r\n          error.error.response.data.details === undefined &&\r\n          error.error.response.data.message.includes(\"Unexpected token\")\r\n        ) {\r\n          det =\r\n            \"The selected file cannot be uploaded because it contains errors.\";\r\n        }\r\n        //default case: show details from error message\r\n        else {\r\n          det = error.error.response.data.details;\r\n        }\r\n        //add details\r\n        setMsg(error.error.response.data.message + \" : \" + det);\r\n        setIsError(true);\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Experiment successufully posted!\");\r\n\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" &&\r\n            (searchParams.get(\"from\") === null ||\r\n              searchParams.get(\"from\") === \"\") && (\r\n              <ImportExportValues\r\n                values={values}\r\n                importValues={importValues}\r\n                importMsg={importMsg}\r\n              />\r\n            )}\r\n          {postType === \"form\" && protocols !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              {(searchParams.get(\"from\") === null ||\r\n                searchParams.get(\"from\") === \"\") && (\r\n                <Form.Select\r\n                  aria-label={locale().select + \" protocol\"}\r\n                  onChange={handleProtocolChange}\r\n                  value={values[\"protocol\"]}\r\n                >\r\n                  <option>{locale().select} protocol</option>\r\n                  {React.Children.toArray(\r\n                    protocols.map((e) => {\r\n                      return <option value={e}>{e}</option>;\r\n                    })\r\n                  )}\r\n                </Form.Select>\r\n              )}\r\n              <br />\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n                setMsg={setMsg}\r\n                setIsError={setIsError}\r\n              />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { addFields, addTypes } from \"../../configManager\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Form,\r\n  Nav,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Button,\r\n  Accordion,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\nimport { FormFile } from \"../formFileComp/formFile\";\r\n\r\nimport AppContext from \"../../context\";\r\nimport { fetchedPageData } from \"../../configManager\";\r\nimport {\r\n  sortObject,\r\n  maintainEmptyElement,\r\n  maintainEmptyElements,\r\n} from \"../../services/objects_manipulation\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddMeasurementsPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"measurements\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [samples, setSamples] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n  //formValues\r\n  const [formValues, setFormValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [features, setFeatures] = useState();\r\n  const [feature, setFeature] = useState(\"\");\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(null);\r\n  const [contentBody, setContentBody] = useState(null);\r\n  const [contentPlain, setContentPlain] = useState(null);\r\n\r\n  const context = useContext(AppContext);\r\n  const myFetched = context.fetched;\r\n\r\n  /////////////FETCH REQUIRED RESOURCES\r\n  const fetchRequiredData = async (res) => {\r\n    if (myFetched.data[res] !== undefined) return;\r\n    // get the data from the api\r\n    try {\r\n      const response = await get_generic(res, {\r\n        limit: 100,\r\n        select: [\"_id\", \"username\", \"name\"],\r\n      });\r\n      myFetched.UpdateData(\r\n        response.docs.map((e) => {\r\n          return {\r\n            _id: e._id,\r\n            optionalLabel:\r\n              e.name !== undefined\r\n                ? e.name\r\n                : e.username !== undefined\r\n                ? e.username\r\n                : undefined,\r\n          };\r\n        }),\r\n        res\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (fetchedPageData[resource] !== undefined) {\r\n      Object.values(fetchedPageData[resource]).forEach((e) =>\r\n        fetchRequiredData(e)\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      try {\r\n        const response = await get_generic(\"features\", qs);\r\n\r\n        setFeatures(response.docs.map((e) => e._id));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const qs = { limit: 100, select: [\"_id\", \"items\"] };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(formValues);\r\n    let formValuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      formValuesPtr = formValuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    formValuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        addFields,\r\n        resource,\r\n        item\r\n      );\r\n    }\r\n    setFormValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(formValues);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(\r\n      val,\r\n      path.slice(0, i),\r\n      addFields,\r\n      resource,\r\n      item\r\n    );\r\n    setFormValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {\r\n    setPostType(eventKey);\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n  };\r\n\r\n  //handle changes to selected feature\r\n  const handleFeatureChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedFeature = e.target.value;\r\n    const fst = { _id: selectedFeature };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"features\", qs);\r\n    const feature = res.docs[0];\r\n\r\n    const items = feature.items;\r\n\r\n    const samples = [];\r\n    const tmp = addSample(samples, items);\r\n    setSamples(tmp);\r\n    setItems(items);\r\n    setFeature(selectedFeature);\r\n    return;\r\n  };\r\n\r\n  const addSample = (samples, items) => {\r\n    const values = [];\r\n    const tmpSample = cloneDeep(samples);\r\n    items.forEach((item) => {\r\n      if (item.type === \"number\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: NaN, type: item.type });\r\n        else values.push([{ name: item.name, value: NaN, type: item.type }]);\r\n      } else if (item.type === \"text\") {\r\n        if (item.dimension === 0)\r\n          values.push({ name: item.name, value: \"\", type: item.type });\r\n        else values.push([{ name: item.name, value: \"\", type: item.type }]);\r\n      } else if (item.type === \"enum\") {\r\n        if (item.dimension === 0)\r\n          values.push({\r\n            name: item.name,\r\n            value: \"\",\r\n            enumValues: item.range,\r\n            type: item.type,\r\n          });\r\n        else\r\n          values.push([\r\n            {\r\n              name: item.name,\r\n              value: \"\",\r\n              enumValues: item.range,\r\n              type: item.type,\r\n            },\r\n          ]);\r\n      }\r\n    });\r\n    tmpSample.push({ values: values });\r\n    return tmpSample;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone formValues\r\n    let token = undefined;\r\n    let body = cloneDeep(formValues);\r\n    let tmpSamples = samples.map((sample) => {\r\n      return { values: sample.values.map((v) => v.value) };\r\n    });\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n    removeDefaultElements(body);\r\n    body[\"feature\"] = feature;\r\n    body[\"samples\"] = tmpSamples;\r\n    //let tmpformValues = cloneDeep(body);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(resource, JSON.stringify(body), token);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      setIsError(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n      setIsError(true);\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Measurement successufully posted!\");\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    if (file === undefined) {\r\n      setMsg(locale().no_file);\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n        setIsError(true);\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n        setIsError(false);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n        setIsError(true);\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      window.alert(\"Measurement successufully posted!\");\r\n      navigate(\"/\" + resource);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && features !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" feature\"}\r\n                onChange={handleFeatureChange}\r\n                value={feature}\r\n              >\r\n                <option>{locale().select} feature</option>\r\n                {React.Children.toArray(\r\n                  features.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <hr />\r\n              <Container fluid>\r\n                <Row>\r\n                  <b>Samples :{samples.length}</b>\r\n                </Row>\r\n                <br />\r\n                {React.Children.toArray(\r\n                  samples.map((sample, i) => {\r\n                    return (\r\n                      <Row\r\n                        style={{\r\n                          padding: 10,\r\n                        }}\r\n                      >\r\n                        <Accordion defaultActiveKey=\"0\">\r\n                          <Accordion.Item eventKey={i}>\r\n                            <Accordion.Header>\r\n                              <b>\r\n                                <i>Sample [{i}]</i>\r\n                              </b>\r\n                            </Accordion.Header>\r\n                            <Accordion.Body>\r\n                              {React.Children.toArray(\r\n                                Object.values(sample.values).map((entr) => {\r\n                                  return (\r\n                                    <Row\r\n                                      style={{\r\n                                        borderBottomStyle: \"solid\",\r\n                                        borderBottomWidth: 1 + \"px\",\r\n                                        marginBottom: 5 + \"px\",\r\n                                        padding: 10,\r\n                                      }}\r\n                                    >\r\n                                      <Col\r\n                                        sm={2}\r\n                                        style={{\r\n                                          borderRightStyle: \"dotted\",\r\n                                          borderRightWidth: 1 + \"px\",\r\n                                        }}\r\n                                      >\r\n                                        <b>\r\n                                          <i>{entr.name}</i>\r\n                                        </b>\r\n                                      </Col>\r\n                                      <Col sm={2}>\r\n                                        {entr.type === \"enum\" ? (\r\n                                          <Form.Select\r\n                                            aria-label={\r\n                                              locale().select + \" \" + entr.name\r\n                                            }\r\n                                            //value={entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                          >\r\n                                            <option value=\"\">\r\n                                              {locale().select +\r\n                                                \" \" +\r\n                                                entr.name}\r\n                                            </option>\r\n                                            {React.Children.toArray(\r\n                                              entr.enumValues.map((e) => {\r\n                                                return (\r\n                                                  <option value={e}>{e}</option>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Form.Select>\r\n                                        ) : entr.type === \"text\" ? (\r\n                                          <Form.Control\r\n                                            type=\"text\"\r\n                                            //value={entr.value}\r\n                                            id={entr.name}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = e.target.value;\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        ) : (\r\n                                          <Form.Control\r\n                                            type=\"number\"\r\n                                            id={entr.name}\r\n                                            //value={isNaN(entr.value) ? \"\" : entr.value}\r\n                                            onChange={(e) => {\r\n                                              e.preventDefault();\r\n                                              entr.value = parseInt(\r\n                                                e.target.value,\r\n                                                10\r\n                                              );\r\n                                            }}\r\n                                            aria-label={\r\n                                              locale().enter + \" \" + entr.name\r\n                                            }\r\n                                          />\r\n                                        )}\r\n                                      </Col>\r\n                                    </Row>\r\n                                  );\r\n                                })\r\n                              )}\r\n                            </Accordion.Body>\r\n                          </Accordion.Item>\r\n                        </Accordion>\r\n                      </Row>\r\n                    );\r\n                  })\r\n                )}\r\n                {samples.length !== 0 && (\r\n                  <Button\r\n                    variant=\"link\"\r\n                    onClick={() => {\r\n                      const sampl = addSample(samples, items);\r\n                      setSamples(sampl);\r\n                    }}\r\n                  >\r\n                    <i\r\n                      className=\"fa fa-plus-circle\"\r\n                      aria-hidden=\"true\"\r\n                      title={\"Add sample\"}\r\n                      style={{\r\n                        width: 30 + \"px\",\r\n                        height: 30 + \"px\",\r\n                        marginRight: 10 + \"px\",\r\n                        opacity: 0.85,\r\n                      }}\r\n                    ></i>\r\n                  </Button>\r\n                )}\r\n              </Container>\r\n              <hr />\r\n              <br />\r\n              <FormManager\r\n                values={formValues}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n                backFunction={back}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormFile\r\n                submitFunction={postFile}\r\n                backFunction={back}\r\n                setContentBody={setContentBody}\r\n                setContentHeader={setContentHeader}\r\n                setContentPlain={setContentPlain}\r\n                setFile={setFile}\r\n                contentPlain={contentPlain}\r\n                contentHeader={contentHeader}\r\n                contentBody={contentBody}\r\n              />\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Accordion,\r\n  Table,\r\n  ProgressBar,\r\n  Nav,\r\n} from \"react-bootstrap\";\r\nimport locale from \"../../../common/locale\";\r\n\r\nexport default function UpdateHistoryFileForm(props) {\r\n  /*\r\n  console.log({\r\n    postHistory: props.postHistory,\r\n    arraySepRef: props.arraySepRef,\r\n\r\n    csvSep: props.csvSep,\r\n    floatSepRef: props.floatSepRef,\r\n    ovdRef: props.ovdRef,\r\n    setCsvHeader: props.setCsvHeader,\r\n    setCsvContent: props.setCsvContent,\r\n    setFile: props.setFile,\r\n    file: props.file,\r\n    csvContent: props.csvContent,\r\n    csvHeader: props.csvHeader,\r\n  });*/\r\n  if (\r\n    props.postHistory === undefined ||\r\n    props.arraySepRef === undefined ||\r\n    props.floatSepRef === undefined ||\r\n    props.csvSep === undefined ||\r\n    props.setCsvSep === undefined ||\r\n    props.ovdRef === undefined ||\r\n    props.setCsvHeader === undefined ||\r\n    props.setCsvContent === undefined ||\r\n    props.setFile === undefined ||\r\n    props.file === undefined ||\r\n    props.csvContent === undefined ||\r\n    props.csvHeader === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Form onSubmit={props.postHistory}>\r\n      <Row style={{ paddingTop: 10 + \"px\" }}>\r\n        <Col sm={1}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"CSV Column Separator\"\r\n              value={props.csvSep}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.setCsvSep(e.target.value);\r\n              }}\r\n            >\r\n              <option value=\",\">,</option>\r\n              <option value=\";\">;</option>\r\n              <option value=\"-\">-</option>\r\n              <option value=\"\\t\">\\t</option>\r\n            </Form.Select>\r\n            <Form.Text className=\"text-muted\">Column separator</Form.Text>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col sm={1}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"CSV Array separator\"\r\n              ref={props.arraySepRef}\r\n            >\r\n              <option value=\";\">;</option>\r\n              <option value=\",\">,</option>\r\n              <option value=\".\">.</option>\r\n              <option value=\"-\">-</option>\r\n            </Form.Select>\r\n            <Form.Text className=\"text-muted\">Array separator</Form.Text>\r\n          </Form.Group>\r\n        </Col>\r\n        <Col sm={1}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"CSV Floating Point separator\"\r\n              ref={props.floatSepRef}\r\n            >\r\n              <option value=\".\">.</option>\r\n              <option value=\",\">,</option>\r\n            </Form.Select>\r\n            <Form.Text className=\"text-muted\">\r\n              Floating Point separator\r\n            </Form.Text>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col sm={3}>\r\n          <Form.Control\r\n            className=\"mb-3\"\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            label=\"File\"\r\n            onChange={(e) => {\r\n              const _file = e.target.files[0];\r\n              //props.setFile(file);\r\n              const fileReader = new FileReader();\r\n\r\n              fileReader.onloadend = () => {\r\n                const _content = fileReader.result;\r\n\r\n                const regex = new RegExp(\"\\\\r\", \"g\");\r\n                let splitted = _content.replace(regex, \"\").split(\"\\n\");\r\n\r\n                props.setCsvHeader(splitted[0]);\r\n                props.setFile(_file);\r\n                splitted.splice(0, 1);\r\n                props.setCsvContent(splitted);\r\n              };\r\n              fileReader.readAsText(_file);\r\n            }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Check\r\n              type=\"checkbox\"\r\n              label=\"Update duplicate steps in History Experiment\"\r\n              ref={props.ovdRef}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      {props.csvContent !== null && (\r\n        <Row>\r\n          <Accordion>\r\n            <Accordion.Item eventKey=\"0\">\r\n              <Accordion.Header>\r\n                {locale().preview + \" - \" + props.file.name}\r\n              </Accordion.Header>\r\n              <Accordion.Body style={{ overflow: \"scroll\", height: 70 + \"vh\" }}>\r\n                <Table responsive striped bordered hover>\r\n                  <thead>\r\n                    <tr>\r\n                      {React.Children.toArray(\r\n                        props.csvHeader.split(props.csvSep).map((h) => {\r\n                          return <th>{h}</th>;\r\n                        })\r\n                      )}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {React.Children.toArray(\r\n                      props.csvContent.map((e) => {\r\n                        return (\r\n                          <tr>\r\n                            {React.Children.toArray(\r\n                              e.split(props.csvSep).map((h) => {\r\n                                return <td>{h}</td>;\r\n                              })\r\n                            )}\r\n                          </tr>\r\n                        );\r\n                      })\r\n                    )}\r\n                  </tbody>\r\n                </Table>\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          </Accordion>\r\n        </Row>\r\n      )}\r\n      <Row>\r\n        <Col>\r\n          <Button variant=\"primary\" type=\"submit\">\r\n            {locale().submit}\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </Form>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Accordion,\r\n  Table,\r\n  ProgressBar,\r\n  Nav,\r\n} from \"react-bootstrap\";\r\nimport locale from \"../../../common/locale\";\r\nimport { FormManager } from \"../../formManager/formManager\";\r\n\r\nexport default function UpdateHistoryFileForm(props) {\r\n  if (\r\n    props.experiments === undefined ||\r\n    props.postHistory === undefined ||\r\n    props.values === undefined ||\r\n    props.ovdRef === undefined ||\r\n    props.handleExperimentChange === undefined ||\r\n    props.handleChanges === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n        <Col>\r\n          {props.experiments.length !== 0 && (\r\n            <Form.Select\r\n              aria-label={locale().select + \" experiment\"}\r\n              onChange={props.handleExperimentChange}\r\n            >\r\n              <option>\r\n                {locale().select} experiment to update its history\r\n              </option>\r\n              {React.Children.toArray(\r\n                props.experiments.map((e) => {\r\n                  return <option value={e[\"_id\"]}>{e[\"_id\"]}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Check\r\n              type=\"checkbox\"\r\n              label=\"Update step if already present in History Experiment\"\r\n              ref={props.ovdRef}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <FormManager\r\n            values={props.values}\r\n            resource={\"updateHistory\"}\r\n            functionalFields={{ updateHistory: {} }}\r\n            disabledFields={{ fields: { name: true } }}\r\n            handleChangesCallback={props.handleChanges}\r\n            arrayDeleteCallback={() => {}}\r\n            submitFunction={props.postHistory}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Accordion,\r\n  Table,\r\n  ProgressBar,\r\n  Nav,\r\n} from \"react-bootstrap\";\r\nimport locale from \"../../../common/locale\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../../configManager\";\r\nimport {\r\n  testLogger,\r\n  logsManager,\r\n  postHistoryFile,\r\n  postHistoryStep,\r\n} from \"../../../services/operation_tool_services\";\r\nimport AppContext from \"../../../context\";\r\nimport \"../../page/page.scss\";\r\nimport UpdateHistoryFileForm from \"./updateHistoryFileForm\";\r\nimport UpdateHistoryForm from \"./updateHistoryForm\";\r\nimport { get_generic } from \"../../../services/http_operations\";\r\nimport { maintainEmptyElement } from \"../../../services/objects_manipulation\";\r\nimport { removeDefaultElements } from \"../../../services/misc_functions\";\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nconst ovdRef = React.createRef();\r\nconst arraySepRef = React.createRef();\r\nconst floatSepRef = React.createRef();\r\n\r\nexport default function UpdateHistoryPage() {\r\n  const [csvContent, setCsvContent] = useState(null);\r\n  const [csvHeader, setCsvHeader] = useState(null);\r\n  const myLogs = useContext(AppContext).logs;\r\n  const [now, setNow] = useState(0);\r\n  const [file, setFile] = useState(null);\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"file\");\r\n\r\n  const [operationindex, setOperationIndex] = useState(0);\r\n  const [experiments, setExperiments] = useState([]);\r\n  const [experiment, setExperiment] = useState(\"\");\r\n  const [values, setValues] = useState({});\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  const [csvSep, setCsvSep] = useState(\",\");\r\n\r\n  useEffect(() => {\r\n    const getExperiments = async () => {\r\n      const res = await get_generic(\"experiments\", {});\r\n\r\n      setExperiments(res.docs);\r\n    };\r\n    getExperiments();\r\n  }, []);\r\n\r\n  const postHistory = async (e) => {\r\n    e.preventDefault();\r\n    const _csvSep = csvSep;\r\n    const arraySep = arraySepRef.current.value;\r\n    const floatSep = floatSepRef.current.value;\r\n    const ovd = ovdRef.current.checked;\r\n\r\n    if (_csvSep === \"\" || arraySep === \"\" || floatSep === \"\") {\r\n      setMsg(\"Please, define all the separators\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (_csvSep === arraySep || _csvSep === floatSep || arraySep === floatSep) {\r\n      setMsg(\"All the separators should have different values\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (file === null || file === undefined) {\r\n      setMsg(\"Please, choose a file\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n    setNow(0);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------Begin Upload Operation \" + operationindex + \"-------\\n\",\r\n    });\r\n    await postHistoryFile(file, ovd, _csvSep, arraySep, floatSep);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------End Upload Operation \" + operationindex + \"-------\\n\\n\",\r\n    });\r\n    setOperationIndex((prev) => prev + 1);\r\n    setNow(100);\r\n  };\r\n\r\n  const postStep = async (e) => {\r\n    e.preventDefault();\r\n    let tmpValues = cloneDeep(values);\r\n    tmpValues = removeDefaultElements(tmpValues);\r\n\r\n    if (experiment === undefined || experiment === \"\") {\r\n      setMsg(\"Please, select one experiment\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n\r\n    tmpValues[\"fields\"] = tmpValues[\"fields\"].filter(\r\n      (e) =>\r\n        (typeof e.value === \"number\" && !isNaN(e.value)) ||\r\n        (typeof e.value === \"string\" && e.value !== \"\") ||\r\n        (Array.isArray(e.value) && e.value.length !== 0)\r\n    );\r\n\r\n    if (isNaN(tmpValues[\"step\"])) {\r\n      setMsg(\"Please, define the step number\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (tmpValues[\"fields\"].length === 0) {\r\n      setMsg(\"Please, define at least one field\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    //reset error message\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n\r\n    const body = {};\r\n    const add = [];\r\n    add.push(tmpValues);\r\n    body[\"history\"] = { add };\r\n\r\n    setNow(0);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------Begin Upload Operation \" + operationindex + \"-------\\n\",\r\n    });\r\n    await postHistoryStep(experiment, body, ovdRef.current.checked);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------End Upload Operation \" + operationindex + \"-------\\n\\n\",\r\n    });\r\n    setOperationIndex((prev) => prev + 1);\r\n    setNow(100);\r\n  };\r\n\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => {\r\n    setPostType(eventKey);\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n  };\r\n\r\n  const handleExperimentChange = async (e) => {\r\n    e.preventDefault();\r\n    const experiment = experiments.filter((ex) => ex._id === e.target.value)[0];\r\n    const expProtocol = experiment.protocol;\r\n    const fst = { _id: expProtocol };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n    let fields = [];\r\n    const protoFields = protocol.topics.map((el) => el.fields);\r\n    protoFields.forEach((el) => {\r\n      fields = fields.concat(\r\n        el.map((obj) => {\r\n          let val =\r\n            obj.type === \"scalar\"\r\n              ? NaN\r\n              : obj.type === \"vector\"\r\n              ? [NaN]\r\n              : obj.type === \"text\"\r\n              ? \"\"\r\n              : //TODO else\r\n                \"\";\r\n          return { name: obj.name, value: val };\r\n        })\r\n      );\r\n    });\r\n    const _values = {};\r\n    _values[\"step\"] = NaN;\r\n    _values[\"fields\"] = fields;\r\n    setValues(_values);\r\n    setExperiment(e.target.value);\r\n  };\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        undefined,\r\n        undefined,\r\n        item\r\n      );\r\n    }\r\n    setValues(tmpVals);\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">Update Experiment History</header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"file\"\r\n        >\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n          </Nav.Item>\r\n\r\n          <Nav.Item>\r\n            <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n          </Nav.Item>\r\n        </Nav>\r\n        <Container fluid>\r\n          {postType === \"form\" && (\r\n            <Row>\r\n              <UpdateHistoryForm\r\n                postHistory={postStep}\r\n                values={values}\r\n                ovdRef={ovdRef}\r\n                handleExperimentChange={handleExperimentChange}\r\n                handleChanges={handleChanges}\r\n                experiments={experiments}\r\n              />\r\n            </Row>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <Row>\r\n              <UpdateHistoryFileForm\r\n                postHistory={postHistory}\r\n                arraySepRef={arraySepRef}\r\n                csvSep={csvSep}\r\n                setCsvSep={setCsvSep}\r\n                floatSepRef={floatSepRef}\r\n                ovdRef={ovdRef}\r\n                setCsvHeader={setCsvHeader}\r\n                setCsvContent={setCsvContent}\r\n                setFile={setFile}\r\n                file={file}\r\n                csvContent={csvContent}\r\n                csvHeader={csvHeader}\r\n              />\r\n            </Row>\r\n          )}\r\n          <Row>\r\n            <Col>\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <ProgressBar\r\n                now={now}\r\n                label={`${now}%`}\r\n                variant={now === 100 ? \"success\" : \"info\"}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <b>Operation logs</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <textarea\r\n                id=\"logger\"\r\n                style={{ resize: \"both\" }}\r\n                cols=\"100\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={myLogs.logs\r\n                  .map((l) => l.msg)\r\n                  .reverse()\r\n                  .join(\"-\")}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Accordion,\r\n  Table,\r\n  ProgressBar,\r\n  Nav,\r\n} from \"react-bootstrap\";\r\nimport locale from \"../../../common/locale\";\r\nimport { downloadHistory } from \"../../../services/operation_tool_services\";\r\nimport AppContext from \"../../../context\";\r\nimport \"../../page/page.scss\";\r\nimport { get_generic } from \"../../../services/http_operations\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { downloadZip } from \"client-zip\";\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nconst experimentSelectRef = React.createRef();\r\nconst csvSepRef = React.createRef();\r\nconst arraySepRef = React.createRef();\r\nconst floatSepRef = React.createRef();\r\nconst compressRef = React.createRef();\r\n\r\nexport default function DownloadHistoryPage() {\r\n  const myLogs = useContext(AppContext).logs;\r\n  const [now, setNow] = useState(0);\r\n\r\n  const [operationindex, setOperationIndex] = useState(0);\r\n  const [experiments, setExperiments] = useState([]);\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  //fetch experiments (limit 100) on load\r\n  useEffect(() => {\r\n    const getExperiments = async () => {\r\n      const res = await get_generic(\"experiments\", { limit: 100 });\r\n\r\n      setExperiments(res.docs);\r\n    };\r\n    getExperiments();\r\n  }, []);\r\n\r\n  //download history as CSV fules\r\n  const downloadHistoryHandler = async () => {\r\n    const csvSep = csvSepRef.current.value;\r\n    const arrSep = arraySepRef.current.value;\r\n    const floatSep = floatSepRef.current.value;\r\n    const exp = experimentSelectRef.current.value;\r\n    const expIndex = experimentSelectRef.current.selectedIndex;\r\n    const compress = compressRef.current.checked;\r\n\r\n    if (expIndex === 0) {\r\n      setMsg(\"Please, select one or All experiment\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (csvSep === \"\" || floatSep === \"\" || arrSep === \"\") {\r\n      setMsg(\"Please, define all the separators\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    if (csvSep === arrSep || csvSep === floatSep || arrSep === floatSep) {\r\n      setMsg(\"Please, define three different separators\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n    setNow(0);\r\n\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------Begin Download Operation \" + operationindex + \"-------\\n\",\r\n    });\r\n\r\n    const files = [];\r\n    if (exp === \"All\") {\r\n      for (let i = 0; i < experiments.length; i++) {\r\n        const f = await downloadHistory(\r\n          experiments[i]._id,\r\n          csvSep,\r\n          arrSep,\r\n          floatSep,\r\n          compress\r\n        );\r\n        files.push(f);\r\n        setNow(((i + 1) / experiments.length) * 100);\r\n      }\r\n    } else {\r\n      const f = await downloadHistory(exp, csvSep, arrSep, floatSep, compress);\r\n      files.push(f);\r\n    }\r\n    if (compress === true) {\r\n      const content = await downloadZip(files).blob();\r\n      saveAs(content, \"experiments_history.zip\");\r\n      myLogs.PushLog({\r\n        type: \"info\",\r\n        msg: \"Files compressed into experiments_history.zip archive\\n\",\r\n      });\r\n    }\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------End Download Operation \" + operationindex + \"-------\\n\\n\",\r\n    });\r\n    setOperationIndex((prev) => prev + 1);\r\n    setNow(100);\r\n  };\r\n\r\n  //download experiments (already fetched from DB) as json files\r\n  const downloadDataHandler = async () => {\r\n    const exp = experimentSelectRef.current.value;\r\n    const expIndex = experimentSelectRef.current.selectedIndex;\r\n    const compress = compressRef.current.checked;\r\n\r\n    if (expIndex === 0) {\r\n      setMsg(\"Please, select one or All experiment\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n    setNow(0);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------Begin Download Operation \" + operationindex + \"-------\\n\",\r\n    });\r\n\r\n    const files = [];\r\n    if (exp === \"All\") {\r\n      for (let i = 0; i < experiments.length; i++) {\r\n        const blob = new Blob([JSON.stringify(experiments[i], null, 4)]);\r\n        const fileName = experiments[i]._id + \".json\";\r\n\r\n        let file = null;\r\n        if (compress === undefined || compress === false) {\r\n          saveAs(blob, fileName);\r\n        } else {\r\n          file = new File([blob], fileName);\r\n        }\r\n\r\n        files.push(file);\r\n\r\n        myLogs.PushLog({\r\n          type: \"info\",\r\n          msg: fileName + \" successfully downloaded.\\n\",\r\n        });\r\n        setNow(((i + 1) / experiments.length) * 100);\r\n      }\r\n    } else {\r\n      const experiment = experiments.filter((ex) => ex._id === exp)[0];\r\n      const blob = new Blob([JSON.stringify(experiment, null, 4)]);\r\n      const fileName = exp + \".json\";\r\n\r\n      let file = null;\r\n      if (compress === undefined || compress === false) {\r\n        saveAs(blob, fileName);\r\n      } else {\r\n        file = new File([blob], fileName);\r\n      }\r\n      files.push(file);\r\n      myLogs.PushLog({\r\n        type: \"info\",\r\n        msg: fileName + \" successfully downloaded.\\n\",\r\n      });\r\n    }\r\n    if (compress === true) {\r\n      const content = await downloadZip(files).blob();\r\n      saveAs(content, \"experiments_data.zip\");\r\n      myLogs.PushLog({\r\n        type: \"info\",\r\n        msg: \"Files compressed into experiments_data.zip archive\\n\",\r\n      });\r\n    }\r\n\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------End Download Operation \" + operationindex + \"-------\\n\\n\",\r\n    });\r\n    setOperationIndex((prev) => prev + 1);\r\n    setNow(100);\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">Download Experiment History</header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row>\r\n            <Col>\r\n              <b>Select experiment</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col sm={3}>\r\n              {experiments.length !== 0 && (\r\n                <Form.Select\r\n                  aria-label={locale().select + \" experiment\"}\r\n                  ref={experimentSelectRef}\r\n                >\r\n                  <option>{locale().select} experiment</option>\r\n                  <option>All</option>\r\n                  {React.Children.toArray(\r\n                    experiments.map((e) => {\r\n                      return <option value={e[\"_id\"]}>{e[\"_id\"]}</option>;\r\n                    })\r\n                  )}\r\n                </Form.Select>\r\n              )}\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Check\r\n                  type=\"checkbox\"\r\n                  label=\"Compress files in a single .zip archive\"\r\n                  ref={compressRef}\r\n                />\r\n              </Form.Group>\r\n            </Col>\r\n          </Row>\r\n\r\n          <Row>\r\n            <Col>\r\n              <Row>\r\n                <Col>\r\n                  <b>Download history as csv</b>\r\n                </Col>\r\n              </Row>\r\n              <Row style={{ paddingTop: 10 + \"px\" }}>\r\n                <Col sm={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Select\r\n                      aria-label=\"CSV Column Separator\"\r\n                      ref={csvSepRef}\r\n                    >\r\n                      <option value=\",\">,</option>\r\n                      <option value=\";\">;</option>\r\n                      <option value=\"-\">-</option>\r\n                      <option value=\"\\t\">\\t</option>\r\n                    </Form.Select>\r\n                    <Form.Text className=\"text-muted\">\r\n                      Column separator\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Col>\r\n                <Col sm={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Select\r\n                      aria-label=\"CSV Array separator\"\r\n                      ref={arraySepRef}\r\n                    >\r\n                      <option value=\";\">;</option>\r\n                      <option value=\",\">,</option>\r\n                      <option value=\".\">.</option>\r\n                      <option value=\"-\">-</option>\r\n                    </Form.Select>\r\n                    <Form.Text className=\"text-muted\">\r\n                      Array separator\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Col>\r\n                <Col sm={2}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Select\r\n                      aria-label=\"CSV Floating Point separator\"\r\n                      ref={floatSepRef}\r\n                    >\r\n                      <option value=\".\">.</option>\r\n                      <option value=\",\">,</option>\r\n                    </Form.Select>\r\n                    <Form.Text className=\"text-muted\">\r\n                      Floating Point separator\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <Button variant=\"primary\" onClick={downloadHistoryHandler}>\r\n                    Download History\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n            <Col>\r\n              <Row>\r\n                <Col>\r\n                  <b>Download experiment data as json</b>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <Button variant=\"primary\" onClick={downloadDataHandler}>\r\n                    Download Data\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <ProgressBar\r\n                now={now}\r\n                label={`${now}%`}\r\n                variant={now === 100 ? \"success\" : \"info\"}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <b>Operation logs</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <textarea\r\n                id=\"logger\"\r\n                style={{ resize: \"both\" }}\r\n                cols=\"100\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={myLogs.logs\r\n                  .map((l) => l.msg)\r\n                  .reverse()\r\n                  .join(\"-\")}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Container,\r\n  Row,\r\n  Col,\r\n  Accordion,\r\n  Table,\r\n  ProgressBar,\r\n  Nav,\r\n} from \"react-bootstrap\";\r\nimport locale from \"../../../common/locale\";\r\nimport { deleteHistorySteps } from \"../../../services/operation_tool_services\";\r\nimport AppContext from \"../../../context\";\r\nimport \"../../page/page.scss\";\r\nimport { get_generic } from \"../../../services/http_operations\";\r\nimport { saveAs } from \"file-saver\";\r\nimport { downloadZip } from \"client-zip\";\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nconst stepsStringRef = React.createRef();\r\n\r\nexport default function RemoveStepsPage() {\r\n  const myLogs = useContext(AppContext).logs;\r\n  const [now, setNow] = useState(0);\r\n\r\n  const [operationindex, setOperationIndex] = useState(0);\r\n  const [experiments, setExperiments] = useState([]);\r\n  const [experiment, setExperiment] = useState();\r\n  const [steps, setSteps] = useState();\r\n  const [experimentIndex, setExperimentIndex] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [isError, setIsError] = useState(false);\r\n\r\n  //fetch experiments (limit 100) on load\r\n  useEffect(() => {\r\n    const getExperiments = async () => {\r\n      const res = await get_generic(\"experiments\", { limit: 100 });\r\n\r\n      setExperiments(res.docs);\r\n    };\r\n    getExperiments();\r\n  }, []);\r\n\r\n  //handle changes on select experiment\r\n  const handleExperimentChange = (e) => {\r\n    const selected = e.target.value;\r\n    if (e.target.selectedIndex === 0) {\r\n      setExperiment(undefined);\r\n      setSteps(undefined);\r\n      return;\r\n    }\r\n    const _experiment = experiments.filter((ex) => ex._id === selected)[0];\r\n    const _steps = _experiment.history.map((h) => h.step).sort((a, b) => a - b);\r\n\r\n    setExperiment(selected);\r\n    setSteps(_steps);\r\n  };\r\n\r\n  //download history as CSV fules\r\n  const deleteStepsHandler = async () => {\r\n    if (experimentIndex === 0) {\r\n      setMsg(\"Please, select one or All experiment\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n\r\n    let toRemove = [];\r\n    let newSteps = [...steps];\r\n    let definedSteps;\r\n    const stepsString = stepsStringRef.current.value;\r\n    if (stepsString === \"\") {\r\n      setMsg(\"Please, define at least one step\");\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    //check for all \"*\" option\r\n    if (stepsString.includes(\"*\")) {\r\n      toRemove = toRemove.concat(steps);\r\n      newSteps = [];\r\n    }\r\n    //otherwise check each step\r\n    else {\r\n      definedSteps = stepsString.replace(/\\s/g, \"\").split(\",\");\r\n      definedSteps.forEach((e) => {\r\n        if (e.includes(\"/\")) {\r\n          const interval = e.split(\"-\");\r\n          //search for the begin and end into step array\r\n          const begin = steps.indexOf(parseInt(interval[0]));\r\n          const end = steps.indexOf(parseInt(interval[1]));\r\n          if (begin !== -1 && end !== -1) {\r\n            for (let i = begin; i <= end; i++) {\r\n              toRemove.push(steps[i]);\r\n              newSteps.splice(newSteps.indexOf(steps[i]), 1);\r\n            }\r\n          }\r\n        } else if (steps.includes(parseInt(e))) {\r\n          toRemove.push(parseInt(e));\r\n          newSteps.splice(newSteps.indexOf(parseInt(e)), 1);\r\n        }\r\n      });\r\n    }\r\n    if (toRemove.length === 0) {\r\n      setMsg(\r\n        \"The experiment history does not contain specified steps, please check them\"\r\n      );\r\n      setIsError(true);\r\n      return;\r\n    }\r\n    setMsg(\"\");\r\n    setIsError(false);\r\n    setNow(0);\r\n\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------Begin Remove Operation \" + operationindex + \"-------\\n\",\r\n    });\r\n    await deleteHistorySteps(experiment, toRemove);\r\n    myLogs.PushLog({\r\n      type: \"info\",\r\n      msg: \"-------End Remove Operation \" + operationindex + \"-------\\n\\n\",\r\n    });\r\n\r\n    setOperationIndex((prev) => prev + 1);\r\n    setNow(100);\r\n    setSteps(newSteps);\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Remove steps from Experiment History\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Container fluid>\r\n          <Row style={{ paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <b>Select experiment</b>\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingBottom: 10 + \"px\" }}>\r\n            <Col sm={3}>\r\n              {experiments.length !== 0 && (\r\n                <Form.Select\r\n                  aria-label={locale().select + \" experiment\"}\r\n                  onChange={handleExperimentChange}\r\n                >\r\n                  <option>{locale().select} experiment</option>\r\n                  {React.Children.toArray(\r\n                    experiments.map((e) => {\r\n                      return <option value={e[\"_id\"]}>{e[\"_id\"]}</option>;\r\n                    })\r\n                  )}\r\n                </Form.Select>\r\n              )}\r\n            </Col>\r\n            {experiment !== undefined && (\r\n              <Col>\r\n                History steps contained into <b>{experiment}</b>: [{\" \"}\r\n                {steps.join(\", \")} ]\r\n              </Col>\r\n            )}\r\n          </Row>\r\n          {steps !== undefined && steps.length === 0 && (\r\n            <Row style={{ paddingBottom: 10 + \"px\" }}>\r\n              <Col>\r\n                The selected experiment's history does not contain steps\r\n              </Col>\r\n            </Row>\r\n          )}\r\n          {steps !== undefined && steps.length !== 0 && (\r\n            <>\r\n              <Row style={{ paddingBottom: 10 + \"px\" }}>\r\n                <Col sm={3}>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Control type={\"text\"} ref={stepsStringRef} />\r\n                    <Form.Text className=\"text-muted\">\r\n                      Define the steps comma separated.\r\n                      <br /> intervals can be specified as begin-end (included).{\" \"}\r\n                      <br /> to remove all steps enter * <br />\r\n                      Example: 2, 3, 5-7\r\n                    </Form.Text>\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <Button onClick={deleteStepsHandler}>Remove steps</Button>\r\n                </Col>\r\n              </Row>\r\n            </>\r\n          )}\r\n          <Row style={{ paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <font\r\n                style={{\r\n                  marginLeft: 5 + \"px\",\r\n                  color: isError ? \"red\" : \"black\",\r\n                }}\r\n              >\r\n                {msg}\r\n              </font>\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <ProgressBar\r\n                now={now}\r\n                label={`${now}%`}\r\n                variant={now === 100 ? \"success\" : \"info\"}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ paddingTop: 10 + \"px\", paddingBottom: 10 + \"px\" }}>\r\n            <Col>\r\n              <b>Operation logs</b>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col>\r\n              <textarea\r\n                id=\"logger\"\r\n                style={{ resize: \"both\" }}\r\n                cols=\"100\"\r\n                rows=\"10\"\r\n                readOnly\r\n                value={myLogs.logs\r\n                  .map((l) => l.msg)\r\n                  .reverse()\r\n                  .join(\"-\")}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { requestPasswordReset } from \"../../services/http_operations\";\r\nimport { languages } from \"../../configManager\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst emailRef = React.createRef();\r\nconst tenantRef = React.createRef();\r\n\r\nexport default function PasswordRecoveryPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const back = (e) => {\r\n    e.preventDefault();\r\n    navigate(-1);\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    const email = emailRef.current.value;\r\n    const tenant = tenantRef.current.value;\r\n    if (tenant === \"\") {\r\n      setMsg(locale().missing_tenant);\r\n      return;\r\n    }\r\n    if (email === \"\") {\r\n      setMsg(locale().missing_email);\r\n      return;\r\n    }\r\n    try {\r\n      const resp = await requestPasswordReset(tenant, email);\r\n      if (resp.response.status === 200)\r\n        setMsg(locale().email_sent_successfully);\r\n      else setMsg(locale().email_sent_errors);\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_recovery}</h4>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().tenant}</Form.Label>\r\n                  <Form.Control\r\n                    ref={tenantRef}\r\n                    type=\"text\"\r\n                    placeholder={locale().tenant_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Label>{locale().email}</Form.Label>\r\n                  <Form.Control\r\n                    type=\"email\"\r\n                    ref={emailRef}\r\n                    placeholder={locale().email_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={back}>\r\n                  {locale().cancel}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: \"red\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  resetPassword,\r\n  getPasswordStrength,\r\n} from \"../../services/http_operations\";\r\nimport { SetRoleDefinition } from \"../../services/userRolesManagement\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../configManager\";\r\nimport \"../authPage/authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\nimport { Form, Container, Row, Col } from \"react-bootstrap\";\r\nimport LogoHolder from \"../logoHolder/logoHolder\";\r\nimport { useParams, useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport { passwordStrength } from \"check-password-strength\";\r\nconst tenantRef = React.createRef();\r\nconst pswRef = React.createRef();\r\nconst pswConfirmRef = React.createRef();\r\n\r\nexport default function PasswordResetPage() {\r\n  //const { location, replace } = useHistory();\r\n  const [msg, setMsg] = useState(\"\");\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [token, setToken] = useState(searchParams.get(\"token\"));\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  const go_login = () => {\r\n    navigate(\"/\");\r\n  };\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    let requiredStr;\r\n    try {\r\n      const res = await getPasswordStrength();\r\n      requiredStr = res.response.data.passwordStrength;\r\n    } catch (error) {\r\n      console.log(error);\r\n      //Required password strength cannot be acquired from the server, use the default\r\n      requiredStr = 1;\r\n    }\r\n\r\n    const tenant = tenantRef.current.value;\r\n    const psw = pswRef.current.value;\r\n    const pswConfirm = pswConfirmRef.current.value;\r\n\r\n    if (psw === \"\" || pswConfirm === \"\") {\r\n      setMsg(locale().pass_not_null);\r\n      return;\r\n    }\r\n\r\n    if (psw !== pswConfirm) {\r\n      setMsg(locale().pass_not_match);\r\n      return;\r\n    }\r\n    if (tenant === \"\") {\r\n      setMsg(locale().missing_email);\r\n      return;\r\n    }\r\n    if (token === \"\" || token == undefined) {\r\n      setMsg(locale().missing_token);\r\n      return;\r\n    }\r\n    const pswDetails = passwordStrength(psw);\r\n\r\n    if (pswDetails.id < requiredStr) {\r\n      setMsg(locale().stronger_password_required);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const resp = await resetPassword(tenant, token, psw);\r\n      if (resp.response.status === 200) setMsg(locale().password_changed);\r\n      else setMsg(locale().password_not_changed_errors);\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.error.message === \"Network Error\") {\r\n        setMsg(locale().network_error);\r\n        return;\r\n      }\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <LogoHolder />\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <Form onSubmit={submitForm}>\r\n          <Container fluid>\r\n            <Row>\r\n              <Col>\r\n                <h4>{locale().password_reset}</h4>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().tenant}</Form.Label>\r\n                  <Form.Control\r\n                    ref={tenantRef}\r\n                    type=\"text\"\r\n                    placeholder={locale().tenant_suggestion}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>{\" \"}\r\n            {(searchParams.get(\"token\") === null ||\r\n              searchParams.get(\"token\") === \"\") && (\r\n              <Row>\r\n                <Col>\r\n                  <Form.Group className=\"mb-3\" controlId=\"token\">\r\n                    <Form.Label>Token</Form.Label>\r\n                    <Form.Control\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        setToken(e.target.value);\r\n                      }}\r\n                      type=\"text\"\r\n                      placeholder={locale().enter + \" token\"}\r\n                    />\r\n                  </Form.Group>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"tenant\">\r\n                  <Form.Label>{locale().password}</Form.Label>\r\n                  <Form.Control\r\n                    ref={pswRef}\r\n                    type=\"password\"\r\n                    placeholder={locale().enter + \" new password\"}\r\n                  />\r\n                  <Form.Text className=\"text-muted\">\r\n                    {locale().password_rules}\r\n                  </Form.Text>\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                  <Form.Control\r\n                    type=\"password\"\r\n                    ref={pswConfirmRef}\r\n                    placeholder={locale().repeat + \" new password\"}\r\n                  />\r\n                </Form.Group>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <Button variant=\"success\" type=\"submit\">\r\n                  {locale().submit}\r\n                </Button>{\" \"}\r\n                &nbsp;&nbsp;&nbsp;\r\n                <Button variant=\"secondary\" onClick={go_login}>\r\n                  {locale().go_login_page}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n            <Row>\r\n              <Col>\r\n                <div style={{ color: \"red\" }}>{msg}</div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </Form>\r\n\r\n        <br />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport Navigation from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\nimport ProfilePage from \"./components/profilePage/profilePage\";\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport HorizontalNavigationBar from \"./components/horizontalNavigationBar/horizontalNavigationBar\";\r\nimport AppContext from \"./context\";\r\n\r\nimport {\r\n  notificationManager,\r\n  get_generic,\r\n  SetAPIUrl,\r\n} from \"./services/http_operations\";\r\nimport { logsManager } from \"./services/operation_tool_services\";\r\nimport MobilePlaceholderPage from \"./components/mobilePlaceholderPage/mobilePlaceholderPage\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport { layout } from \"./configManager\";\r\nimport AddMeasurementsPage from \"./components/addMeasurementsPage/addMeasurementsPage\";\r\nimport UpdateHistoryPage from \"./components/OperationToolPages/updateSteps/updateHistory\";\r\nimport DownloadPage from \"./components/OperationToolPages/download/downloadExperiment\";\r\nimport cloneDeep from \"clone-deep\";\r\nimport RemoveStepsPage from \"./components/OperationToolPages/removeSteps/removeSteps\";\r\nimport PasswordRecoveryPage from \"./components/passwordRecoveryPage/PasswordRecoveryPage\";\r\nimport PasswordResetPage from \"./components/PasswordResetPage/PasswordResetPage\";\r\n\r\nimport { ResetConfig, LoadConfig } from \"./configManager\";\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const [logs, setLogs] = useState<INotification[]>([]);\r\n  const [types, setTypes] = useState<Object | undefined>();\r\n  const [data, setData] = useState<Object>({});\r\n\r\n  let layoutRef = React.useRef<string | null>();\r\n  const tkn = localStorage.getItem(\"token\");\r\n\r\n  //reset the config to define basics variables when not-logged\r\n  ResetConfig();\r\n  //set api url to run https operations\r\n  SetAPIUrl();\r\n\r\n  ////////////////NOTIFICATION MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationManagement = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  ///////////////END NOTIFICATION MANAGEMENT FRAGMENT\r\n\r\n  ///////////////FETCHED TYPES AND DATA MANAGEMENT FRAGMENT\r\n  //function to push a new fetched data block\r\n  function UpdateData(fetched: string[], key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: [...fetched] };\r\n    });\r\n  }\r\n\r\n  //function to remove a fetched data block\r\n  function RemoveData(key: string) {\r\n    setData((prev) => {\r\n      return { ...prev, [key]: undefined };\r\n    });\r\n  }\r\n\r\n  //use effect to fetch static data from the server /types\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, \"\");\r\n\r\n        setTypes(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    //if types has been already set, ignore it\r\n    if (types !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  const fetchedManagement = {\r\n    types: types,\r\n    data: data,\r\n    UpdateData: UpdateData,\r\n    RemoveData: RemoveData,\r\n  };\r\n  ///////////////END FETCHED TYPES MANAGEMENT FRAGMENT\r\n\r\n  ///////////////////////////LOGGER MANAGEMENT FRAGMENT\r\n  //function to push a new notification at the beginning of the list\r\n  function PushLog(obj: INotification) {\r\n    setLogs((prev) => [obj].concat(prev));\r\n    let textarea = document.getElementById(\"logger\");\r\n    if (textarea !== null && textarea !== undefined)\r\n      textarea.scrollTop = textarea.scrollHeight;\r\n  }\r\n  //function to remove a single notification from list\r\n  function RemoveLog(id: number) {\r\n    let tmp = [...logs];\r\n    tmp.splice(id, 1);\r\n    setLogs(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearLogs() {\r\n    setLogs([]);\r\n  }\r\n\r\n  const logsManagement = {\r\n    logs: logs,\r\n    PushLog,\r\n    RemoveLog,\r\n    ClearLogs,\r\n  };\r\n\r\n  logsManager.ClearLogs = ClearLogs;\r\n  logsManager.PushLog = PushLog;\r\n  logsManager.RemoveLog = RemoveLog;\r\n  ///////////////////////////END LOGGER MANAGEMENT FRAGMENT\r\n\r\n  //mobile view only allowed to be vertical\r\n  if (/Mobi/i.test(window.navigator.userAgent) === true) {\r\n    layoutRef.current = \"vertical\";\r\n  } else {\r\n    layoutRef.current = layout;\r\n  }\r\n\r\n  //not logged => show auth page\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/passwordrecovery\"\r\n              element={<PasswordRecoveryPage />}\r\n            />\r\n            <Route path=\"/passwordreset\" element={<PasswordResetPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n            <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  //load config if token has been set\r\n  LoadConfig();\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        notifications: notificationManagement,\r\n        fetched: fetchedManagement,\r\n        logs: logsManagement,\r\n      }}\r\n    >\r\n      <Router>\r\n        <Container\r\n          fluid\r\n          style={{\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            height: 100 + \"vh\",\r\n            width: 99 + \"vw\",\r\n          }}\r\n        >\r\n          {layoutRef.current === \"horizontal\" ? (\r\n            <Row style={{ padding: 0 }}>\r\n              <HorizontalNavigationBar />\r\n            </Row>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n          <Row\r\n            style={{\r\n              padding: 0,\r\n            }}\r\n          >\r\n            {layoutRef.current === \"vertical\" ? (\r\n              <Col md=\"auto\" style={{ padding: 0, minWidth: 250 + \"px\" }}>\r\n                <Navigation />\r\n              </Col>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n            {/Mobi/i.test(window.navigator.userAgent) === true && (\r\n              <Col md=\"auto\" style={{ padding: 0 }}>\r\n                <NotificationBar />\r\n              </Col>\r\n            )}\r\n            <Col style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n              <Routes>\r\n                <Route path=\"/\" element={<HomePage />} />\r\n                <Route path=\"/home\" element={<HomePage />} />\r\n                <Route path=\"/viewProfile\" element={<ProfilePage />} />\r\n                <Route\r\n                  path=\"/add/experiments/\"\r\n                  element={<AddExperimentPage />}\r\n                />\r\n                <Route\r\n                  path=\"/add/measurements/\"\r\n                  element={<AddMeasurementsPage />}\r\n                />\r\n\r\n                <Route\r\n                  path=\"/edit/:resource/:id\"\r\n                  element={<EditContentPage />}\r\n                />\r\n                <Route path=\"/downloadexperiment\" element={<DownloadPage />} />\r\n                <Route path=\"/updatehistory\" element={<UpdateHistoryPage />} />\r\n                <Route path=\"/removesteps\" element={<RemoveStepsPage />} />\r\n                <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n                <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n                <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n                <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n                <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n              </Routes>\r\n            </Col>\r\n            {layoutRef.current === \"vertical\" &&\r\n              /Mobi/i.test(window.navigator.userAgent) === false && (\r\n                <Col md=\"auto\" style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n                  <NotificationBar />\r\n                </Col>\r\n              )}\r\n          </Row>\r\n        </Container>\r\n      </Router>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}