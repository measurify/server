{"version":3,"sources":["common/localizations/localization_it.js","common/localizations/localization_en.js","services/http_operations.js","services/validations.js","config.js","common/locale.ts","components/languageSelector/languageSelector.tsx","components/authPage/authPage.comp.jsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","components/navigation/navigation.comp.tsx","components/actionsManager/actionsManager.jsx","components/contentTable/contentTable.jsx","components/page/page.jsx","components/unauthorizedPage/unauthorizedPage.tsx","context.jsx","components/notificationBar/notificationBar.jsx","fetchedData.js","services/misc_functions.js","components/formManager/formManager.jsx","components/editContentPage/editContentPage.jsx","components/addPage/addPage.jsx","components/addExperimentPage/addExperimentPage.jsx","App.tsx","index.js"],"names":["localization_it","username","password","tenant","keep_logged","select","language","welcome","role","session_expire_in","tools","notifications","file_content","clear_all","enter","username_suggestion","password_suggestion","tenant_suggestion","add_tenant","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","oh_no","broken_link","submit","cancel","login","logout","login_error","unauthorised_user","session_expired","localization_en","axios","require","default","https","instance","create","httpsAgent","Agent","rejectUnauthorized","notificationManager","PushNotification","obj","RemoveNotification","id","ClearNotifications","body","options","headers","Authorization","GetToken","url_string","api_url","Promise","resolve","reject","post","then","response","localStorage","setItem","data","token","token_expiration_time","user","type","Date","getTime","toString","catch","error","post_file_generic","resource_type","formData","a","additionalHeader","undefined","console","log","tempH","Object","entries","forEach","k","v","name","time","toTimeString","msg","post_generic","header","put_generic","put","JSON","stringify","message","delete_generic","delete","statusCode","get_generic","qs","url","filter","concat","limit","page","json","get","docs","totalDocs","totalPages","pagingCounter","hasPrevPage","hasNextPage","prevPage","nextPage","getItem","isFeatureInUse","feature","features","website_name","languages","pages","aliasPages","_id","actions","pageActions","viewFields","items","editFields","unit","dimension","NaN","tags","visibility","addFields","organization","address","email","phone","admin_username","admin_password","passwordhash","description","metadata","topics","fields","state","editFieldsSpecifier","policy","addTypes","fetchedPageTypes","locale","tkn","length","navigator","substring","status","measurementBufferPolicy","LanguageSelector","setSessionLanguage","window","location","reload","Button","variant","onClick","AuthPage","useState","setUser","pwd","setPwd","setTenant","logged","setLogged","setMsg","e","preventDefault","replace","details","className","onSubmit","placeholder","onChange","event","target","value","checked","style","color","to","size","title","width","height","marginRight","opacity","HomePage","useEffect","href","rel","NotFoundPage","fontawesome","library","add","faTimes","faBars","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","faCheck","Navigation","isOpened","setIsOpened","setUsername","setRole","loginTime","setLoginTime","tknExpTime","setTknExpTime","keepLogged","setKeepLogged","displayTime","setDisplayTime","CalcEnding","t0","retryLoginTime","parseInt","now","remainingSec","exp","retryTokenExpiration","endsWith","slice","DurationToMilliSeconds","refreshToken","clear","mins","Math","floor","secs","tokenExpiration","setTimeout","document","Fragment","keys","map","navData","isActive","ActionContent","props","toShow","resType","constructor","subK","Array","isArray","resource","row","f","includes","UnrollView","item","Accordion","defaultActiveKey","React","Children","toArray","i","key","Item","eventKey","Header","Body","values","some","single","Table","responsive","striped","bordered","hover","join","ActionManager","res","setRes","viewPopover","Popover","minWidth","as","action","OverlayTrigger","trigger","placement","overlay","rootClose","takeSingle","confirm","removeSingle","ContentTable","resources","index","faEye","faPencilAlt","faCopy","Page","params","useParams","useSearchParams","searchParams","setSearchParams","setResource","setHeader","setActions","pageNum","setPageNum","pageLimit","setPageLimit","hasNext","setHasNext","hasPrev","setHasPrev","setPrevPage","setNextPage","setTotalPages","fetchData","num","RenderPagination","prevEllipsis","nextEllipsis","display","Pagination","alignSelf","marginLeft","First","disabled","Prev","Ellipsis","Next","Last","find","r","tmp","el","faPlusCircle","UnauthorizedPage","AppContext","createContext","NotificationBar","show","setShow","myContext","useContext","textDecoration","Badge","pill","bg","Offcanvas","backgroundColor","onHide","scroll","backdrop","keyboard","Title","ToastContainer","notification","Toast","animation","onClose","src","alt","fetchedData","isDefault","isNaN","def","elem","nonDefaultLength","removeDefaultElements","entr","j","splice","subEntr","areEqual","obj1","obj2","k1","k2","FormManager","disabledFields","functionalFields","submitFunction","handleChangesCallback","arrayDeleteCallback","SelectFormRow","val","Row","borderBottomStyle","borderBottomWidth","marginBottom","Col","sm","borderRightStyle","borderRightWidth","Form","Group","Select","Container","fluid","Control","NumericFormRow","StringFormRow","Label","md","ArrayStringFormRow","idx","_k","_v","ArrayObjectFormRow","cloneDeep","EditContentPage","original","setOriginal","navigate","useNavigate","setValues","deleted","setDisabledFields","setMounted","useRef","tmpValues","assign","requestedKeys","evaluateSpecifiers","_key","maintainEmptyElement","specsEntries","resp","fst","path","tmpPtr","editFldTmp","tmpPath","push","tmpOrig","toSend","remove","update","origArr","indexes","removed","statusText","tmpVals","valuesPtr","lastIndexNumber","elements","minDel","Infinity","AddPage","postType","setPostType","file","setFile","contentHeader","setContentHeader","contentBody","setContentBody","contentPlain","setContentPlain","test","temp","addFldTmp","postBody","postFile","FormData","append","Nav","justify","onSelect","Link","borderRadius","borderStyle","borderColor","borderWidth","margin","select_file","accept","label","files","fileReader","FileReader","onloadend","content","result","regex","RegExp","splitted","split","readAsText","overflow","h","AddExperimentPage","protocols","setProtocols","setProtocol","handleProtocolChange","selectedProtocol","protocol","tmpDisabled","App","setNotifications","prev","fetchTypes","notificationsSettings","element","Provider","ReactDOM","render","StrictMode","getElementById"],"mappings":"gfAkDeA,EAlDS,CACtBC,SAAU,cACVC,SAAU,WACVC,OAAQ,iBACRC,YAAa,mBACbC,OAAQ,YACRC,SAAU,SACVC,QAAS,aACTC,KAAM,QACNC,kBAAmB,4BACnBC,MAAO,YACPC,cAAe,YACfC,aAAc,qBAEdC,UAAW,iBAGXC,MAAO,YACPC,oBAAqB,2BACrBC,oBAAqB,wBACrBC,kBAAmB,kCACnBC,WAAY,0BAGZC,WAAY,oDACZC,kBACE,0GACFC,mBACE,sHACFC,uBAAuB,0KACvBC,eAAgB,6BAChBC,qBAAsB,yBAGtBC,MAAO,SACPC,YACE,0PAGFC,OAAQ,QACRC,OAAQ,UACRC,MAAO,SACPC,OAAQ,OAGRC,YAAa,gBACbC,kBAAmB,+CACnBC,gBAAiB,oBCIJC,EAnDS,CACtBjC,SAAU,WACVC,SAAU,WACVC,OAAQ,SACRC,YAAa,iBAEbC,OAAQ,SACRC,SAAU,WACVC,QAAS,eACTC,KAAM,OACNC,kBAAmB,0BACnBC,MAAO,QACPC,cAAe,gBACfC,aAAc,eAEdC,UAAW,YAEXC,MAAO,QACPC,oBAAqB,uBACrBC,oBAAqB,uBACrBC,kBAAmB,qBACnBC,WAAY,aAGZC,WAAY,kCACZC,kBACE,mFACFC,mBACE,uGACFC,uBACE,oLACFC,eAAgB,wBAChBC,qBAAsB,wBAGtBC,MAAO,SACPC,YACE,mLAGFC,OAAQ,SACRC,OAAQ,SACRC,MAAO,QACPC,OAAQ,SAGRC,YAAa,eACbC,kBAAmB,uCACnBC,gBAAiB,mBC9CbE,EAAQC,EAAQ,KAASC,QAEzBC,EAAQF,EAAQ,KAEhBG,EAAWJ,EAAMK,OAAO,CAC5BC,WAAY,IAAIH,EAAMI,MAAM,CAE1BC,oBAAoB,MAIbC,EAAsB,CAC/BC,iBAAkB,SAACC,GAAU,EAC7BC,mBAAoB,SAACC,GAAS,EAC9BC,mBAAoB,WAAQ,GAIvB,SAASpB,EAAM5B,EAAUC,EAAUC,GACxC,IAAM+C,EAAO,CACXjD,SAAS,GAAD,OAAKA,GACbC,SAAS,GAAD,OAAKA,GACbC,OAAO,GAAD,OAAKA,IAEPgD,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAeC,MAIbC,EAAaC,EAAU,SAE7B,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BpB,EACGqB,KAAKL,EAAYL,EAAMC,GACvBU,MAAK,SAACC,GACLC,aAAaC,QAAQ,cAAeF,EAASG,KAAKC,OAClDH,aAAaC,QACX,8BACAF,EAASG,KAAKE,uBAEhBJ,aAAaC,QAAQ,iBAAkBF,EAASG,KAAKG,KAAKnE,UAC1D8D,aAAaC,QAAQ,kBAAmBF,EAASG,KAAKG,KAAKC,MAC3DN,aAAaC,QAAQ,oBAAqB7D,GAC1C4D,aAAaC,QACX,oBACA,IAAIM,MAAOC,UAAUC,YAGvBd,EAAQI,EACT,IACAW,OAAM,SAACC,GACNf,EAAOe,EACR,GACJ,GACF,CA2FM,SAAeC,EAAtB,oC,4CAAO,WACLC,EACAC,GAFK,mCAAAC,EAAA,6DAGLC,EAHK,+BAGc,CAAC,OAGNC,KAFdd,EAJK,oCAIGc,KAEiBd,EAAQZ,KAC3BC,EAAaC,EAAU,IAAMoB,EAAgB,QAEnDK,QAAQC,IAAI,aAAe3B,GAErB4B,EAAQ,CACZ,eAAgB,sBAChB,gBAAiB,WACjB9B,cAAea,GAGjBkB,OAAOC,QAAQN,GAAkBO,SAAQ,YAAa,IAAD,mBAAVC,EAAU,KAAPC,EAAO,KACnDL,EAAMI,GAAKC,CACZ,IACKrC,EAAU,CACdC,QAAS+B,GArBN,kBAwBE,IAAI1B,SAAQ,SAACC,EAASC,GAC3BpB,EACGqB,KAAKL,EAAYsB,EAAU1B,GAC3BU,MAAK,SAACC,GACLlB,EAAoBC,iBAAiB,CACnC4C,KAAM,OACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,+BAAiChB,IAGxClB,EAAQ,CAAEI,SAAUA,GACrB,IACAW,OAAM,SAACC,GACN9B,EAAoBC,iBAAiB,CACnC4C,KAAM,QACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,kCAAoChB,IAE3CjB,EAAO,CAAEe,MAAOA,GACjB,GACJ,KA5CI,2C,wBA+CA,SAAemB,EAAtB,oC,4CAAO,WAA4BjB,EAAe1B,GAA3C,+BAAA4B,EAAA,kEACSE,KADwCd,EAAjD,oCAAyDc,KACrCd,EAAQZ,KAC3BC,EAAaC,EAAU,IAAMoB,EAAgB,IAEnDK,QAAQC,IAAI,SAAW3B,GAEjBJ,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAea,IAGnBe,QAAQC,IAAI,CAAEY,OAAQ3C,EAASD,KAAMA,EAAMgB,MAAOA,IAb7C,kBAcE,IAAIT,SAAQ,SAACC,EAASC,GAC3BpB,EACGqB,KAAKL,EAAYL,EAAMC,GACvBU,MAAK,SAACC,GACLlB,EAAoBC,iBAAiB,CACnC4C,KAAM,OACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,uCAAyChB,IAGhDlB,EAAQ,CAAEI,SAAUA,GACrB,IACAW,OAAM,SAACC,GACN9B,EAAoBC,iBAAiB,CACnC4C,KAAM,QACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,0CAA4ChB,IAEnDjB,EAAO,CAAEe,MAAOA,GACjB,GACJ,KAlCI,2C,wBAqCA,SAAeqB,EAAtB,sC,4CAAO,WAA2BnB,EAAe1B,EAAMF,GAAhD,+BAAA8B,EAAA,6DAAoDZ,EAApD,oCAA4Dc,EAC3DzB,EAAaC,EAAU,IAAMoB,EAAgB,IAAM5B,OAC3CgC,IAAVd,IAAqBA,EAAQZ,KAEjC2B,QAAQC,IAAI,QAAU3B,GAEhBJ,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAea,IAVd,kBAaE,IAAIT,SAAQ,SAACC,EAASC,GAC3BpB,EACGyD,IAAIzC,EAAYL,EAAMC,GACtBU,MAAK,SAACC,GACLlB,EAAoBC,iBAAiB,CACnC4C,KAAM,OACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IACE,sCACAhB,EACA,SACA5B,EACA,WACAiD,KAAKC,UAAUhD,KAGnBQ,EAAQ,CAAEI,SAAUA,GACrB,IACAW,OAAM,SAACC,GACN9B,EAAoBC,iBAAiB,CACnC4C,KAAM,QACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IACE,uCACAhB,EACA,SACA5B,EACA,WACAiD,KAAKC,UAAUhD,GACf,KACAwB,EAAMyB,UAGVxC,EAAO,CAAEe,MAAOA,GACjB,GACJ,KAhDI,2C,wBAmDA,SAAe0B,EAAtB,oC,4CAAO,WAA8BxB,EAAe5B,GAA7C,+BAAA8B,EAAA,6DAAiDZ,EAAjD,oCAAyDc,EAC1DzB,EAAaC,EAAU,IAAMoB,OACnBI,IAAVd,IAAqBA,EAAQZ,UACtB0B,IAAPhC,IACFO,GAAc,IAAMP,GAEtBiC,QAAQC,IAAI,WAAa3B,GAGrBJ,EAAU,CACZC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAea,IAbd,kBAiBE,IAAIT,SAAQ,SAACC,EAASC,GAC3BpB,EACG8D,OAAO9C,EAAYJ,GACnBU,MAAK,SAACC,QACMkB,IAAPhC,EACFJ,EAAoBC,iBAAiB,CACnC4C,KAAM,OACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,qBAAuB5C,EAAK,cAAgB4B,IAGnDhC,EAAoBC,iBAAiB,CACnC4C,KAAM,OACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IAAK,8BAAgChB,IAGzClB,EAAQ,CAAEI,SAAUA,GACrB,IACAW,OAAM,SAACC,GACN9B,EAAoBC,iBAAiB,CACnC4C,KAAM,QACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IACE,4BACA5C,EACA,cACA4B,EACA,KACAF,EAAMyB,UAEe,MAArBzB,EAAM4B,YAER1D,EAAoBC,iBAAiB,CACnC4C,KAAM,QACNC,MAAM,IAAIpB,MAAOqB,eACjBC,IACE,mEACAlB,EAAMyB,UAIZxC,EAAO,CAAEe,MAAOA,GACjB,GACJ,KA7DI,2C,wBAgEA,SAAe6B,EAAtB,kC,4CAAO,WAA2B3B,GAA3B,iCAAAE,EAAA,6DAA0C0B,EAA1C,+BAA+C,CAAC,EAAGtC,EAAnD,uBACDuC,EAAMjD,EAAU,IAAMoB,EAAgB,SAC5BI,IAAVd,IAAqBA,EAAQZ,KAG/BmD,OADgBzB,IAAdwB,EAAGE,OACCD,EAAIE,OAAO,WAAaH,EAAGE,QAE3BD,EAAIE,OAAO,iBAEF3B,IAAbwB,EAAGI,QACLH,EAAMA,EAAIE,OAAO,UAAYH,EAAGI,aAElB5B,IAAZwB,EAAGK,OACLJ,EAAMA,EAAIE,OAAO,SAAWH,EAAGK,OAGjC5B,QAAQC,IAAI,QAAUuB,GAElBtD,EAAU,CACZC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAea,GAGjB4C,MAAM,GAzBH,kBA2BE,IAAIrD,SAAQ,SAACC,EAASC,GAC3BpB,EACGwE,IAAIN,EAAKtD,GACTU,MAAK,SAACC,GACLJ,EAAQ,CACNI,SAAUA,EACVkD,KAAMlD,EAASG,KAAK+C,KACpBC,UAAWnD,EAASG,KAAKgD,UACzBL,MAAO9C,EAASG,KAAK2C,MACrBM,WAAYpD,EAASG,KAAKiD,WAC1BL,KAAM/C,EAASG,KAAK4C,KACpBM,cAAerD,EAASG,KAAKkD,cAC7BC,YAAatD,EAASG,KAAKmD,YAC3BC,YAAavD,EAASG,KAAKoD,YAC3BC,SAAUxD,EAASG,KAAKqD,SACxBC,SAAUzD,EAASG,KAAKsD,UAE3B,IACA9C,OAAM,SAACC,GAWNf,EAAO,CAAEe,MAAOA,GACjB,GACJ,KA1DI,4C,wBA8DP,SAASpB,IACP,OAAOS,aAAayD,QAAQ,cAC7B,CCtZM,SAAeC,EAAtB,kC,4CAAO,WAA8BC,GAA9B,iBAAA5C,EAAA,6DACC0B,EAAK,CAAEE,OAAQT,KAAKC,UAAU,CAAEwB,QAASA,KAD1C,kBAKenB,EAAY,eAAgBC,GAL3C,mBAMKS,UAAY,GANjB,0CAQM,GARN,cAWKT,EAAK,CAAEE,OAAQT,KAAKC,UAAU,CAAEyB,SAAUD,KAX/C,UAYiBnB,EAAY,UAAWC,GAZxC,oBAcOS,UAAY,GAdnB,2CAgBQ,GAhBR,kCAiBa,GAjBb,iEAoBHhC,QAAQC,IAAI,2BACZD,QAAQC,IAAR,MArBG,mBAsBI,GAtBJ,2D,sBCJA,IAAM1B,EAAU,uBAGVoE,EAAe,4BAIfC,EAAY,GAIZC,EAAQ,CACrBA,MAAiB,CAAC,WAAY,OAAQ,WACtCA,KAAgB,CAAC,MAAO,WACxBA,SAAoB,CAAC,MAAO,WAC5BA,QAAmB,CAAC,MAAO,OAAQ,WACnCA,UAAqB,CAAC,MAAO,cAAe,WAC5CA,YAAuB,CAAC,MAAO,cAAe,WAAY,YAG7CC,EAAa,CAC1BA,SAAyB,CAAEC,IAAK,eAAgBC,QAAS,WACzDF,KAAqB,CAAEC,IAAK,WAAYC,QAAS,WACjDF,QAAwB,CAAEC,IAAK,cAAeC,QAAS,YAG1CC,EAAc,CAC3BA,SAA0B,CAAC,OAAQ,OAAQ,YAAa,UACxDA,MAAuB,CAAC,OAAQ,UAChCA,KAAsB,CAAC,OAAQ,OAAQ,UACvCA,QAAyB,CAAC,OAAQ,OAAQ,UAC1CA,UAA2B,CAAC,OAAQ,UACpCA,YAA6B,CAAC,OAAQ,WAGzBC,EAAa,CAC1BA,MAAsB,CAAC,WAAY,OAAQ,UAAW,YAAa,UACnEA,SAAyB,CACvB,CAAEC,MAAO,CAAC,OAAQ,OAAQ,OAAQ,cAClC,QAEFD,KAAqB,CAAC,QACtBA,QAAwB,CAAC,MAAO,WAAY,OAAQ,WACpDA,UAA0B,CAAC,MAAO,cAAe,WAAY,UAC7DA,YAA4B,CAC1B,MACA,cACA,WACA,UACA,aAUWE,EAAa,CAC1BA,SAAyB,CACvBL,IAAK,GACLI,MAAO,CAAC,CAAE3C,KAAM,GAAIpB,KAAM,GAAIiE,KAAM,GAAIC,UAAWC,MACnDC,KAAM,CAAC,KAETJ,KAAqB,CACnBI,KAAM,CAAC,KAETJ,QAAwB,CAAEK,WAAY,GAAID,KAAM,CAAC,MASpCE,EAAY,CACzBA,QAAuB,CACrBzE,MAAO,GACP8D,IAAK,GACLY,aAAc,GACdC,QAAS,GACTC,MAAO,GACPC,MAAO,GACPC,eAAgB,GAChBC,eAAgB,GAChBC,aAAc,IAEhBP,KAAoB,CAAEX,IAAK,GAAIS,KAAM,CAAC,KACtCE,SAAwB,CACtBX,IAAK,GACLI,MAAO,CAAC,CAAE3C,KAAM,GAAIpB,KAAM,GAAIiE,KAAM,GAAIC,UAAWC,MACnDC,KAAM,CAAC,KAETE,MAAqB,CAAE1I,SAAU,GAAIC,SAAU,GAAImE,KAAM,IAEzDsE,QAAuB,CACrBX,IAAK,GACLL,SAAU,CAAC,KAGbgB,UAAyB,CACvBX,IAAK,GACLmB,YAAa,GACbC,SAAU,CACR,CACE3D,KAAM,GACN0D,YAAa,GACb9E,KAAM,KAGVgF,OAAQ,CACN,CACE5D,KAAM,GACN0D,YAAa,GACbG,OAAQ,CAAC,CAAE7D,KAAM,GAAI0D,YAAa,GAAI9E,KAAM,QAMlDsE,YAA2B,CACzBX,IAAK,GACLmB,YAAa,GAEbI,MAAO,KAOIC,EAAsB,CAAC,EACpCA,EAAmB,SAAe,CAChCxB,IAAK,CAAE3D,KAAM,UAAWoF,OAAQhC,GAChCW,MAAO,CAAE/D,KAAM,UAAWoF,OAAQhC,IAI7B,IAAMiC,EAAW,CACxBA,KAAmB,CAAC,OAAQ,QAC5BA,SAAuB,CAAC,OAAQ,QAChCA,QAAsB,CAAC,QACvBA,MAAoB,CAAC,OAAQ,QAC7BA,QAAsB,CAAC,OAAQ,QAC/BA,UAAwB,CAAC,OAAQ,QACjCA,YAA0B,CAAC,OAAQ,SAGtBC,EAAmB,CAAC,ECrGlB,SAASC,IACtB,IAAIC,EAAM9F,aAAayD,QAAQ,kBAC/B,OAAyB,IAArBK,EAAUiC,OACL5H,GAEgB,IAArB2F,EAAUiC,SACZD,EAAMhC,EAAU,IAKN,OAARgC,EACK7J,EAGG,OAAR6J,EACK3H,EAIkC,OAAvC6H,UAAUzJ,SAAS0J,UAAU,EAAG,GAC3BhK,GAGL+J,UAAUzJ,SAAS0J,UAAU,EAAG,GAC3B9H,GAKV,CDwEDyH,EAAgB,MAAY,CAAEtF,KAAM,YAAa4F,OAAQ,mBACzDN,EAAgB,QAAc,CAC5BO,wBAAyB,gC,yBEtJdC,EAAmB,WAC9B,SAASC,EAAmB9J,GAC1ByD,aAAaC,QAAQ,iBAAkB1D,GACvC+J,OAAOC,SAASC,QACjB,CAED,OACE,gCACGX,IAAStJ,SACV,gCACE,cAACkK,EAAA,EAAD,CAAQC,QAAQ,eAAeC,QAAS,kBAAMN,EAAmB,KAAzB,EAAxC,iBAGA,cAACI,EAAA,EAAD,CAAQC,QAAQ,eAAeC,QAAS,kBAAMN,EAAmB,KAAzB,EAAxC,sBAOP,EC2GYO,EA5HQ,WAEnB,MAAwBC,mBAAS,IAAjC,mBAAOxG,EAAP,KAAayG,EAAb,KACA,EAAsBD,mBAAS,IAA/B,mBAAOE,EAAP,KAAYC,EAAZ,KACA,EAA4BH,mBAAS,IAArC,mBAAOzK,EAAP,KAAe6K,EAAf,KACA,EAA4BJ,oBAAS,GAArC,mBAAOK,EAAP,KAAeC,EAAf,KACA,EAAsBN,mBAAS,IAA/B,mBAAOhF,EAAP,KAAYuF,EAAZ,KANyB,4CAQzB,WAA0BC,GAA1B,SAAAtG,EAAA,6DACEsG,EAAEC,iBADJ,kBAIsBxJ,EAAMuC,EAAM0G,EAAK3K,GAJvC,eAKmB,IAAX8K,EAAiBlH,aAAaC,QAAQ,kBAAmB,QACxDD,aAAaC,QAAQ,kBAAmB,UAC7CqG,OAAOC,SAASgB,QAAQ,KAP5B,gDASIrG,QAAQC,IAAI,CAAER,MAAO,KAAMZ,SAASG,OACpCkH,EAAO,KAAMrH,SAASG,KAAKkC,QAAU,MAAQ,KAAMrC,SAASG,KAAKsH,SAVrE,0DARyB,sBAkCzB,OACE,sBAAKC,UAAU,YAAf,UACE,sBAAKA,UAAU,gBAAf,UACE,qBAAKA,UAAU,gBAAf,uBACA,uBACA,qBAAKA,UAAU,mBAAf,gDAED3D,EAAUiC,OAAS,GAClB,qBAAK0B,UAAU,mBAAf,SACE,cAAC,EAAD,MAIJ,uBACA,uBACA,sBAAKA,UAAU,gBAAf,UACE,6BAAK5B,IAAS/H,QACd,uBAAM2J,UAAU,eAAeC,SAnDZ,4CAmDnB,UACE,sBAAKD,UAAU,eAAf,UACE,gCAAQ5B,IAAS3J,WACjB,uBACEoE,KAAK,OACLrB,GAAG,WACH0I,YAAa9B,IAAS7I,oBACtB4K,SApCZ,SAA0BC,GACxBf,EAAQe,EAAMC,OAAOC,MACtB,OAqCO,sBAAKN,UAAU,eAAf,UACE,gCAAQ5B,IAAS1J,WACjB,uBACEmE,KAAK,WACLrB,GAAG,WACH0I,YAAa9B,IAAS5I,oBACtB2K,SAzCZ,SAAyBC,GACvBb,EAAOa,EAAMC,OAAOC,MACrB,OA0CO,sBAAKN,UAAU,eAAf,UACE,gCAAQ5B,IAASzJ,SACjB,uBACEkE,KAAK,OACLrB,GAAG,SACH0I,YAAa9B,IAAS3I,kBACtB0K,SA9CZ,SAA4BC,GAC1BZ,EAAUY,EAAMC,OAAOC,MACxB,OA+CO,sBAAKN,UAAU,eAAf,UACE,gCAAQ5B,IAASxJ,cACjB,uBACEiE,KAAK,WACLrB,GAAG,SACHwI,UAAU,iBACVO,QAASd,EACTU,SAAU,SAACP,GACTF,EAAUE,EAAES,OAAOE,QACpB,OAGL,qBAAKP,UAAU,yBAAf,SACE,cAAChB,EAAA,EAAD,CAAQnG,KAAK,SAASoG,QAAQ,UAA9B,SACGb,IAASjI,WAId,uBACA,qBAAKqK,MAAO,CAAEC,MAAO,OAArB,SAA+BrG,IAC/B,uBACA,qBAAK4F,UAAU,eAAf,SACE,cAAC,IAAD,CAASU,GAAE,eAAX,SACE,eAAC1B,EAAA,EAAD,CAAQC,QAAQ,kBAAkB0B,KAAK,KAAvC,UACGvC,IAAS1I,WACV,mBACEsK,UAAU,oBACV,cAAY,OACZY,MAAO,MACPJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,sBAU5B,EC7EYC,G,OAhDQ,WAEnB,OADAC,qBAAU,WAAQ,IAEhB,sBAAKlB,UAAU,OAAf,UACE,wBAAQA,UAAU,cAAlB,SAAiC5D,IACjC,sBAAM4D,UAAU,eAAhB,SACE,qBAAKA,UAAU,YAAf,SACE,qBAAKA,UAAU,WAAf,SACE,sBAAKA,UAAU,YAAf,UACG5B,IAASzI,WACV,uBACA,uBACCyI,IAASxI,kBACV,uBACA,uBACCwI,IAASvI,mBACV,uBACA,uBACCuI,IAAStI,uBACV,uBACA,uBACA,mBACEqL,KAAK,gDACLd,OAAO,SACPe,IAAI,sBACJR,MAAM,gDAJR,SAMGxC,IAASrI,iBAEZ,uBACA,uBACA,mBACEoL,KAAK,6CACLd,OAAO,SACPe,IAAI,sBACJR,MAAM,6CAJR,SAMGxC,IAASpI,uBAEZ,kCAOb,GCtBYqL,G,OAzBY,WACvB,OACE,qBAAKrB,UAAU,gBAAf,SACE,qBAAKA,UAAU,WAAf,SACE,sBAAKA,UAAU,YAAf,UACG5B,IAASnI,MACV,uBACA,uBACCmI,IAASlI,YACV,uBACA,uBACA,mBACEiL,KAAK,6CACLd,OAAO,SACPe,IAAI,sBACJR,MAAM,6CAJR,SAMGxC,IAASpI,6BAMrB,G,0BCHDsL,IAAYC,QAAQC,IAClBC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,MAGF,IAmOaC,GAnOU,WACrB,MAAgC7C,oBAAkB,GAAlD,mBAAO8C,EAAP,KAAiBC,EAAjB,KAEA,EAAgC/C,qBAAhC,mBAAO3K,EAAP,KAAiB2N,EAAjB,KACA,EAAwBhD,qBAAxB,mBAAOpK,EAAP,KAAaqN,EAAb,KACA,EAA4BjD,qBAA5B,mBAAOzK,EAAP,KAAe6K,EAAf,KACA,EAAkCJ,qBAAlC,mBAAOkD,EAAP,KAAkBC,EAAlB,KACA,EAAoCnD,qBAApC,mBAAOoD,EAAP,KAAmBC,EAAnB,KACA,EAAoCrD,qBAApC,mBAAOsD,EAAP,KAAmBC,EAAnB,KACA,EAAsCvD,mBAAiB,SAAvD,mBAAOwD,EAAP,KAAoBC,EAApB,KAsDA,SAASC,IACP,IAAIC,EACJ,QAAkBvJ,IAAd8I,EAAyB,CAC3B,IAAMU,EAAiBzK,aAAayD,QAAQ,oBACrB,OAAnBgH,GACFD,EAAKE,SAASD,GAEdT,EAAaU,SAASD,KAEtBD,EAAKjK,KAAKoK,KAEb,MACCH,EAAKT,EAEP,IAGIa,GAFYJ,EAwBlB,WACE,IAAIK,EACJ,QAAmB5J,IAAfgJ,EAA0B,CAC5B,IAAMa,EAAuB9K,aAAayD,QACxC,+BAE2B,OAAzBqH,GACFD,EAAMC,EACNZ,EAAcY,IAEdD,EAAM,IAET,MACCA,EAAMZ,EAER,OAAIY,EAAIE,SAAS,KACqB,GAA7BL,SAASG,EAAIG,MAAM,GAAI,IAAW,GAAK,IACrCH,EAAIE,SAAS,KACc,GAA7BL,SAASG,EAAIG,MAAM,GAAI,IAAW,KAChCH,EAAIE,SAAS,KACc,IAA7BL,SAASG,EAAIG,MAAM,GAAI,IAMjC,CAnDkBC,GAGa1K,KAAKoK,OAAS,IAU5C,GARIC,EAAe,IACE,SAAfT,GRzDH,WACL,IAAM/K,EAAU,CACdC,QAAS,CACP,eAAgB,mBAChB,gBAAiB,WACjBC,cAAeC,MAIbC,EAAaC,EAAU,SAE7B,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BpB,EACGyD,IAAIzC,EAAY,CAAC,EAAGJ,GACpBU,MAAK,SAACC,GACLC,aAAaC,QAAQ,cAAeF,EAASG,KAAKC,OAClDH,aAAaC,QACX,oBACA,IAAIM,MAAOC,UAAUC,YAGvBd,EAAQI,EACT,IACAW,OAAM,SAACC,GACNf,EAAOe,EACR,GACJ,GACF,CQ+BOuK,GAAepL,MAAK,WAClBkK,OAAa/I,EAEd,IAGD2J,GAAgB,EAIlB,OAHA5K,aAAamL,QACbb,EAAezE,IAAS3H,sBACxBoI,OAAOC,SAASgB,QAAQ,KAI1B,IAAM6D,EAAOC,KAAKC,MAAMV,EAAe,IACjCW,EAAOF,KAAKC,MAAMV,EAAe,IACvCN,EAAec,EAAO,OAAS,IAAMG,GAAMP,OAAO,GACnD,CA8BD,OAvHArC,qBAAU,WACR,IAAMzM,EAAW8D,aAAayD,QAAQ,kBAChChH,EAAOuD,aAAayD,QAAQ,mBAC5BrH,EAAS4D,aAAayD,QAAQ,qBAC9BsG,EAAY/J,aAAayD,QAAQ,oBACjC+H,EAAkBxL,aAAayD,QAAQ,+BACvC0G,EAAanK,aAAayD,QAAQ,mBACxCoG,EAAyB,OAAb3N,EAAoBA,EAAW,IAC3C4N,EAAiB,OAATrN,EAAgBA,EAAO,IAC/BwK,EAAqB,OAAX7K,GAA8B,KAAXA,EAAgBA,EAAS,KACtD8N,EAAkC,OAApBsB,EAA2BA,EAAkB,QAC3DpB,EAA6B,OAAfD,EAAsBA,EAAa,UACjDH,EAA2B,OAAdD,EAAqBW,SAASX,GAAaxJ,KAAKoK,OAE7Dc,YAAW,WACTlB,GACD,GAAE,IACJ,GAAE,CAACF,IAuGF,sBAAK5C,UAAU,UAAf,UACE,cAAChB,EAAA,EAAD,CAAQgB,UAAU,iBAAiBd,QAAS,kBAAMiD,GAAaD,EAAnB,EAA5C,SACGA,EACC,mBAAGlC,UAAU,cAAc,cAAY,SAEvC,mBAAGA,UAAU,aAAa,cAAY,WAG1C,uBACA,sBAAKA,UAAU,eAAf,UACE,gCACE,+BACG5B,IAASrJ,QAAU,IACpB,4BAAIN,OAEN,+BACG2J,IAASpJ,KAAO,IA/GZ,UAATA,EAEA,mBAAGgL,UAAU,iBAAiB,cAAY,OAAOY,MAAM,UAEvC,aAAT5L,EAEP,mBACEgL,UAAU,sBACV,cAAY,OACZY,MAAM,aAGQ,YAAT5L,EAEP,mBAAGgL,UAAU,iBAAiB,cAAY,OAAOY,MAAM,YAEvC,aAAT5L,EAEP,mBAAGgL,UAAU,iBAAiB,cAAY,OAAOY,MAAM,aAIvD,mBAAGZ,UAAU,aAAa,cAAY,OAAO,aAAW,YA4FtD,+BACG5B,IAASzJ,OAAS,IACnB,4BAAIA,OAEN,6BACGiO,IAAgBxE,IAAS3H,gBACtB2H,IAASnJ,kBAAoB2N,EAC7BA,IAEN,+BACGxE,IAASxJ,YACT,KAEe,SAAf8N,EACC,mBACE1C,UAAU,cACVxI,GAAG,oBACH,cAAY,OACZgJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,SAIjB,mBACEf,UAAU,cACVxI,GAAG,oBACH,cAAY,OACZgJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,eAOvB,uBAEA,cAAC/B,EAAA,EAAD,CAAQC,QAAQ,iBAAiBC,QAAS,kBAhK9C3G,aAAamL,aACbO,SAASnF,SAASgB,QAAQ,IA+JoB,EAA1C,SACG1B,IAAS9H,SAEX+F,EAAUiC,OAAS,GAClB,eAAC,IAAM4F,SAAP,WACE,uBACA,6BACE,cAAC,EAAD,YAKR,uBACA,qBAAKlE,UAAS,0BAAqBkC,EAAW,SAAW,IAAzD,SACE,sBAAKlC,UAAU,gBAAf,UACE,qBAAKA,UAAU,eAAf,SAA+B5B,IAASlJ,QACxC,uBACC0E,OAAOuK,KAAK7H,GAAO8H,KAAI,SAACrK,GACvB,OACE,cAAC,IAAD,CACE2G,GAAI,IAAM3G,EACViG,UAAW,SAACqE,GAAD,OAAcA,EAAQC,SAAW,SAAW,EAA5C,EAGXpF,QAAS,kBAAMiD,GAAY,EAAlB,EALX,SAOGpI,GAHIA,EAMV,WAKV,E,uCC9OD,SAASwK,GAAcC,GACrB,IAAMC,EAAS,CAAC,EA2BhB,OA1BAhL,QAAQC,IAAI,CAAE8K,UACd7H,EAAW6H,EAAME,SAASN,KAAI,SAACrK,GAC7BN,QAAQC,IAAIK,EAAE4K,cAAgB/K,QAC1BG,EAAE4K,cAAgB/K,OACpBA,OAAOuK,KAAKpK,GAAGqK,KAAI,SAACQ,GACdC,MAAMC,QAAQN,EAAMO,SAASH,IAC/BH,EAAOG,GAAQJ,EAAMO,SAASH,GAAMR,KAAI,SAACxE,GACvC,IAAMoF,EAAM,CAAC,EAIb,OAHAjL,EAAE6K,GAAMR,KAAI,SAACa,GACXD,EAAIC,GAAKrF,EAAEqF,EACZ,IACMD,CACR,IAEDP,EAAOG,GAAQJ,EAAMO,SAASH,EAEjC,IAEGhL,OAAOuK,KAAKK,EAAMO,UAAUG,SAASnL,KACvC0K,EAAO1K,GAAKyK,EAAMO,SAAShL,GAGhC,IAEDN,QAAQC,IAAI,CAAE+K,WAEPU,GAAWV,EACnB,CAED,SAASU,GAAWC,GAClB,OACE,cAACC,GAAA,EAAD,CAAWC,iBAAkB,EAAG3E,KAAK,KAArC,SACG4E,IAAMC,SAASC,QACd7L,OAAOC,QAAQuL,GAAMhB,KAAI,WAAesB,GAAO,IAAD,mBAAnBC,EAAmB,KAAdrF,EAAc,KAC5C,OACE,eAAC+E,GAAA,EAAUO,KAAX,CAAgBC,SAAUH,EAA1B,UACE,cAACL,GAAA,EAAUS,OAAX,UACE,4BAAIH,MAEN,cAACN,GAAA,EAAUU,KAAX,UACGzF,aAAiB1G,OAChBiL,MAAMC,QAAQxE,QACC9G,IAAb8G,EAAM,GACJ1G,OAAOoM,OAAO1F,EAAM,IAAI2F,MACtB,SAACrG,GAAD,OAAOA,aAAahG,MAApB,IAEA2L,IAAMC,SAASC,QACbnF,EAAM8D,KAAI,SAAC8B,EAAQR,GACjB,OACE,cAACL,GAAA,EAAD,UACE,eAACA,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,eAACR,GAAA,EAAUS,OAAX,WACGH,EADH,IACQ,kCAAKD,EAAL,UAER,cAACL,GAAA,EAAUU,KAAX,UACGZ,GAAWe,SAKrB,KAED5F,EAAM,aAAc1G,OACtB,eAACuM,GAAA,EAAD,CAAOC,YAAU,EAACC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAAC5F,KAAK,KAA9C,UACE,gCACE,6BACG4E,IAAMC,SAASC,QACd7L,OAAOuK,KAAK7D,EAAM,IAAI8D,KAAI,SAACxE,GACzB,OAAO,6BAAKA,GACb,SAIP,gCACG2F,IAAMC,SAASC,QACdnF,EAAM8D,KAAI,SAACY,GACT,OACE,6BACGO,IAAMC,SAASC,QACd7L,OAAOoM,OAAOhB,GAAKZ,KAAI,SAACpK,GACtB,OAAO,6BAAKA,GACb,MAIR,UAKP,KAAOsG,EAAMkG,KAAK,OAAS,KAG7B,MAGF,YAEUhN,IAAV8G,GAAgC,MAATA,EACzB,qCAEAA,MAKT,MAIR,CAEc,SAASmG,GAAcjC,GACpC,MAAsBpF,wBAAS5F,GAA/B,mBAAOkN,EAAP,KAAYC,EAAZ,KACAzF,qBAAU,WAET,GAAE,CAACsD,IAEJ,IAAMoC,OACIpN,IAARkN,EACE,eAACG,GAAA,EAAD,CACErP,GAAG,0BACHgJ,MAAO,CAAEK,MAAO,OAAWiG,SAAU,SAFvC,UAIE,cAACD,GAAA,EAAQf,OAAT,CAAgBiB,GAAG,KAAnB,2BACA,cAACF,GAAA,EAAQd,KAAT,UACE,cAACxB,GAAD,CAAeQ,SAAU2B,EAAKhC,QAASF,EAAME,eAIjD,cAACmC,GAAA,EAAD,CAASrP,GAAG,0BAA0BgJ,MAAO,CAAEK,MAAO,QAAtD,SACE,eAACgG,GAAA,EAAQf,OAAT,CAAgBiB,GAAG,KAAnB,oBACS,cAACF,GAAA,EAAQd,KAAT,SAIf,MAAqB,SAAjBvB,EAAMwC,OAEN,cAACC,GAAA,EAAD,CACEC,QAAQ,QACRC,UAAU,OACVC,QAASR,EACTS,WAAW,EAJb,SAME,cAACrI,EAAA,EAAD,CACEC,QAAQ,OACR0B,KAAK,KACLzB,QAAS,WACPyH,EAAOnC,EAAM8C,WAAW9C,EAAMhN,IAC/B,EALH,SAOE,mBACEwI,UAAU,YACV,cAAY,OACZY,MAAM,OACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAOA,WAAjBwD,EAAMwC,OAEN,cAAChI,EAAA,EAAD,CACEC,QAAQ,OACR0B,KAAK,KACLzB,QAAO,sBAAE,sBAAA5F,EAAA,0DACQuF,OAAO0I,QAAQ,mBAAqB/C,EAAMhN,GAAK,KADvD,0CAIoBoD,EAAe4J,EAAME,QAASF,EAAMhN,IAJxD,OAM6B,KAN7B,OAMUc,SAASmG,QACpB+F,EAAMgD,aAAahD,EAAMhN,IAPxB,gDAUHiC,QAAQC,IAAR,MAVG,yDAHX,SAkBE,mBACEsG,UAAU,cACV,cAAY,OACZY,MAAM,SACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,SAME,SAAjBwD,EAAMwC,OAEN,cAAC,IAAD,CAAStG,GAAI,SAAW8D,EAAME,QAAU,IAAMF,EAAMhN,GAApD,SACE,cAACwH,EAAA,EAAD,CAAQC,QAAQ,OAAO0B,KAAK,KAA5B,SACE,mBACEX,UAAU,mBACV,cAAY,OACZY,MAAM,OACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAOA,cAAjBwD,EAAMwC,OAEN,cAAC,IAAD,CAAStG,GAAI,QAAU8D,EAAME,QAAhB,UAA2CF,EAAMhN,GAA9D,SACE,cAACwH,EAAA,EAAD,CAAQC,QAAQ,OAAO0B,KAAK,KAA5B,SACE,mBACEX,UAAU,aACV,cAAY,OACZY,MAAM,YACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAQd,uBACR,CCjQc,SAASyG,GAAajD,GAMnC,YAAqBhL,IAAjBgL,EAAMlK,aAA4Cd,IAApBgL,EAAMkD,WAEpClD,EAAMlK,OAAO4K,SAAS,iBAAgC1L,IAAlBgL,EAAM/H,QADrC,0CAIP,8BACE,eAAC0J,GAAA,EAAD,CAAOC,YAAU,EAACC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAAxC,UACE,gCACE,6BACGhB,IAAMC,SAASC,QACdjB,EAAMlK,OAAO8J,KAAI,SAACxE,GAChB,YAAkCpG,IAA9B+C,EAAWiI,EAAME,eACkBlL,IAAjC+C,EAAWiI,EAAME,SAAS9E,GACrB,6BAAKrD,EAAWiI,EAAME,SAAS9E,KACnC,6BAAKA,GACb,MAPI,YAWX,gCACG2F,IAAMC,SAASC,QACdjB,EAAMkD,UAAUtD,KAAI,SAACY,EAAK2C,GACxB,OACE,6BACGpC,IAAMC,SAASC,QACdjB,EAAMlK,OAAO8J,KAAI,SAACxE,GAChB,MAAU,YAANA,EAEA,+BACG4E,EAAM/H,QAAQyI,SAAS,QACtB,cAACuB,GAAD,CACE/B,QAASF,EAAME,QACfsC,OAAO,OACPjN,EAAG4N,EAAQ,QACXnQ,GAAIwN,EAAG,IACPsC,WAAY9C,EAAM8C,aAGpB,GAED9C,EAAM/H,QAAQyI,SAAS,QACtB,cAACuB,GAAD,CACE/B,QAASF,EAAME,QACfsC,OAAO,OACPjN,EAAG4N,EAAQ,QACXnQ,GAAIwN,EAAG,MAIT,GAEDR,EAAM/H,QAAQyI,SAAS,aACtB,cAACuB,GAAD,CACE/B,QAASF,EAAME,QACfsC,OAAO,YACPjN,EAAG4N,EAAQ,aACXnQ,GAAIwN,EAAG,MAGT,GAEDR,EAAM/H,QAAQyI,SAAS,UACtB,cAACuB,GAAD,CACE/B,QAASF,EAAME,QACfsC,OAAO,SACPjN,EAAG4N,EAAQ,UACXnQ,GAAIwN,EAAG,IACPwC,aAAchD,EAAMgD,eAGtB,WAKOhO,IAAXwL,EAAIpF,GACJiF,MAAMC,QAAQE,EAAIpF,IACb,6BAAK,KAAOoF,EAAIpF,GAAG4G,KAAK,OAAS,OACnC,6BAAKxB,EAAIpF,UAHhB,CAID,MAIR,WAMZ,CDlFD0B,IAAYC,QAAQC,IAAIoG,KAAOC,KAAaC,M,qBEJ7B,SAASC,GAAKC,GAC3B,IAAQ3M,EAAS4M,cAAT5M,KACR,EAAwC6M,cAAxC,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAAgChJ,wBAAS5F,GAAzC,mBAAOuL,EAAP,KAAiBsD,EAAjB,KACA,EAA4BjJ,wBAAS5F,GAArC,mBAAOc,EAAP,KAAegO,EAAf,KACA,EAA8BlJ,wBAAS5F,GAAvC,mBAAOiD,EAAP,KAAgB8L,EAAhB,KAEA,EAA8BnJ,mBAAS,GAAvC,mBAAOoJ,EAAP,KAAgBC,EAAhB,KACA,EAAkCrJ,mBAAS,GAA3C,mBAAOsJ,EAAP,KAAkBC,EAAlB,KAEA,EAA8BvJ,qBAA9B,mBAAOwJ,EAAP,KAAgBC,EAAhB,KACA,EAA8BzJ,qBAA9B,mBAAO0J,EAAP,KAAgBC,EAAhB,KAEA,EAAgC3J,qBAAhC,mBAAOtD,EAAP,KAAiBkN,EAAjB,KACA,EAAgC5J,qBAAhC,mBAAOrD,EAAP,KAAiBkN,EAAjB,KAEA,GAAoC7J,qBAApC,qBAAO1D,GAAP,MAAmBwN,GAAnB,MAEAhI,qBAAU,WAER,IAAMiI,EAAS,uCAAG,0CAAA7P,EAAA,6DAAO0B,EAAP,+BAAY,CAAC,EAAb,kBAGSD,EAAYM,EAAML,GAH3B,OAGR1C,EAHQ,OAOdgQ,EAAUhM,EAAMjB,IAChBgN,EAAY/P,EAASkD,WACKhC,IAAtBkD,EAAYrB,IAAqBkN,EAAW7L,EAAYrB,IAE5DwN,EAAWvQ,EAASuD,aACpBkN,EAAWzQ,EAASsD,aAEpBsN,GAAc5Q,EAASoD,YAEvBsN,EAAY1Q,EAASwD,UACrBmN,EAAY3Q,EAASyD,UAjBP,kDAmBdtC,QAAQC,IAAR,MAEA4O,OAAU9O,GACV6O,OAAY7O,GACZqP,OAAWrP,GACXuP,OAAWvP,GACX0P,QAAc1P,GACdwP,OAAYxP,GACZyP,OAAYzP,GA3BE,0DAAH,qDAgCT4P,EACyB,OAA7BjB,EAAa5M,IAAI,QAAmB4M,EAAa5M,IAAI,QAAU,EACjEkN,EAAWW,GAEX,IAAMhO,EAC0B,OAA9B+M,EAAa5M,IAAI,SAAoB4M,EAAa5M,IAAI,SAAW,GACnEoN,EAAavN,GAKb+N,EAHW,CAAE9N,KAAM+N,EAAKhO,MAAOA,IAK5BnC,MAAMQ,QAAQP,MAClB,GAAE,CAAC8O,EAAQ3M,EAAM8M,IAElB,IAWMkB,GAAmB,WACvB,IAAMC,EAAerG,SAASuF,EAAS,IAAM,EAAI,EAC3Ce,EAAetG,SAASuF,EAAS,IAAM,EAAI9M,GAEjD,OACE,qBAAK8E,MAAO,CAAEgJ,QAAS,cAAe3I,MAAO,QAA7C,SACE,eAAC4I,GAAA,EAAD,CACEjJ,MAAO,CACLkJ,UAAW,SACXC,WAAY,OACZ5I,YAAa,QAJjB,UAOE,cAAC0I,GAAA,EAAWG,MAAZ,CACEC,SAAsB,IAAZrB,EACVtJ,QAAS,kBAAMkJ,EAAgB,CAAE/M,KAAM,EAAGD,MAAOsN,GAAxC,IAEX,cAACe,GAAA,EAAWK,KAAZ,CACED,UAAWf,EACX5J,QAAS,kBACPkJ,EAAgB,CAAE/M,KAAMS,EAAUV,MAAOsN,GADlC,IAIVY,GAAgB,cAACG,GAAA,EAAWM,SAAZ,IAChB9G,SAASuF,EAAS,IAAM,EAAI,GAC3B,cAACiB,GAAA,EAAW7D,KAAZ,CACE1G,QAAS,kBACPkJ,EAAgB,CACd/M,KAAM4H,SAASuF,EAAS,IAAM,EAC9BpN,MAAOsN,GAHF,EADX,SAQGzF,SAASuF,EAAS,IAAM,IAG7B,cAACiB,GAAA,EAAW7D,KAAZ,UACE,4BAAI4C,MAELvF,SAASuF,EAAS,IAAM,GAAK9M,IAC5B,cAAC+N,GAAA,EAAW7D,KAAZ,CACE1G,QAAS,kBACPkJ,EAAgB,CACd/M,KAAM4H,SAASuF,EAAS,IAAM,EAC9BpN,MAAOsN,GAHF,EADX,SAQGzF,SAASuF,EAAS,IAAM,IAG5Be,GAAgB,cAACE,GAAA,EAAWM,SAAZ,IAEjB,cAACN,GAAA,EAAWO,KAAZ,CACEH,UAAWjB,EACX1J,QAAS,kBACPkJ,EAAgB,CAAE/M,KAAMU,EAAUX,MAAOsN,GADlC,IAIX,cAACe,GAAA,EAAWQ,KAAZ,CACEJ,SAAUrB,IAAY9M,GACtBwD,QAAS,kBACPkJ,EAAgB,CAAE/M,KAAMK,GAAYN,MAAOsN,GADpC,QAOlB,EACD,OACE,sBAAK1I,UAAU,OAAf,UACE,yBAAQA,UAAU,cAAlB,UACG3E,OACoB7B,IAApB2D,EAAU9B,IACT,cAAC,IAAD,CAASqF,GAAI,QAAUrF,EAAO,IAA9B,SACE,cAAC2D,EAAA,EAAD,CAAQC,QAAQ,OAAO0B,KAAK,KAA5B,SACE,mBAEEX,UAAU,oBACV,cAAY,OACZY,MAAO,MACPJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,MARN3F,EAAO,SAFsBA,EAAO,WADPA,EAAO,mBAkBnD,uBAAM2E,UAAU,eAAhB,UACE,cAACyH,GAAD,CACE/C,QAASrJ,EACTf,OAAQA,EACRoN,UAAW3C,EACXtI,QAASA,EACT6K,WA7GW,SAAC9P,GAClB,OAAOuN,EAASmF,MAAK,SAACC,GAAD,OAAOA,EAAE3N,MAAQhF,CAAjB,GACtB,EA4GOgQ,aA1Ga,SAAChQ,GACpB,IAAI4S,EAAMrF,EAAS7J,QAAO,SAACmP,GACzB,OAAOA,EAAG7N,MAAQhF,CACnB,IACD6Q,EAAY+B,EACb,IAuGK,cAACf,GAAD,SAIP,CA1LD/H,IAAYC,QAAQC,IAAI8I,M,cCVT,SAASC,KACtB,OACE,qBAAKvK,UAAU,cAAf,SACE,qBAAKA,UAAU,WAAf,SACE,qBAAKA,UAAU,YAAf,SAA4B5B,IAAS5H,uBAI5C,C,4CCTcgU,GAFIjF,IAAMkF,gBCUV,SAASC,GAAgBlG,GACtC,MAAwBpF,oBAAS,GAAjC,mBAAOuL,EAAP,KAAaC,EAAb,KAEMC,EAAYC,qBAAWN,IAK7B,OACE,gCACE,eAACxL,EAAA,EAAD,CACEC,QAAQ,OACRC,QAAS,WANU0L,GAAQ,EAQ1B,EACDpK,MAAO,CACLC,MAAO,OACPsK,eAAgB,QAPpB,UAUG3M,IAASjJ,cACT,KACD,cAAC6V,GAAA,EAAD,CAAOC,MAAI,EAACC,GAAG,UAAf,SACGL,EAAU1V,cAAcmJ,SAE3B,sBAAM0B,UAAU,kBAAhB,qCAGF,eAACmL,GAAA,EAAD,CACE3K,MAAO,CACL4K,gBAAiB,UACjB3K,MAAO,QAETkK,KAAMA,EACNU,OA7Bc,kBAAMT,GAAQ,EAAd,EA8BdzD,UAAU,MACVlN,KAAM,mBACNqR,QAAQ,EACRC,UAAU,EACVC,UAAU,EAXZ,UAaE,cAACL,GAAA,EAAUrF,OAAX,UACE,eAACqF,GAAA,EAAUM,MAAX,WACGrN,IAASjJ,cACT,KACD,cAAC6V,GAAA,EAAD,CAAOC,MAAI,EAACC,GAAG,UAAf,SACGL,EAAU1V,cAAcmJ,cAI/B,cAAC6M,GAAA,EAAUpF,KAAX,UACE,sBACEvF,MAAO,CACLK,MAAO,OACPC,OAAQ,QAHZ,UAMsC,IAAnC+J,EAAU1V,cAAcmJ,QACvB,cAACU,EAAA,EAAD,CACEC,QAAQ,UACRC,QAAS,kBAAM2L,EAAUpT,oBAAhB,EAFX,SAIG2G,IAAS/I,YAGd,cAACqW,GAAA,EAAD,UACGb,EAAU1V,cAAciP,KAAI,SAACuH,EAAchE,GAC1C,IAAI9O,EAGJ,MAF0B,SAAtB8S,EAAa1R,OAAiBpB,EAAO,WACf,UAAtB8S,EAAa1R,OAAkBpB,EAAO,UAExC,eAAC+S,GAAA,EAAD,CACE5L,UAAU,qBAEVkL,GAAIrS,EACJgT,WAAW,EACXC,QAAS,WACPjB,EAAUtT,mBAAmBoQ,EAC9B,EAPH,UASE,eAACiE,GAAA,EAAM9F,OAAP,WACE,qBACEiG,IAAI,2BACJ/L,UAAU,eACVgM,IAAI,KAEN,wBAAQhM,UAAU,UAAlB,SAA6B2L,EAAa1R,OAC1C,gCAAQ0R,EAAazR,KAAKqJ,MAAM,EAAG,SAErC,cAACqI,GAAA,EAAM7F,KAAP,UAAa4F,EAAavR,QAhBrB,gBAAkBuN,EAmB5B,gBAOd,C,IC/GUsE,G,gBCCEC,GAAY,SAAZA,EAAa5U,GAExB,QAAYkC,IAARlC,EAAmB,OAAO,EAE9B,GAAW,MAAPA,EAAa,OAAO,EAExB,GAAmB,kBAARA,EACT,OAAO6U,MAAM7U,GAIf,GAAmB,kBAARA,EACT,MAAe,KAARA,EAIT,GAAIuN,MAAMC,QAAQxN,GAAM,CACtB,GAAmB,IAAfA,EAAIgH,OAAc,OAAO,EAC7B,IAAI8N,GAAM,EAIV,OAHA9U,EAAIwC,SAAQ,SAACuS,GACXD,EAAMA,GAAOF,EAAUG,EACxB,IACMD,CACR,CAGD,GAAI9U,EAAIqN,cAAgB/K,OAAQ,CAC9B,IAAIwS,GAAM,EAIV,OAHAxS,OAAOC,QAAQvC,GAAKwC,SAAQ,YAAa,IAAD,mBAAPE,GAAO,WACtCoS,EAAMA,GAAOF,EAAUlS,EACxB,IACMoS,CACR,CACF,EAGYE,GAAmB,SAAChV,GAC/B,OAA2B,IAAvBuN,MAAMC,QAAQxN,IAAwB,EACnCA,EAAI4D,QAAO,SAAC0E,GAAD,OAAQsM,GAAUtM,EAAlB,IAAsBtB,MACzC,EAGYiO,GAAwB,SAAxBA,EAAyBjV,GAGpC,GAFIuN,MAAMC,QAAQxN,GAEdA,EAAIqN,cAAgB/K,OAEtB,IADA,IAAM4S,EAAO5S,OAAOC,QAAQvC,GACnBoO,EAAI,EAAGA,EAAI8G,EAAKlO,OAAQoH,IAAK,CAEpC,GAAIb,MAAMC,QAAQ0H,EAAK9G,GAAG,IACxB,IAAK,IAAI+G,EAAI,EAAGA,EAAID,EAAK9G,GAAG,GAAGpH,OAAQmO,IAEnCD,EAAK9G,GAAG,GAAG+G,GAAG9H,cAAgB/K,QAC9BiL,MAAMC,QAAQ0H,EAAK9G,GAAG,GAAG+G,KAEzBF,EAAsBC,EAAK9G,GAAG,GAAG+G,IAC7BP,GAAUM,EAAK9G,GAAG,GAAG+G,KACvBD,EAAK9G,GAAG,GAAGgH,OAAOD,EAAG,IAGnBP,GAAUM,EAAK9G,GAAG,GAAG+G,KACvBD,EAAK9G,GAAG,GAAGgH,OAAOD,EAAG,GAM7B,GAAID,EAAK9G,GAAG,GAAGf,cAAgB/K,OAE7B,IADA,IAAM+S,EAAU/S,OAAOC,QAAQ2S,EAAK9G,GAAG,IAC9B+G,EAAI,EAAGA,EAAIE,EAAQrO,OAAQmO,IAEhCE,EAAQjH,GAAG,GAAGf,cAAgB/K,QAC9BiL,MAAMC,QAAQ6H,EAAQjH,GAAG,IAEzB6G,EAAsBI,EAAQjH,GAAG,IAE7BwG,GAAUS,EAAQjH,GAAG,YAAY8G,EAAK9G,GAAG,GAAGiH,EAAQjH,GAAG,GAIlE,CAGH,OAAOpO,CACR,EAGYsV,GAAW,SAAXA,EAAYC,EAAMC,GAE7B,QAAatT,IAATqT,QAA+BrT,IAATsT,EAAoB,OAAO,EAErD,GAAID,IAASC,EAAM,OAAO,EAE1B,UAAWD,WAAgBC,EAAM,OAAO,EAGxC,GACGjI,MAAMC,QAAQ+H,KAAUhI,MAAMC,QAAQgI,KACrCjI,MAAMC,QAAQ+H,IAAShI,MAAMC,QAAQgI,GAEvC,OAAO,EAGT,GAAIjI,MAAMC,QAAQ+H,IAAShI,MAAMC,QAAQgI,GAAO,CAE9C,GAAID,EAAKvO,SAAWwO,EAAKxO,OAAQ,OAAO,EACxC,IAAK,IAAIoH,EAAI,EAAGA,EAAImH,EAAKvO,OAAQoH,IAC/B,IAAKkH,EAASC,EAAKnH,GAAIoH,EAAKpH,IAAK,OAAO,EAE1C,OAAO,CACR,CAGD,GACGmH,EAAKlI,cAAgB/K,QAAUkT,EAAKnI,cAAgB/K,QACpDiT,EAAKlI,cAAgB/K,QAAUkT,EAAKnI,cAAgB/K,OAErD,OAAO,EAGT,GAAIiT,EAAKlI,cAAgB/K,QAAUkT,EAAKnI,cAAgB/K,OAAQ,CAC9D,IAAMmT,EAAKnT,OAAOuK,KAAK0I,GACjBG,EAAKpT,OAAOuK,KAAK2I,GACvB,OAAIC,EAAGzO,SAAW0O,EAAG1O,WAChBsO,EAASG,EAAIC,MAIbJ,EAFMhT,OAAOoM,OAAO6G,GACdjT,OAAOoM,OAAO8G,IAI1B,CACD,OAAO,CACR,E,2CC9HYG,GAAc,SAACzI,GAE1B,QACmBhL,IAAjBgL,EAAMwB,aACaxM,IAAnBgL,EAAMO,eACmBvL,IAAzBgL,EAAM0I,qBACqB1T,IAA3BgL,EAAM2I,uBACmB3T,IAAzBgL,EAAM4I,qBAC0B5T,IAAhCgL,EAAM6I,4BACwB7T,IAA9BgL,EAAM8I,oBAEN,MAAO,UAET7T,QAAQC,IAAI,CACVsM,OAAQxB,EAAMwB,OACdjB,SAAUP,EAAMO,SAChBmI,eAAgB1I,EAAM0I,eACtBC,iBAAkB3I,EAAM2I,iBACxBC,eAAgB5I,EAAM4I,eACtBC,sBAAuB7I,EAAM6I,sBAC7BC,oBAAqB9I,EAAM8I,sBAG7B,IAkGMC,EAAgB,SAAC5H,EAAK6H,GAC1B,OACE,eAACC,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIrI,MAEN,cAACkI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,eAACiO,GAAA,EAAKE,OAAN,CACE,aAAW,iBACX7N,MAAOkE,EAAMwB,OAAOL,GACpBnO,GAAImO,EACJxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBAAsBzN,EAAES,OAAOC,MAAO,CAACqF,GAC9C,EACDkE,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAV7B,UAcE,iCAASvH,IAASvJ,OAAS,IAAM8Q,IAChCJ,IAAMC,SAASC,QACd7L,OAAOC,QAAQ2T,GAAKpJ,KAAI,YAAa,IAAD,mBAAVrK,EAAU,KAAPC,EAAO,KAClC,OAAO,wBAAQsG,MAAOvG,EAAf,SAAmBC,GAC3B,cAOd,EA8bD,OACE,eAACiU,GAAA,EAAD,CAAMhO,SAAUuE,EAAM4I,eAAtB,UACE,eAACgB,GAAA,EAAD,CAAWC,OAAK,EAAhB,eAG+C7U,IAA3CgL,EAAM2I,iBAAiB3I,EAAMO,WAC3B,4BAEwCvL,IAA3CgL,EAAM2I,iBAAiB3I,EAAMO,WAC5BQ,IAAMC,SAASC,QACb7L,OAAOC,QAAQ2K,EAAMwB,QAAQ5B,KAAI,YAAmB,IAtclCrK,EAsciC,mBAAhB4L,EAAgB,KAAXrF,EAAW,KAEjD,GAAqB,kBAAVA,EACT,OA1lBS,SAACqF,GACtB,OACE,eAAC8H,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIrI,MAEN,cAACkI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,SACLrB,GAAImO,EACJxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBAAsBpK,SAASrD,EAAES,OAAOC,MAAO,IAAK,CACxDqF,GAEH,EACDrF,MAAO6L,MAAM3H,EAAMwB,OAAOL,IAAQ,GAAKnB,EAAMwB,OAAOL,GACpDkE,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3BzF,YAAa9B,IAAS9I,MAAQ,IAAMqQ,UAM/C,CAijBoB4I,CAAe5I,GAIxB,GAAqB,kBAAVrF,EACT,OApjBQ,SAACqF,GAGrB,YACuCnM,IAArC2E,EAAiBqG,EAAMO,gBACmBvL,IAA1C2E,EAAiBqG,EAAMO,UAAUY,SACjBnM,IAAhByS,SACuDzS,IAAvDyS,GAAY9N,EAAiBqG,EAAMO,UAAUY,IAEtC4H,EACL5H,EACAsG,GAAY9N,EAAiBqG,EAAMO,UAAUY,KAI/C,eAAC8H,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIrI,MAGN,cAACkI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,OACLrB,GAAImO,EACJxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBAAsBzN,EAAES,OAAOC,MAAO,CAACqF,GAC9C,EACDkE,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3BrF,MAAOkE,EAAMwB,OAAOL,GACpBzF,YAAa9B,IAAS9I,MAAQ,IAAMqQ,UAM/C,CA+foB6I,CAAc7I,GAIvB,GAAId,MAAMC,QAAQxE,GAAQ,CACxB,GAAwB,kBAAbA,EAAM,GACf,OApdYvG,EAodc4L,EAldtC,eAAC8H,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIjU,MAEN,cAAC8T,GAAA,EAAD,CAAKC,GAAI,EAAT,SACGvI,IAAMC,SAASC,QACdjB,EAAMwB,OAAOjM,GAAGqK,KAAI,SAAC9D,EAAOqH,GAC1B,OACE,cAAC8F,GAAA,EAAD,UACE,eAACQ,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,UACE,eAACiO,GAAA,EAAKQ,MAAN,qBACS,4BAAI1U,IACX,kCAAK4N,EAAL,UAEF,cAACsG,GAAA,EAAKK,QAAN,CACEzV,KAAK,SACLgR,cAC8BrQ,IAA5BgL,EAAM0I,eAAenT,IACjByK,EAAM0I,eAAenT,GAG3BoG,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBACJpK,SAASrD,EAAES,OAAOC,MAAO,IACzB,CAACvG,EAAG4N,GAEP,EACDrH,MACE6L,MAAM3H,EAAMwB,OAAOjM,GAAG4N,IAClB,GACAnD,EAAMwB,OAAOjM,GAAG4N,GAEtBzH,YAAa9B,IAAS9I,MAAQ,IAAMyE,QAK7C,UAkaG,GAAwB,kBAAbuG,EAAM,GACf,OA5ZW,SAACqF,GAC1B,OACE,eAAC8H,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIrI,MAEN,cAACkI,GAAA,EAAD,UACGtI,IAAMC,SAASC,QACdjB,EAAMwB,OAAOL,GAAKvB,KAAI,SAAC9D,EAAOqH,GAC5B,OACE,eAAC8F,GAAA,EAAD,WACE,cAACI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAAC9O,EAAA,EAAD,CACE6K,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3B1G,QAAQ,OACR0B,KAAK,KACLzB,QAAS,SAACU,GACRA,EAAEC,iBACF2E,EAAM8I,oBAAoB,CAAC3H,EAAKgC,GACjC,EAXH,SAaE,mBACE3H,UAAU,cACV,cAAY,OACZY,MAAM,iBACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAKjB,cAAC6M,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,OACLgR,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3BxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBAAsBzN,EAAES,OAAOC,MAAO,CAC1CqF,EACAgC,GAEH,EACDrH,MAAOkE,EAAMwB,OAAOL,GAAKgC,GACzBzH,YAAa9B,IAAS9I,MAAQ,IAAMqQ,QAK1C,cAACkI,GAAA,EAAD,CAAKa,GAAG,WAGb,SAKV,CA4UsBC,CAAmBhJ,GAE5B,GAAIrF,EAAM,GAAGqE,cAAgB/K,OAC3B,OA5UW,SAAC+L,GAC1B,OACE,eAAC8H,GAAA,EAAD,CACEjN,MAAO,CACLkN,kBAAmB,QACnBC,kBAAmB,MACnBC,aAAc,OAJlB,UAOE,cAACC,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,OAJtB,SAOE,4BAAIrI,MAEN,cAACkI,GAAA,EAAD,UACGtI,IAAMC,SAASC,QACdjB,EAAMwB,OAAOL,GAAKvB,KAAI,SAAC9M,EAAKqQ,GAC1B,OACE,eAAC8F,GAAA,EAAD,WACE,cAACI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAAC9O,EAAA,EAAD,CACE6K,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3B1G,QAAQ,OACR0B,KAAK,KACLzB,QAAS,SAACU,GACRA,EAAEC,iBACF2E,EAAM8I,oBAAoB,CAAC3H,EAAKgC,GACjC,EAXH,SAaE,mBACE3H,UAAU,cACV,cAAY,OACZY,MAAM,iBACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAKhBuE,IAAMC,SAASC,QACd7L,OAAOC,QAAQvC,GAAK8M,KAAI,YAAiB,IAAD,mBAAdrK,EAAc,KAAXuG,EAAW,KACtC,MAAqB,kBAAVA,EAEP,cAACuN,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,SACLsH,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBACJpK,SAASrD,EAAES,OAAOC,MAAO,IACzB,CAACqF,EAAKgC,EAAO5N,GAEhB,EAED8P,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3BrF,MACE6L,MAAM3H,EAAMwB,OAAOL,GAAKgC,GAAO5N,IAC3B,GACAyK,EAAMwB,OAAOL,GAAKgC,GAAO5N,GAE/BmG,YAAa9B,IAAS9I,MAAQ,IAAMyE,GAX/B4L,EAAM5L,EAAI4N,EAAQ,QAmBZ,kBAAVrH,EAEP,cAACuN,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,OACLgR,cACgCrQ,IAA9BgL,EAAM0I,eAAevH,IACjBnB,EAAM0I,eAAevH,GAG3BxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBAAsBzN,EAAES,OAAOC,MAAO,CAC1CqF,EACAgC,EACA5N,GAEH,EACDuG,MAAOkE,EAAMwB,OAAOL,GAAKgC,GAAO5N,GAChCmG,YAAa9B,IAAS9I,MAAQ,IAAMyE,QAO1C8K,MAAMC,QAAQxE,GACK,IAAjBA,EAAMhC,OAAqBvE,EAAI,YAEjC,cAAC0T,GAAA,EAAD,UACE,cAACpI,GAAA,EAAD,CAAWC,iBAAiB,IAA5B,SACE,eAACD,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,eAACR,GAAA,EAAUS,OAAX,WACE,4BAAI/L,IADN,MACgBuS,GAAiBhM,GADjC,YAGA,cAAC+E,GAAA,EAAUU,KAAX,UACGR,IAAMC,SAASC,QACdnF,EAAM8D,KAAI,SAACxE,EAAGgP,GACZ,GAAIhP,EAAE+E,cAAgB/K,OAAQ,CAC5B,IAAM4S,EAAO5S,OAAOC,QAAQ+F,GAC5B,OACE,eAAC6N,GAAA,EAAD,WACE,cAACI,GAAA,EAAD,CACEC,GAAI,EACJtN,MAAO,CACLuN,iBAAkB,SAClBC,iBAAkB,SAGtB,cAACH,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAAC9O,EAAA,EAAD,CACE6K,cAEErQ,IADAgL,EAAM0I,eAAevH,IAEjBnB,EAAM0I,eAAevH,GAG3B1G,QAAQ,OACR0B,KAAK,KACLzB,QAAS,SAACU,GACRA,EAAEC,iBACF2E,EAAM8I,oBAAoB,CACxB3H,EACAgC,EACA5N,EACA6U,GAEH,EAjBH,SAmBE,mBACE5O,UAAU,cACV,cAAY,OACZY,MAAM,iBACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAMhBuE,IAAMC,SAASC,QACd+G,EAAKpI,KAAI,YAAe,IAAD,mBAAZyK,EAAY,KAARC,EAAQ,KACrB,OACE,cAACjB,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKC,MAAN,CAAYlO,UAAU,OAAtB,SACE,cAACiO,GAAA,EAAKK,QAAN,CACEzV,KAAK,OACLgR,cAGQrQ,IAFNgL,EAAM0I,eACJvH,IAEEnB,EACG0I,eACDvH,GAIRxF,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBACJzN,EAAES,OAAOC,MACT,CACEqF,EACAgC,EACA5N,EACA6U,EACAC,GAGL,EACDvO,MAAOwO,EACP5O,YACE9B,IAAS9I,MACT,IACAuZ,OAMX,OAIR,CAAM,MAAiB,kBAANjP,EAEd,eAAC6N,GAAA,EAAD,WACE,cAACI,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAAC9O,EAAA,EAAD,CACE6K,cAEErQ,IADAgL,EAAM0I,eAAevH,IAEjBnB,EAAM0I,eAAevH,GAG3B1G,QAAQ,OACR0B,KAAK,KACLzB,QAAS,SAACU,GACRA,EAAEC,iBAEF2E,EAAM8I,oBAAoB,CACxB3H,EACAgC,EACA5N,EACA6U,GAEH,EAlBH,SAoBE,mBACE5O,UAAU,cACV,cAAY,OACZY,MAAM,iBACNJ,MAAO,CACLK,MAAO,OACPC,OAAQ,OACRC,YAAa,OACbC,QAAS,WAKjB,cAAC6M,GAAA,EAAD,CAAKC,GAAI,EAAT,SACE,cAACG,GAAA,EAAKK,QAAN,CACEzV,KAAK,SACLgR,cAEErQ,IADAgL,EAAM0I,eAAenT,IAEjByK,EAAM0I,eAAenT,GAI3BoG,SAAU,SAACP,GACTA,EAAEC,iBACF2E,EAAM6I,sBACJpK,SACErD,EAAES,OAAOC,MACT,IAEF,CAACqF,EAAKgC,EAAO5N,EAAG6U,GAEnB,EACDtO,MAAO6L,MAAMvM,GAAK,GAAKA,EACvBM,YACE9B,IAAS9I,MAAQ,IAAMyE,GAbpB,GAAK4L,EAAMgC,EAAQ5N,EAAI6U,QAmBd,kBAANhP,EACT,mBADF,CAER,mBAxKf,CAgLD,OAIR,SAKV,CAoCsBmP,CAAmBpJ,EAE7B,CAGD,OAAIrF,EAAMqE,cAAgB/K,OAtC7B,OA0CU,EACR,QAGP,cAACoF,EAAA,EAAD,CAAQC,QAAQ,UAAUpG,KAAK,SAA/B,mBAA6C,YAKlD,ECvoBKmW,GAAYpY,EAAQ,IAEX,SAASqY,GAAgBzK,GAEtC,MAAyByD,cAAjBlD,EAAR,EAAQA,SAAUvN,EAAlB,EAAkBA,GAElB,EAAgC4H,qBAAhC,mBAAO8P,EAAP,KAAiBC,EAAjB,KAEA,EAAsB/P,mBAAS,IAA/B,mBAAOhF,EAAP,KAAYuF,EAAZ,KAEMyP,EAAWC,cAGjB,EAA4BjQ,mBAAS4P,GAAUnS,EAAWkI,KAA1D,mBAAOiB,EAAP,KAAesJ,EAAf,KAGA,EAA8BlQ,mBAAS,CAAC,GAAxC,mBAAOmQ,EAAP,KAEA,GAFA,KAE4CnQ,wBAAS5F,IAArD,mBAAO0T,EAAP,KAAuBsC,EAAvB,KACA,EAA8BpQ,oBAAS,GAAvC,mBAAgBqQ,GAAhB,WAEmBlK,IAAMmK,OAAO,CAAC,GAGjCxO,qBAAU,WACR,IAAMiI,EAAS,uCAAG,gEAAA7P,EAAA,6DAAO0B,EAAP,+BAAY,CAAC,EAAb,SAEOD,EAAYgK,EAAU/J,GAF7B,OAEV1C,EAFU,OAIVG,EAAOH,EAASkD,KAAK,GACvBmU,EAAYX,GAAUhJ,GAGpBwG,EAAO5S,OAAOC,QAAQpB,GACnBiN,EAAI,EATG,YASAA,EAAI8G,EAAKlO,QATT,qBAWVuG,MAAMC,QAAQ0H,EAAK9G,GAAG,IAXZ,oBAYc,IAAtB8G,EAAK9G,GAAG,GAAGpH,OAZH,2DAaRkO,EAAK9G,GAAG,GAAG,GAAGf,cAAgB/K,OAbtB,iBAcD6S,EAAI,EAdH,aAcMA,EAAID,EAAK9G,GAAG,GAAGpH,QAdrB,yBAeoC9E,IAAxCqD,EAAWkI,GAAUyH,EAAK9G,GAAG,IAAI,GAf7B,wDAgBFrF,EAhBE,gBAgBYxD,EAAWkI,GAAUyH,EAAK9G,GAAG,IAAI,IACrD9L,OAAOgW,OAAOvP,EAAQmM,EAAK9G,GAAG,GAAG+G,IACjCD,EAAK9G,GAAG,GAAG+G,GAAKpM,EAlBR,QAc6BoM,IAd7B,gDAqBDA,EAAI,EArBH,aAqBMA,EAAID,EAAK9G,GAAG,GAAGpH,QArBrB,yBAuB+B9E,IAArCqD,EAAWkI,GAAUyH,EAAK9G,GAAG,UACWlM,IAAxCqD,EAAWkI,GAAUyH,EAAK9G,GAAG,IAAI,GAxB3B,wDA4BR8G,EAAK9G,GAAG,GAAG+G,GAAKD,EAAK9G,GAAG,GAAG+G,GA5BnB,QAqB6BA,IArB7B,wBASiB/G,IATjB,uBAwChB,IALA9L,OAAOgW,OAAOD,EAAWlX,GAGnB0L,EAAOvK,OAAOuK,KAAKwL,GACnBE,EAAgBjW,OAAOuK,KAAKtH,EAAWkI,IACpCW,EAAI,EAAGA,EAAIvB,EAAK7F,OAAQoH,IAC1BmK,EAAc3K,SAASf,EAAKuB,YACxBiK,EAAUxL,EAAKuB,IAIpBoK,EA9CU,+BAAAxW,EAAA,MA8CW,kDAAAA,EAAA,8DACaE,IAAlCwE,EAAoB+G,GADC,gBAKvB,IAHAyK,EAAkB,CAAC,GAEbrL,EAAOvK,OAAOuK,KAAKwL,GAChBjK,EAAI,EAAGA,EAAIvB,EAAK7F,OAAQoH,IACzBqK,EAAO5L,EAAKuB,GAElBiK,EAAYK,EAAqBL,EAAW,CAACI,IARxB,OAWvBT,EAAUK,GAEVR,EAAYH,GAAUW,IAbC,0BAiBrB9F,EAAW,CAAC,OACOrQ,IAAnB0T,IAA8BrD,EAAWqD,GAEvC+C,EAAerW,OAAOC,QAAQmE,EAAoB+G,IAE/CW,EAAI,EAtBY,aAsBTA,EAAIuK,EAAa3R,QAtBR,oBAuBjBqH,EAAMsK,EAAavK,GAAG,GACtBpF,EAAQ2P,EAAavK,GAAG,QAEPlM,IAAnBmW,EAAUhK,GA1BS,2DA4BJ,YAAfrF,EAAMzH,KA5Ba,kCA6BFyH,EAAMrC,OAAOzG,GA7BX,QA6Bf0Y,EA7Be,OA+BrBrG,EAASlE,GAAOuK,EA/BK,QAsBgBxK,IAtBhB,wBAoCzB,IADMvB,EAAOvK,OAAOuK,KAAKwL,GAChBjK,EAAI,EAAGA,EAAIvB,EAAK7F,OAAQoH,IACzBqK,EAAO5L,EAAKuB,QAEKlM,IAAnBqQ,EAASkG,KAA0C,IAAnBlG,EAASkG,KAC3CJ,EAAYK,EAAqBL,EAAW,CAACI,KAIjDP,EAAkB3F,GAElByF,EAAUK,GAEVR,EAAYH,GAAUW,IAhDG,4CA9CX,qDAiGhBG,IAjGgB,4CAAH,qDAoGTK,EAAM,CAAE3T,IAAKhF,GAEnB2R,EADW,CAAEjO,OAAQT,KAAKC,UAAUyV,KAEpCV,GAAW,EACZ,GAAE,IAGH,IAoEMO,EAAuB,SAACd,EAAUkB,GAOtC,IAPkE,IAAtBhL,EAAqB,4DAAd5L,EAC/C4Q,EAAM4E,GAAUE,GAChBmB,EAASjG,EACTkG,EAAatB,GAAUnS,EAAWkI,IAChCwL,EAAO,YAAOH,GAGX1K,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,GADyBA,IAElC2K,EAASA,EAAOD,EAAK1K,IAIvB,IAAK,IAAIA,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,SACUlM,IAAf8W,EAF8B5K,IAID4K,EAAV,kBAAZF,EAAK1K,GAA8B4K,EAAW,GACvCA,EAAWF,EAAK1K,IAIpC,OAAKb,MAAMC,QAAQwL,SAGA9W,IAAf8W,IAEoB,IAAlBD,EAAO/R,OACLgS,EAAW,GAAG3L,cAAgB/K,OAChCyW,EAAOG,KAAP,gBACKF,EAAW,KAGhBD,EAAOG,KAAK,IAKVH,EAAO,GAAG1L,cAAgB/K,OAEsB,IAA9CyW,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,QACrC+R,EAAOG,KAAP,gBACKF,EAAW,KAIbD,EAAOnL,SAAS,KACnBmL,EAAOG,KAAK,UAOPhX,IAAT4L,QAAqC5L,IAAf8W,IACF,IAAlBD,EAAO/R,QASyC,IAA9C+R,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,UARnC8G,EAAKT,cAAgB/K,OACvByW,EAAOG,KAAP,gBAAiBpL,IAEjBiL,EAAOG,KAAKpL,IAcXgF,GAnDgCA,CAoDxC,EAEKjU,EAAM,uCAAG,WAAOyJ,GAAP,6CAAAtG,EAAA,sDAWb,IAVAsG,EAAEC,iBAGE8P,EAAYX,GAAUhJ,GACtByK,EAAUzB,GAAUE,GACxB3C,GAAsBoD,GACtBpD,GAAsBkE,GAClBC,EAAS,CAAC,EAERlE,EAAO5S,OAAOC,QAAQ8V,GACnBjK,EAAI,EAAGA,EAAI8G,EAAKlO,OAAQoH,IAK/B,GAJM3L,EAAIyS,EAAK9G,GAAG,GACZ1L,EAAIwS,EAAK9G,GAAG,GAGdb,MAAMC,QAAQ9K,GAAI,CAQpB,QANkBR,IAAdkX,EAAO3W,KACT2W,EAAO3W,GAAK,CAAEyH,IAAK,GAAImP,OAAQ,GAAIC,OAAQ,KAGvCC,EANc,YAMAJ,EAAQ1W,SAETP,IAAf+V,EAAQxV,GACV,IAAS2L,EAAI,EAAGA,EAAI6J,EAAQxV,GAAG+W,QAAQxS,OAAQoH,KACvCqL,EAAUF,EAAQnE,OAAO6C,EAAQxV,GAAG+W,QAAQpL,GAAG,GAAI,GAAG,IAChDf,cAAgB/K,QACpB+L,EAAM/L,OAAOuK,KAAK4M,GAAS,GACjCL,EAAO3W,GAAG4W,OAAOH,KAAKO,EAAQpL,KAE9B+K,EAAO3W,GAAG4W,OAAOH,KAAKO,GAK5B,IAAStE,EAAI,EAAGA,EAAIkD,EAAU5V,GAAGuE,OAAQmO,IACnCA,EAAIoE,EAAQvS,SAAWsO,GAAS+C,EAAU5V,GAAG0S,GAAIoE,EAAQpE,MAIvDkD,EAAU5V,GAAG0S,GAAG9H,cAAgB/K,QAC5B+L,EAAM/L,OAAOuK,KAAK0M,EAAQpE,IAAI,GACpCiE,EAAO3W,GAAG6W,OAAOJ,MAAjB,oBACG7K,EAAMkL,EAAQpE,GAAG9G,IADpB,qBAEOgK,EAAU5V,GAAG0S,IAFpB,MAQAiE,EAAO3W,GAAGyH,IAAIgP,KAAKb,EAAU5V,GAAG0S,IAChCiE,EAAO3W,GAAG4W,OAAOH,KAAKK,EAAQpE,MAG9BA,GAAKoE,EAAQvS,QAAQoS,EAAO3W,GAAGyH,IAAIgP,KAAKb,EAAU5V,GAAG0S,IAEvDG,GAAS8D,EAAO3W,GAAI,CAAEyH,IAAK,GAAImP,OAAQ,GAAIC,OAAQ,aAC9CF,EAAO3W,EACjB,MAEQC,EAAE2K,cAAgB/K,QAMrBI,IAAMkV,EAASnV,KAAI2W,EAAO3W,GAAKC,GAnE1B,0BA2EQO,EAAYwK,EAAU2L,EAAQlZ,GA3EtC,QA2EL0Y,EA3EK,OA4EXxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YACX5B,EAAS,IAAMrK,GA9EJ,kDAgFX2B,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SArFnB,0DAAH,sDAyFZ,OACE,sBAAKC,UAAU,OAAf,UACE,yBAAQA,UAAU,cAAlB,sBACa,4BAAI+E,IADjB,iBACgD,4BAAIvN,IADpD,eAGA,uBAAMwI,UAAU,eAAhB,UACE,cAAC,GAAD,CACEgG,OAAQA,EACRjB,SAAUA,EACVoI,iBAAkBtQ,EAClBqQ,eAAgBA,EAChBG,sBApPc,SAACG,EAAK4C,GAC1B,IAGI1K,EAHAuL,EAAUjC,GAAUhJ,GACpBkL,EAAYD,EAGZE,GAAmB,EACvB,IAAKzL,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,EAAGoH,IAC/BwL,EAAYA,EAAUd,EAAK1K,IACJ,kBAAZ0K,EAAK1K,KAAiByL,EAAkBzL,GAKrD,GAHuB,kBAAZ0K,EAAK1K,KAAiByL,EAAkBzL,GACnDwL,EAAUd,EAAK1K,IAAM8H,GAEI,IAArB2D,EAAwB,CAE1B,IAAM/L,EAAsB,kBAARoI,EAAmBxQ,IAAM,GAC7CiU,EAAUjB,EACRiB,EACAb,EAAK7M,MAAM,EAAG4N,GACd/L,EAEH,CAEDkK,EAAU2B,EACX,EA6NO3D,oBA3NsB,SAAC8C,GAC7B,IAGI1K,EAHA8H,EAAMwB,GAAUhJ,GAChBqK,EAAS7C,EAGb,IAAK9H,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,QACZ9E,IAAZ4W,EAAK1K,GADsBA,IAE/B2K,EAASA,EAAOD,EAAK1K,IAGvB,IAAMqL,EAAUV,EAAO3D,OAAO0D,EAAK1K,GAAI,GAEjCN,EAA6B,kBAAf2L,EAAQ,GAAkB/T,IAAM,GACpDwQ,EAAMwC,EAAqBxC,EAAK4C,EAAK7M,MAAM,EAAGmC,GAAIN,GAIxC,IAANM,SACuBlM,IAArB+V,EAAQa,EAAK,MACfb,EAAQa,EAAK,IAAM,CAAEU,QAAS,GAAIM,SAAU,GAAIC,OAAQC,MAGrDpF,GAAU6E,EAAQ,MAErBxB,EAAQa,EAAK,IAAIgB,SAASZ,KAAKO,EAAQ,IAGvCxB,EAAQa,EAAK,IAAIU,QAAQN,KACvBJ,EAAK1K,IAAM6J,EAAQa,EAAK,IAAIiB,OACxBjB,EAAK1K,GACH6J,EAAQ,CAACa,EAAK,KAAKU,QAAQ5V,QAAO,SAAC0E,GAAD,OAAOA,GAAKwQ,EAAK1K,EAAjB,IAAqBpH,OACzD8R,EAAK1K,IAGP0K,EAAK1K,GAAK6J,EAAQa,EAAK,IAAIiB,SAC7B9B,EAAQa,EAAK,IAAIiB,OAASjB,EAAK1K,MAIrC4J,EAAU9B,EACX,EAoLOJ,eAAgBjX,IAElB,uBACA,sBAAMqK,MAAO,CAAEmJ,WAAY,OAA3B,SAAwCvP,SAI/C,C,cCrXK4U,GAAYpY,EAAQ,IAoBX,SAAS2a,GAAQ/M,GAE9B,IAAMO,EAAakD,cAAblD,SAGN,EAAwCmD,cAAxC,mBAAOC,EAAP,eAGuB3O,IAAnBgL,EAAMO,WAAwBA,EAAWP,EAAMO,UAGnD,IAAMqK,EAAWC,cAEjB,EAAgCjQ,mBAAS,QAAzC,mBAAOoS,EAAP,KAAiBC,EAAjB,KAEA,EAAsBrS,mBAAS,IAA/B,mBAAOhF,EAAP,KAAYuF,EAAZ,KAEA,EAA4BP,mBAAS4P,GAAU7R,EAAU4H,KAAzD,mBAAOiB,EAAP,KAAesJ,EAAf,KAGA,EAAwBlQ,wBAAS5F,GAAjC,mBAAOkY,EAAP,KAAaC,EAAb,KACA,EAA0CvS,wBAAS5F,GAAnD,mBAAOoY,EAAP,KAAsBC,EAAtB,KACA,EAAsCzS,wBAAS5F,GAA/C,mBAAOsY,EAAP,KAAoBC,EAApB,KACA,EAAwC3S,wBAAS5F,GAAjD,mBAAOwY,EAAP,KAAqBC,EAArB,KA2CA,GAxCA/Q,qBAAU,WACR,IAAMiI,EAAS,uCAAG,4CAAA7P,EAAA,6DAAO0B,EAAP,+BAAY,CAAC,EAAb,SAEOD,EAAYgK,EAAU/J,GAF7B,OAEV1C,EAFU,OAKV4Z,EAAOlD,GAAUhJ,GAEvBpM,OAAOuK,KAAK+N,GAAM9N,KAAI,SAACrK,GACrB,QAA4BP,IAAxBlB,EAASkD,KAAK,GAAGzB,GACnB,GAAI8K,MAAMC,QAAQxM,EAASkD,KAAK,GAAGzB,KACjC,IAAKmS,GAAU5T,EAASkD,KAAK,GAAGzB,IAC9B,GAAIzB,EAASkD,KAAK,GAAGzB,GAAG,GAAG4K,cAAgB/K,OAAQ,CACjD,IAAMuK,EAAOvK,OAAOuK,KAAK+N,EAAKnY,GAAG,IAC3BoY,EAAO7Z,EAASkD,KAAK,GAAGzB,GAAGqK,KAAI,SAACxE,GACpC,IAAMgQ,EAAS,CAAC,EAEhB,OADAzL,EAAKC,KAAI,SAACrK,GAAD,OAAQ6V,EAAO7V,GAAK,IAApB,IACFH,OAAOgW,OAAOA,EAAQhQ,EAC9B,IACDsS,EAAKnY,GAAKoY,EAAKhX,OAAO+W,EAAKnY,GAC5B,MACCmY,EAAKnY,GAAKzB,EAASkD,KAAK,GAAGzB,GAAGoB,OAAO+W,EAAKnY,SAI9CmY,EAAKnY,GAAKzB,EAASkD,KAAK,GAAGzB,EAGhC,IACDuV,EAAU4C,GA5BM,2CAAH,qDA+Bf,GAAiC,OAA7B/J,EAAa5M,IAAI,SAAiD,KAA7B4M,EAAa5M,IAAI,QAA1D,CAEA,IAAM4U,EAAM,CAAE3T,IAAK2L,EAAa5M,IAAI,SAEpC4N,EADW,CAAEjO,OAAQT,KAAKC,UAAUyV,IAF5B,CAIT,GAAE,CAAC3L,EAAO2D,SAGiB3O,IAAxB2D,EAAU4H,GACZ,OAAO,+DAGT,IAmCMiL,EAAuB,SAACd,EAAUkB,GAOtC,IAPkE,IAAtBhL,EAAqB,4DAAd5L,EAC/C4Q,EAAM4E,GAAUE,GAChBmB,EAASjG,EACTgI,EAAYpD,GAAU7R,EAAU4H,IAC9BwL,EAAO,YAAOH,GAGX1K,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,GADyBA,IAElC2K,EAASA,EAAOD,EAAK1K,IAIvB,IAAK,IAAIA,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,SACSlM,IAAd4Y,EAF8B1M,IAID0M,EAAV,kBAAZhC,EAAK1K,GAA6B0M,EAAU,GACtCA,EAAUhC,EAAK1K,IAIlC,OAAKb,MAAMC,QAAQsN,SAGD5Y,IAAd4Y,IAEoB,IAAlB/B,EAAO/R,OACL8T,EAAU,GAAGzN,cAAgB/K,OAC/ByW,EAAOG,KAAP,gBACK4B,EAAU,KAGf/B,EAAOG,KAAK,IAKVH,EAAO,GAAG1L,cAAgB/K,OAEsB,IAA9CyW,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,QACrC+R,EAAOG,KAAP,gBACK4B,EAAU,KAIZ/B,EAAOnL,SAAS,KACnBmL,EAAOG,KAAK,UAOPhX,IAAT4L,QAAoC5L,IAAd4Y,IACF,IAAlB/B,EAAO/R,QASyC,IAA9C+R,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,UARnC8G,EAAKT,cAAgB/K,OACvByW,EAAOG,KAAP,gBAAiBpL,IAEjBiL,EAAOG,KAAKpL,IAcXgF,GAnD+BA,CAoDvC,EAGKiI,EAAQ,uCAAG,WAAOzS,GAAP,uBAAAtG,EAAA,6DACfsG,EAAEC,iBAEEnH,OAAQc,OAEOA,KADf9B,EAAOsX,GAAUhJ,IACZtN,QACPA,EAAQhB,EAAKgB,aACNhB,EAAKgB,OAGViX,EAAYX,GAAUtX,GAC1B6U,GAAsBoD,GAXP,kBAeMtV,EACjB0K,EACAtK,KAAKC,UAAUiV,GACfjX,GAlBW,OAePwX,EAfO,OAoBbxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YArBE,kDAuBbvX,QAAQC,IAAR,MACAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SA7BjB,QAiCI,MAAf2G,EAAIjI,QAC0C,GAA5CI,OAAO0I,QAAQ,2BACW6H,EAAX,YAAbrK,EAAiC,IACvB,IAAMA,GApCT,0DAAH,sDA0CRuN,EAAQ,uCAAG,WAAO1S,GAAP,qBAAAtG,EAAA,yDACfsG,EAAEC,kBAEE6R,EAAKzX,KAAKqJ,SAAS,QAHR,wBAIPjK,EAAW,IAAIkZ,UACZC,OAAO,OAAQd,GALX,kBAQQvY,EAAkB4L,EAAU1L,GARpC,OAQL6W,EARK,OAUXxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YAXA,kDAaXvX,QAAQC,IAAR,MAEAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SApBnB,YAwBX2R,EAAKzX,KAAKqJ,SAAS,SAxBR,wBAyBb7J,QAAQC,IAAIsY,GAzBC,oBA2BQ3X,EAAa0K,EAAUiN,OAAcxY,GA3B7C,QA2BL0W,EA3BK,OA4BXxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YA7BA,mDA+BXvX,QAAQC,IAAR,MACAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SArCnB,QA0CI,MAAf2G,EAAIjI,QAC0C,GAA5CI,OAAO0I,QAAQ,2BACjB6H,EAAS,IAAMrK,GA5CJ,kEAAH,sDAiDd,OACE,sBAAK/E,UAAU,OAAf,UACE,yBAAQA,UAAU,cAAlB,8BAEE,4BAAI+E,OAEN,uBAAM/E,UAAU,eAAhB,UACE,eAACyS,GAAA,EAAD,CACEC,SAAO,EACPzT,QAAQ,OACRe,UAAU,yBACV2S,SArLiB,SAAC9M,GAAD,OAAc4L,EAAY5L,EAA1B,EAsLjBP,iBAAiB,OALnB,UAOGpH,EAAS6G,GAAUG,SAAS,SAC3B,cAACuN,GAAA,EAAI7M,KAAL,UACE,cAAC6M,GAAA,EAAIG,KAAL,CAAU/M,SAAS,OAAnB,oBAIH3H,EAAS6G,GAAUG,SAAS,SACE,OAA7BiD,EAAa5M,IAAI,SACf,cAACkX,GAAA,EAAI7M,KAAL,UACE,cAAC6M,GAAA,EAAIG,KAAL,CAAU/M,SAAS,OAAnB,uBAIR,sBACErF,MAAO,CACL4K,gBAAiB,OACjByH,aAAc,MACdC,YAAa,QACbC,YAAa,wBACbC,YAAa,MACbnS,MAAO,OACPC,OAAQ,eARZ,UAWgB,SAAb0Q,GACC,sBAAKhR,MAAO,CAAEyS,OAAQ,OAAtB,UACE,cAAC,GAAD,CACEjN,OAAQA,EACRjB,SAAUA,EACVoI,iBAAkBhQ,EAClB+P,eAAgB,CAAC,EACjBG,sBAxPQ,SAACG,EAAK4C,GAC1B,IAGI1K,EAHAuL,EAAUjC,GAAUhJ,GACpBkL,EAAYD,EAGZE,GAAmB,EACvB,IAAKzL,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,EAAGoH,IAC/BwL,EAAYA,EAAUd,EAAK1K,IACJ,kBAAZ0K,EAAK1K,KAAiByL,EAAkBzL,GAErDwL,EAAUd,EAAK1K,IAAM8H,GACI,IAArB2D,IACFF,EAAUjB,EAAqBiB,EAASb,EAAK7M,MAAM,EAAG4N,KAExD7B,EAAU2B,EACX,EA0Oa3D,oBAxOgB,SAAC8C,GAC7B,IAGI1K,EAHA8H,EAAMwB,GAAUhJ,GAChBqK,EAAS7C,EAGb,IAAK9H,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,QACZ9E,IAAZ4W,EAAK1K,GADsBA,IAE/B2K,EAASA,EAAOD,EAAK1K,IAGvB2K,EAAO3D,OAAO0D,EAAK1K,GAAI,GAEvB8H,EAAMwC,EAAqBxC,EAAK4C,EAAK7M,MAAM,EAAGmC,IAC9C4J,EAAU9B,EACX,EA2NaJ,eAAgBiF,IAGlB,uBACA,sBAAM7R,MAAO,CAAEmJ,WAAY,OAA3B,SAAwCvP,OAG9B,SAAboX,GACC,qBAAKhR,MAAO,CAAEyS,OAAQ,OAAtB,SACE,eAAChF,GAAA,EAAD,CAAMhO,SAAUqS,EAAhB,UACE,cAACrE,GAAA,EAAKQ,MAAN,UACE,4BAAIrQ,IAAS8U,gBAEf,cAACjF,GAAA,EAAKK,QAAN,CACEtO,UAAU,OACVnH,KAAK,OACLsa,OAAO,cACPC,MAAM,OACNjT,SAAU,SAACP,GACT,IAAM8R,EAAO9R,EAAES,OAAOgT,MAAM,GAC5B1B,EAAQD,GACRjY,QAAQC,IAAIgY,GACZ,IAAM4B,EAAa,IAAIC,WAEvBD,EAAWE,UAAY,WACrB,IAAMC,EAAUH,EAAWI,OAC3B,GAAIhC,EAAKzX,KAAKqJ,SAAS,QAAS,CAC9B,IAAMqQ,EAAQ,IAAIC,OAAO,KAAM,KAC3BC,EAAWJ,EAAQ3T,QAAQ6T,EAAO,IAAIG,MAAM,MAEhDjC,EAAiBgC,EAAS,IAC1BA,EAASnH,OAAO,EAAG,GACnBqF,EAAe8B,EAChB,CACD,GAAInC,EAAKzX,KAAKqJ,SAAS,SAAU,CAC/B,IAAMmQ,EAAUH,EAAWI,OAC3BzB,EAAgBwB,EACjB,CACF,EACDH,EAAWS,WAAWrC,EACvB,SAEclY,IAAhBsY,QAA+CtY,IAAlBoY,GAC5B,cAACvM,GAAA,EAAD,UACE,eAACA,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,cAACR,GAAA,EAAUS,OAAX,UACG1H,IAAShJ,eAEZ,cAACiQ,GAAA,EAAUU,KAAX,CACEvF,MAAO,CAAEwT,SAAU,SAAUlT,OAAQ,QADvC,SAGE,eAACqF,GAAA,EAAD,CAAOC,YAAU,EAACC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAAxC,UACE,gCACE,6BACGhB,IAAMC,SAASC,QACdmM,EAAckC,MAAM,KAAK1P,KAAI,SAAC6P,GAC5B,OAAO,6BAAKA,GACb,SAIP,gCACG1O,IAAMC,SAASC,QACdqM,EAAY1N,KAAI,SAACxE,GACf,OACE,6BACG2F,IAAMC,SAASC,QACd7F,EAAEkU,MAAM,KAAK1P,KAAI,SAAC6P,GAChB,OAAO,6BAAKA,GACb,MAIR,sBAQGza,IAAjBwY,GACC,cAAC3M,GAAA,EAAD,UACE,eAACA,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,cAACR,GAAA,EAAUS,OAAX,UACG1H,IAAShJ,eAEZ,cAACiQ,GAAA,EAAUU,KAAX,CACEvF,MAAO,CAAEwT,SAAU,SAAUlT,OAAQ,QADvC,SAGGkR,SAKT,cAAChT,EAAA,EAAD,CAAQC,QAAQ,UAAUpG,KAAK,SAA/B,oBAGA,uBACA,sBAAM2H,MAAO,CAAEmJ,WAAY,OAA3B,SAAwCvP,iBAQvD,CC9bD,IAAM4U,GAAYpY,EAAQ,IAmBX,SAASsd,GAAkB1P,GAExC,IAAMO,EAAW,cAGjB,EAAwCmD,cAAxC,mBAAOC,EAAP,KAGMiH,GAHN,KAGiBC,eAEjB,EAAgCjQ,mBAAS,QAAzC,mBAAOoS,EAAP,KAAiBC,EAAjB,KAEA,EAAsBrS,mBAAS,IAA/B,mBAAOhF,EAAP,KAAYuF,EAAZ,KAEA,EAA4BP,mBAAS4P,GAAU7R,EAAU4H,KAAzD,mBAAOiB,EAAP,KAAesJ,EAAf,KAEA,EAA4ClQ,mBAAS,CAAC,GAAtD,mBAAO8N,EAAP,KAAuBsC,EAAvB,KAGA,EAAkCpQ,qBAAlC,mBAAO+U,EAAP,KAAkBC,EAAlB,KAEA,EAAgChV,qBAAhC,mBAAiBiV,GAAjB,WAGA,EAAwBjV,wBAAS5F,GAAjC,mBAAOkY,EAAP,KAAaC,EAAb,KACA,EAA0CvS,wBAAS5F,GAAnD,mBAAOoY,EAAP,KAAsBC,EAAtB,KACA,EAAsCzS,wBAAS5F,GAA/C,oBAAOsY,GAAP,MAAoBC,GAApB,MACA,GAAwC3S,wBAAS5F,GAAjD,qBAAOwY,GAAP,MAAqBC,GAArB,MAeA,GAZA/Q,qBAAU,WACR,IAAMiI,EAAS,uCAAG,0CAAA7P,EAAA,6DAAO0B,EAAP,+BAAY,CAAC,EAAb,SAEOD,EAAY,YAAaC,GAFhC,OAEV1C,EAFU,OAIhB8b,EAAa9b,EAASkD,KAAK4I,KAAI,SAACxE,GAAD,OAAOA,EAAEpD,GAAT,KAJf,2CAAH,qDAOf2M,EADW,CAAE/N,MAAO,KAErB,GAAE,CAACoJ,EAAO2D,SAGiB3O,IAAxB2D,EAAU4H,GACZ,OAAO,+DAGT,IA+CMuP,GAAoB,uCAAG,WAAO1U,GAAP,+BAAAtG,EAAA,6DAC3BsG,EAAEC,iBACI0U,EAAmB3U,EAAES,OAAOC,MAC5B6P,EAAM,CAAE3T,IAAKoD,EAAES,OAAOC,OACtBtF,EAAK,CAAEE,OAAQT,KAAKC,UAAUyV,IAJT,SAKTpV,EAAY,YAAaC,GALhB,OAS3B,IAJM0L,EALqB,OAMrB8N,EAAW9N,EAAIlL,KAAK,GAEpBoC,EAAW,GACR8H,EAAI,EAAGA,EAAI8O,EAAS5W,SAASU,OAAQoH,IACV,WAA9B8O,EAAS5W,SAAS8H,GAAG7M,MACvB+E,EAAS4S,KAAK,CACZvW,KAAMua,EAAS5W,SAAS8H,GAAGzL,KAC3BqG,MAAOtD,MAGuB,SAA9BwX,EAAS5W,SAAS8H,GAAG7M,MACvB+E,EAAS4S,KAAK,CACZvW,KAAMua,EAAS5W,SAAS8H,GAAGzL,KAC3BqG,MAAO,KAGuB,WAA9BkU,EAAS5W,SAAS8H,GAAG7M,MACvB+E,EAAS4S,KAAK,CACZvW,KAAMua,EAAS5W,SAAS8H,GAAGzL,KAC3BqG,MAAO,CAACtD,QAKR2S,EAAYX,GAAUhJ,IACnB,SAAeuO,EACA,IAApB3W,EAASU,SAAcqR,EAAS,SAAe/R,IAE7C6W,EAAczF,GAAU9B,IACnB,UAAe,EAE1BsC,EAAkBiF,GAClBJ,EAAYE,GACZjF,EAAUK,GAvCiB,4CAAH,sDA0CpBK,GAAuB,SAACd,EAAUkB,GAOtC,IAPkE,IAAtBhL,EAAqB,4DAAd5L,EAC/C4Q,EAAM4E,GAAUE,GAChBmB,EAASjG,EACTgI,EAAYpD,GAAU7R,EAAU4H,IAC9BwL,EAAO,YAAOH,GAGX1K,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,GADyBA,IAElC2K,EAASA,EAAOD,EAAK1K,IAIvB,IAAK,IAAIA,EAAI,EAAGA,EAAI6K,EAAQjS,aACV9E,IAAZ4W,EAAK1K,SACSlM,IAAd4Y,EAF8B1M,IAID0M,EAAV,kBAAZhC,EAAK1K,GAA6B0M,EAAU,GACtCA,EAAUhC,EAAK1K,IAIlC,YAAkBlM,IAAd4Y,GAA4BvN,MAAMC,QAAQsN,SAG5B5Y,IAAd4Y,IAEoB,IAAlB/B,EAAO/R,OACL8T,EAAU,GAAGzN,cAAgB/K,OAC/ByW,EAAOG,KAAP,gBACK4B,EAAU,KAGf/B,EAAOG,KAAK,IAKVH,EAAO,GAAG1L,cAAgB/K,OAEsB,IAA9CyW,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,QACrC+R,EAAOG,KAAP,gBACK4B,EAAU,KAIZ/B,EAAOnL,SAAS,KACnBmL,EAAOG,KAAK,UAOPhX,IAAT4L,QAAoC5L,IAAd4Y,IACF,IAAlB/B,EAAO/R,QASyC,IAA9C+R,EAAOnV,QAAO,SAAC0E,GAAD,OAAOsM,GAAUtM,EAAjB,IAAqBtB,UARnC8G,EAAKT,cAAgB/K,OACvByW,EAAOG,KAAP,gBAAiBpL,IAEjBiL,EAAOG,KAAKpL,IAcXgF,GAnD0DA,CAoDlE,EAEKiI,GAAQ,uCAAG,WAAOzS,GAAP,uBAAAtG,EAAA,6DACfsG,EAAEC,iBAEEnH,OAAQc,OAEOA,KADf9B,EAAOsX,GAAUhJ,IACZtN,QACPA,EAAQhB,EAAKgB,aACNhB,EAAKgB,OAGViX,EAAYX,GAAUtX,GAC1B6U,GAAsBoD,GAXP,kBAeMtV,EACjB0K,EACAtK,KAAKC,UAAUiV,GACfjX,GAlBW,OAePwX,EAfO,OAoBbxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YArBE,kDAuBbvX,QAAQC,IAAR,MACAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SA7BjB,QAiCI,MAAf2G,EAAIjI,QAC0C,GAA5CI,OAAO0I,QAAQ,2BAEZ6H,EAAS,IAAMrK,GApCT,0DAAH,sDA0CRuN,GAAQ,uCAAG,WAAO1S,GAAP,qBAAAtG,EAAA,yDACfsG,EAAEC,kBAEE6R,EAAKzX,KAAKqJ,SAAS,QAHR,wBAIPjK,EAAW,IAAIkZ,UACZC,OAAO,OAAQd,GALX,kBAQQvY,EAAkB4L,EAAU1L,GARpC,OAQL6W,EARK,OAUXxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YAXA,kDAaXvX,QAAQC,IAAR,MAEAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SApBnB,YAwBX2R,EAAKzX,KAAKqJ,SAAS,SAxBR,wBAyBb7J,QAAQC,IAAIsY,IAzBC,oBA2BQ3X,EAAa0K,EAAUiN,QAAcxY,GA3B7C,QA2BL0W,EA3BK,OA4BXxJ,EAAMwJ,EAAK5X,SACXqH,EAAO+G,EAAIsK,YA7BA,mDA+BXvX,QAAQC,IAAR,MACAgN,EAAM,KAAMxN,MAAMZ,SAElBqH,EACE,KAAMzG,MAAMZ,SAASG,KAAKkC,QACxB,MACA,KAAMzB,MAAMZ,SAASG,KAAKsH,SArCnB,QA0CI,MAAf2G,EAAIjI,QAC0C,GAA5CI,OAAO0I,QAAQ,2BACjB6H,EAAS,IAAMrK,GA5CJ,kEAAH,sDAkDd,OACE,sBAAK/E,UAAU,OAAf,UACE,yBAAQA,UAAU,cAAlB,8BAEE,4BAAI+E,OAEN,uBAAM/E,UAAU,eAAhB,UACE,eAACyS,GAAA,EAAD,CACEC,SAAO,EACPzT,QAAQ,OACRe,UAAU,yBACV2S,SAhOiB,SAAC9M,GAAD,OAAc4L,EAAY5L,EAA1B,EAiOjBP,iBAAiB,OALnB,UAOGpH,EAAS6G,GAAUG,SAAS,SAC3B,cAACuN,GAAA,EAAI7M,KAAL,UACE,cAAC6M,GAAA,EAAIG,KAAL,CAAU/M,SAAS,OAAnB,oBAIH3H,EAAS6G,GAAUG,SAAS,SACE,OAA7BiD,EAAa5M,IAAI,SACf,cAACkX,GAAA,EAAI7M,KAAL,UACE,cAAC6M,GAAA,EAAIG,KAAL,CAAU/M,SAAS,OAAnB,uBAIR,sBACErF,MAAO,CACL4K,gBAAiB,OACjByH,aAAc,MACdC,YAAa,QACbC,YAAa,wBACbC,YAAa,MACbnS,MAAO,OACPC,OAAQ,eARZ,UAWgB,SAAb0Q,QAAqChY,IAAd2a,GACtB,sBAAK3T,MAAO,CAAEyS,OAAQ,OAAtB,UACE,eAAChF,GAAA,EAAKE,OAAN,CACE,aAAY/P,IAASvJ,OAAS,YAC9BsL,SAAUmU,GAFZ,UAIE,mCAASlW,IAASvJ,OAAlB,eACC0Q,IAAMC,SAASC,QACd0O,EAAU/P,KAAI,SAACxE,GACb,OAAO,wBAAQU,MAAOV,EAAf,SAAmBA,GAC3B,QAGL,uBACA,cAAC,GAAD,CACEoG,OAAQA,EACRjB,SAAUA,EACVoI,iBAAkBhQ,EAClB+P,eAAgBA,EAChBG,sBA1TQ,SAACG,EAAK4C,GAC1B,IAGI1K,EAHAuL,EAAUjC,GAAUhJ,GACpBkL,EAAYD,EAGZE,GAAmB,EACvB,IAAKzL,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,EAAGoH,IAC/BwL,EAAYA,EAAUd,EAAK1K,IACJ,kBAAZ0K,EAAK1K,KAAiByL,EAAkBzL,GAKrD,GAHuB,kBAAZ0K,EAAK1K,KAAiByL,EAAkBzL,GACnDwL,EAAUd,EAAK1K,IAAM8H,GAEI,IAArB2D,EAAwB,CAE1B,IAAM/L,EAAsB,kBAARoI,EAAmBxQ,IAAM,GAC7CiU,EAAUjB,GACRiB,EACAb,EAAK7M,MAAM,EAAG4N,GACd/L,EAEH,CAED3L,QAAQC,IAAI,CAAEuX,YACd3B,EAAU2B,EACX,EAkSa3D,oBAhSgB,SAAC8C,GAC7B,IAGI1K,EAHA8H,EAAMwB,GAAUhJ,GAChBqK,EAAS7C,EAGb,IAAK9H,EAAI,EAAGA,EAAI0K,EAAK9R,OAAS,QACZ9E,IAAZ4W,EAAK1K,GADsBA,IAE/B2K,EAASA,EAAOD,EAAK1K,IAGvB,IAEMN,EAA6B,kBAFnBiL,EAAO3D,OAAO0D,EAAK1K,GAAI,GAEX,GAAkB1I,IAAM,GACpDwQ,EAAMwC,GAAqBxC,EAAK4C,EAAK7M,MAAM,EAAGmC,GAAIN,GAClDkK,EAAU9B,EACX,EAkRaJ,eAAgBiF,KAGlB,uBAEA,sBAAM7R,MAAO,CAAEmJ,WAAY,OAA3B,SAAwCvP,OAG9B,SAAboX,GACC,qBAAKhR,MAAO,CAAEyS,OAAQ,OAAtB,SACE,eAAChF,GAAA,EAAD,CAAMhO,SAAUqS,GAAhB,UACE,cAACrE,GAAA,EAAKQ,MAAN,UACE,4BAAIrQ,IAAS8U,gBAEf,cAACjF,GAAA,EAAKK,QAAN,CACEtO,UAAU,OACVnH,KAAK,OACLsa,OAAO,cACPC,MAAM,OACNjT,SAAU,SAACP,GACT,IAAM8R,EAAO9R,EAAES,OAAOgT,MAAM,GAC5B1B,EAAQD,GACRjY,QAAQC,IAAIgY,GACZ,IAAM4B,EAAa,IAAIC,WAEvBD,EAAWE,UAAY,WACrB,IAAMC,EAAUH,EAAWI,OAC3B,GAAIhC,EAAKzX,KAAKqJ,SAAS,QAAS,CAC9B,IAAMqQ,EAAQ,IAAIC,OAAO,KAAM,KAC3BC,EAAWJ,EAAQ3T,QAAQ6T,EAAO,IAAIG,MAAM,MAEhDjC,EAAiBgC,EAAS,IAC1BA,EAASnH,OAAO,EAAG,GACnBqF,GAAe8B,EAChB,CACD,GAAInC,EAAKzX,KAAKqJ,SAAS,SAAU,CAC/B,IAAMmQ,EAAUH,EAAWI,OAC3BzB,GAAgBwB,EACjB,CACF,EACDH,EAAWS,WAAWrC,EACvB,SAEclY,IAAhBsY,SAA+CtY,IAAlBoY,GAC5B,cAACvM,GAAA,EAAD,UACE,eAACA,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,cAACR,GAAA,EAAUS,OAAX,UACG1H,IAAShJ,eAEZ,cAACiQ,GAAA,EAAUU,KAAX,CACEvF,MAAO,CAAEwT,SAAU,SAAUlT,OAAQ,QADvC,SAGE,eAACqF,GAAA,EAAD,CAAOC,YAAU,EAACC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAAxC,UACE,gCACE,6BACGhB,IAAMC,SAASC,QACdmM,EAAckC,MAAM,KAAK1P,KAAI,SAAC6P,GAC5B,OAAO,6BAAKA,GACb,SAIP,gCACG1O,IAAMC,SAASC,QACdqM,GAAY1N,KAAI,SAACxE,GACf,OACE,6BACG2F,IAAMC,SAASC,QACd7F,EAAEkU,MAAM,KAAK1P,KAAI,SAAC6P,GAChB,OAAO,6BAAKA,GACb,MAIR,sBAQGza,IAAjBwY,IACC,cAAC3M,GAAA,EAAD,UACE,eAACA,GAAA,EAAUO,KAAX,CAAgBC,SAAS,IAAzB,UACE,cAACR,GAAA,EAAUS,OAAX,UACG1H,IAAShJ,eAEZ,cAACiQ,GAAA,EAAUU,KAAX,CACEvF,MAAO,CAAEwT,SAAU,SAAUlT,OAAQ,QADvC,SAGGkR,UAKT,cAAChT,EAAA,EAAD,CAAQC,QAAQ,UAAUpG,KAAK,SAA/B,oBAGA,uBACA,sBAAM2H,MAAO,CAAEmJ,WAAY,OAA3B,SAAwCvP,iBAQvD,CC/Wcsa,OA9Gf,WACE,MAA0CtV,mBAA0B,IAApE,mBAAOjK,EAAP,KAAsBwf,EAAtB,KAGMtW,EAAM9F,aAAayD,QAAQ,eA2BjC,SAAS3E,EAAiBC,GACxBqd,GAAiB,SAACC,GAAD,MAAU,CAACtd,GAAK6D,OAAOyZ,EAAvB,GAElB,CAGD,SAASrd,EAAmBC,GAC1B,IAAI4S,EAAG,YAAOjV,GACdiV,EAAIsC,OAAOlV,EAAI,GACfmd,EAAiBvK,EAClB,CAGD,SAAS3S,IACPkd,EAAiB,GAClB,CAvCDzT,qBAAU,WAER,IAAM2T,EAAU,uCAAG,4BAAAvb,EAAA,+EAGQyB,EAAY,QAAS,CAAC,EAAG,IAHjC,OAGTzC,EAHS,ONrDQG,EM0DRH,EAASA,SAASG,KNzDvCwT,GAAcxT,EMoDO,gDAOfgB,QAAQC,IAAR,MAPe,kCNrDhB,IAAwBjB,CMqDR,uBAAH,qDAWhB,QAAoBe,IAAhByS,GAEJ,IACE4I,GAGD,CAFC,MAAO3b,GACPO,QAAQC,IAAIR,EACb,CAEF,GAAE,IAoBH,IAAM4b,EAAwB,CAC5B3f,cAAeA,EACfkC,mBACAE,qBACAE,sBAOF,OAJAL,EAAoBK,mBAAqBA,EACzCL,EAAoBC,iBAAmBA,EACvCD,EAAoBG,mBAAqBA,EAE7B,OAAR8G,EAEA,qBAAK2B,UAAU,MAAf,SACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOoQ,KAAK,IAAI2E,QAAS,cAAC5V,EAAD,MACzB,cAAC,IAAD,CACEiR,KAAK,eACL2E,QAAS,cAACxD,GAAD,CAASxM,SAAU,qBAQtC,cAAC,GAAWiQ,SAAZ,CAAqB1U,MAAOwU,EAA5B,SACE,qBAAK9U,UAAU,MAAf,SACE,eAAC,IAAD,WACE,kCACE,cAAC,IAAD,CAASU,GAAG,QAAQV,UAAU,WAA9B,SA7Ec5D,8BAgFd,cAAC6F,GAAD,OAGF,qBAAKjC,UAAU,OAAf,SACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOoQ,KAAK,IAAI2E,QAAS,cAAC9T,EAAD,MACzB,cAAC,IAAD,CAAOmP,KAAK,QAAQ2E,QAAS,cAAC9T,EAAD,MAC7B,cAAC,IAAD,CAAOmP,KAAK,oBAAoB2E,QAAS,cAACb,GAAD,MAEzC,cAAC,IAAD,CAAO9D,KAAK,sBAAsB2E,QAAS,cAAC9F,GAAD,MAC3C,cAAC,IAAD,CAAOmB,KAAK,kBAAkB2E,QAAS,cAACxD,GAAD,MACvC,cAAC,IAAD,CAAOnB,KAAK,SAAS2E,QAAS,cAAChN,GAAD,CAAMrB,IAAI,YAExC,cAAC,IAAD,CAAO0J,KAAK,gBAAgB2E,QAAS,cAACxK,GAAD,MACrC,cAAC,IAAD,CAAO6F,KAAK,OAAO2E,QAAS,cAAC1T,EAAD,MAE5B,cAAC,IAAD,CAAO+O,KAAK,IAAI2E,QAAS,cAAC,IAAD,CAAUrU,GAAG,OAAOZ,SAAO,WAGxD,qBAAKE,UAAU,YAAf,SACE,cAAC0K,GAAD,YAMX,ECrJDuK,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFlR,SAASmR,eAAe,Q","file":"static/js/main.bbb13a52.chunk.js","sourcesContent":["const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  keep_logged: \"Mantieni Accesso\",\r\n  select: \"Seleziona\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadr in \",\r\n  tools: \"Strumenti\",\r\n  notifications: \"Notifiche\",\r\n  file_content: \"Contenuto del file\",\r\n\r\n  clear_all: \"Cancella tutto\",\r\n\r\n  ///Completamento campi\r\n  enter: \"Inserisci\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo di Measurify!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti i collegamenti alle pagine per le quali possiedi l'autorizzazione.\",\r\n  right_bar_descr_hp:\r\n    \"Nella barra a destra sono presenti le informazioni relative al tuo account e alla scadenza della sessione corrente.\",\r\n  session_expire_info_hp: `Al termine della sessione non sarai espulso automaticamente e potrai continuare a visualizzare la pagina attiva. Ogni azione successiva porter alla disconnessione.`,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante. Se sei arrivato a questa pagina utilizzando le funzioni dell'interfaccia segnala il bug: un team accuratamente selezionato di studenti universitari prover a risolvere il problema.\",\r\n\r\n  ///Azioni\r\n  submit: \"Invio\",\r\n  cancel: \"Annulla\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n\r\n  ///Errori\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  keep_logged: \"Keep Logged In\",\r\n\r\n  select: \"Select\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n  tools: \"Tools\",\r\n  notifications: \"Notifications\",\r\n  file_content: \"File content\",\r\n\r\n  clear_all: \"Clear all\",\r\n\r\n  enter: \"Enter\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  add_tenant: \"Add tenant\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to Measurify dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains all the links for the pages you are allowed to navigate to\",\r\n  right_bar_descr_hp:\r\n    \"The right bar contains the information about your account and the expiration of the current session.\",\r\n  session_expire_info_hp:\r\n    \"When this session will expire you will not be logged-out instantly, you will still be able to watch the active page. Each action on this or another page will force your log-out.\",\r\n  github_page_hp: \"Measurify Github page\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"It looks like you used a broken link. If you arrived at this page using the interface features report the bug: a carefully selected team of college students will try to fix it.\",\r\n\r\n  ///Actions\r\n  submit: \"Submit\",\r\n  cancel: \"Cancel\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n\r\n  ///Errors\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n};\r\n\r\nexport default localization_en;\r\n","import { api_url } from \"../config\";\r\n\r\nconst axios = require(\"axios\").default;\r\n\r\nconst https = require(\"https\");\r\n\r\nconst instance = axios.create({\r\n  httpsAgent: new https.Agent({\r\n    ///unsafe, delete in prod\r\n    rejectUnauthorized: false,\r\n  }),\r\n});\r\n\r\nexport let notificationManager = {\r\n  PushNotification: (obj) => {},\r\n  RemoveNotification: (id) => {},\r\n  ClearNotifications: () => {},\r\n};\r\n\r\n//login\r\nexport function login(username, password, tenant) {\r\n  const body = {\r\n    username: `${username}`,\r\n    password: `${password}`,\r\n    tenant: `${tenant}`,\r\n  };\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"diten-token\", response.data.token);\r\n        localStorage.setItem(\r\n          \"diten-token-expiration-time\",\r\n          response.data.token_expiration_time\r\n        );\r\n        localStorage.setItem(\"diten-username\", response.data.user.username);\r\n        localStorage.setItem(\"diten-user-role\", response.data.user.type);\r\n        localStorage.setItem(\"diten-user-tenant\", tenant);\r\n        localStorage.setItem(\r\n          \"diten-login-time\",\r\n          new Date().getTime().toString()\r\n        );\r\n\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//refresh token\r\nexport function refreshToken() {\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n\r\n  const url_string = api_url + \"/login\";\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, {}, options)\r\n      .then((response) => {\r\n        localStorage.setItem(\"diten-token\", response.data.token);\r\n        localStorage.setItem(\r\n          \"diten-login-time\",\r\n          new Date().getTime().toString()\r\n        );\r\n\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n//this function post a single thing inside the DB\r\nexport function postThing(thingId, pt_options = {}) {\r\n  const body = { _id: thingId };\r\n  return new Promise((resolve, reject) => {\r\n    post_generic(\"things\", body, pt_options)\r\n      .then((response) => {\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\n// This function checks if a thing (i.e., trip) is already in the DB\r\n// If not in, create one\r\nexport function checkThingAlreadyIn(thingId) {\r\n  const url = api_url + \"/things/\" + thingId;\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      \"cache-control\": \"no-cache\",\r\n      Authorization: GetToken(),\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((request) => {\r\n        //thing found in database\r\n        if (request.status === 200) resolve({ found: true });\r\n      })\r\n      .catch((error) => {\r\n        //thing not found in database\r\n        if (error.response.status === 404) {\r\n          resolve({ found: false });\r\n        }\r\n        /*else {\r\n          reject(false);\r\n        }*/\r\n      });\r\n  });\r\n}\r\n\r\nfunction get_how_many_docs(resource_type, fst) {\r\n  return new Promise((resolve, reject) => {\r\n    get_generic(resource_type, fst)\r\n      .then((response) => {\r\n        resolve(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log('Error: function \"get_how_many_docs\" threw an error');\r\n        console.log(error);\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_file_generic(\r\n  resource_type,\r\n  formData,\r\n  additionalHeader = {},\r\n  token = undefined\r\n) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/file\";\r\n\r\n  console.log(\"POST file:\" + url_string);\r\n\r\n  const tempH = {\r\n    \"Content-Type\": \"multipart/form-data\",\r\n    \"Cache-Control\": \"no-cache\",\r\n    Authorization: token,\r\n  };\r\n\r\n  Object.entries(additionalHeader).forEach(([k, v]) => {\r\n    tempH[k] = v;\r\n  });\r\n  const options = {\r\n    headers: tempH,\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, formData, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of file on: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of file on: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function post_generic(resource_type, body, token = undefined) {\r\n  if (token === undefined) token = GetToken();\r\n  const url_string = api_url + \"/\" + resource_type + \"/\";\r\n\r\n  console.log(\"POST :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  console.log({ header: options, body: body, token: token });\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .post(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Successful POST of a resource type: \" + resource_type,\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg: \"Error doing a POST of a resource type: \" + resource_type,\r\n        });\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function put_generic(resource_type, body, id, token = undefined) {\r\n  const url_string = api_url + \"/\" + resource_type + \"/\" + id;\r\n  if (token === undefined) token = GetToken();\r\n\r\n  console.log(\"PUT :\" + url_string);\r\n\r\n  const options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .put(url_string, body, options)\r\n      .then((response) => {\r\n        notificationManager.PushNotification({\r\n          name: \"info\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Successful PUT of a resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body),\r\n        });\r\n\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"Error doing a PUT on resource type: \" +\r\n            resource_type +\r\n            \", id: \" +\r\n            id +\r\n            \", body: \" +\r\n            JSON.stringify(body) +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function delete_generic(resource_type, id, token = undefined) {\r\n  let url_string = api_url + \"/\" + resource_type;\r\n  if (token === undefined) token = GetToken();\r\n  if (id !== undefined) {\r\n    url_string += \"/\" + id;\r\n  }\r\n  console.log(\"DELETE :\" + url_string);\r\n\r\n  //url: url_string;\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n  };\r\n\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .delete(url_string, options)\r\n      .then((response) => {\r\n        if (id !== undefined) {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resource: \" + id + \", of type: \" + resource_type,\r\n          });\r\n        } else {\r\n          notificationManager.PushNotification({\r\n            name: \"info\",\r\n            time: new Date().toTimeString(),\r\n            msg: \"Deleted resources of type: \" + resource_type,\r\n          });\r\n        }\r\n        resolve({ response: response }); //true;\r\n      })\r\n      .catch((error) => {\r\n        notificationManager.PushNotification({\r\n          name: \"error\",\r\n          time: new Date().toTimeString(),\r\n          msg:\r\n            \"error deleting resource: \" +\r\n            id +\r\n            \", of type: \" +\r\n            resource_type +\r\n            \". \" +\r\n            error.message,\r\n        });\r\n        if (error.statusCode === 404) {\r\n          //Not found\r\n          notificationManager.PushNotification({\r\n            name: \"error\",\r\n            time: new Date().toTimeString(),\r\n            msg:\r\n              \"Please check if your user is authorized to delete the resource. \" +\r\n              error.message,\r\n          });\r\n        }\r\n\r\n        reject({ error: error }); //false;\r\n      });\r\n  });\r\n}\r\n\r\nexport async function get_generic(resource_type, qs = {}, token) {\r\n  let url = api_url + \"/\" + resource_type + \"/\";\r\n  if (token === undefined) token = GetToken();\r\n\r\n  if (qs.filter !== undefined) {\r\n    url = url.concat(\"?filter=\" + qs.filter);\r\n  } else {\r\n    url = url.concat(\"?filter=\");\r\n  }\r\n  if (qs.limit !== undefined) {\r\n    url = url.concat(\"&limit=\" + qs.limit);\r\n  }\r\n  if (qs.page !== undefined) {\r\n    url = url.concat(\"&page=\" + qs.page);\r\n  }\r\n\r\n  console.log(\"GET :\" + url);\r\n\r\n  let options = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      \"Cache-Control\": \"no-cache\",\r\n      Authorization: token,\r\n    },\r\n\r\n    json: true,\r\n  };\r\n  return new Promise((resolve, reject) => {\r\n    instance\r\n      .get(url, options)\r\n      .then((response) => {\r\n        resolve({\r\n          response: response,\r\n          docs: response.data.docs,\r\n          totalDocs: response.data.totalDocs,\r\n          limit: response.data.limit,\r\n          totalPages: response.data.totalPages,\r\n          page: response.data.page,\r\n          pagingCounter: response.data.pagingCounter,\r\n          hasPrevPage: response.data.hasPrevPage,\r\n          hasNextPage: response.data.hasNextPage,\r\n          prevPage: response.data.prevPage,\r\n          nextPage: response.data.nextPage,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        /*commons.PushMsg({\r\n          type: \"error\",\r\n          msg:\r\n            \"Error getting resource(s) of type: \" +\r\n            resource_type +\r\n            \", with filter: \" +\r\n            qs.limit +\r\n            \". \" +\r\n            error.message,\r\n        });*/\r\n        reject({ error: error });\r\n      });\r\n  });\r\n}\r\n\r\n//return the login token from the localstorage\r\nfunction GetToken() {\r\n  return localStorage.getItem(\"diten-token\");\r\n}\r\n","//validation functions used for input disable/validation etc.\r\n//the can be defined when required and used as \"pointer to function\" into the appropriate dict config.js\r\n//return must be coherent with name: i.e isInUse => true when is used\r\n\r\nimport { get_generic } from \"./http_operations\";\r\n\r\n//this function return true if the feature is in use (check on measurements/devices)\r\nexport async function isFeatureInUse(feature) {\r\n  const qs = { filter: JSON.stringify({ feature: feature }) };\r\n\r\n  try {\r\n    //check if feature has associated measurements\r\n    const res = await get_generic(\"measurements\", qs);\r\n    if (res.totalDocs > 0) {\r\n      //has measurements, so it's in use\r\n      return true;\r\n    } else {\r\n      //if the feature has no measurements, check if it has device associated\r\n      const qs = { filter: JSON.stringify({ features: feature }) };\r\n      const res = await get_generic(\"devices\", qs);\r\n\r\n      if (res.totalDocs > 0) {\r\n        //has a device, so it's in use\r\n        return true;\r\n      } else return false;\r\n    }\r\n  } catch (errors) {\r\n    console.log(\"Error on isFeatureInUse\");\r\n    console.log(errors);\r\n    return false;\r\n  }\r\n}\r\n\r\n//this function always return true\r\nexport function alwaysTrue() {\r\n  return true;\r\n}\r\n","import { isFeatureInUse, alwaysTrue } from \"./services/validations\";\r\n\r\n//url of API to POST/GET the data\r\nexport const api_url = \"https://localhost/v1\";\r\n\r\n//name of this gui, shown to the user\r\nexport const website_name = \"Measurify Admin Dashboard\";\r\n\r\n//languages enabled for this GUI, only english \"en\" and italian \"it\" are supported with this version\r\n//if no languages are enabled, the GUI will be localized in english\r\nexport const languages = [];\r\n\r\n//dictionary of pages: key is the route for the API REST, value array contains the fields shown to the user\r\n//(action is a special field that will) enable actions for each row || still required, future version could have it removed\r\nexport const pages = {};\r\npages[\"users\"] = [\"username\", \"type\", \"actions\"];\r\npages[\"tags\"] = [\"_id\", \"actions\"];\r\npages[\"features\"] = [\"_id\", \"actions\"];\r\npages[\"devices\"] = [\"_id\", \"tags\", \"actions\"];\r\npages[\"protocols\"] = [\"_id\", \"description\", \"actions\"];\r\npages[\"experiments\"] = [\"_id\", \"description\", \"protocol\", \"actions\"];\r\n\r\n//alias dictionary: key is the page, value object contains the fields that will be renamed into page table header key => value\r\nexport const aliasPages = {};\r\naliasPages[\"features\"] = { _id: \"Feature Name\", actions: \"Actions\" };\r\naliasPages[\"tags\"] = { _id: \"Tag Name\", actions: \"Actions\" };\r\naliasPages[\"devices\"] = { _id: \"Device Name\", actions: \"Actions\" };\r\n\r\n//actions dictionary: key is the page, value array contains the possible actions, that are view | edit | delete\r\nexport const pageActions = {};\r\npageActions[\"features\"] = [\"view\", \"edit\", \"duplicate\", \"delete\"];\r\npageActions[\"users\"] = [\"view\", \"delete\"];\r\npageActions[\"tags\"] = [\"view\", \"edit\", \"delete\"];\r\npageActions[\"devices\"] = [\"view\", \"edit\", \"delete\"];\r\npageActions[\"protocols\"] = [\"view\", \"delete\"];\r\npageActions[\"experiments\"] = [\"view\", \"delete\"];\r\n\r\n//view dictionary: key is the page, value array contains the fields shown to the user with \"view\" action\r\nexport const viewFields = {};\r\nviewFields[\"users\"] = [\"username\", \"type\", \"actions\", \"fieldmask\", \"status\"];\r\nviewFields[\"features\"] = [\r\n  { items: [\"name\", \"type\", \"unit\", \"dimension\"] },\r\n  \"tags\",\r\n];\r\nviewFields[\"tags\"] = [\"tags\"];\r\nviewFields[\"devices\"] = [\"_id\", \"features\", \"tags\", \"scripts\"];\r\nviewFields[\"protocols\"] = [\"_id\", \"description\", \"metadata\", \"topics\"];\r\nviewFields[\"experiments\"] = [\r\n  \"_id\",\r\n  \"description\",\r\n  \"protocol\",\r\n  \"history\",\r\n  \"metadata\",\r\n];\r\n\r\n//edit dictionary: key is the page, value array contains the fields that can be edited with \"edit\" action\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:0 for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n// and so on\r\nexport const editFields = {};\r\neditFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN }],\r\n  tags: [\"\"],\r\n};\r\neditFields[\"tags\"] = {\r\n  tags: [\"\"],\r\n};\r\neditFields[\"devices\"] = { visibility: \"\", tags: [\"\"] };\r\n\r\n//add dictionary: key is the page, value array contains the fields that can will be used to post the entity\r\n//fields should be specified in the same format of the objet that will be represented:\r\n// - key:\"\" for an string field,\r\n// - key:0 for a numeric field\r\n// - key:[\"\"] for an array of string\r\n// - key:[{subKey1:\"\",subkey2:\"\"}] for an array of object with 2 keys each whose value is a string\r\n// and so on\r\nexport const addFields = {};\r\naddFields[\"tenants\"] = {\r\n  token: \"\",\r\n  _id: \"\",\r\n  organization: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  phone: \"\",\r\n  admin_username: \"\",\r\n  admin_password: \"\",\r\n  passwordhash: \"\",\r\n};\r\naddFields[\"tags\"] = { _id: \"\", tags: [\"\"] };\r\naddFields[\"features\"] = {\r\n  _id: \"\",\r\n  items: [{ name: \"\", type: \"\", unit: \"\", dimension: NaN }],\r\n  tags: [\"\"],\r\n};\r\naddFields[\"users\"] = { username: \"\", password: \"\", type: \"\" };\r\n\r\naddFields[\"devices\"] = {\r\n  _id: \"\",\r\n  features: [\"\"],\r\n};\r\n\r\naddFields[\"protocols\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  metadata: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      type: \"\",\r\n    },\r\n  ],\r\n  topics: [\r\n    {\r\n      name: \"\",\r\n      description: \"\",\r\n      fields: [{ name: \"\", description: \"\", type: \"\" }],\r\n    },\r\n  ],\r\n};\r\n\r\n//experiments page works differently, so keep it empty\r\naddFields[\"experiments\"] = {\r\n  _id: \"\",\r\n  description: \"\",\r\n  // todoanonymization: true,\r\n  state: \"\",\r\n};\r\n\r\n//edit fields specifiers dictionary\r\n//this dictionary allow to specify particular behaviour for input fields, that can be managed by a specific function\r\n// type can be \"disable\" -> policy is applied to fields to be disabled\r\n//\r\nexport const editFieldsSpecifier = {};\r\neditFieldsSpecifier[\"features\"] = {\r\n  _id: { type: \"disable\", policy: isFeatureInUse },\r\n  items: { type: \"disable\", policy: isFeatureInUse },\r\n};\r\n\r\n//dictionary to select the way to post entity/ies, it's an array containing \"form\", \"file\", or both\r\nexport const addTypes = {};\r\naddTypes[\"tags\"] = [\"form\", \"file\"];\r\naddTypes[\"features\"] = [\"form\", \"file\"];\r\naddTypes[\"tenants\"] = [\"form\"];\r\naddTypes[\"users\"] = [\"form\", \"file\"];\r\naddTypes[\"devices\"] = [\"form\", \"file\"];\r\naddTypes[\"protocols\"] = [\"form\", \"file\"];\r\naddTypes[\"experiments\"] = [\"form\", \"file\"];\r\n\r\n//fetched types alias\r\nexport const fetchedPageTypes = {};\r\nfetchedPageTypes[\"users\"] = { type: \"UserRoles\", status: \"UserStatusTypes\" };\r\nfetchedPageTypes[\"devices\"] = {\r\n  measurementBufferPolicy: \"MeasurementBufferPolicyTypes\",\r\n};\r\n","import localization_it from \"./localizations/localization_it\";\r\nimport localization_en from \"./localizations/localization_en\";\r\n\r\nimport { languages } from \"../config\";\r\n\r\ninterface ILocalization {\r\n  username: string;\r\n  password: string;\r\n  tenant: string;\r\n  keep_logged: string;\r\n  select: string;\r\n  language: string;\r\n  welcome: string;\r\n  role: string;\r\n  session_expire_in: string;\r\n  tools: string;\r\n  notifications: string;\r\n  file_content: string;\r\n\r\n  clear_all: string;\r\n\r\n  ///Fields\r\n  enter: string;\r\n  username_suggestion: string;\r\n  password_suggestion: string;\r\n  tenant_suggestion: string;\r\n  add_tenant: string;\r\n\r\n  //homepage\r\n  welcome_hp: string;\r\n  left_bar_descr_hp: string;\r\n  right_bar_descr_hp: string;\r\n  session_expire_info_hp: string;\r\n  github_page_hp: string;\r\n  github_issue_page_hp: string;\r\n\r\n  //404\r\n  oh_no: string;\r\n  broken_link: string;\r\n\r\n  ///Actions\r\n  submit: string;\r\n  cancel: string;\r\n  login: string;\r\n  logout: string;\r\n\r\n  ///Errors\r\n  login_error: string;\r\n  unauthorised_user: string;\r\n  session_expired: string;\r\n}\r\n\r\nexport default function locale() {\r\n  let tkn = localStorage.getItem(\"diten-language\");\r\n  if (languages.length === 0) {\r\n    return localization_en as ILocalization;\r\n  }\r\n  if (languages.length === 1) {\r\n    tkn = languages[0];\r\n  }\r\n  //let localization : ILocalization;\r\n\r\n  //check token first\r\n  if (tkn === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (tkn === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //then check language from browser\r\n  if (navigator.language.substring(0, 2) === \"it\") {\r\n    return localization_it as ILocalization;\r\n  }\r\n\r\n  if (navigator.language.substring(0, 2) === \"en\") {\r\n    return localization_en as ILocalization;\r\n  }\r\n\r\n  //if the token found or language is not valid -> default language: english\r\n  return localization_en as ILocalization;\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { languages } from \"../../config\";\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"diten-language\", language);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        <Button variant=\"outline-info\" onClick={() => setSessionLanguage(\"it\")}>\r\n          Ita\r\n        </Button>\r\n        <Button variant=\"outline-info\" onClick={() => setSessionLanguage(\"en\")}>\r\n          Eng\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { login } from \"../../services/http_operations\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { languages } from \"../../config\";\r\nimport \"./authPage.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nconst AuthPageComp = () => {\r\n  //const { location, replace } = useHistory();\r\n  const [user, setUser] = useState(\"\");\r\n  const [pwd, setPwd] = useState(\"\");\r\n  const [tenant, setTenant] = useState(\"\");\r\n  const [logged, setLogged] = useState(true);\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  async function submitForm(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const res = await login(user, pwd, tenant);\r\n      if (logged === true) localStorage.setItem(\"diten-logged-in\", \"keep\");\r\n      else localStorage.setItem(\"diten-logged-in\", \"logout\");\r\n      window.location.replace(\"/\");\r\n    } catch (error) {\r\n      console.log({ error: error.response.data });\r\n      setMsg(error.response.data.message + \" : \" + error.response.data.details);\r\n    }\r\n  }\r\n\r\n  function handleUserChange(event) {\r\n    setUser(event.target.value);\r\n  }\r\n\r\n  function handlePwdChange(event) {\r\n    setPwd(event.target.value);\r\n  }\r\n\r\n  function handleTenantChange(event) {\r\n    setTenant(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Measurify</div>\r\n        <br />\r\n        <div className=\"subtitle-section\">From the edge to cloud and back</div>\r\n      </div>\r\n      {languages.length > 1 && (\r\n        <div className=\"language-wrapper\">\r\n          <LanguageSelector />\r\n        </div>\r\n      )}\r\n\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <h4>{locale().login}</h4>\r\n        <form className=\"form-content\" onSubmit={submitForm}>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().username}</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              placeholder={locale().username_suggestion}\r\n              onChange={handleUserChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().password}</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              placeholder={locale().password_suggestion}\r\n              onChange={handlePwdChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().tenant}</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"tenant\"\r\n              placeholder={locale().tenant_suggestion}\r\n              onChange={handleTenantChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().keep_logged}</label>\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"logged\"\r\n              className=\"input-checkbox\"\r\n              checked={logged}\r\n              onChange={(e) => {\r\n                setLogged(e.target.checked);\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"buttons-wrapper center\">\r\n            <Button type=\"submit\" variant=\"success\">\r\n              {locale().submit}\r\n            </Button>\r\n          </div>\r\n\r\n          <br />\r\n          <div style={{ color: \"red\" }}>{msg}</div>\r\n          <br />\r\n          <div className=\"form-row row\">\r\n            <NavLink to={`/add/tenants`}>\r\n              <Button variant=\"outline-success\" size=\"sm\">\r\n                {locale().add_tenant}\r\n                <i\r\n                  className=\"fa fa-plus-circle\"\r\n                  aria-hidden=\"true\"\r\n                  title={\"Add\"}\r\n                  style={{\r\n                    width: 30 + \"px\",\r\n                    height: 30 + \"px\",\r\n                    marginRight: 10 + \"px\",\r\n                    opacity: 0.85,\r\n                  }}\r\n                ></i>\r\n              </Button>\r\n            </NavLink>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = AuthPageComp;\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { website_name } from \"../../config\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">{website_name}</header>\r\n      <main className=\"page-content\">\r\n        <div className=\"home-page\">\r\n          <div className=\"info-box\">\r\n            <div className=\"info-text\">\r\n              {locale().welcome_hp}\r\n              <br />\r\n              <br />\r\n              {locale().left_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().right_bar_descr_hp}\r\n              <br />\r\n              <br />\r\n              {locale().session_expire_info_hp}\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/tree/r2.0\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/tree/r2.0\"\r\n              >\r\n                {locale().github_page_hp}\r\n              </a>\r\n              <br />\r\n              <br />\r\n              <a\r\n                href=\"https://github.com/measurify/server/issues\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                title=\"https://github.com/measurify/server/issues\"\r\n              >\r\n                {locale().github_issue_page_hp}\r\n              </a>\r\n              <br />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = HomePageComp;\r\n","import React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">\r\n          {locale().oh_no}\r\n          <br />\r\n          <br />\r\n          {locale().broken_link}\r\n          <br />\r\n          <br />\r\n          <a\r\n            href=\"https://github.com/measurify/server/issues\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            title=\"https://github.com/measurify/server/issues\"\r\n          >\r\n            {locale().github_issue_page_hp}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = notFoundPageComp;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport locale from \"../../common/locale\";\r\nimport { refreshToken } from \"../../services/http_operations\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nimport { pages, languages } from \"../../config\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nfontawesome.library.add(\r\n  faTimes,\r\n  faBars,\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n  faCheck\r\n);\r\n\r\nconst NavigationComp = () => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  const [username, setUsername] = useState<string>();\r\n  const [role, setRole] = useState<string>();\r\n  const [tenant, setTenant] = useState<string>();\r\n  const [loginTime, setLoginTime] = useState<number>();\r\n  const [tknExpTime, setTknExpTime] = useState<string>();\r\n  const [keepLogged, setKeepLogged] = useState<string>();\r\n  const [displayTime, setDisplayTime] = useState<string>(\"00:00\");\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"diten-username\");\r\n    const role = localStorage.getItem(\"diten-user-role\");\r\n    const tenant = localStorage.getItem(\"diten-user-tenant\");\r\n    const loginTime = localStorage.getItem(\"diten-login-time\");\r\n    const tokenExpiration = localStorage.getItem(\"diten-token-expiration-time\");\r\n    const keepLogged = localStorage.getItem(\"diten-logged-in\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n    setTknExpTime(tokenExpiration !== null ? tokenExpiration : \"300m\");\r\n    setKeepLogged(keepLogged !== null ? keepLogged : \"logout\");\r\n    setLoginTime(loginTime !== null ? parseInt(loginTime) : Date.now());\r\n\r\n    setTimeout(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, [displayTime]);\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIconRole() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  function CalcEnding() {\r\n    let t0;\r\n    if (loginTime === undefined) {\r\n      const retryLoginTime = localStorage.getItem(\"diten-login-time\");\r\n      if (retryLoginTime !== null) {\r\n        t0 = parseInt(retryLoginTime);\r\n\r\n        setLoginTime(parseInt(retryLoginTime));\r\n      } else {\r\n        t0 = Date.now();\r\n      }\r\n    } else {\r\n      t0 = loginTime;\r\n    }\r\n    const duration = DurationToMilliSeconds();\r\n    const endTime = t0 + duration;\r\n\r\n    let remainingSec = (endTime - Date.now()) / 1000;\r\n\r\n    if (remainingSec < 60) {\r\n      if (keepLogged === \"keep\") {\r\n        refreshToken().then(() => {\r\n          setLoginTime(undefined);\r\n          return;\r\n        });\r\n      }\r\n    }\r\n    if (remainingSec <= 0) {\r\n      localStorage.clear();\r\n      setDisplayTime(locale().session_expired);\r\n      window.location.replace(\"/\");\r\n      return;\r\n    }\r\n\r\n    const mins = Math.floor(remainingSec / 60);\r\n    const secs = Math.floor(remainingSec % 60);\r\n    setDisplayTime(mins + \" : \" + (\"0\" + secs).slice(-2));\r\n  }\r\n\r\n  function DurationToMilliSeconds() {\r\n    let exp;\r\n    if (tknExpTime === undefined) {\r\n      const retryTokenExpiration = localStorage.getItem(\r\n        \"diten-token-expiration-time\"\r\n      );\r\n      if (retryTokenExpiration !== null) {\r\n        exp = retryTokenExpiration;\r\n        setTknExpTime(retryTokenExpiration);\r\n      } else {\r\n        exp = \"5m\";\r\n      }\r\n    } else {\r\n      exp = tknExpTime;\r\n    }\r\n    if (exp.endsWith(\"h\")) {\r\n      return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n    } else if (exp.endsWith(\"m\")) {\r\n      return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n    } else if (exp.endsWith(\"s\")) {\r\n      return parseInt(exp.slice(0, -1)) * 1000;\r\n    }\r\n    //default case, right now the same as seconds\r\n    else {\r\n      return parseInt(exp.slice(0, -1)) * 1000;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n      <hr />\r\n      <div className=\"data-wrapper\">\r\n        <div>\r\n          <h3>\r\n            {locale().welcome + \" \"}\r\n            <b>{username}</b>\r\n          </h3>\r\n          <h3>\r\n            {locale().role + \" \"}\r\n            {renderIconRole()}\r\n          </h3>\r\n          <h3>\r\n            {locale().tenant + \" \"}\r\n            <b>{tenant}</b>\r\n          </h3>\r\n          <h3>\r\n            {displayTime !== locale().session_expired\r\n              ? locale().session_expire_in + displayTime\r\n              : displayTime}\r\n          </h3>\r\n          <h3>\r\n            {locale().keep_logged}\r\n            {\"  \"}\r\n\r\n            {keepLogged === \"keep\" ? (\r\n              <i\r\n                className=\"fa fa-check\"\r\n                id=\"logged_icon_check\"\r\n                aria-hidden=\"true\"\r\n                style={{\r\n                  width: 10 + \"px\",\r\n                  height: 10 + \"px\",\r\n                  marginRight: 2 + \"px\",\r\n                }}\r\n              ></i>\r\n            ) : (\r\n              <i\r\n                className=\"fa fa-times\"\r\n                id=\"logged_icon_times\"\r\n                aria-hidden=\"true\"\r\n                style={{\r\n                  width: 10 + \"px\",\r\n                  height: 10 + \"px\",\r\n                  marginRight: 2 + \"px\",\r\n                }}\r\n              ></i>\r\n            )}\r\n          </h3>\r\n        </div>\r\n\r\n        <br />\r\n\r\n        <Button variant=\"outline-danger\" onClick={() => logOut()}>\r\n          {locale().logout}\r\n        </Button>\r\n        {languages.length > 1 && (\r\n          <React.Fragment>\r\n            <hr />\r\n            <h2>\r\n              <LanguageSelector />\r\n            </h2>\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n      <hr />\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          <div className=\"app-nav-text\">{locale().tools}</div>\r\n          <hr />\r\n          {Object.keys(pages).map((k) => {\r\n            return (\r\n              <NavLink\r\n                to={`/` + k}\r\n                className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n                //activeClassName=\"active\"\r\n                key={k}\r\n                onClick={() => setIsOpened(false)}\r\n              >\r\n                {k}\r\n              </NavLink>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport const Navigation = NavigationComp;\r\n\r\n/*\r\nMass Operation navlink Fragment\r\n\r\n <hr />\r\n          <NavLink\r\n            to={`/massop`}\r\n            className={(navData) => (navData.isActive ? \"active\" : \"\")}\r\n            //activeClassName=\"active\"\r\n            key={`massop`}\r\n            onClick={() => setIsOpened(false)}\r\n          >\r\n            Mass Operations\r\n          </NavLink>\r\n\r\n*/\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { viewFields } from \"../../config\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport {\r\n  faEye,\r\n  faPencilAlt,\r\n  faCopy,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport {\r\n  Button,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Accordion,\r\n  Table,\r\n} from \"react-bootstrap\";\r\n\r\nimport { delete_generic } from \"../../services/http_operations\";\r\n\r\nfontawesome.library.add(faEye, faPencilAlt, faCopy);\r\n\r\nfunction ActionContent(props) {\r\n  const toShow = {};\r\n  console.log({ props });\r\n  viewFields[props.resType].map((k) => {\r\n    console.log(k.constructor === Object);\r\n    if (k.constructor === Object) {\r\n      Object.keys(k).map((subK) => {\r\n        if (Array.isArray(props.resource[subK])) {\r\n          toShow[subK] = props.resource[subK].map((e) => {\r\n            const row = {};\r\n            k[subK].map((f) => {\r\n              row[f] = e[f];\r\n            });\r\n            return row;\r\n          });\r\n        } else {\r\n          toShow[subK] = props.resource[subK];\r\n        }\r\n      });\r\n    } else {\r\n      if (Object.keys(props.resource).includes(k)) {\r\n        toShow[k] = props.resource[k];\r\n      }\r\n    }\r\n  });\r\n\r\n  console.log({ toShow });\r\n  //render accordion with table when field is array of object\r\n  return UnrollView(toShow);\r\n}\r\n\r\nfunction UnrollView(item) {\r\n  return (\r\n    <Accordion defaultActiveKey={0} size=\"lg\">\r\n      {React.Children.toArray(\r\n        Object.entries(item).map(([key, value], i) => {\r\n          return (\r\n            <Accordion.Item eventKey={i}>\r\n              <Accordion.Header>\r\n                <b>{key}</b>\r\n              </Accordion.Header>\r\n              <Accordion.Body>\r\n                {value instanceof Object ? (\r\n                  Array.isArray(value) ? (\r\n                    value[0] !== undefined ? (\r\n                      Object.values(value[0]).some(\r\n                        (e) => e instanceof Object\r\n                      ) ? (\r\n                        React.Children.toArray(\r\n                          value.map((single, i) => {\r\n                            return (\r\n                              <Accordion>\r\n                                <Accordion.Item eventKey=\"0\">\r\n                                  <Accordion.Header>\r\n                                    {key} <i>[{i}]</i>\r\n                                  </Accordion.Header>\r\n                                  <Accordion.Body>\r\n                                    {UnrollView(single)}\r\n                                  </Accordion.Body>\r\n                                </Accordion.Item>\r\n                              </Accordion>\r\n                            );\r\n                          })\r\n                        )\r\n                      ) : value[0] instanceof Object ? (\r\n                        <Table responsive striped bordered hover size=\"sm\">\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                Object.keys(value[0]).map((e) => {\r\n                                  return <th>{e}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              value.map((row) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      Object.values(row).map((v) => {\r\n                                        return <td>{v}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      ) : (\r\n                        \"[ \" + value.join(\" , \") + \" ]\"\r\n                      )\r\n                    ) : (\r\n                      \"[ ]\"\r\n                    )\r\n                  ) : (\r\n                    \"AAAA\"\r\n                  )\r\n                ) : value === undefined || value == null ? (\r\n                  <i>None</i>\r\n                ) : (\r\n                  value\r\n                )}\r\n              </Accordion.Body>\r\n            </Accordion.Item>\r\n          );\r\n        })\r\n      )}\r\n    </Accordion>\r\n  );\r\n}\r\n\r\nexport default function ActionManager(props) {\r\n  const [res, setRes] = useState(undefined);\r\n  useEffect(() => {\r\n    //use effect body\r\n  }, [props]);\r\n\r\n  const viewPopover =\r\n    res !== undefined ? (\r\n      <Popover\r\n        id=\"popover-positioned-left\"\r\n        style={{ width: 20 + \"vw\", minWidth: 400 + \"px\" }}\r\n      >\r\n        <Popover.Header as=\"h3\">View Resource</Popover.Header>\r\n        <Popover.Body>\r\n          <ActionContent resource={res} resType={props.resType} />\r\n        </Popover.Body>\r\n      </Popover>\r\n    ) : (\r\n      <Popover id=\"popover-positioned-left\" style={{ width: 20 + \"vw\" }}>\r\n        <Popover.Header as=\"h3\">\r\n          Loading<Popover.Body></Popover.Body>\r\n        </Popover.Header>\r\n      </Popover>\r\n    );\r\n  if (props.action === \"view\") {\r\n    return (\r\n      <OverlayTrigger\r\n        trigger=\"click\"\r\n        placement=\"left\"\r\n        overlay={viewPopover}\r\n        rootClose={true}\r\n      >\r\n        <Button\r\n          variant=\"link\"\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setRes(props.takeSingle(props.id));\r\n          }}\r\n        >\r\n          <i\r\n            className=\"fa fa-eye\"\r\n            aria-hidden=\"true\"\r\n            title=\"View\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  if (props.action === \"delete\") {\r\n    return (\r\n      <Button\r\n        variant=\"link\"\r\n        size=\"sm\"\r\n        onClick={async () => {\r\n          const result = window.confirm(\"Want to delete: \" + props.id + \"?\");\r\n          if (result) {\r\n            try {\r\n              const response = await delete_generic(props.resType, props.id);\r\n\r\n              if (response.response.status == 200) {\r\n                props.removeSingle(props.id);\r\n              }\r\n            } catch (error) {\r\n              console.log(error);\r\n            }\r\n          }\r\n        }}\r\n      >\r\n        <i\r\n          className=\"fa fa-times\"\r\n          aria-hidden=\"true\"\r\n          title=\"Delete\"\r\n          style={{\r\n            width: 30 + \"px\",\r\n            height: 30 + \"px\",\r\n            marginRight: 10 + \"px\",\r\n            opacity: 0.85,\r\n          }}\r\n        ></i>\r\n      </Button>\r\n    );\r\n  }\r\n  if (props.action === \"edit\") {\r\n    return (\r\n      <NavLink to={`/edit/` + props.resType + \"/\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-pencil-alt\"\r\n            aria-hidden=\"true\"\r\n            title=\"Edit\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n  if (props.action === \"duplicate\") {\r\n    return (\r\n      <NavLink to={`/add/` + props.resType + \"/\" + \"?from=\" + props.id}>\r\n        <Button variant=\"link\" size=\"sm\">\r\n          <i\r\n            className=\"fa fa-copy\"\r\n            aria-hidden=\"true\"\r\n            title=\"Duplicate\"\r\n            style={{\r\n              width: 30 + \"px\",\r\n              height: 30 + \"px\",\r\n              marginRight: 10 + \"px\",\r\n              opacity: 0.85,\r\n            }}\r\n          ></i>\r\n        </Button>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  return <div />;\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { pages, aliasPages } from \"../../config\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\n\r\nimport { Table } from \"react-bootstrap\";\r\nimport ActionManager from \"../actionsManager/actionsManager\";\r\n\r\nexport default function ContentTable(props) {\r\n  /* useEffect(() => {\r\n    //console.log(props);\r\n    //use effect body\r\n  }, [props]);*/\r\n\r\n  if (props.header === undefined || props.resources === undefined)\r\n    return <div>Loading</div>;\r\n  if (props.header.includes(\"actions\") && props.actions === undefined)\r\n    return <div>Loading</div>;\r\n  return (\r\n    <div>\r\n      <Table responsive striped bordered hover>\r\n        <thead>\r\n          <tr key={\"header\"}>\r\n            {React.Children.toArray(\r\n              props.header.map((e) => {\r\n                if (aliasPages[props.resType] !== undefined)\r\n                  if (aliasPages[props.resType][e] !== undefined)\r\n                    return <th>{aliasPages[props.resType][e]}</th>;\r\n                return <th>{e}</th>;\r\n              })\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {React.Children.toArray(\r\n            props.resources.map((row, index) => {\r\n              return (\r\n                <tr>\r\n                  {React.Children.toArray(\r\n                    props.header.map((e) => {\r\n                      if (e === \"actions\") {\r\n                        return (\r\n                          <td>\r\n                            {props.actions.includes(\"view\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"view\"\r\n                                k={index + \"_view\"}\r\n                                id={row[\"_id\"]}\r\n                                takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"edit\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"edit\"\r\n                                k={index + \"_edit\"}\r\n                                id={row[\"_id\"]}\r\n                                //takeSingle={props.takeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"duplicate\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"duplicate\"\r\n                                k={index + \"_duplicate\"}\r\n                                id={row[\"_id\"]}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                            {props.actions.includes(\"delete\") ? (\r\n                              <ActionManager\r\n                                resType={props.resType}\r\n                                action=\"delete\"\r\n                                k={index + \"_delete\"}\r\n                                id={row[\"_id\"]}\r\n                                removeSingle={props.removeSingle}\r\n                              />\r\n                            ) : (\r\n                              \"\"\r\n                            )}\r\n                          </td>\r\n                        );\r\n                      }\r\n                      if (row[e] === undefined) return;\r\n                      if (Array.isArray(row[e]))\r\n                        return <td>{\"[ \" + row[e].join(\" , \") + \" ]\"}</td>;\r\n                      return <td>{row[e]}</td>;\r\n                    })\r\n                  )}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport locale from \"../../common/locale\";\r\nimport { pages, pageActions, addFields } from \"../../config\";\r\nimport { get_generic } from \"../../services/http_operations\";\r\nimport ContentTable from \"../contentTable/contentTable\";\r\n\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { Pagination } from \"react-bootstrap\";\r\nimport \"./page.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport { faPlusCircle } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faPlusCircle);\r\n\r\nexport default function Page(params) {\r\n  const { page } = useParams();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const [resource, setResource] = useState(undefined);\r\n  const [header, setHeader] = useState(undefined);\r\n  const [actions, setActions] = useState(undefined);\r\n\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [pageLimit, setPageLimit] = useState(1);\r\n\r\n  const [hasNext, setHasNext] = useState();\r\n  const [hasPrev, setHasPrev] = useState();\r\n\r\n  const [prevPage, setPrevPage] = useState();\r\n  const [nextPage, setNextPage] = useState();\r\n\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(page, qs);\r\n\r\n        //console.log(response);\r\n        // set state with the result\r\n        setHeader(pages[page]);\r\n        setResource(response.docs);\r\n        if (pageActions[page] !== undefined) setActions(pageActions[page]);\r\n\r\n        setHasNext(response.hasNextPage);\r\n        setHasPrev(response.hasPrevPage);\r\n\r\n        setTotalPages(response.totalPages);\r\n\r\n        setPrevPage(response.prevPage);\r\n        setNextPage(response.nextPage);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        setHeader(undefined);\r\n        setResource(undefined);\r\n        setHasNext(undefined);\r\n        setHasPrev(undefined);\r\n        setTotalPages(undefined);\r\n        setPrevPage(undefined);\r\n        setNextPage(undefined);\r\n      }\r\n    };\r\n\r\n    //get params for pagination\r\n    const num =\r\n      searchParams.get(\"page\") !== null ? searchParams.get(\"page\") : 1;\r\n    setPageNum(num);\r\n\r\n    const limit =\r\n      searchParams.get(\"limit\") !== null ? searchParams.get(\"limit\") : 10;\r\n    setPageLimit(limit);\r\n\r\n    const qs = { page: num, limit: limit };\r\n\r\n    // call the function\r\n    fetchData(qs)\r\n      // make sure to catch any error\r\n      .catch(console.error);\r\n  }, [params, page, searchParams]);\r\n\r\n  const takeSingle = (id) => {\r\n    return resource.find((r) => r._id === id);\r\n  };\r\n\r\n  const removeSingle = (id) => {\r\n    let tmp = resource.filter((el) => {\r\n      return el._id !== id;\r\n    });\r\n    setResource(tmp);\r\n  };\r\n\r\n  const RenderPagination = () => {\r\n    const prevEllipsis = parseInt(pageNum, 10) - 2 > 0;\r\n    const nextEllipsis = parseInt(pageNum, 10) + 2 < totalPages;\r\n\r\n    return (\r\n      <div style={{ display: \"inline-flex\", width: 100 + \"%\" }}>\r\n        <Pagination\r\n          style={{\r\n            alignSelf: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >\r\n          <Pagination.First\r\n            disabled={pageNum === 1}\r\n            onClick={() => setSearchParams({ page: 1, limit: pageLimit })}\r\n          />\r\n          <Pagination.Prev\r\n            disabled={!hasPrev}\r\n            onClick={() =>\r\n              setSearchParams({ page: prevPage, limit: pageLimit })\r\n            }\r\n          />\r\n          {prevEllipsis && <Pagination.Ellipsis />}\r\n          {parseInt(pageNum, 10) - 1 > 0 && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) - 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) - 1}\r\n            </Pagination.Item>\r\n          )}\r\n          <Pagination.Item>\r\n            <b>{pageNum}</b>\r\n          </Pagination.Item>\r\n          {parseInt(pageNum, 10) + 1 <= totalPages && (\r\n            <Pagination.Item\r\n              onClick={() =>\r\n                setSearchParams({\r\n                  page: parseInt(pageNum, 10) + 1,\r\n                  limit: pageLimit,\r\n                })\r\n              }\r\n            >\r\n              {parseInt(pageNum, 10) + 1}\r\n            </Pagination.Item>\r\n          )}\r\n          {nextEllipsis && <Pagination.Ellipsis />}\r\n\r\n          <Pagination.Next\r\n            disabled={!hasNext}\r\n            onClick={() =>\r\n              setSearchParams({ page: nextPage, limit: pageLimit })\r\n            }\r\n          />\r\n          <Pagination.Last\r\n            disabled={pageNum === totalPages}\r\n            onClick={() =>\r\n              setSearchParams({ page: totalPages, limit: pageLimit })\r\n            }\r\n          />\r\n        </Pagination>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        {page}\r\n        {addFields[page] !== undefined && (\r\n          <NavLink to={`/add/` + page + \"/\"} key={page + \"_add_navlink\"}>\r\n            <Button variant=\"link\" size=\"sm\" key={page + \"button\"}>\r\n              <i\r\n                key={page + \"icon\"}\r\n                className=\"fa fa-plus-circle\"\r\n                aria-hidden=\"true\"\r\n                title={\"Add\"}\r\n                style={{\r\n                  width: 30 + \"px\",\r\n                  height: 30 + \"px\",\r\n                  marginRight: 10 + \"px\",\r\n                  opacity: 0.85,\r\n                }}\r\n              ></i>\r\n            </Button>\r\n          </NavLink>\r\n        )}\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <ContentTable\r\n          resType={page}\r\n          header={header}\r\n          resources={resource}\r\n          actions={actions}\r\n          takeSingle={takeSingle}\r\n          removeSingle={removeSingle}\r\n        />\r\n        <RenderPagination />\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import \"./unauthorizedPage.scss\";\r\n\r\nimport React from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nexport default function UnauthorizedPage() {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;\r\n","import {\r\n  Button,\r\n  Badge,\r\n  Offcanvas,\r\n  Toast,\r\n  ToastContainer,\r\n} from \"react-bootstrap\";\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport AppContext from \"../../context\";\r\n\r\nexport default function NotificationBar(props) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  const myContext = useContext(AppContext);\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"link\"\r\n        onClick={() => {\r\n          handleShow();\r\n        }}\r\n        style={{\r\n          color: \"#fff\",\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        {locale().notifications}\r\n        {\"  \"}\r\n        <Badge pill bg=\"success\">\r\n          {myContext.notifications.length}\r\n        </Badge>\r\n        <span className=\"visually-hidden\">Unread notifications</span>\r\n      </Button>\r\n\r\n      <Offcanvas\r\n        style={{\r\n          backgroundColor: \"#123651\",\r\n          color: \"#fff\",\r\n        }}\r\n        show={show}\r\n        onHide={handleClose}\r\n        placement=\"end\"\r\n        name={\"notification_bar\"}\r\n        scroll={false}\r\n        backdrop={true}\r\n        keyboard={true}\r\n      >\r\n        <Offcanvas.Header>\r\n          <Offcanvas.Title>\r\n            {locale().notifications}\r\n            {\"  \"}\r\n            <Badge pill bg=\"success\">\r\n              {myContext.notifications.length}\r\n            </Badge>\r\n          </Offcanvas.Title>\r\n        </Offcanvas.Header>\r\n        <Offcanvas.Body>\r\n          <div\r\n            style={{\r\n              width: 100 + \"%\",\r\n              height: 100 + \"%\",\r\n            }}\r\n          >\r\n            {myContext.notifications.length !== 0 && (\r\n              <Button\r\n                variant=\"warning\"\r\n                onClick={() => myContext.ClearNotifications()}\r\n              >\r\n                {locale().clear_all}\r\n              </Button>\r\n            )}\r\n            <ToastContainer>\r\n              {myContext.notifications.map((notification, index) => {\r\n                let type;\r\n                if (notification.name === \"info\") type = \"success\";\r\n                if (notification.name === \"error\") type = \"danger\";\r\n                return (\r\n                  <Toast\r\n                    className=\"d-inline-block m-1\"\r\n                    key={\"notification_\" + index}\r\n                    bg={type}\r\n                    animation={true}\r\n                    onClose={() => {\r\n                      myContext.RemoveNotification(index);\r\n                    }}\r\n                  >\r\n                    <Toast.Header>\r\n                      <img\r\n                        src=\"holder.js/20x20?text=%20\"\r\n                        className=\"rounded me-2\"\r\n                        alt=\"\"\r\n                      />\r\n                      <strong className=\"me-auto\">{notification.name}</strong>\r\n                      <small>{notification.time.slice(0, 15)}</small>\r\n                    </Toast.Header>\r\n                    <Toast.Body>{notification.msg}</Toast.Body>\r\n                  </Toast>\r\n                );\r\n              })}\r\n            </ToastContainer>\r\n          </div>\r\n        </Offcanvas.Body>\r\n      </Offcanvas>\r\n    </div>\r\n  );\r\n}\r\n","export let fetchedData;\r\n\r\nexport function SetFetchedData(data) {\r\n  fetchedData = data;\r\n}\r\n","//check if a generic object is default, according to its type\r\nexport const isDefault = (obj) => {\r\n  //undefined is considered default\r\n  if (obj === undefined) return true;\r\n  //null is considered default\r\n  if (obj == null) return true;\r\n  //Nan is default for numbers\r\n  if (typeof obj === \"number\") {\r\n    return isNaN(obj);\r\n  }\r\n\r\n  //default check for strings\r\n  if (typeof obj === \"string\") {\r\n    return obj === \"\";\r\n  }\r\n\r\n  //input field is an array\r\n  if (Array.isArray(obj)) {\r\n    if (obj.length === 0) return true;\r\n    let def = true;\r\n    obj.forEach((elem) => {\r\n      def = def && isDefault(elem);\r\n    });\r\n    return def;\r\n  }\r\n\r\n  //check all values if object\r\n  if (obj.constructor === Object) {\r\n    let def = true;\r\n    Object.entries(obj).forEach(([_, v]) => {\r\n      def = def && isDefault(v);\r\n    });\r\n    return def;\r\n  }\r\n};\r\n\r\n//non-default items lenght\r\nexport const nonDefaultLength = (obj) => {\r\n  if (Array.isArray(obj) === false) return -1;\r\n  return obj.filter((e) => !isDefault(e)).length;\r\n};\r\n\r\n//remove all default or empty field from an object, recursively\r\nexport const removeDefaultElements = (obj) => {\r\n  if (Array.isArray(obj)) {\r\n  }\r\n  if (obj.constructor === Object) {\r\n    const entr = Object.entries(obj);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      //check if value is an array\r\n      if (Array.isArray(entr[i][1])) {\r\n        for (let j = 0; j < entr[i][1].length; j++) {\r\n          if (\r\n            entr[i][1][j].constructor === Object ||\r\n            Array.isArray(entr[i][1][j])\r\n          ) {\r\n            removeDefaultElements(entr[i][1][j]);\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          } else {\r\n            if (isDefault(entr[i][1][j])) {\r\n              entr[i][1].splice(j, 1);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      //check if value is an Object\r\n      if (entr[i][1].constructor === Object) {\r\n        const subEntr = Object.entries(entr[i][1]);\r\n        for (let j = 0; j < subEntr.length; j++) {\r\n          if (\r\n            subEntr[i][1].constructor === Object ||\r\n            Array.isArray(subEntr[i][1])\r\n          ) {\r\n            removeDefaultElements(subEntr[i][1]);\r\n          } else {\r\n            if (isDefault(subEntr[i][1])) delete entr[i][1][subEntr[i][0]];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\n//check if two objects (arrays, variables or objects) are equal\r\nexport const areEqual = (obj1, obj2) => {\r\n  //undefined check\r\n  if (obj1 === undefined || obj2 === undefined) return false;\r\n  //single value and ref check\r\n  if (obj1 === obj2) return true;\r\n\r\n  if (typeof obj1 !== typeof obj2) return false;\r\n\r\n  //one is array, other isn't\r\n  if (\r\n    (Array.isArray(obj1) && !Array.isArray(obj2)) ||\r\n    (!Array.isArray(obj1) && Array.isArray(obj2))\r\n  )\r\n    return false;\r\n\r\n  //both are array\r\n  if (Array.isArray(obj1) && Array.isArray(obj2)) {\r\n    //different length => not equal\r\n    if (obj1.length !== obj2.length) return false;\r\n    for (let i = 0; i < obj1.length; i++) {\r\n      if (!areEqual(obj1[i], obj2[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  //one is object, other isn't\r\n  if (\r\n    (obj1.constructor === Object && obj2.constructor !== Object) ||\r\n    (obj1.constructor !== Object && obj2.constructor === Object)\r\n  )\r\n    return false;\r\n\r\n  //both are object\r\n  if (obj1.constructor === Object && obj2.constructor === Object) {\r\n    const k1 = Object.keys(obj1);\r\n    const k2 = Object.keys(obj2);\r\n    if (k1.length !== k2.length) return false;\r\n    if (!areEqual(k1, k2)) return false;\r\n\r\n    const v1 = Object.values(obj1);\r\n    const v2 = Object.values(obj2);\r\n    if (!areEqual(v1, v2)) return false;\r\n\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { nonDefaultLength } from \"../../services/misc_functions\";\r\nimport { Button, Form, Accordion, Container, Row, Col } from \"react-bootstrap\";\r\n\r\nimport { fetchedData } from \"../../fetchedData\";\r\nimport { fetchedPageTypes } from \"../../config\";\r\n\r\nexport const FormManager = (props) => {\r\n  //return if something is undefined\r\n  if (\r\n    props.values === undefined ||\r\n    props.resource === undefined ||\r\n    props.disabledFields === undefined ||\r\n    props.functionalFields === undefined ||\r\n    props.submitFunction === undefined ||\r\n    props.handleChangesCallback === undefined ||\r\n    props.arrayDeleteCallback === undefined\r\n  )\r\n    return \"Loading\";\r\n\r\n  console.log({\r\n    values: props.values,\r\n    resource: props.resource,\r\n    disabledFields: props.disabledFields,\r\n    functionalFields: props.functionalFields,\r\n    submitFunction: props.submitFunction,\r\n    handleChangesCallback: props.handleChangesCallback,\r\n    arrayDeleteCallback: props.arrayDeleteCallback,\r\n  });\r\n  //Numeric for row component\r\n  const NumericFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"number\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(parseInt(e.target.value, 10), [\r\n                  key,\r\n                ]);\r\n              }}\r\n              value={isNaN(props.values[key]) ? \"\" : props.values[key]}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //string for row component\r\n  const StringFormRow = (key) => {\r\n    //enum type (fetcheddata) defined by config\r\n    //check if all the required resources are defined\r\n    if (\r\n      fetchedPageTypes[props.resource] !== undefined &&\r\n      fetchedPageTypes[props.resource][key] !== undefined &&\r\n      fetchedData !== undefined &&\r\n      fetchedData[fetchedPageTypes[props.resource][key]] !== undefined\r\n    ) {\r\n      return SelectFormRow(\r\n        key,\r\n        fetchedData[fetchedPageTypes[props.resource][key]]\r\n      );\r\n    }\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Control\r\n              type=\"text\"\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n              value={props.values[key]}\r\n              placeholder={locale().enter + \" \" + key}\r\n            />\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //select form row component\r\n  const SelectFormRow = (key, val) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Select\r\n              aria-label=\"Default select\"\r\n              value={props.values[key]}\r\n              id={key}\r\n              onChange={(e) => {\r\n                e.preventDefault();\r\n                props.handleChangesCallback(e.target.value, [key]);\r\n              }}\r\n              disabled={\r\n                props.disabledFields[key] !== undefined\r\n                  ? props.disabledFields[key]\r\n                  : false\r\n              }\r\n            >\r\n              <option>{locale().select + \" \" + key}</option>\r\n              {React.Children.toArray(\r\n                Object.entries(val).map(([k, v]) => {\r\n                  return <option value={k}>{v}</option>;\r\n                })\r\n              )}\r\n            </Form.Select>\r\n          </Form.Group>\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //numbers array form row component\r\n  const ArrayNumberFormRow = (k) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{k}</b>\r\n        </Col>\r\n        <Col sm={4}>\r\n          {React.Children.toArray(\r\n            props.values[k].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Form.Group className=\"mb-3\">\r\n                    <Form.Label>\r\n                      Insert <b>{k}</b>\r\n                      <i>[{index}]</i>\r\n                    </Form.Label>\r\n                    <Form.Control\r\n                      type=\"number\"\r\n                      disabled={\r\n                        props.disabledFields[k] !== undefined\r\n                          ? props.disabledFields[k]\r\n                          : false\r\n                      }\r\n                      onChange={(e) => {\r\n                        e.preventDefault();\r\n                        props.handleChangesCallback(\r\n                          parseInt(e.target.value, 10),\r\n                          [k, index]\r\n                        );\r\n                      }}\r\n                      value={\r\n                        isNaN(props.values[k][index])\r\n                          ? \"\"\r\n                          : props.values[k][index]\r\n                      }\r\n                      placeholder={locale().enter + \" \" + k}\r\n                    />\r\n                  </Form.Group>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //strings array form row component\r\n  const ArrayStringFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((value, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  <Col sm={4}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        disabled={\r\n                          props.disabledFields[key] !== undefined\r\n                            ? props.disabledFields[key]\r\n                            : false\r\n                        }\r\n                        onChange={(e) => {\r\n                          e.preventDefault();\r\n                          props.handleChangesCallback(e.target.value, [\r\n                            key,\r\n                            index,\r\n                          ]);\r\n                        }}\r\n                        value={props.values[key][index]}\r\n                        placeholder={locale().enter + \" \" + key}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n\r\n                  <Col md=\"auto\"></Col>\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n\r\n  //strings array form row component\r\n  const ArrayObjectFormRow = (key) => {\r\n    return (\r\n      <Row\r\n        style={{\r\n          borderBottomStyle: \"solid\",\r\n          borderBottomWidth: 1 + \"px\",\r\n          marginBottom: 5 + \"px\",\r\n        }}\r\n      >\r\n        <Col\r\n          sm={2}\r\n          style={{\r\n            borderRightStyle: \"dotted\",\r\n            borderRightWidth: 1 + \"px\",\r\n          }}\r\n        >\r\n          <b>{key}</b>\r\n        </Col>\r\n        <Col>\r\n          {React.Children.toArray(\r\n            props.values[key].map((obj, index) => {\r\n              return (\r\n                <Row>\r\n                  <Col sm={1}>\r\n                    <Button\r\n                      disabled={\r\n                        props.disabledFields[key] !== undefined\r\n                          ? props.disabledFields[key]\r\n                          : false\r\n                      }\r\n                      variant=\"link\"\r\n                      size=\"sm\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        props.arrayDeleteCallback([key, index]);\r\n                      }}\r\n                    >\r\n                      <i\r\n                        className=\"fa fa-times\"\r\n                        aria-hidden=\"true\"\r\n                        title=\"Remove element\"\r\n                        style={{\r\n                          width: 30 + \"px\",\r\n                          height: 30 + \"px\",\r\n                          marginRight: 10 + \"px\",\r\n                          opacity: 0.85,\r\n                        }}\r\n                      ></i>\r\n                    </Button>\r\n                  </Col>\r\n                  {React.Children.toArray(\r\n                    Object.entries(obj).map(([k, value]) => {\r\n                      if (typeof value === \"number\") {\r\n                        return (\r\n                          <Col sm={2}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"number\"\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(\r\n                                    parseInt(e.target.value, 10),\r\n                                    [key, index, k]\r\n                                  );\r\n                                }}\r\n                                key={key + k + index + \"\"}\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                value={\r\n                                  isNaN(props.values[key][index][k])\r\n                                    ? \"\"\r\n                                    : props.values[key][index][k]\r\n                                }\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n\r\n                      //input field is a string\r\n                      if (typeof value === \"string\") {\r\n                        return (\r\n                          <Col sm={3}>\r\n                            <Form.Group className=\"mb-3\">\r\n                              <Form.Control\r\n                                type=\"text\"\r\n                                disabled={\r\n                                  props.disabledFields[key] !== undefined\r\n                                    ? props.disabledFields[key]\r\n                                    : false\r\n                                }\r\n                                onChange={(e) => {\r\n                                  e.preventDefault();\r\n                                  props.handleChangesCallback(e.target.value, [\r\n                                    key,\r\n                                    index,\r\n                                    k,\r\n                                  ]);\r\n                                }}\r\n                                value={props.values[key][index][k]}\r\n                                placeholder={locale().enter + \" \" + k}\r\n                              />\r\n                            </Form.Group>\r\n                          </Col>\r\n                        );\r\n                      }\r\n                      //the object contains an array\r\n                      if (Array.isArray(value)) {\r\n                        if (value.length === 0) return k + \" is empty\";\r\n                        return (\r\n                          <Row>\r\n                            <Accordion defaultActiveKey=\"0\">\r\n                              <Accordion.Item eventKey=\"0\">\r\n                                <Accordion.Header>\r\n                                  <b>{k}</b> : {nonDefaultLength(value)} items\r\n                                </Accordion.Header>\r\n                                <Accordion.Body>\r\n                                  {React.Children.toArray(\r\n                                    value.map((e, idx) => {\r\n                                      if (e.constructor === Object) {\r\n                                        const entr = Object.entries(e);\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col\r\n                                              sm={1}\r\n                                              style={{\r\n                                                borderRightStyle: \"dotted\",\r\n                                                borderRightWidth: 1 + \"px\",\r\n                                              }}\r\n                                            ></Col>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n\r\n                                            {React.Children.toArray(\r\n                                              entr.map(([_k, _v]) => {\r\n                                                return (\r\n                                                  <Col sm={3}>\r\n                                                    <Form.Group className=\"mb-3\">\r\n                                                      <Form.Control\r\n                                                        type=\"text\"\r\n                                                        disabled={\r\n                                                          props.disabledFields[\r\n                                                            key\r\n                                                          ] !== undefined\r\n                                                            ? props\r\n                                                                .disabledFields[\r\n                                                                key\r\n                                                              ]\r\n                                                            : false\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          e.preventDefault();\r\n                                                          props.handleChangesCallback(\r\n                                                            e.target.value,\r\n                                                            [\r\n                                                              key,\r\n                                                              index,\r\n                                                              k,\r\n                                                              idx,\r\n                                                              _k,\r\n                                                            ]\r\n                                                          );\r\n                                                        }}\r\n                                                        value={_v}\r\n                                                        placeholder={\r\n                                                          locale().enter +\r\n                                                          \" \" +\r\n                                                          _k\r\n                                                        }\r\n                                                      />\r\n                                                    </Form.Group>\r\n                                                  </Col>\r\n                                                );\r\n                                              })\r\n                                            )}\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"number\") {\r\n                                        return (\r\n                                          <Row>\r\n                                            <Col sm={1}>\r\n                                              <Button\r\n                                                disabled={\r\n                                                  props.disabledFields[key] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[key]\r\n                                                    : false\r\n                                                }\r\n                                                variant=\"link\"\r\n                                                size=\"sm\"\r\n                                                onClick={(e) => {\r\n                                                  e.preventDefault();\r\n\r\n                                                  props.arrayDeleteCallback([\r\n                                                    key,\r\n                                                    index,\r\n                                                    k,\r\n                                                    idx,\r\n                                                  ]);\r\n                                                }}\r\n                                              >\r\n                                                <i\r\n                                                  className=\"fa fa-times\"\r\n                                                  aria-hidden=\"true\"\r\n                                                  title=\"Remove element\"\r\n                                                  style={{\r\n                                                    width: 30 + \"px\",\r\n                                                    height: 30 + \"px\",\r\n                                                    marginRight: 10 + \"px\",\r\n                                                    opacity: 0.85,\r\n                                                  }}\r\n                                                ></i>\r\n                                              </Button>\r\n                                            </Col>\r\n                                            <Col sm={3}>\r\n                                              <Form.Control\r\n                                                type=\"number\"\r\n                                                disabled={\r\n                                                  props.disabledFields[k] !==\r\n                                                  undefined\r\n                                                    ? props.disabledFields[k]\r\n                                                    : false\r\n                                                }\r\n                                                key={\"\" + key + index + k + idx}\r\n                                                onChange={(e) => {\r\n                                                  e.preventDefault();\r\n                                                  props.handleChangesCallback(\r\n                                                    parseInt(\r\n                                                      e.target.value,\r\n                                                      10\r\n                                                    ),\r\n                                                    [key, index, k, idx]\r\n                                                  );\r\n                                                }}\r\n                                                value={isNaN(e) ? \"\" : e} //{props.values[k][index]}\r\n                                                placeholder={\r\n                                                  locale().enter + \" \" + k\r\n                                                }\r\n                                              />\r\n                                            </Col>\r\n                                          </Row>\r\n                                        );\r\n                                      } else if (typeof e === \"string\")\r\n                                        return \"TODO string\";\r\n                                    })\r\n                                  )}\r\n                                </Accordion.Body>\r\n                              </Accordion.Item>\r\n                            </Accordion>\r\n                          </Row>\r\n                        );\r\n                      }\r\n                    })\r\n                  )}\r\n                </Row>\r\n              );\r\n            })\r\n          )}\r\n        </Col>\r\n      </Row>\r\n    );\r\n  };\r\n  //object form row comopnent\r\n  const ObjectFormRow = (key) => {\r\n    return \"TODO\";\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={props.submitFunction}>\r\n      <Container fluid>\r\n        {\r\n          //in case of unfetched data, do nothing\r\n          props.functionalFields[props.resource] === undefined &&\r\n            \"No operation allowed\"\r\n        }\r\n        {props.functionalFields[props.resource] !== undefined &&\r\n          React.Children.toArray(\r\n            Object.entries(props.values).map(([key, value]) => {\r\n              //input field is a number\r\n              if (typeof value === \"number\") {\r\n                return NumericFormRow(key);\r\n              }\r\n\r\n              //input field is a string\r\n              if (typeof value === \"string\") {\r\n                return StringFormRow(key);\r\n              }\r\n\r\n              //input field is an array\r\n              if (Array.isArray(value)) {\r\n                if (typeof value[0] === \"number\") {\r\n                  return ArrayNumberFormRow(key);\r\n                }\r\n                if (typeof value[0] === \"string\") {\r\n                  return ArrayStringFormRow(key);\r\n                }\r\n                if (value[0].constructor === Object) {\r\n                  return ArrayObjectFormRow(key);\r\n                }\r\n              }\r\n\r\n              //input field is an object\r\n              if (value.constructor === Object) {\r\n                return ObjectFormRow();\r\n              }\r\n              //default return\r\n              return \"\";\r\n            })\r\n          )}\r\n      </Container>\r\n      <Button variant=\"primary\" type=\"submit\" key={\"submit\"}>\r\n        Submit\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { get_generic, put_generic } from \"../../services/http_operations\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  areEqual,\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\n\r\nimport {\r\n  editFields,\r\n  editFieldsSpecifier,\r\n  fetchedPageTypes,\r\n} from \"../../config\";\r\nimport { fetchedData } from \"../../fetchedData\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\nexport default function EditContentPage(props) {\r\n  //get resource and id from url params\r\n  const { resource, id } = useParams();\r\n\r\n  const [original, setOriginal] = useState();\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n\r\n  //deep copy editOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(editFields[resource]));\r\n\r\n  //keep trace of deleted elements\r\n  const [deleted, setDeleted] = useState({});\r\n\r\n  const [disabledFields, setDisabledFields] = useState(undefined);\r\n  const [mounted, setMounted] = useState(false);\r\n  //max indexes\r\n  const maxIndexes = React.useRef({});\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      const data = response.docs[0];\r\n      let tmpValues = cloneDeep(values);\r\n\r\n      //order objects inside arrays\r\n      const entr = Object.entries(data);\r\n      for (let i = 0; i < entr.length; i++) {\r\n        //check if value is array of obj\r\n        if (Array.isArray(entr[i][1])) {\r\n          if (entr[i][1].length === 0) continue;\r\n          if (entr[i][1][0].constructor === Object) {\r\n            for (let j = 0; j < entr[i][1].length; j++) {\r\n              if (editFields[resource][entr[i][0]][0] === undefined) continue;\r\n              const target = { ...editFields[resource][entr[i][0]][0] };\r\n              Object.assign(target, entr[i][1][j]);\r\n              entr[i][1][j] = target;\r\n            }\r\n          } else {\r\n            for (let j = 0; j < entr[i][1].length; j++) {\r\n              if (\r\n                editFields[resource][entr[i][0]] === undefined ||\r\n                editFields[resource][entr[i][0]][0] === undefined\r\n              )\r\n                continue;\r\n\r\n              entr[i][1][j] = entr[i][1][j];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      //order main obj\r\n      Object.assign(tmpValues, data);\r\n\r\n      //delete non-requested keys\r\n      const keys = Object.keys(tmpValues);\r\n      const requestedKeys = Object.keys(editFields[resource]);\r\n      for (let i = 0; i < keys.length; i++) {\r\n        if (!requestedKeys.includes(keys[i])) {\r\n          delete tmpValues[keys[i]];\r\n        }\r\n      }\r\n\r\n      const evaluateSpecifiers = async () => {\r\n        if (editFieldsSpecifier[resource] === undefined) {\r\n          setDisabledFields({});\r\n\r\n          const keys = Object.keys(tmpValues);\r\n          for (let i = 0; i < keys.length; i++) {\r\n            const _key = keys[i];\r\n\r\n            tmpValues = maintainEmptyElement(tmpValues, [_key]);\r\n          }\r\n\r\n          setValues(tmpValues);\r\n          //deep copy and set state\r\n          setOriginal(cloneDeep(tmpValues));\r\n          return;\r\n        }\r\n\r\n        let disabled = {};\r\n        if (disabledFields !== undefined) disabled = disabledFields;\r\n\r\n        const specsEntries = Object.entries(editFieldsSpecifier[resource]);\r\n\r\n        for (let i = 0; i < specsEntries.length; i++) {\r\n          const key = specsEntries[i][0]; //key\r\n          const value = specsEntries[i][1]; //value\r\n\r\n          if (tmpValues[key] === undefined) continue;\r\n\r\n          if (value.type === \"disable\") {\r\n            const resp = await value.policy(id);\r\n\r\n            disabled[key] = resp;\r\n          }\r\n        }\r\n\r\n        const keys = Object.keys(tmpValues);\r\n        for (let i = 0; i < keys.length; i++) {\r\n          const _key = keys[i];\r\n\r\n          if (disabled[_key] === undefined || disabled[_key] === false) {\r\n            tmpValues = maintainEmptyElement(tmpValues, [_key]);\r\n          }\r\n        }\r\n\r\n        setDisabledFields(disabled);\r\n\r\n        setValues(tmpValues);\r\n        //deep copy and set state\r\n        setOriginal(cloneDeep(tmpValues));\r\n      };\r\n\r\n      evaluateSpecifiers();\r\n    };\r\n\r\n    const fst = { _id: id };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        item\r\n      );\r\n    }\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(val, path.slice(0, i), item);\r\n\r\n    //save removed element into appropriate structure\r\n    //do this only when array is on first layer of object\r\n    if (i === 1) {\r\n      if (deleted[path[0]] === undefined)\r\n        deleted[path[0]] = { indexes: [], elements: [], minDel: Infinity };\r\n\r\n      //ignore default\r\n      if (!isDefault(removed[0])) {\r\n        //save element (maybe not required anymore)\r\n        deleted[path[0]].elements.push(removed[0]);\r\n        //save index of deletion (considering the original ones)\r\n\r\n        deleted[path[0]].indexes.push(\r\n          path[i] >= deleted[path[0]].minDel\r\n            ? path[i] +\r\n                deleted[[path[0]]].indexes.filter((e) => e >= path[i]).length\r\n            : path[i]\r\n        );\r\n\r\n        if (path[i] < deleted[path[0]].minDel)\r\n          deleted[path[0]].minDel = path[i];\r\n      }\r\n    }\r\n\r\n    setValues(val);\r\n  };\r\n\r\n  const maintainEmptyElement = (original, path, item = undefined) => {\r\n    let tmp = cloneDeep(original);\r\n    let tmpPtr = tmp;\r\n    let editFldTmp = cloneDeep(editFields[resource]);\r\n    const tmpPath = [...path];\r\n\r\n    //get more nested array\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    //get the appropriate item, if possible\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      if (editFldTmp === undefined) break;\r\n      //ignore indexes for addFldTmp\r\n      if (typeof path[i] === \"number\") editFldTmp = editFldTmp[0];\r\n      else editFldTmp = editFldTmp[path[i]];\r\n    }\r\n\r\n    //non array case\r\n    if (!Array.isArray(editFldTmp)) return tmp;\r\n\r\n    //add item according to addfield dictionary\r\n    if (editFldTmp !== undefined) {\r\n      //0-length array\r\n      if (tmpPtr.length === 0) {\r\n        if (editFldTmp[0].constructor === Object) {\r\n          tmpPtr.push({\r\n            ...editFldTmp[0],\r\n          });\r\n        } else {\r\n          tmpPtr.push(\"\");\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr[0].constructor === Object) {\r\n          //check if there are no default elements in array\r\n          if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n            tmpPtr.push({\r\n              ...editFldTmp[0],\r\n            });\r\n          }\r\n        } else {\r\n          if (!tmpPtr.includes(\"\")) {\r\n            tmpPtr.push(\"\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //add item according to params\r\n    if (item !== undefined && editFldTmp === undefined) {\r\n      if (tmpPtr.length === 0) {\r\n        if (item.constructor === Object) {\r\n          tmpPtr.push({ ...item });\r\n        } else {\r\n          tmpPtr.push(item);\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n          if (item.constructor === Object) {\r\n            tmpPtr.push({ ...item });\r\n          } else {\r\n            tmpPtr.push(item);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return tmp;\r\n  };\r\n\r\n  const submit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    //da fare\r\n    let tmpValues = cloneDeep(values);\r\n    let tmpOrig = cloneDeep(original);\r\n    removeDefaultElements(tmpValues);\r\n    removeDefaultElements(tmpOrig);\r\n    let toSend = {};\r\n\r\n    const entr = Object.entries(tmpValues);\r\n    for (let i = 0; i < entr.length; i++) {\r\n      const k = entr[i][0];\r\n      const v = entr[i][1];\r\n\r\n      //value is array\r\n      if (Array.isArray(v)) {\r\n        //prepare add/update/remove elements\r\n        if (toSend[k] === undefined)\r\n          toSend[k] = { add: [], remove: [], update: [] };\r\n\r\n        //get original length of that array\r\n        const origArr = [...tmpOrig[k]];\r\n        //add removed elements (from original elements)\r\n        if (deleted[k] !== undefined) {\r\n          for (let i = 0; i < deleted[k].indexes.length; i++) {\r\n            const removed = origArr.splice(deleted[k].indexes[i][0], 1)[0];\r\n            if (removed.constructor === Object) {\r\n              const key = Object.keys(removed)[0];\r\n              toSend[k].remove.push(removed[key]);\r\n            } else {\r\n              toSend[k].remove.push(removed);\r\n            }\r\n          }\r\n        }\r\n        //check other elements\r\n        for (let j = 0; j < tmpValues[k].length; j++) {\r\n          if (j < origArr.length && !areEqual(tmpValues[k][j], origArr[j])) {\r\n            //update management\r\n\r\n            //object case\r\n            if (tmpValues[k][j].constructor === Object) {\r\n              const key = Object.keys(origArr[j])[0];\r\n              toSend[k].update.push({\r\n                [key]: origArr[j][key],\r\n                new: tmpValues[k][j],\r\n              });\r\n            }\r\n            //non object case (i.e., strings)\r\n            else {\r\n              //remove the old value and add the new one\r\n              toSend[k].add.push(tmpValues[k][j]);\r\n              toSend[k].remove.push(origArr[j]);\r\n            }\r\n          }\r\n          if (j >= origArr.length) toSend[k].add.push(tmpValues[k][j]);\r\n        }\r\n        if (areEqual(toSend[k], { add: [], remove: [], update: [] }))\r\n          delete toSend[k];\r\n      }\r\n      //value is obj\r\n      else if (v.constructor === Object) {\r\n        //compare both obj\r\n      }\r\n      //single valued prop\r\n      else {\r\n        //update when values are different\r\n        if (v !== original[k]) toSend[k] = v;\r\n      }\r\n    }\r\n\r\n    //end da fare\r\n\r\n    let res;\r\n    try {\r\n      const resp = await put_generic(resource, toSend, id);\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n      navigate(\"/\" + resource);\r\n    } catch (error) {\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Edit &nbsp;<b>{resource}</b>&nbsp;of id:&nbsp;<b>{id}</b>&nbsp;from:\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <FormManager\r\n          values={values}\r\n          resource={resource}\r\n          functionalFields={editFields}\r\n          disabledFields={disabledFields}\r\n          handleChangesCallback={handleChanges}\r\n          arrayDeleteCallback={handleDeleteItemArray}\r\n          submitFunction={submit}\r\n        />\r\n        <br />\r\n        <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  pages,\r\n  aliasPages,\r\n  addFields,\r\n  addTypes,\r\n  fetchedPageTypes,\r\n} from \"../../config\";\r\nimport { fetchedData } from \"../../fetchedData\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Button,\r\n  Form,\r\n  Nav,\r\n  InputGroup,\r\n  Accordion,\r\n  Table,\r\n  FloatingLabel,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddPage(props) {\r\n  //get resource and id from url params\r\n  let { resource } = useParams();\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //check if resource was passed as params - used for tenants creation\r\n  if (props.resource !== undefined) resource = props.resource;\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //deep copy addOption dictionary without any references\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(undefined);\r\n  const [contentBody, setContentBody] = useState(undefined);\r\n  const [contentPlain, setContentPlain] = useState(undefined);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the data from the api\r\n      const response = await get_generic(resource, qs);\r\n\r\n      //test with deep copy\r\n      const test = cloneDeep(values);\r\n      //for each key of addFields, check if it's present from the fetched data and put it into values (if not default for arrays)\r\n      Object.keys(test).map((k) => {\r\n        if (response.docs[0][k] !== undefined) {\r\n          if (Array.isArray(response.docs[0][k])) {\r\n            if (!isDefault(response.docs[0][k])) {\r\n              if (response.docs[0][k][0].constructor === Object) {\r\n                const keys = Object.keys(test[k][0]);\r\n                const temp = response.docs[0][k].map((e) => {\r\n                  const assign = {};\r\n                  keys.map((k) => (assign[k] = null));\r\n                  return Object.assign(assign, e);\r\n                });\r\n                test[k] = temp.concat(test[k]);\r\n              } else {\r\n                test[k] = response.docs[0][k].concat(test[k]);\r\n              }\r\n            }\r\n          } else {\r\n            test[k] = response.docs[0][k];\r\n          }\r\n        }\r\n      });\r\n      setValues(test);\r\n      // set state with the result\r\n    };\r\n    if (searchParams.get(\"from\") === null || searchParams.get(\"from\") === \"\")\r\n      return;\r\n    const fst = { _id: searchParams.get(\"from\") };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    valuesPtr[path[i]] = val;\r\n    if (lastIndexNumber !== -1)\r\n      tmpVals = maintainEmptyElement(tmpVals, path.slice(0, lastIndexNumber));\r\n\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    tmpPtr.splice(path[i], 1);\r\n\r\n    val = maintainEmptyElement(val, path.slice(0, i));\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  const maintainEmptyElement = (original, path, item = undefined) => {\r\n    let tmp = cloneDeep(original);\r\n    let tmpPtr = tmp;\r\n    let addFldTmp = cloneDeep(addFields[resource]);\r\n    const tmpPath = [...path];\r\n\r\n    //get more nested array\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    //get the appropriate item, if possible\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      if (addFldTmp === undefined) break;\r\n      //ignore indexes for addFldTmp\r\n      if (typeof path[i] === \"number\") addFldTmp = addFldTmp[0];\r\n      else addFldTmp = addFldTmp[path[i]];\r\n    }\r\n\r\n    //non array case\r\n    if (!Array.isArray(addFldTmp)) return tmp;\r\n\r\n    //add item according to addfield dictionary\r\n    if (addFldTmp !== undefined) {\r\n      //0-length array\r\n      if (tmpPtr.length === 0) {\r\n        if (addFldTmp[0].constructor === Object) {\r\n          tmpPtr.push({\r\n            ...addFldTmp[0],\r\n          });\r\n        } else {\r\n          tmpPtr.push(\"\");\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr[0].constructor === Object) {\r\n          //check if there are no default elements in array\r\n          if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n            tmpPtr.push({\r\n              ...addFldTmp[0],\r\n            });\r\n          }\r\n        } else {\r\n          if (!tmpPtr.includes(\"\")) {\r\n            tmpPtr.push(\"\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //add item according to params\r\n    if (item !== undefined && addFldTmp === undefined) {\r\n      if (tmpPtr.length === 0) {\r\n        if (item.constructor === Object) {\r\n          tmpPtr.push({ ...item });\r\n        } else {\r\n          tmpPtr.push(item);\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n          if (item.constructor === Object) {\r\n            tmpPtr.push({ ...item });\r\n          } else {\r\n            tmpPtr.push(item);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return tmp;\r\n  };\r\n\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") == true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      console.log(contentPlain);\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") == true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={{}}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n              />\r\n\r\n              <br />\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form onSubmit={postFile}>\r\n                <Form.Label>\r\n                  <b>{locale().select_file}</b>\r\n                </Form.Label>\r\n                <Form.Control\r\n                  className=\"mb-3\"\r\n                  type=\"file\"\r\n                  accept=\".csv, .json\"\r\n                  label=\"File\"\r\n                  onChange={(e) => {\r\n                    const file = e.target.files[0];\r\n                    setFile(file);\r\n                    console.log(file);\r\n                    const fileReader = new FileReader();\r\n\r\n                    fileReader.onloadend = () => {\r\n                      const content = fileReader.result;\r\n                      if (file.name.endsWith(\".csv\")) {\r\n                        const regex = new RegExp(\"\\r\", \"g\");\r\n                        let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n                        setContentHeader(splitted[0]);\r\n                        splitted.splice(0, 1);\r\n                        setContentBody(splitted);\r\n                      }\r\n                      if (file.name.endsWith(\".json\")) {\r\n                        const content = fileReader.result;\r\n                        setContentPlain(content);\r\n                      }\r\n                    };\r\n                    fileReader.readAsText(file);\r\n                  }}\r\n                />\r\n                {contentBody !== undefined && contentHeader !== undefined && (\r\n                  <Accordion>\r\n                    <Accordion.Item eventKey=\"0\">\r\n                      <Accordion.Header>\r\n                        {locale().file_content}\r\n                      </Accordion.Header>\r\n                      <Accordion.Body\r\n                        style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                      >\r\n                        <Table responsive striped bordered hover>\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                contentHeader.split(\",\").map((h) => {\r\n                                  return <th>{h}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              contentBody.map((e) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      e.split(\",\").map((h) => {\r\n                                        return <td>{h}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                )}\r\n                {contentPlain !== undefined && (\r\n                  <Accordion>\r\n                    <Accordion.Item eventKey=\"0\">\r\n                      <Accordion.Header>\r\n                        {locale().file_content}\r\n                      </Accordion.Header>\r\n                      <Accordion.Body\r\n                        style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                      >\r\n                        {contentPlain}\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                )}\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  Submit\r\n                </Button>\r\n                <br />\r\n                <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n              </Form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport {\r\n  pages,\r\n  aliasPages,\r\n  addFields,\r\n  addTypes,\r\n  fetchedPageTypes,\r\n} from \"../../config\";\r\nimport { fetchedData } from \"../../fetchedData\";\r\nimport {\r\n  post_generic,\r\n  get_generic,\r\n  post_file_generic,\r\n} from \"../../services/http_operations\";\r\nimport {\r\n  isDefault,\r\n  removeDefaultElements,\r\n} from \"../../services/misc_functions\";\r\nimport { useParams, useSearchParams } from \"react-router-dom\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport {\r\n  Button,\r\n  Form,\r\n  Nav,\r\n  InputGroup,\r\n  Accordion,\r\n  Table,\r\n  FloatingLabel,\r\n} from \"react-bootstrap\";\r\nimport { FormManager } from \"../formManager/formManager\";\r\n\r\nconst cloneDeep = require(\"clone-deep\");\r\n/*\r\nAPPUNTI FORM\r\n\r\n <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n            <Form.Label>\r\n              TEXT\r\n            </Form.Label>\r\n            <Form.Control type=\"text\" placeholder=\"PLACEHOLDER TEXT\" />\r\n            <Form.Text className=\"text-muted\">\r\n              LABEL\r\n            </Form.Text>\r\n          </Form.Group>\r\n\r\ntipi consentiti nel form control:\r\ntext | number (verifica del numero automatica) | email (verifica email automatica) | file | checkbox\r\n\r\n*/\r\n\r\nexport default function AddExperimentPage(props) {\r\n  //get resource and id from url params\r\n  const resource = \"experiments\";\r\n  //get from attribute from search param\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n  //redirect hook\r\n  const navigate = useNavigate();\r\n  //type of input to post resources\r\n  const [postType, setPostType] = useState(\"form\");\r\n  //message for user\r\n  const [msg, setMsg] = useState(\"\");\r\n  //values\r\n  const [values, setValues] = useState(cloneDeep(addFields[resource]));\r\n  //disabled\r\n  const [disabledFields, setDisabledFields] = useState({});\r\n\r\n  //protocols\r\n  const [protocols, setProtocols] = useState();\r\n  //selected protocol\r\n  const [protocol, setProtocol] = useState();\r\n\r\n  //file upload state\r\n  const [file, setFile] = useState(undefined);\r\n  const [contentHeader, setContentHeader] = useState(undefined);\r\n  const [contentBody, setContentBody] = useState(undefined);\r\n  const [contentPlain, setContentPlain] = useState(undefined);\r\n\r\n  //useeffect to get resource if required\r\n  useEffect(() => {\r\n    const fetchData = async (qs = {}) => {\r\n      // get the protocols data from the api\r\n      const response = await get_generic(\"protocols\", qs);\r\n\r\n      setProtocols(response.docs.map((e) => e._id));\r\n    };\r\n    const qs = { limit: 100 };\r\n    fetchData(qs);\r\n  }, [props, searchParams]);\r\n\r\n  //return if page shouldn't be rendered\r\n  if (addFields[resource] === undefined)\r\n    return <div>This entity cannot be posted</div>;\r\n\r\n  //handle changes\r\n  const handleChanges = (val, path) => {\r\n    let tmpVals = cloneDeep(values);\r\n    let valuesPtr = tmpVals;\r\n\r\n    let i;\r\n    let lastIndexNumber = -1;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      valuesPtr = valuesPtr[path[i]];\r\n      if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    }\r\n    if (typeof path[i] === \"number\") lastIndexNumber = i;\r\n    valuesPtr[path[i]] = val;\r\n    //check if an array is present\r\n    if (lastIndexNumber !== -1) {\r\n      //only string and numbers are allowed as item, with this version\r\n      const item = typeof val === \"number\" ? NaN : \"\";\r\n      tmpVals = maintainEmptyElement(\r\n        tmpVals,\r\n        path.slice(0, lastIndexNumber),\r\n        item\r\n      );\r\n    }\r\n\r\n    console.log({ tmpVals });\r\n    setValues(tmpVals);\r\n  };\r\n\r\n  const handleDeleteItemArray = (path) => {\r\n    let val = cloneDeep(values);\r\n    let tmpPtr = val;\r\n\r\n    let i;\r\n    for (i = 0; i < path.length - 1; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    const removed = tmpPtr.splice(path[i], 1);\r\n\r\n    const item = typeof removed[0] === \"number\" ? NaN : \"\";\r\n    val = maintainEmptyElement(val, path.slice(0, i), item);\r\n    setValues(val);\r\n  };\r\n  //handle way selector to post new entity\r\n  const handleTypeSelect = (eventKey) => setPostType(eventKey);\r\n\r\n  //handle changes to selected protocols\r\n  const handleProtocolChange = async (e) => {\r\n    e.preventDefault();\r\n    const selectedProtocol = e.target.value;\r\n    const fst = { _id: e.target.value };\r\n    const qs = { filter: JSON.stringify(fst) };\r\n    const res = await get_generic(\"protocols\", qs);\r\n    const protocol = res.docs[0];\r\n\r\n    const metadata = [];\r\n    for (let i = 0; i < protocol.metadata.length; i++) {\r\n      if (protocol.metadata[i].type === \"scalar\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: NaN,\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"text\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: \"\",\r\n        });\r\n      }\r\n      if (protocol.metadata[i].type === \"vector\") {\r\n        metadata.push({\r\n          name: protocol.metadata[i].name,\r\n          value: [NaN],\r\n        });\r\n      }\r\n    }\r\n\r\n    const tmpValues = cloneDeep(values);\r\n    tmpValues[\"protocol\"] = selectedProtocol;\r\n    if (metadata.length !== 0) tmpValues[\"metadata\"] = metadata;\r\n\r\n    const tmpDisabled = cloneDeep(disabledFields);\r\n    tmpDisabled[\"protocol\"] = true;\r\n\r\n    setDisabledFields(tmpDisabled);\r\n    setProtocol(selectedProtocol);\r\n    setValues(tmpValues);\r\n  };\r\n\r\n  const maintainEmptyElement = (original, path, item = undefined) => {\r\n    let tmp = cloneDeep(original);\r\n    let tmpPtr = tmp;\r\n    let addFldTmp = cloneDeep(addFields[resource]);\r\n    const tmpPath = [...path];\r\n\r\n    //get more nested array\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      tmpPtr = tmpPtr[path[i]];\r\n    }\r\n\r\n    //get the appropriate item, if possible\r\n    for (let i = 0; i < tmpPath.length; i++) {\r\n      if (path[i] === undefined) break;\r\n      if (addFldTmp === undefined) break;\r\n      //ignore indexes for addFldTmp\r\n      if (typeof path[i] === \"number\") addFldTmp = addFldTmp[0];\r\n      else addFldTmp = addFldTmp[path[i]];\r\n    }\r\n\r\n    //non array case\r\n    if (addFldTmp !== undefined && !Array.isArray(addFldTmp)) return tmp;\r\n\r\n    //add item according to addfield dictionary\r\n    if (addFldTmp !== undefined) {\r\n      //0-length array\r\n      if (tmpPtr.length === 0) {\r\n        if (addFldTmp[0].constructor === Object) {\r\n          tmpPtr.push({\r\n            ...addFldTmp[0],\r\n          });\r\n        } else {\r\n          tmpPtr.push(\"\");\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr[0].constructor === Object) {\r\n          //check if there are no default elements in array\r\n          if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n            tmpPtr.push({\r\n              ...addFldTmp[0],\r\n            });\r\n          }\r\n        } else {\r\n          if (!tmpPtr.includes(\"\")) {\r\n            tmpPtr.push(\"\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //add item according to params\r\n    if (item !== undefined && addFldTmp === undefined) {\r\n      if (tmpPtr.length === 0) {\r\n        if (item.constructor === Object) {\r\n          tmpPtr.push({ ...item });\r\n        } else {\r\n          tmpPtr.push(item);\r\n        }\r\n      }\r\n      //else 0-length array\r\n      else {\r\n        if (tmpPtr.filter((e) => isDefault(e)).length === 0) {\r\n          if (item.constructor === Object) {\r\n            tmpPtr.push({ ...item });\r\n          } else {\r\n            tmpPtr.push(item);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return tmp;\r\n  };\r\n  //post the body for forms\r\n  const postBody = async (e) => {\r\n    e.preventDefault();\r\n    //deep clone values\r\n    let token = undefined;\r\n    let body = cloneDeep(values);\r\n    if (body.token !== undefined) {\r\n      token = body.token;\r\n      delete body.token;\r\n    }\r\n\r\n    let tmpValues = cloneDeep(body);\r\n    removeDefaultElements(tmpValues);\r\n\r\n    let res;\r\n    try {\r\n      const resp = await post_generic(\r\n        resource,\r\n        JSON.stringify(tmpValues),\r\n        token\r\n      );\r\n      res = resp.response;\r\n      setMsg(res.statusText);\r\n    } catch (error) {\r\n      console.log(error);\r\n      res = error.error.response;\r\n      //add details\r\n      setMsg(\r\n        error.error.response.data.message +\r\n          \" : \" +\r\n          error.error.response.data.details\r\n      );\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") == true) {\r\n        if (resource === \"tenants\") navigate(\"/\");\r\n        else navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  const postFile = async (e) => {\r\n    e.preventDefault();\r\n    let res;\r\n    if (file.name.endsWith(\".csv\")) {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      try {\r\n        const resp = await post_file_generic(resource, formData);\r\n\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n    if (file.name.endsWith(\".json\")) {\r\n      console.log(contentPlain);\r\n      try {\r\n        const resp = await post_generic(resource, contentPlain, undefined);\r\n        res = resp.response;\r\n        setMsg(res.statusText);\r\n      } catch (error) {\r\n        console.log(error);\r\n        res = error.error.response;\r\n        //add details\r\n        setMsg(\r\n          error.error.response.data.message +\r\n            \" : \" +\r\n            error.error.response.data.details\r\n        );\r\n      }\r\n    }\r\n\r\n    if (res.status === 200) {\r\n      if (window.confirm(\"Back to resource page?\") == true) {\r\n        navigate(\"/\" + resource);\r\n      } else {\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <header className=\"page-header\">\r\n        Add resource &nbsp;\r\n        <b>{resource}</b>\r\n      </header>\r\n      <main className=\"page-content\">\r\n        <Nav\r\n          justify\r\n          variant=\"tabs\"\r\n          className=\"justify-content-center\"\r\n          onSelect={handleTypeSelect}\r\n          defaultActiveKey=\"form\"\r\n        >\r\n          {addTypes[resource].includes(\"form\") && (\r\n            <Nav.Item>\r\n              <Nav.Link eventKey=\"form\">Form</Nav.Link>\r\n            </Nav.Item>\r\n          )}\r\n\r\n          {addTypes[resource].includes(\"file\") &&\r\n            searchParams.get(\"from\") === null && (\r\n              <Nav.Item>\r\n                <Nav.Link eventKey=\"file\">File</Nav.Link>\r\n              </Nav.Item>\r\n            )}\r\n        </Nav>\r\n        <div\r\n          style={{\r\n            backgroundColor: \"#fff\",\r\n            borderRadius: 2 + \"px\",\r\n            borderStyle: \"solid\",\r\n            borderColor: \"rgba(18, 54, 81, 0.9)\",\r\n            borderWidth: 1 + \"px\",\r\n            width: 100 + \"%\",\r\n            height: \"fit-content\",\r\n          }}\r\n        >\r\n          {postType === \"form\" && protocols !== undefined && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form.Select\r\n                aria-label={locale().select + \" protocol\"}\r\n                onChange={handleProtocolChange}\r\n              >\r\n                <option>{locale().select} protocol</option>\r\n                {React.Children.toArray(\r\n                  protocols.map((e) => {\r\n                    return <option value={e}>{e}</option>;\r\n                  })\r\n                )}\r\n              </Form.Select>\r\n              <br />\r\n              <FormManager\r\n                values={values}\r\n                resource={resource}\r\n                functionalFields={addFields}\r\n                disabledFields={disabledFields}\r\n                handleChangesCallback={handleChanges}\r\n                arrayDeleteCallback={handleDeleteItemArray}\r\n                submitFunction={postBody}\r\n              />\r\n\r\n              <br />\r\n\r\n              <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n            </div>\r\n          )}\r\n          {postType === \"file\" && (\r\n            <div style={{ margin: 5 + \"px\" }}>\r\n              <Form onSubmit={postFile}>\r\n                <Form.Label>\r\n                  <b>{locale().select_file}</b>\r\n                </Form.Label>\r\n                <Form.Control\r\n                  className=\"mb-3\"\r\n                  type=\"file\"\r\n                  accept=\".csv, .json\"\r\n                  label=\"File\"\r\n                  onChange={(e) => {\r\n                    const file = e.target.files[0];\r\n                    setFile(file);\r\n                    console.log(file);\r\n                    const fileReader = new FileReader();\r\n\r\n                    fileReader.onloadend = () => {\r\n                      const content = fileReader.result;\r\n                      if (file.name.endsWith(\".csv\")) {\r\n                        const regex = new RegExp(\"\\r\", \"g\");\r\n                        let splitted = content.replace(regex, \"\").split(\"\\n\");\r\n\r\n                        setContentHeader(splitted[0]);\r\n                        splitted.splice(0, 1);\r\n                        setContentBody(splitted);\r\n                      }\r\n                      if (file.name.endsWith(\".json\")) {\r\n                        const content = fileReader.result;\r\n                        setContentPlain(content);\r\n                      }\r\n                    };\r\n                    fileReader.readAsText(file);\r\n                  }}\r\n                />\r\n                {contentBody !== undefined && contentHeader !== undefined && (\r\n                  <Accordion>\r\n                    <Accordion.Item eventKey=\"0\">\r\n                      <Accordion.Header>\r\n                        {locale().file_content}\r\n                      </Accordion.Header>\r\n                      <Accordion.Body\r\n                        style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                      >\r\n                        <Table responsive striped bordered hover>\r\n                          <thead>\r\n                            <tr>\r\n                              {React.Children.toArray(\r\n                                contentHeader.split(\",\").map((h) => {\r\n                                  return <th>{h}</th>;\r\n                                })\r\n                              )}\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody>\r\n                            {React.Children.toArray(\r\n                              contentBody.map((e) => {\r\n                                return (\r\n                                  <tr>\r\n                                    {React.Children.toArray(\r\n                                      e.split(\",\").map((h) => {\r\n                                        return <td>{h}</td>;\r\n                                      })\r\n                                    )}\r\n                                  </tr>\r\n                                );\r\n                              })\r\n                            )}\r\n                          </tbody>\r\n                        </Table>\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                )}\r\n                {contentPlain !== undefined && (\r\n                  <Accordion>\r\n                    <Accordion.Item eventKey=\"0\">\r\n                      <Accordion.Header>\r\n                        {locale().file_content}\r\n                      </Accordion.Header>\r\n                      <Accordion.Body\r\n                        style={{ overflow: \"scroll\", height: 70 + \"vh\" }}\r\n                      >\r\n                        {contentPlain}\r\n                      </Accordion.Body>\r\n                    </Accordion.Item>\r\n                  </Accordion>\r\n                )}\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                  Submit\r\n                </Button>\r\n                <br />\r\n                <font style={{ marginLeft: 5 + \"px\" }}>{msg}</font>\r\n              </Form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Routes,\r\n  Navigate,\r\n} from \"react-router-dom\";\r\nimport { AuthPage } from \"./components/authPage/authPage.comp\";\r\nimport { HomePage } from \"./components/homePage/homePage\";\r\nimport { NotFoundPage } from \"./components/notFoundPage/notFoundPage\";\r\nimport { Navigation } from \"./components/navigation/navigation.comp\";\r\nimport Page from \"./components/page/page\";\r\n\r\nimport \"./App.scss\";\r\nimport UnauthorizedPage from \"./components/unauthorizedPage/unauthorizedPage\";\r\n\r\nimport NotificationBar from \"./components/notificationBar/notificationBar\";\r\nimport { website_name } from \"./config\";\r\n\r\nimport AppContext from \"./context\";\r\n\r\nimport { notificationManager, get_generic } from \"./services/http_operations\";\r\nimport EditContentPage from \"./components/editContentPage/editContentPage\";\r\nimport AddPage from \"./components/addPage/addPage\";\r\nimport AddExperimentPage from \"./components/addExperimentPage/addExperimentPage\";\r\nimport { SetFetchedData, fetchedData } from \"./fetchedData\";\r\n\r\n/*\r\n    notifications follow this schema\r\n\r\n    {\r\n        name: \"notification name\"\r\n        time: \"\"\r\n        message: \"this is a message\"\r\n    }\r\n\r\n\r\n*/\r\n\r\ninterface INotification {\r\n  type: string;\r\n  time: string;\r\n  msg: string;\r\n}\r\n\r\nfunction App() {\r\n  const [notifications, setNotifications] = useState<INotification[]>([]);\r\n  const appName: string = website_name;\r\n\r\n  const tkn = localStorage.getItem(\"diten-token\");\r\n\r\n  //use effect to fetch static data from the server (like types)\r\n  useEffect(() => {\r\n    // declare the async data fetching function\r\n    const fetchTypes = async () => {\r\n      // get the data from the api\r\n      try {\r\n        const response = await get_generic(\"types\", {}, \"\");\r\n\r\n        SetFetchedData(response.response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    if (fetchedData !== undefined) return;\r\n    // call the function\r\n    try {\r\n      fetchTypes();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    // make sure to catch any error\r\n  }, []);\r\n\r\n  //function to push a new notification at the beginning of the list\r\n  function PushNotification(obj: INotification) {\r\n    setNotifications((prev) => [obj].concat(prev));\r\n    //notifications.push(obj);\r\n  }\r\n\r\n  //function to remove a single notification from list\r\n  function RemoveNotification(id: number) {\r\n    let tmp = [...notifications];\r\n    tmp.splice(id, 1);\r\n    setNotifications(tmp);\r\n  }\r\n\r\n  //function to clear notifications list\r\n  function ClearNotifications() {\r\n    setNotifications([]);\r\n  }\r\n\r\n  const notificationsSettings = {\r\n    notifications: notifications,\r\n    PushNotification,\r\n    RemoveNotification,\r\n    ClearNotifications,\r\n  };\r\n\r\n  notificationManager.ClearNotifications = ClearNotifications;\r\n  notificationManager.PushNotification = PushNotification;\r\n  notificationManager.RemoveNotification = RemoveNotification;\r\n\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"app\">\r\n        <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<AuthPage />} />\r\n            <Route\r\n              path=\"/add/tenants\"\r\n              element={<AddPage resource={\"tenants\"} />}\r\n            />\r\n          </Routes>\r\n        </Router>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <AppContext.Provider value={notificationsSettings}>\r\n      <div className=\"app\">\r\n        <Router>\r\n          <aside>\r\n            <NavLink to=\"/home\" className=\"nav-wrap\">\r\n              {appName}\r\n            </NavLink>\r\n            <Navigation />\r\n          </aside>\r\n\r\n          <div className=\"main\">\r\n            <Routes>\r\n              <Route path=\"/\" element={<HomePage />} />\r\n              <Route path=\"/home\" element={<HomePage />} />\r\n              <Route path=\"/add/experiments/\" element={<AddExperimentPage />} />\r\n\r\n              <Route path=\"/edit/:resource/:id\" element={<EditContentPage />} />\r\n              <Route path=\"/add/:resource/\" element={<AddPage />} />\r\n              <Route path=\"/:page\" element={<Page res=\":page\" />} />\r\n\r\n              <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n              <Route path=\"/404\" element={<NotFoundPage />} />\r\n\r\n              <Route path=\"*\" element={<Navigate to=\"/404\" replace />} />\r\n            </Routes>\r\n          </div>\r\n          <div className=\"right-bar\">\r\n            <NotificationBar />\r\n          </div>\r\n        </Router>\r\n      </div>\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}