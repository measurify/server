{"version":3,"sources":["helpers/data.helpers.ts","services/http.service.ts","common/locale.js","services/config.service.ts","components/app.context.ts","components/withContext/withContext.comp.tsx","components/loader/loader.comp.tsx","helpers/pagination.helpers.ts","components/button/button.comp.tsx","components/infiniteLoader/infiniteLoader.comp.tsx","components/pagination/pagination.comp.tsx","components/table/table.comp.tsx","components/cards/cards.comp.tsx","components/formRow/formRow.comp.tsx","components/queryParams/queryParams.comp.tsx","components/popup/popup.comp.tsx","helpers/file.helpers.ts","components/formPopup/formPopup.comp.tsx","components/filterField/filterField.comp.tsx","common/models/states.types.helper.ts","common/models/config.types.helper.ts","components/graphHolder/graphHolder.tsx","components/graphPopup/graphPopup.comp.tsx","components/page/page.comp.tsx","components/authPage/authPage.comp.tsx","components/navigation/navigation.comp.tsx","components/customStyles/customStyles.comp.tsx","components/app.tsx","serviceWorker.ts","index.tsx"],"names":["dataHelpers","data","dataPath","attr","extractedData","digProps","split","prop","field","type","arrayType","objArray","array","JSON","parse","str","Object","keys","map","value","join","reduce","next","values","HttpService","baseUrl","unauthorizedRedirectUrl","errorMessageDataPath","loginUrl","requestHeaders","this","url","indexOf","rawData","outputUrl","forEach","key","urlParamName","replace","queryParams","exactMatch","length","replaceParamsInUrl","params","page","limit","param","name","push","console","log","reqUrl","urlIsAbsolute","origUrl","finalUrl","buildUrl","authorization","sessionStorage","getItem","Authorization","method","toUpperCase","headers","assign","body","undefined","res","errorMessage","json","path","dataAtPath","extractDataByDataPath","status","statusText","clear","redirectUrl","encodeURIComponent","document","location","href","Error","getErrorMessage","responseType","fetch","ok","text","handleError","buildRequest","makeRequest","locale","freeze","username","password","tenant","username_suggestion","password_suggestion","tenant_suggestion","id_suggestion","submit","login_error","login_unauthorised_user","search","previous_page","next_page","showing_result","out_of","items","nothing_to_see","enter_text","enter_email","enter_date","enter_color","enter_password","previous","select","add","update","session_expired","login","logout","graph","samples","wrong_feature_error","no_data_error","add_tenant","zoomIn","zoomOut","full_privileges","user_page_description","thing_page_description","feature_page_description","device_page_description","measure_page_description","tag_page_description","fieldmask_page_description","right_page_description","issue_page_description","constraint_page_description","script_page_description","results_for_page","filter_tag","filter_thing","httpService","HTTPService","endsWith","import","configurator","getRemoteConfig","config","isValid","configSchema","require","validate","Ajv","allErrors","verbose","compile","firstError","errors","message","error","AppContext","React","createContext","activePage","setError","setActivePage","withAppContext","Component","props","Consumer","context","Loader","className","paginationHelpers","parseInt","_page","_itemsPerPage","_total","Button","color","children","InfiniteLoader","Pagination","callbacks","pagination","customLabels","previousTitle","previousPageTitle","nextTitle","nextPageTitle","disabled","hasPreviousPage","onClick","previousPage","title","aria-hidden","hasNextPage","nextPage","Table","fields","customActions","editLabel","buttons","editItem","deleteLabel","deleteItem","actionColumnHeader","tableColumnHeaders","actions","paginationCallbacks","getNextPage","getPreviousPage","renderTableRow","item","rowIdx","fieldIdx","truncate","origField","origItem","src","alt","label","fieldValue","target","rel","urlLabel","style","backgroundColor","html","htmlCode","dangerouslySetInnerHTML","__html","renderTableCell","put","call","action","idx","icon","delete","renderTableContent","useEffect","clientHeight","window","innerHeight","dataLength","hasMore","loader","Cards","renderActions","cardIdx","renderCard","Fragment","renderRow","renderCardSkeleton","duration","startingIndex","Array","from","renderSkeletons","FormRow","loadedFields","direction","showReset","onChange","onRemove","useState","optionSources","setOptionSources","pageHeaders","addArrayItemLabel","addArrayItem","clearLabel","clearInput","renderArrayItems","originalField","itemIdx","inputField","renderFieldInput","fieldName","updatedArray","localValue","splice","e","removeItemToFieldArray","aria-label","preventDefault","addItemToFieldArray","readonly","changeCallback","inputProps","defaultPlaceholder","placeholder","required","checked","optionSource","preLoad","loadedOption","optionsData","fill","optionDisplay","opt","i","display","fieldname","options","insertPreloadedData","option","a","async","actualMethod","result","optionSourceData","valuePath","displayPath","toast","position","POSITION","TOP_CENTER","loadOptionSourceFromRemote","sortBy","finalOptions","sortedOptions","orderBy","placeholders","object","number","valueAsNumber","email","accept","file","date","originalName","QueryParams","initialParams","paginationConfig","submitCallback","setQueryParams","formChanged","submitAfterChange","updatedQueryParams","filteredParams","filter","includes","onSubmit","queryParam","portalRoot","getElementById","createElement","setAttribute","append","PortalPopup","el","componentDidMount","appendChild","componentWillUnmount","removeChild","ReactDOM","createPortal","Popup","_handleKeyDown","show","closeCallback","keyCode","closeLabel","closeForm","ref","refCallback","addEventListener","bind","removeEventListener","fileHelpers","fieldIndex","unflatten","FormPopup","getSingleConfig","methodConfig","fieldsCopy","stringify","loading","setLoading","formFields","setFormFields","deleteValues","setDeleteValues","finalRawData","setFinalRawData","submitForm","finalObject","includeOriginalFields","formData","FormData","containFiles","isMultipartForm","validationError","useInUrl","checkIfFieldIsObject","temp","rmVal","fileInput","querySelector","files","firstFile","success","updatedFormFields","saveRemovedValues","delVal","dataTransform","dataPathSplit","lookupValue","objToLookIn","pathElem","lookup","initFormFields","FilterField","toLowerCase","isQueryPaginationState","obj","source","isBodyPaginationState","isQueryPagination","isBodyPagination","GraphHolder","dataMat","prev","prevCallback","nextCallback","zoomInCallback","zoomOutCallback","setHintData","y","setHoverData","hoverData","hintData","setHoverDataWithIndex","index","nameStruct","width","height","xType","onMouseLeave","tickTotal","tickFormat","d","Date","toString","substr","unitMeasure","dataStruct","onValueMouseOver","setHintDataWithIndex","x","background","GraphPopup","graphConfig","doneQuery","setDoneQuery","showGraph","setShowGraph","titleState","setTitleState","graphData","setGraphData","prevGraphData","setPrevGraphData","nextGraphData","setNextGraphData","setNext","setPrev","setZoomIn","setZoomOut","pageNum","setPageNum","totalPages","setTotalPages","setFetchedData","fetchedFeature","setFetchedFeature","setTotalDocs","setLimit","graphChanged","submitGraph","fetchFeatureData","resultsData","fF","f","resultsFeature","pG","tP","tD","fD","fetchedData","totalDocs","buildData","goodFeatures","dataFeatName","dataFeatUnit","ft","comp","dimension","unit","sample","feature","indexFeat","finalData","reverse","buildPrev","tempField","prData","pPage","buildNext","nxData","nPage","_id","buildMain","prPage","nxPage","buildInitQueryParamsAndPaginationState","initQueryParams","initialPagination","descending","find","Page","useParams","useHistory","pageMethods","methods","getAllConfig","getAll","infiniteScroll","getSingle","postConfig","post","putConfig","deleteConfig","addItemLabel","addItem","itemName","openGraphLabel","addItemFormTitle","formTitles","editItemFormTitle","graphTitle","openedPopup","setOpenedPopup","openedGraph","setOpenedGraph","setPagination","setItems","setFilter","openEditPopup","updateItem","openCustomActionPopup","performAction","fetchPageData","isArray","orderedItems","total","newPaginationState","getUpdatedPaginationState","getAllRequest","confirm","updatedParams","remove","submitQueryParams","reset","paramsToUrl","queryState","newState","nextPath","prevPath","countPath","nextActivePage","pages","p","pIdx","id","parsedParams","QueryString","finalQueryParams","decodeURIComponent","extractQueryParams","description","openGraphPopup","fieldsToFilter","filterable","currentCountFrom","currentCountTo","itemsCount","renderPaginationStateLabel","filteredItems","passFilter","newPage","renderItemsUI","renderPageContent","refreshData","AuthPage","user","setUser","pwd","setPwd","setTenant","openedAddTenant","setOpenedAddTenant","credentials","setItem","token","addTenant","tokenHead","event","Navigation","isOpened","setIsOpened","to","activeClassName","CustomStyles","cssVars","styles","vars","arr","defaultAppName","changeFavicon","link","oldLink","head","App","setLoadedFields","firstLoad","setFirstLoad","setConfig","appName","loadConfig","windowConfig","RESTool","remoteConfig","ConfigService","loadDefaultConfig","favicon","remoteUrl","validateConfig","tkn","Provider","exact","component","tempLD","preloadData","customStyles","scrollDuration","cosParameter","scrollY","scrollCount","oldTimestamp","performance","now","requestAnimationFrame","step","newTimestamp","Math","PI","scrollTo","round","cos","scrollToTop","autoClose","draggable","Boolean","hostname","match","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f93fcc61.chunk.js","sourcesContent":["import { IConfigInputField } from \"../common/models/config.model\";\r\n\r\nclass DataHelpers {\r\n  public extractDataByDataPath(\r\n    data: any,\r\n    dataPath: string,\r\n    attr: string | null = null\r\n  ) {\r\n    if (!data || !dataPath) {\r\n      if (attr) {\r\n        return data[attr];\r\n      }\r\n      return data;\r\n    }\r\n\r\n    let extractedData: any = data;\r\n    const digProps: string[] = dataPath.split(\".\");\r\n\r\n    for (let prop of digProps) {\r\n      if (typeof extractedData[prop] !== \"undefined\") {\r\n        extractedData = extractedData[prop];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (typeof extractedData === \"undefined\") {\r\n      return null;\r\n    }\r\n\r\n    if (attr) {\r\n      return extractedData[attr];\r\n    }\r\n\r\n    return extractedData;\r\n  }\r\n\r\n  public checkIfFieldIsObject(field: IConfigInputField): boolean {\r\n    if (field.type === \"object\") {\r\n      return true;\r\n    }\r\n\r\n    if (field.type === \"array\") {\r\n      if (!field.arrayType || field.arrayType === \"object\") {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public arrayToCSV(objArray: any) {\r\n    const array =\r\n      typeof objArray !== \"object\" ? JSON.parse(objArray) : objArray;\r\n    let str =\r\n      `${Object.keys(array[0])\r\n        .map((value) => `\"${value}\"`)\r\n        .join(\",\")}` + \"\\r\\n\";\r\n\r\n    return array.reduce((str: any, next: any) => {\r\n      str +=\r\n        `${Object.values(next)\r\n          .map((value) => `\"${value}\"`)\r\n          .join(\",\")}` + \"\\r\\n\";\r\n      return str;\r\n    }, str);\r\n  }\r\n}\r\n\r\nexport const dataHelpers = new DataHelpers();","import { toast } from 'react-toastify';\r\nimport locale from '../common/locale';\r\nimport { TConfigMethod, IQueryParam } from '../common/models/config.model';\r\nimport { dataHelpers } from '../helpers/data.helpers';\r\n\r\nexport type ResponseType = 'json' | 'text' | 'boolean' | 'status';\r\n\r\nexport interface IFetchParams {\r\n  origUrl: string\r\n  method?: TConfigMethod\r\n  headers?: any\r\n  queryParams?: IQueryParam[]\r\n  exactMatch?: boolean\r\n  rawData?: any\r\n  body?: any\r\n  responseType?: ResponseType\r\n}\r\n\r\nclass HttpService {\r\n  public baseUrl: string;\r\n  public loginUrl: string;\r\n  public unauthorizedRedirectUrl: string;\r\n  public errorMessageDataPath: string | string[];\r\n  public requestHeaders: any;\r\n\r\n  constructor(baseUrl: string = '', unauthorizedRedirectUrl: string = '', errorMessageDataPath: string = '', loginUrl: string = '') {\r\n    this.baseUrl = baseUrl || '';\r\n    this.loginUrl = loginUrl || '';\r\n    this.unauthorizedRedirectUrl = unauthorizedRedirectUrl || '';\r\n    this.errorMessageDataPath = errorMessageDataPath || '';\r\n    this.requestHeaders = {};\r\n  }\r\n\r\n  private urlIsAbsolute(url: string) {\r\n    if (url.indexOf('http') === 0 || url.indexOf('https') === 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private replaceParamsInUrl(url: string, rawData?: any): string {\r\n    if (!rawData || typeof rawData !== 'object') {\r\n      return url;\r\n    }\r\n\r\n    let outputUrl = url;\r\n\r\n    Object.keys(rawData).forEach((key) => {\r\n      const urlParamName = `:${key}`;\r\n      outputUrl = outputUrl.replace(urlParamName, rawData[key] as string);\r\n    });\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildUrl(url: string, queryParams: IQueryParam[] = [], exactMatch : boolean = false, rawData?: any): string {\r\n    if (!queryParams || !queryParams.length) {\r\n      return this.replaceParamsInUrl(url, rawData);\r\n    }\r\n\r\n    let outputUrl = url;\r\n    const params = [];\r\n    let page = '-1'\r\n    let limit = '10'\r\n\r\n    for (let param of queryParams) {\r\n      let value = '';\r\n      if (!param.name || typeof param.value === 'undefined') { continue; } \r\n      if (param.name === 'page') { page = param.value; continue; }\r\n      if (param.name === 'limit') { limit = param.value; continue; }\r\n      if (param.name === 'tags' && param.value === \"\") { continue; }\r\n      if (param.name === 'info') value = '{\"$regex\":\"' + param.value + '\",\"$options\":\"i\"}';\r\n      else value = '\"' + param.value + '\"';\r\n      \r\n      if(exactMatch === true)\r\n      {\r\n        params.push(`\"${param.name}\":${value || ''}`);\r\n      }\r\n      else\r\n      {\r\n        params.push(`\"${param.name}\":{\"$regex\" : ${value || ''}}`);\r\n      }\r\n      \r\n      \r\n\r\n    }\r\n\r\n    outputUrl += '?filter={' + params.join(',') + '}';\r\n    if(page != '-1') outputUrl += \"&page=\" + page;\r\n    outputUrl += \"&limit=\" + limit;\r\n\r\n    console.log(\"Requested URL : \"+outputUrl);\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildRequest(params: IFetchParams): { url: string, params: any } {\r\n    const reqUrl: string = this.urlIsAbsolute(params.origUrl) ? params.origUrl : this.baseUrl + params.origUrl;\r\n    const finalUrl: string = this.buildUrl(reqUrl, params.queryParams,params.exactMatch, params.rawData);\r\n    const authorization = sessionStorage.getItem('diten-token') ? { Authorization: sessionStorage.getItem('diten-token'), } : {};\r\n    const requestParams = {\r\n      method: params.method ? params.method.toUpperCase() : 'GET',\r\n      headers: Object.assign(authorization, this.requestHeaders, params.headers || {}),\r\n      body: params.method === 'post' || params.method === 'put' || params.method === 'patch' ? params.body : undefined\r\n    };\r\n\r\n    return {\r\n      url: finalUrl,\r\n      params: requestParams\r\n    };\r\n  }\r\n\r\n  private async getErrorMessage(res: Response | any): Promise<string> {\r\n    let errorMessage: string = '';\r\n\r\n    try {\r\n      const body = await res.json();\r\n\r\n      for (const path of this.errorMessageDataPath) {\r\n        const dataAtPath = dataHelpers.extractDataByDataPath(body, path);\r\n\r\n        if (dataAtPath) {\r\n          errorMessage = dataAtPath;\r\n        }\r\n      }\r\n    } catch { } // TODO: proper handling of errors (^.^)\r\n\r\n    return errorMessage && errorMessage.length ?\r\n      errorMessage :\r\n      `${res.status} - ${res.statusText || ''}`;\r\n  }\r\n\r\n  private async handleError(res: Response) {\r\n    // In case response status is \"Unauthorized\", redirect to relevant url\r\n\r\n    if (res.status === 401 && this.unauthorizedRedirectUrl) {\r\n      //test\r\n      \r\n      sessionStorage.clear();\r\n\r\n      \r\n\r\n      const redirectUrl: string = this.unauthorizedRedirectUrl.replace(':returnUrl', encodeURIComponent(document.location.href));\r\n      document.location.replace(redirectUrl);\r\n      return;\r\n    }\r\n\r\n    throw new Error(await this.getErrorMessage(res));\r\n  }\r\n\r\n  private async makeRequest(url: string, params: any = {}, responseType: ResponseType = 'json') {\r\n    const res: Response = await fetch(url, Object.assign({}, params, {}));\r\n\r\n    if (res.ok) {\r\n      switch (responseType) {\r\n        case 'json':\r\n          return await res.json();\r\n        case 'text':\r\n          return await res.text();\r\n        case 'boolean':\r\n          return true;\r\n        default:\r\n          return true;\r\n      }\r\n    }\r\n\r\n    await this.handleError(res);\r\n  }\r\n\r\n  public async fetch({ method, origUrl, queryParams, exactMatch, rawData, body, headers, responseType }: IFetchParams) {\r\n    const { url, params } = this.buildRequest({ method, origUrl, queryParams,exactMatch, rawData, body, headers });\r\n    return await this.makeRequest(url, params, responseType);\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","const locale = Object.freeze({\r\n    username: 'Nome utente',\r\n    password: 'Password',\r\n    tenant: 'Organizzazione',\r\n    username_suggestion: 'Inserisci il nome utente',\r\n    password_suggestion: 'Inserisci la password',\r\n    tenant_suggestion: 'Inserisci la tua organizzazione',\r\n    id_suggestion: \"Inserisci un ID\",\r\n    submit: 'Invio',\r\n    login_error: 'Login errata!',\r\n    login_unauthorised_user : \"Al momento solamente gli utenti con i privilegi di amministratore possono accedere\",\r\n    search: 'Cerca',\r\n    previous_page: 'Pagina precedente',\r\n    next_page: 'Prossima pagina',\r\n    showing_result: \"Risultati\",\r\n    out_of: \"di\",\r\n    items: \"totali\",\r\n    nothing_to_see: \"Nessun risultato\",\r\n    enter_text: \"Inserisci testo\",\r\n    enter_email: \"Inserisci email\",\r\n    enter_date: \"Inserisci data\",\r\n    enter_color: \"Inserisci colore\",\r\n    enter_password: \"Inserisci password\",\r\n    next : \"Successivo\",\r\n    previous : \"Precedente\",\r\n    select : \"\",\r\n    add : \"Aggiungi\",\r\n    update : \"Aggiorna\",\r\n    session_expired : \"Sessione scaduta\",\r\n    login : \"Accedi\",\r\n    logout : \"Esci\",\r\n    graph : \"Grafico\",\r\n    samples: \"Campioni\",\r\n    wrong_feature_error : \"Questa versione del software non pu costruire un grafico delle feature selezionate. Possono essere mostrati i grafici solamente di feature aventi almeno una componente scalare e numerica\",\r\n    no_data_error : \"Non sono presenti dati per poter elaborare un grafico\",\r\n    add_tenant : \"Aggiungi organizzazione\",\r\n    zoomIn : \"Ingrandisci\",\r\n    zoomOut : \"Riduci\",\r\n    value : \"Valore\",\r\n    page: \"Pagina\",\r\n    full_privileges : \"Privilegi completi\",\r\n    user_page_description : \"Visualizzazione e gestione degli User\",\r\n    thing_page_description: \"Visualizzazione e gestione delle Thing\",\r\n    feature_page_description: \"Visualizzazione e gestione delle Feature.\",\r\n    device_page_description: \"Visualizzazione e gestione dei Device.\",\r\n    measure_page_description: \"Visualizzazione e gestione delle Measure.\",\r\n    tag_page_description:\"Visualizzazione e gestione dei Tag.\",\r\n    fieldmask_page_description: \"Visualizzazione e gestione delle Fieldmask.\",\r\n    right_page_description:\"Visualizzazione e gestione dei Right.\",\r\n    issue_page_description:\"Visualizzazione e gestione degli Issue.\",\r\n    constraint_page_description:\"Visualizzazione e gestione dei Constraint.\",\r\n    script_page_description:\"Visualizzazione e gestione degli Script.\",\r\n    results_for_page: \"Risultati per pagina\",\r\n    filter_tag: \"Filtra Tag\",\r\n    filter_thing: \"Filtra Thing\",\r\n    filter_thing: \"Filtra Thing\",\r\n    filter_device: \"Filtra Device\",\r\n    select_feature: \"Seleziona Feature\",\r\n    select_thing: \"Seleziona Thing\",\r\n    select_device: \"Seleziona Device\",\r\n    no_tag: \"Nessun Tag\",\r\n    no_feature: \"Nessuna Feature\",\r\n    no_script: \"Nessuno Script\",\r\n    no_relation: \"Nessuna Relation\",\r\n    no_item: \"Nessun Item\",\r\n    dimensions_guide: \"0 scalar / 1 array / 2 matrix\",\r\n    expand_and_edit: \"Espandi e Modifica\",\r\n    clone_and_edit: \"Clona e Modifica\",\r\n    expand: \"Espandi\"\r\n\r\n\r\n\r\n});\r\n\r\nexport default locale;","import HTTPService from './http.service';\r\nimport { IConfig } from '../common/models/config.model';\r\nimport Ajv from 'ajv';\r\nimport locale from \"../common/locale.js\";\r\n\r\nconst httpService: HTTPService = new HTTPService();\r\n\r\nclass ConfigService extends HTTPService {\r\n\r\n  public async getRemoteConfig(url: string) {\r\n    if (url.endsWith('.js')) {\r\n      console.log(\"fetch config.js\");\r\n      return (await import(/* webpackIgnore: true */url)).configurator(locale);\r\n    }\r\n    return await httpService.fetch({\r\n      origUrl: url,\r\n    });\r\n  }\r\n\r\n  public async loadDefaultConfig() { return (await this.getRemoteConfig('../../config.js')); }\r\n\r\n  public validateConfig(config: IConfig | null): { isValid: boolean, errorMessage: string | null } {\r\n    if (config === null) {\r\n      return {\r\n        isValid: true,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const configSchema = require('../assets/schemas/config.schema.json');\r\n    const ajv = new Ajv({\r\n      allErrors: true,\r\n      verbose: true,\r\n    });\r\n    const validate = ajv.compile(configSchema);\r\n    const isValid = validate(config);\r\n    if (typeof isValid !== 'boolean') {\r\n      throw new Error('Unexpected asynchronous JSON validation');\r\n    }\r\n    if (isValid) {\r\n      return {\r\n        isValid,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const firstError = validate.errors ? validate.errors[0] : undefined;\r\n    let errorMessage: string | null = null;\r\n    if (firstError?.message && firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\": ${firstError.message}`\r\n    } else if (firstError?.message) {\r\n      errorMessage = `Error parsing configuration: ${firstError.message}`\r\n    } else if (firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\"`\r\n    } else {\r\n      errorMessage = `Error parsing configuration`;\r\n    }\r\n    console.error(errorMessage);\r\n    console.error('All configuration errors: ', validate.errors);\r\n    return {\r\n      isValid,\r\n      errorMessage,\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport default new ConfigService();\r\n","import React from 'react';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport HttpService from '../services/http.service';\r\n\r\nexport interface IAppContext {\r\n  config: IConfig | null\r\n  activePage: IConfigPage | null\r\n  error: string | null\r\n  setError: (error: string | null) => void\r\n  setActivePage: (activePage: IConfigPage | null) => void\r\n  httpService: HttpService\r\n}\r\n\r\nexport const AppContext = React.createContext<IAppContext>({\r\n  config: null,\r\n  activePage: null,\r\n  error: null,\r\n  setError: () => {},\r\n  setActivePage: () => {},\r\n  httpService: new HttpService()\r\n});","import React from 'react';\r\nimport { AppContext } from '../app.context';\r\n\r\nexport const withAppContext = (Component: any) => {\r\n  return (props: any) => (\r\n    <AppContext.Consumer>    \r\n      {(context) => {\r\n        return <Component {...props} context={context} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './loader.scss';\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"app-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","class PaginationHelpers {\r\n  public hasPreviousPage(page: string | number | undefined): boolean {\r\n    if (page === undefined) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof page === 'string') {\r\n      return parseInt(page) > 1;\r\n    }\r\n\r\n    return page > 1;\r\n  }\r\n\r\n  public hasNextPage(_page: string | number, _itemsPerPage: string | number, _total: string | number | undefined): boolean {\r\n    if (_total === undefined) {\r\n      return true;\r\n    }\r\n    const page = typeof _page === 'string' ? parseInt(_page) : _page;\r\n    const itemsPerPage = typeof _itemsPerPage === 'string' ? parseInt(_itemsPerPage) : _itemsPerPage;\r\n    const total = typeof _total === 'string' ? parseInt(_total) : _total;\r\n\r\n    return page * itemsPerPage < total;\r\n  }\r\n}\r\n\r\nexport const paginationHelpers = new PaginationHelpers();","import React from 'react';\r\n\r\nimport './button.scss';\r\n\r\ninterface IProps {\r\n  children: any\r\n  type?: 'submit' | 'button' | 'reset'\r\n  title?: string\r\n  className?: string\r\n  onClick?: (e: any) => void\r\n  color?: 'gray' | 'blue' | 'green' | 'red'\r\n  disabled?: boolean\r\n}\r\n\r\nexport const Button = (props: IProps) => {\r\n  return (\r\n    <button {...props} className={`button ${props.className || ''} ${props.color || ''}`}>{props.children}</button>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './infiniteLoader.scss';\r\n\r\nexport const InfiniteLoader = () => {\r\n  return (\r\n    <div className=\"app-infinite-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","import React from 'react';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Button } from '../button/button.comp';\r\n\r\nimport './pagination.scss';\r\n\r\ninterface IProps {\r\n  pagination: IPaginationState\r\n  callbacks: {\r\n    previousPage: () => void,\r\n    nextPage: () => void,\r\n  }\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Pagination = ({ callbacks, pagination, customLabels }: IProps) => {\r\n  const previousTitle = customLabels?.pagination?.previousPageTitle || 'Previous page';\r\n  const nextTitle = customLabels?.pagination?.nextPageTitle || 'Next page';\r\n  return (\r\n    <div className=\"pagination-wrapper\">\r\n      <Button disabled={!pagination.hasPreviousPage} onClick={() => callbacks.previousPage()} title={previousTitle}>\r\n        <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n      </Button>\r\n      <Button disabled={!pagination.hasNextPage} onClick={() => callbacks.nextPage()} title={nextTitle}>\r\n        <i className=\"fa fa-arrow-right\" aria-hidden=\"true\" ></i>\r\n      </Button>\r\n    </div>\r\n  );\r\n};","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { InfiniteLoader } from '../infiniteLoader/infiniteLoader.comp';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './table.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getPreviousPage: (() => void) | null\r\n    getNextPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Table = ({ items, fields, pagination, callbacks, customActions, customLabels }: IProps) => {\r\n  const editLabel = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const actionColumnHeader = customLabels?.tableColumnHeaders?.actions || 'Actions';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderTableCell(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderTableRow(item: any, rowIdx: number) {\r\n    return (\r\n      <tr key={`tr_${rowIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <td className={field.truncate ? 'truncate' : ''} key={`td_${rowIdx}_${fieldIdx}`}>\r\n                {renderTableCell(field, item, value)}\r\n              </td>\r\n            );\r\n          })\r\n        }\r\n        <td>\r\n          <div className=\"actions-wrapper\">\r\n            {\r\n              callbacks.put &&\r\n              <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n            {\r\n              (customActions && customActions.length > 0) &&\r\n              customActions.map((action, idx) => (\r\n                <Button key={`action_${rowIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n                  <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n                </Button>\r\n              ))\r\n            }\r\n            {\r\n              callbacks.delete &&\r\n              <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            }\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  function renderTableContent() {\r\n    return (\r\n      <table className=\"pure-table\">\r\n        <thead>\r\n          <tr>\r\n            {\r\n              fields.map((field) => {\r\n                return <th key={`th_${field.name}`}>{field.label || field.name}</th>;\r\n              })\r\n            }\r\n            <th>{actionColumnHeader}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map(renderTableRow)\r\n          }\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      paginationCallbacks.nextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={<InfiniteLoader />}\r\n      >\r\n        {renderTableContent()}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrapper\">\r\n      {renderTableContent()}\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n          customLabels={customLabels}\r\n        ></Pagination>\r\n      }\r\n    </div >\r\n  );\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport Skeleton from 'react-loading-skeleton';\r\n\r\nimport { IConfigDisplayField, IConfigCustomAction, ICustomLabels } from '../../common/models/config.model';\r\nimport { IPaginationState } from '../../common/models/states.model';\r\nimport { dataHelpers } from '../../helpers/data.helpers';\r\nimport { Button } from '../button/button.comp';\r\nimport { Pagination } from '../pagination/pagination.comp';\r\n\r\nimport './cards.scss';\r\n\r\ninterface IProps {\r\n  items: any[]\r\n  pagination?: IPaginationState\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null\r\n    put: ((item: any) => void) | null\r\n    action: (item: any, action: IConfigCustomAction) => void\r\n    getNextPage: (() => void) | null\r\n    getPreviousPage: (() => void) | null\r\n  }\r\n  fields: IConfigDisplayField[]\r\n  customActions?: IConfigCustomAction[]\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nexport const Cards = ({ items, fields, callbacks, customActions, customLabels, pagination }: IProps) => {\r\n  const editLabel: string = customLabels?.buttons?.editItem || 'Edit';\r\n  const deleteLabel: string = customLabels?.buttons?.deleteItem || 'Delete';\r\n  const paginationCallbacks = {\r\n    nextPage: callbacks.getNextPage || (() => { return; }),\r\n    previousPage: callbacks.getPreviousPage || (() => { return; }),\r\n  };\r\n\r\n  function renderRow(origField: IConfigDisplayField, origItem: any, value: any) {\r\n    if (origField.type === 'boolean') {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === 'object') {\r\n      return 'object';\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case 'text':\r\n        return <span>{value}</span>;\r\n      case 'boolean':\r\n        return <div className={`bool ${value ? 'true' : 'false'}`}></div>;\r\n      case 'image':\r\n        if (!value) {\r\n          return <React.Fragment></React.Fragment>;\r\n        }\r\n        return <img src={value || ''} alt={value || origField.label || origField.name} />;\r\n      case 'url':\r\n        let url: string = origField.url || value || '';\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(origItem, field.dataPath, field.name);\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{origField.urlLabel || value}</a>;\r\n      case 'colorbox':\r\n        return <div className=\"colorbox\" style={{ backgroundColor: value }}></div>;\r\n      case 'html':\r\n        const htmlCode = origField.htmlCode || '<span>{value}</span>';\r\n        const html =  htmlCode.replace('{value}', value);\r\n        return <div dangerouslySetInnerHTML={{__html: html}}></div>\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderActions(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"actions-wrapper\">\r\n        {\r\n          callbacks.put &&\r\n          <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n            <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n        {\r\n          (customActions && customActions.length > 0) &&\r\n          customActions.map((action, idx) => (\r\n            <Button key={`action_${cardIdx}_${idx}`} onClick={() => callbacks.action(item, action)} title={action.name}>\r\n              <i className={`fa fa-${action.icon || 'cogs'}`} aria-hidden=\"true\"></i>\r\n            </Button>\r\n          ))\r\n        }\r\n        {\r\n          callbacks.delete &&\r\n          <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n            <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCard(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            const value = dataHelpers.extractDataByDataPath(item, field.dataPath, field.name);\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                {renderRow(field, item, value)}\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions(item, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCardSkeleton(cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {\r\n          fields.map((field, fieldIdx) => {\r\n            return (\r\n              <div className={`card-row ${field.type}`} key={`card_${cardIdx}_${fieldIdx}`}>\r\n                {\r\n                  field.type !== 'image' &&\r\n                  <label>{field.label || field.name}: </label>\r\n                }\r\n                <Skeleton duration={0.6} />\r\n              </div>\r\n            );\r\n          })\r\n        }\r\n        {renderActions({}, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderSkeletons() {\r\n    const startingIndex = items.length;\r\n    const skeletonsIndexes = Array.from(Array(pagination?.limit).keys()).map(value => value + startingIndex);\r\n    return skeletonsIndexes.map(renderCardSkeleton);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === 'infinite-scroll'\r\n      && document.body.clientHeight <= window.innerHeight\r\n      && callbacks.getNextPage\r\n      && pagination?.hasNextPage\r\n    ) {\r\n      callbacks.getNextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === 'infinite-scroll') {\r\n    return (\r\n      <InfiniteScroll className=\"cards-wrapper\"\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={renderSkeletons()}\r\n      >\r\n        {items.map(renderCard)}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"cards-wrapper\">\r\n        {items.map(renderCard)}\r\n      </div>\r\n      {\r\n        pagination &&\r\n        pagination.type === 'buttons' &&\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n        ></Pagination>\r\n      }\r\n    </React.Fragment>\r\n  )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigOptionSource,\r\n  ICustomLabels,\r\n} from \"../../common/models/config.model\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./formRow.scss\";\r\nimport { stringify } from \"query-string\";\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IOption {\r\n  display: string;\r\n  value: string;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  field: IConfigInputField;\r\n  loadedFields: ILoadedFields[];\r\n  onChange: (\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) => void;\r\n  onRemove: (fieldName: string, value: any) => void;\r\n  showReset?: boolean;\r\n  direction?: \"row\" | \"column\";\r\n}\r\n\r\nexport const FormRow = withAppContext(\r\n  ({\r\n    context,\r\n    field,\r\n    loadedFields,\r\n    direction,\r\n    showReset,\r\n    onChange,\r\n    onRemove,\r\n  }: IProps) => {\r\n    const [optionSources, setOptionSources] = useState<any>({});\r\n    const [loadedOptionSources, setLoadedOptionSources] = useState<any>();\r\n    const { httpService, activePage, config } = context;\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n    const addArrayItemLabel = customLabels?.buttons?.addArrayItem || \"Add Item\";\r\n    const clearLabel = customLabels?.buttons?.clearInput || \"Clear\";\r\n\r\n    function insertPreloadedData(\r\n      fieldName: string,\r\n      optionSource: IConfigOptionSource\r\n    ) {\r\n      var optionsData = Array<string>(0).fill(\"\");\r\n\r\n      console.log(\"loaded\");\r\n      console.log(loadedFields);\r\n      loadedFields.map((e) => {\r\n        if (e.fieldName === optionSource.name) optionsData = e.values;\r\n      });\r\n\r\n      console.log(optionsData);\r\n\r\n      var optionDisplay = new Array<IOption>(optionsData.length);\r\n      optionsData.map((opt: string, i: number) => {\r\n        optionDisplay[i] = { display: opt, value: opt };\r\n      });\r\n\r\n      console.log(optionDisplay);\r\n      //const temp = { [fieldName]: optionDisplay };\r\n\r\n      //setLoadedOptionSources(temp);\r\n      return { fieldname: fieldName, options: optionDisplay };\r\n    }\r\n    async function loadOptionSourceFromRemote(\r\n      fieldName: string,\r\n      optionSource: IConfigOptionSource\r\n    ) {\r\n      try {\r\n        const {\r\n          url,\r\n          dataPath,\r\n          preLoad,\r\n          actualMethod,\r\n          requestHeaders,\r\n        } = optionSource;\r\n\r\n        if (!url && !preLoad) {\r\n          throw new Error(\r\n            `URL option source (for field \"${fieldName}\") is empty.`\r\n          );\r\n        }\r\n\r\n        const result = await httpService.fetch({\r\n          method: actualMethod || \"get\",\r\n          origUrl: url,\r\n          queryParams: [],\r\n          headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        });\r\n\r\n        const extractedData = dataHelpers.extractDataByDataPath(\r\n          result,\r\n          dataPath\r\n        );\r\n\r\n        if (!extractedData || !extractedData.length) {\r\n          throw new Error(\r\n            `Option source data is empty (for field \"${fieldName}\")`\r\n          );\r\n        }\r\n\r\n        // Map option source to fields\r\n        const optionSourceData = extractedData.map(\r\n          (option: any, idx: number) => {\r\n            const { valuePath, displayPath } = optionSource;\r\n\r\n            if (typeof option === \"string\") {\r\n              return option;\r\n            }\r\n\r\n            return {\r\n              display:\r\n                displayPath && option[displayPath]\r\n                  ? option[displayPath]\r\n                  : `Option ${idx + 1}`,\r\n              value:\r\n                valuePath && option[valuePath] ? option[valuePath] : `${idx}`,\r\n            };\r\n          }\r\n        );\r\n\r\n        console.log(optionSourceData);\r\n        setOptionSources({\r\n          ...optionSources,\r\n          [fieldName]: optionSourceData,\r\n        });\r\n      } catch (e) {\r\n        toast.error(e.message, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n      }\r\n    }\r\n\r\n    function addItemToFieldArray(e: any, originalField: IConfigInputField) {\r\n      e.preventDefault();\r\n\r\n      onChange(field.name, [...(originalField.value || []), \"\"]);\r\n    }\r\n\r\n    function removeItemToFieldArray(\r\n      originalField: IConfigInputField,\r\n      idx: number\r\n    ) {\r\n      const updatedArray = [...(originalField.value || [])];\r\n\r\n      const test = updatedArray.splice(idx, 1);\r\n\r\n      test.forEach((e) => {\r\n        onRemove(field.name, e);\r\n      });\r\n\r\n      onChange(field.name, updatedArray);\r\n    }\r\n\r\n    function renderArrayItems(originalField: IConfigInputField) {\r\n      const array: any[] = originalField.value || [];\r\n\r\n      return (\r\n        <div className=\"array-form\">\r\n          {array.map((item, itemIdx) => {\r\n            const inputField = renderFieldInput(\r\n              {\r\n                value: item,\r\n                name: `${originalField.name}.${itemIdx}`,\r\n              } as IConfigInputField,\r\n              (fieldName, value) => {\r\n                const updatedArray = (originalField.value || []).map(\r\n                  (localValue: any, idx: number) => {\r\n                    if (idx === itemIdx) {\r\n                      return value;\r\n                    }\r\n                    return localValue;\r\n                  }\r\n                );\r\n\r\n                onChange(originalField.name, updatedArray);\r\n              }\r\n            );\r\n\r\n            return (\r\n              <div className=\"array-form-item\" key={`array_form_${itemIdx}`}>\r\n                {inputField}\r\n                <i\r\n                  title={clearLabel}\r\n                  onClick={() => removeItemToFieldArray(originalField, itemIdx)}\r\n                  aria-label=\"Remove\"\r\n                  className=\"clear-input fa fa-times\"\r\n                ></i>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button\r\n            className=\"add-array-item\"\r\n            onClick={(e) => addItemToFieldArray(e, originalField)}\r\n            title={addArrayItemLabel}\r\n            disabled={originalField.disabled || originalField.readonly}\r\n          >\r\n            <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    function renderFieldInput(\r\n      field: IConfigInputField,\r\n      changeCallback: (\r\n        fieldName: string,\r\n        value: any,\r\n        submitAfterChange?: boolean\r\n      ) => void\r\n    ) {\r\n      const inputProps = (defaultPlaceholder: string = \"\") => {\r\n        return {\r\n          value: field.value,\r\n          placeholder: field.placeholder || defaultPlaceholder,\r\n          disabled: field.readonly || field.disabled,\r\n          required: field.required,\r\n          onChange: (e: any) => changeCallback(field.name, e.target.value),\r\n        };\r\n      };\r\n\r\n      switch (field.type) {\r\n        case \"boolean\":\r\n          return (\r\n            <input\r\n              type=\"checkbox\"\r\n              {...inputProps()}\r\n              checked={field.value}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.checked, true)\r\n              }\r\n            />\r\n          );\r\n        case \"select\": {\r\n          const { optionSource } = field;\r\n\r\n          if (optionSource && optionSource.preLoad) {\r\n            const loadedOption = insertPreloadedData(field.name, optionSource);\r\n            console.log(loadedOption);\r\n\r\n            return (\r\n              <select {...inputProps()}>\r\n                <option>{locale.select}</option>\r\n                {loadedOption.options.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  return (\r\n                    <option key={`${key}_${option.value}`} value={option.value}>\r\n                      {option.display || option.value}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            );\r\n          } else {\r\n            if (optionSource && !optionSources[field.name]) {\r\n              loadOptionSourceFromRemote(field.name, optionSource);\r\n              return (\r\n                <select {...inputProps()}>\r\n                  <option>-- Loading Options... --</option>\r\n                </select>\r\n              );\r\n            }\r\n\r\n            const sortBy = field.optionSource?.sortBy;\r\n            const finalOptions: { value: string; display: string }[] =\r\n              optionSources[field.name] || field.options || [];\r\n            const sortedOptions = orderBy(\r\n              finalOptions,\r\n              typeof sortBy === \"string\" ? [sortBy] : sortBy || []\r\n            );\r\n\r\n            console.log(\"final option\");\r\n            console.log(finalOptions);\r\n\r\n            console.log(\"sorted option\");\r\n            console.log(sortedOptions);\r\n\r\n            return (\r\n              <select {...inputProps()}>\r\n                <option>{locale.select}</option>\r\n                {sortedOptions.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  if (typeof option !== \"object\") {\r\n                    return (\r\n                      <option key={`${key}_${option}`} value={option}>\r\n                        {option}\r\n                      </option>\r\n                    );\r\n                  }\r\n                  return (\r\n                    <option key={`${key}_${option.value}`} value={option.value}>\r\n                      {option.display || option.value}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            );\r\n          }\r\n        }\r\n        case \"object\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.object || \"Enter JSON...\"\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"array\": {\r\n          const { arrayType, value } = field;\r\n          if (!value || !arrayType || arrayType === \"object\") {\r\n            return (\r\n              <textarea\r\n                {...inputProps(\r\n                  customLabels?.placeholders?.array || \"Enter JSON array...\"\r\n                )}\r\n              ></textarea>\r\n            );\r\n          }\r\n          return renderArrayItems(field);\r\n        }\r\n        case \"long-text\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale.enter_text\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"number\":\r\n        case \"integer\":\r\n          return (\r\n            <input\r\n              type=\"number\"\r\n              {...inputProps(customLabels?.placeholders?.number || \"0\")}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.valueAsNumber)\r\n              }\r\n            />\r\n          );\r\n        case \"color\":\r\n          return (\r\n            <input\r\n              type=\"color\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.color || locale.enter_color\r\n              )}\r\n            />\r\n          );\r\n        case \"email\":\r\n          return (\r\n            <input\r\n              type=\"email\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.email || locale.enter_email\r\n              )}\r\n            />\r\n          );\r\n        case \"password\":\r\n          return (\r\n            <input\r\n              type=\"password\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.password || locale.enter_password\r\n              )}\r\n            />\r\n          );\r\n        case \"hidden\":\r\n          return <input type=\"hidden\" value={field.value} />;\r\n        case \"file\":\r\n          return (\r\n            <input\r\n              type=\"file\"\r\n              accept={field.accept || \"*\"}\r\n              placeholder={\r\n                field.placeholder ||\r\n                customLabels?.placeholders?.file ||\r\n                \"Select file...\"\r\n              }\r\n              name={field.name || \"file\"}\r\n              disabled={field.readonly}\r\n              required={field.required}\r\n            />\r\n          );\r\n        case \"note\":\r\n          return <p className=\"note\">{field.value}</p>;\r\n        case \"date\":\r\n          return (\r\n            <input\r\n              type=\"date\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.date || locale.enter_date\r\n              )}\r\n            />\r\n          );\r\n        case \"text\":\r\n        default:\r\n          return (\r\n            <input\r\n              type=\"text\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale.enter_text\r\n              )}\r\n            />\r\n          );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={`form-row ${direction || \"row\"}`}>\r\n        {field.type !== \"hidden\" && (\r\n          <label>\r\n            {field.label || field.originalName}\r\n            {field.required ? \" *\" : \"\"}\r\n          </label>\r\n        )}\r\n        {renderFieldInput(field, onChange)}\r\n        {showReset &&\r\n          !field.readonly &&\r\n          !field.disabled &&\r\n          field.value &&\r\n          field.value.length > 0 && (\r\n            <i\r\n              title={clearLabel}\r\n              onClick={() => onChange(field.name, \"\", true)}\r\n              aria-label=\"Clear\"\r\n              className=\"clear-input fa fa-times\"\r\n            ></i>\r\n          )}\r\n        <ToastContainer />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigPagination,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./queryParams.scss\";\r\n\r\ninterface IProps {\r\n  initialParams: IConfigInputField[];\r\n  paginationConfig?: IConfigPagination;\r\n  submitCallback: (queryParams: IConfigInputField[], reset?: boolean) => void;\r\n}\r\n\r\nexport const QueryParams = ({\r\n  initialParams,\r\n  paginationConfig,\r\n  submitCallback,\r\n}: IProps) => {\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(\r\n    initialParams\r\n  );\r\n\r\n  function submit(e?: any) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      submitCallback(queryParams, true);\r\n    } else {\r\n      submitCallback(queryParams);\r\n    }\r\n  }\r\n\r\n  function formChanged(\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) {\r\n    const updatedQueryParams: IConfigInputField[] = [...queryParams].map(\r\n      (field) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n        return field;\r\n      }\r\n    );\r\n    setQueryParams(updatedQueryParams);\r\n    if (submitAfterChange) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      const filteredParams = initialParams.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n      setQueryParams(filteredParams);\r\n    } else {\r\n      setQueryParams(initialParams);\r\n    }\r\n  }, [paginationConfig, initialParams]);\r\n  if (!queryParams.length) {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"query-params-form\">\r\n      <h5>{locale.search}</h5>\r\n      <form onSubmit={submit}>\r\n        {queryParams.map((queryParam, idx) => {\r\n          if (queryParam.name == \"page\") return \"\";\r\n          //if (queryParam.hidden) return \"\";\r\n          return (\r\n            <FormRow\r\n              key={`query_param_${idx}`}\r\n              field={queryParam}\r\n              onChange={formChanged}\r\n              showReset={!queryParam.type || queryParam.type === \"text\"}\r\n            />\r\n          );\r\n        })}\r\n        <Button type=\"submit\" onClick={submit}>\r\n          {locale.submit}\r\n        </Button>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n","import React, { Component, RefObject, ReactChild } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './popup.scss';\r\nimport { ICustomLabels } from '../../common/models/config.model';\r\n\r\ninterface IPopupProps {\r\n  className?: string\r\n  style?: any\r\n  show: boolean\r\n  closeCallback: any\r\n  children: ReactChild\r\n  refCallback?: string | ((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined\r\n  customLabels?: ICustomLabels\r\n}\r\n\r\nlet portalRoot: HTMLDivElement = document.getElementById('popup-portal') as HTMLDivElement;\r\nif (!portalRoot) {\r\n  portalRoot = document.createElement('div');\r\n  portalRoot.setAttribute('id', 'popup-portal');\r\n  document.body.append(portalRoot);\r\n}\r\n\r\nclass PortalPopup extends Component {\r\n  private el: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.el = document.createElement('div');\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    portalRoot.appendChild(this.el);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    portalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class Popup extends Component<IPopupProps> {\r\n  render() {\r\n    const style: any = Object.assign({}, { display: this.props.show ? 'block' : 'none' }, this.props.style || {});\r\n    const closeLabel = this.props.customLabels?.buttons?.closeForm || 'Close';\r\n\r\n    return (\r\n      <PortalPopup>\r\n        {\r\n          this.props.show ?\r\n            <div className={`popup ${this.props.className || ''}`} style={style}>\r\n              <div className=\"overlay\" onClick={(e: any) => this.props.closeCallback(e)}></div>\r\n              <div className=\"popup-content\" ref={this.props.refCallback}>\r\n                {this.props.children}\r\n                <button title={closeLabel} className=\"close-popup\" onClick={(e: any) => this.props.closeCallback(e)}>\r\n                  <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n                </button>\r\n              </div>\r\n            </div> :\r\n            null\r\n        }\r\n      </PortalPopup>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  _handleKeyDown = (e: KeyboardEvent) => {\r\n    const { show, closeCallback } = this.props;\r\n\r\n    if (show && e.keyCode === 27) {\r\n      closeCallback(e);\r\n    }\r\n  }\r\n};","import { IConfigInputField } from '../common/models/config.model';\r\n\r\nclass FileHelpers {\r\n\r\n  public isMultipartForm(fields: IConfigInputField[]): boolean {\r\n    for (const fieldIndex in fields) {\r\n      let field = fields[fieldIndex];\r\n\r\n      if (field.type === 'file') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  \r\n}\r\n\r\nexport const fileHelpers = new FileHelpers();","import React, { useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport { Popup } from \"../popup/popup.comp\";\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels,\r\n  IQueryParam,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./formPopup.scss\";\r\n\r\nconst unflatten = require(\"flat\").unflatten;\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  title: string;\r\n  fields: IConfigInputField[];\r\n  loadedFields: ILoadedFields[];\r\n  type: string;\r\n  rawData?: any;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  methodConfig: IConfigPostMethod | IConfigPutMethod;\r\n  closeCallback: (reloadData: boolean) => void;\r\n  submitCallback: (\r\n    body: any,\r\n    containFiles: boolean,\r\n    queryParams: IQueryParam[]\r\n  ) => void;\r\n}\r\n\r\ninterface IDeleteFields {\r\n  fieldName: string;\r\n  value: string;\r\n}\r\n\r\nexport const FormPopup = withAppContext(\r\n  ({\r\n    context,\r\n    title,\r\n    fields,\r\n    loadedFields,\r\n    rawData,\r\n    type,\r\n    getSingleConfig,\r\n    methodConfig,\r\n    submitCallback,\r\n    closeCallback,\r\n  }: IProps) => {\r\n    const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n    const { httpService, activePage, config } = context;\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [formFields, setFormFields] = useState<IConfigInputField[]>([]);\r\n    const [deleteValues, setDeleteValues] = useState<IDeleteFields[]>([]);\r\n    const [finalRawData, setFinalRawData] = useState<any>(null);\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n\r\n    async function initFormFields() {\r\n      let finalRawData: any = rawData || {};\r\n\r\n      if (getSingleConfig && getSingleConfig.url) {\r\n        try {\r\n          const {\r\n            url,\r\n            requestHeaders,\r\n            actualMethod,\r\n            dataPath,\r\n            queryParams,\r\n            responseType,\r\n            dataTransform,\r\n          } = getSingleConfig;\r\n          const result = await httpService.fetch({\r\n            method: actualMethod || \"get\",\r\n            origUrl: url,\r\n            queryParams,\r\n            headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n            rawData,\r\n            responseType,\r\n          });\r\n\r\n          let extractedData = dataHelpers.extractDataByDataPath(\r\n            result,\r\n            dataPath\r\n          );\r\n\r\n          if (typeof dataTransform === \"function\") {\r\n            extractedData = await dataTransform(extractedData);\r\n          }\r\n\r\n          if (\r\n            extractedData &&\r\n            (typeof extractedData === \"object\" ||\r\n              typeof extractedData === \"string\")\r\n          ) {\r\n            finalRawData = extractedData;\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Could not load single item's data.\", e);\r\n          toast.error(\"Could not load single item's data.\", {\r\n            position: toast.POSITION.TOP_CENTER,\r\n          });\r\n        }\r\n      }\r\n\r\n      setFinalRawData(finalRawData); // Store the raw data for later.\r\n\r\n      setFormFields(\r\n        fieldsCopy.map((field) => {\r\n          let key = field.name;\r\n\r\n          field.originalName = field.name;\r\n\r\n          let dataPathSplit: string[] = [];\r\n\r\n          if (field.dataPath) {\r\n            dataPathSplit = field.dataPath.split(\".\");\r\n            key = `${field.dataPath}.${field.name}`;\r\n          }\r\n\r\n          const lookup = () => {\r\n            let objToLookIn = finalRawData;\r\n            for (const pathElem of dataPathSplit) {\r\n              if (\r\n                objToLookIn[pathElem] !== undefined &&\r\n                objToLookIn[pathElem] !== null\r\n              ) {\r\n                objToLookIn = objToLookIn[pathElem];\r\n              } else {\r\n                return undefined;\r\n              }\r\n            }\r\n            return objToLookIn[field.name];\r\n          };\r\n\r\n          const lookupValue = lookup();\r\n\r\n          // Changing field name to include datapath\r\n          // This will use us later for unflatten the final object\r\n          field.name = key;\r\n\r\n          if (dataHelpers.checkIfFieldIsObject(field)) {\r\n            if (lookupValue || field.value) {\r\n              field.value =\r\n                JSON.stringify(lookupValue || field.value, null, \"  \") || \"\";\r\n            }\r\n            return field;\r\n          }\r\n\r\n          if (field.type === \"array\") {\r\n            field.value = lookupValue || field.value || [];\r\n            return field;\r\n          }\r\n\r\n          if (typeof lookupValue !== \"undefined\") {\r\n            field.value = lookupValue;\r\n          } else {\r\n            // important in order to prevent controlled / uncontrolled components error\r\n            field.value = typeof field.value === \"undefined\" ? \"\" : field.value;\r\n          }\r\n\r\n          if (\r\n            (field.type === \"long-text\" || field.type === \"text\") &&\r\n            typeof finalRawData === \"string\"\r\n          ) {\r\n            field.value = finalRawData;\r\n          }\r\n\r\n          return field;\r\n        })\r\n      );\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    async function submitForm(e: any) {\r\n      e.preventDefault();\r\n\r\n      const finalObject: any = (methodConfig as IConfigPutMethod)\r\n        .includeOriginalFields\r\n        ? Object.assign({}, finalRawData)\r\n        : {};\r\n      const formData = new FormData();\r\n      const containFiles: boolean = fileHelpers.isMultipartForm(formFields);\r\n      let validationError = null;\r\n\r\n      var queryParams: IQueryParam[] = [];\r\n\r\n      formFields.forEach((field) => {\r\n        if (field.type === \"file\") {\r\n          const fileInput: any = document.querySelector(\r\n            `input[name=\"${field.name || \"file\"}\"]`\r\n          ) as HTMLInputElement;\r\n\r\n          if (fileInput.files.length > 0) {\r\n            const firstFile = fileInput.files[0];\r\n            formData.append(field.name || \"file\", firstFile, firstFile.name);\r\n          }\r\n          return;\r\n        }\r\n\r\n        finalObject[field.name] = field.value;\r\n\r\n        if (containFiles && !field.useInUrl) {\r\n          formData.append(field.name, field.value);\r\n        }\r\n\r\n        // eslint-disable-next-line eqeqeq\r\n        if (\r\n          field.required &&\r\n          field.type !== \"boolean\" &&\r\n          !field.value &&\r\n          field.value != 0\r\n        ) {\r\n          validationError = \"Please fill up all required fields.\";\r\n        }\r\n\r\n        if (dataHelpers.checkIfFieldIsObject(field) && field.value) {\r\n          try {\r\n            finalObject[field.name] = JSON.parse(field.value);\r\n          } catch (e) {\r\n            validationError = `Invalid JSON for field \"${field.name}\".`;\r\n          }\r\n        }\r\n\r\n        if (field.disabled === true) {\r\n          delete finalObject[field.name];\r\n          console.log(finalObject);\r\n        }\r\n\r\n        if (field.type === \"boolean\") {\r\n          finalObject[field.name] = field.value || false;\r\n        }\r\n\r\n        if (\r\n          type !== \"add\" &&\r\n          field.type === \"array\" &&\r\n          field.arrayType === \"text\"\r\n        ) {\r\n          var temp = \"{\";\r\n\r\n          var rmVal = deleteValues.filter((e) => e.fieldName === field.name);\r\n          rmVal = rmVal.filter((e) => e.value !== \"\");\r\n\r\n          console.log(rmVal);\r\n\r\n          if (field.value.length !== 0) {\r\n            temp += ` \"add\": [\"` + field.value.join('\" , \"') + `\"]`;\r\n          }\r\n          if (field.value.length !== 0 && rmVal.length !== 0) {\r\n            temp += \",\";\r\n          }\r\n          if (rmVal.length !== 0) {\r\n            temp +=\r\n              `\"remove\": [\"` + rmVal.map((e) => e.value).join('\" , \"') + `\"]`;\r\n          }\r\n          temp += \"}\";\r\n\r\n          finalObject[field.name] = JSON.parse(temp);\r\n        }\r\n\r\n        if (field.type === \"encode\") {\r\n          finalObject[field.name] = encodeURIComponent(field.value);\r\n        }\r\n\r\n        if (field.useInUrl) {\r\n          queryParams.push({ name: field.name, value: field.value });\r\n        }\r\n      });\r\n\r\n      if (validationError) {\r\n        toast.error(validationError, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n\r\n      try {\r\n        const body = containFiles ? formData : unflatten(finalObject);\r\n\r\n        await submitCallback(body, containFiles, queryParams);\r\n\r\n        toast.success(\"Great Success!\", {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n\r\n        closeCallback(true);\r\n      } catch (e) {\r\n        toast.error(e.message, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n      }\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    function formChanged(fieldName: string, value: any) {\r\n      let updatedFormFields: IConfigInputField[] = JSON.parse(\r\n        JSON.stringify(formFields)\r\n      );\r\n\r\n      updatedFormFields = updatedFormFields.map((field: IConfigInputField) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n\r\n        return field;\r\n      });\r\n\r\n      setFormFields(updatedFormFields);\r\n    }\r\n\r\n    function saveRemovedValues(fieldName: string, value: string) {\r\n      var delVal = [...deleteValues];\r\n      delVal.push({ fieldName: fieldName, value: value });\r\n\r\n      setDeleteValues(delVal);\r\n    }\r\n    useEffect(() => {\r\n      initFormFields();\r\n\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n      <Popup\r\n        show={true}\r\n        className=\"form-popup\"\r\n        closeCallback={() => closeCallback(false)}\r\n        customLabels={customLabels}\r\n      >\r\n        <React.Fragment>\r\n          <h2>{title}</h2>\r\n          <section>\r\n            {loading ? (\r\n              <Loader />\r\n            ) : (\r\n              <form onSubmit={submitForm}>\r\n                {formFields.map((field, idx) => {\r\n                  return (\r\n                    <div>\r\n                      <FormRow\r\n                        key={`field_${idx}`}\r\n                        field={field}\r\n                        loadedFields={loadedFields}\r\n                        onChange={formChanged}\r\n                        onRemove={saveRemovedValues}\r\n                        showReset={!field.type || field.type === \"text\"}\r\n                      />\r\n                      <br />\r\n                      <hr />\r\n                    </div>\r\n                  );\r\n                })}\r\n                <div className=\"buttons-wrapper center\">\r\n                  <Button type=\"submit\" onClick={submitForm} color=\"green\">\r\n                    {locale.submit}\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            )}\r\n          </section>\r\n          <ToastContainer />\r\n        </React.Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n);\r\n","import React from 'react';\r\n\r\nimport './filterField.scss';\r\n\r\ninterface IProps {\r\n  onChange: (filter: string) => void\r\n}\r\n\r\nexport const FilterField = ({ onChange }: IProps) => {\r\n  return (\r\n    <section className=\"filter-wrapper\">\r\n      <h5>Filter:</h5>\r\n      <div className=\"form-row\">\r\n        <input type=\"text\" placeholder=\"Search...\" onChange={(e) => onChange(e.target.value.toLowerCase())} />\r\n      </div>\r\n    </section>\r\n  );\r\n};","import { IPaginationState, IQueryPaginationState, IBodyPaginationState } from \"./states.model\";\r\n\r\nexport const isQueryPaginationState = (obj: IPaginationState): obj is IQueryPaginationState => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPaginationState = (obj: IPaginationState): obj is IBodyPaginationState => {\r\n    return obj.source === 'body';\r\n}","import { IConfigPagination, IConfigBodyPagination, IConfigQueryPagination } from \"./config.model\";\r\n\r\nexport const isQueryPagination = (obj: IConfigPagination): obj is IConfigQueryPagination => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPagination = (obj: IConfigPagination): obj is IConfigBodyPagination => {\r\n    return obj.source === 'body';\r\n}\r\n","import React, { Component, useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  LineMarkSeries,\r\n  Hint,\r\n} from \"react-vis\";\r\nimport \"react-vis/dist/style.css\";\r\n\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./graphHolder.scss\";\r\n//import \"../node_modules/react-vis/dist/style.css\";\r\n\r\ninterface IGraphData {\r\n  nameStruct: string;\r\n  unitMeasure: string;\r\n  dataStruct: any;\r\n}\r\n\r\ninterface IHintData {\r\n  x: string;\r\n  y: string;\r\n}\r\n\r\ninterface IProps {\r\n  dataMat: IGraphData[];\r\n  prev: boolean;\r\n  prevCallback: () => void;\r\n  next: boolean;\r\n  nextCallback: () => void;\r\n  zoomIn: boolean;\r\n  zoomInCallback: () => void;\r\n  zoomOut: boolean;\r\n  zoomOutCallback: () => void;\r\n}\r\n\r\nexport const GraphHolder = withAppContext(\r\n  ({\r\n    dataMat,\r\n    prev,\r\n    prevCallback,\r\n    next,\r\n    nextCallback,\r\n    zoomIn,\r\n    zoomInCallback,\r\n    zoomOut,\r\n    zoomOutCallback,\r\n  }: IProps) => {\r\n    useEffect(() => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      setHintData(Array(dataMat.length).fill({ date: \"\", y: \"\" }));\r\n      setHoverData(Array(dataMat.length).fill(false));\r\n    }, []);\r\n\r\n    const [hoverData, setHoverData] = useState<boolean[]>(Array(1).fill(false));\r\n    const [hintData, setHintData] = useState<IHintData[]>(Array(0));\r\n\r\n    function setHoverDataWithIndex(index: number, value: boolean) {\r\n      // 1. Make a shallow copy of the items\r\n      let items = [...hoverData];\r\n      // 2. Make a shallow copy of the item you want to mutate\r\n      let item = items[index];\r\n      // 3. Replace the property you're intested in\r\n      item = value;\r\n      // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\r\n      items[index] = item;\r\n      // 5. Set the state to our new copy\r\n      setHoverData(items);\r\n    }\r\n\r\n    function setHintDataWithIndex(index: number, value: IHintData) {\r\n      // 1. Make a shallow copy of the items\r\n      let items = [...hintData];\r\n      // 2. Make a shallow copy of the item you want to mutate\r\n      let item = items[index];\r\n      // 3. Replace the property you're intested in\r\n      item = value;\r\n      // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\r\n      items[index] = item;\r\n      // 5. Set the state to our new copy\r\n      setHintData(items);\r\n    }\r\n\r\n    return (\r\n      <div className=\"graphHolder\">\r\n        <br />\r\n        <hr />\r\n        <div>\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale.previous_page}\r\n            onClick={() => prevCallback()}\r\n            disabled={!prev}\r\n          >\r\n            <i className=\"fa fa-backward\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale.next_page}\r\n            onClick={() => nextCallback()}\r\n            disabled={!next}\r\n          >\r\n            <i className=\"fa fa-forward\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale.zoomIn}\r\n            onClick={() => zoomInCallback()}\r\n            disabled={!zoomIn}\r\n          >\r\n            <i className=\"fa fa-search-plus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale.zoomOut}\r\n            onClick={() => zoomOutCallback()}\r\n            disabled={!zoomOut}\r\n          >\r\n            <i className=\"fa fa-search-minus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n        <br />\r\n        {dataMat.map((data, index) => {\r\n          return (\r\n            <div>\r\n              <h2>{data.nameStruct}</h2>\r\n              <br />\r\n              <XYPlot\r\n                width={1600}\r\n                height={600}\r\n                xType=\"ordinal\"\r\n                onMouseLeave={() => setHoverDataWithIndex(index, false)}\r\n              >\r\n                <VerticalGridLines />\r\n                <HorizontalGridLines />\r\n                <XAxis\r\n                  title=\"t\"\r\n                  tickTotal={7}\r\n                  //tickLabelAngle={-90}\r\n                  tickFormat={function tickFormat(d) {\r\n                    const date = new Date(+d);\r\n                    return date.toString().substr(4, 6);\r\n                  }}\r\n                />\r\n                <YAxis title={data.unitMeasure} />\r\n                <LineMarkSeries\r\n                  data={data.dataStruct}\r\n                  onValueMouseOver={(d) => {\r\n                    setHoverDataWithIndex(index, true);\r\n                    setHintDataWithIndex(index, {\r\n                      x: d.x.toString(),\r\n                      y: d.y.toString(),\r\n                    });\r\n                    console.log(d);\r\n                  }} //\r\n                />\r\n                {hoverData[index] && (\r\n                  <Hint value={hintData[index]}>\r\n                    <div style={{ background: \"grey\" }}>\r\n                      {\"Start time: \" + new Date(+hintData[index].x).toString()}\r\n                      <br />\r\n                      {locale.value + \": \" + hintData[index].y}\r\n                    </div>\r\n                  </Hint>\r\n                )}\r\n              </XYPlot>\r\n              <br />\r\n              <hr />\r\n              <br />\r\n            </div>\r\n          );\r\n        })}\r\n        <ToastContainer />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n//style={{ fill: \"none\" }}\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Popup } from \"../popup/popup.comp\";\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels,\r\n  IQueryParam,\r\n  IConfigGetAllMethod,\r\n  IConfigGraphMethod,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale.js\";\r\nimport { GraphHolder } from \"../graphHolder/graphHolder\";\r\n\r\nimport \"./graphPopup.scss\";\r\nimport { QueryParams } from \"../queryParams/queryParams.comp\";\r\nimport \"../queryParams/queryParams.scss\";\r\nimport { IFetchParams } from \"../../services/http.service\";\r\nimport { createEmitAndSemanticDiagnosticsBuilderProgram } from \"typescript\";\r\n\r\n//const unflatten = require(\"flat\").unflatten;\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  title: string;\r\n  fields: IConfigInputField[];\r\n\r\n  graphConfig: IConfigGraphMethod;\r\n  closeCallback: (reloadData: boolean) => void;\r\n}\r\n\r\ninterface IGraphData {\r\n  nameStruct: string;\r\n  unitMeasure: string;\r\n  dataStruct: any;\r\n}\r\n\r\nexport const GraphPopup = withAppContext(\r\n  ({ context, title, fields, graphConfig, closeCallback }: IProps) => {\r\n    const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n    const { httpService, activePage, config } = context;\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [doneQuery, setDoneQuery] = useState<boolean>(true);\r\n    const [showGraph, setShowGraph] = useState<boolean>(false);\r\n    const [titleState, setTitleState] = useState<String>(title);\r\n    const [formFields, setFormFields] = useState<IConfigInputField[]>(\r\n      fieldsCopy\r\n    );\r\n    const [graphData, setGraphData] = useState<IGraphData[] | null>();\r\n    const [prevGraphData, setPrevGraphData] = useState<IGraphData[] | null>();\r\n    const [nextGraphData, setNextGraphData] = useState<IGraphData[] | null>();\r\n\r\n    const [next, setNext] = useState<boolean>();\r\n    const [prev, setPrev] = useState<boolean>();\r\n    const [zoomIn, setZoomIn] = useState<boolean>();\r\n    const [zoomOut, setZoomOut] = useState<boolean>(true);\r\n    const [pageNum, setPageNum] = useState<number>(1);\r\n    const [totalPages, setTotalPages] = useState<number>(0);\r\n    const [error, setError] = useState<string>();\r\n\r\n    const [fetchedData, setFetchedData] = useState<null | any>(null);\r\n    const [fetchedFeature, setFetchedFeature] = useState<null | any>(null);\r\n\r\n    const [totalDocs, setTotalDocs] = useState<number>(0);\r\n    const [limit, setLimit] = useState<number>(0);\r\n\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n\r\n    function graphChanged(\r\n      fieldName: string,\r\n      value: any,\r\n      submitAfterChange?: boolean\r\n    ) {\r\n      const updatedQueryParams: IConfigInputField[] = [...formFields].map(\r\n        (formFields) => {\r\n          if (formFields.name === fieldName) {\r\n            formFields.value = value;\r\n          }\r\n          return formFields;\r\n        }\r\n      );\r\n      setFormFields(updatedQueryParams);\r\n      if (submitAfterChange) {\r\n        submitGraph();\r\n      }\r\n    }\r\n\r\n    async function fetchFeatureData(fetchFeatureData: boolean = false) {\r\n      //get the data for the selected feature\r\n      const resultsData = await httpService.fetch({\r\n        method: \"get\",\r\n        origUrl: graphConfig.url,\r\n        queryParams: formFields,\r\n        exactMatch: true,\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n\r\n      var fF = fetchedFeature;\r\n      if (fetchFeatureData === true) {\r\n        let queryFeature = \"\";\r\n\r\n        //get the name of the selected feature\r\n        formFields.map((f) =>\r\n          f.name === \"feature\" ? (queryFeature = f.value) : {}\r\n        );\r\n\r\n        //fetch the feature\r\n        const resultsFeature = await httpService.fetch({\r\n          method: \"get\",\r\n          origUrl: \"/features/\",\r\n          queryParams: formFields.filter((obj) => {\r\n            return obj.name === \"feature\" && (obj.name = \"_id\");\r\n          }),\r\n          exactMatch: true,\r\n          headers: { \"content-type\": \"application/json\" },\r\n        });\r\n\r\n        formFields.filter((obj) => {\r\n          return obj.name === \"_id\" && (obj.name = \"feature\");\r\n        });\r\n\r\n        //extract the data for the feature\r\n        fF = dataHelpers.extractDataByDataPath(resultsFeature, \"docs\");\r\n      }\r\n\r\n      const pG = resultsData[\"page\"];\r\n\r\n      const tP = resultsData[\"totalPages\"];\r\n\r\n      const tD = resultsData[\"totalDocs\"];\r\n\r\n      const limit = resultsData[\"limit\"];\r\n\r\n      //extract the data for the measurements\r\n      const fD = dataHelpers.extractDataByDataPath(\r\n        resultsData,\r\n        graphConfig.dataPath\r\n      );\r\n\r\n      //return data\r\n      return {\r\n        fetchedData: fD,\r\n        fetchedFeature: fF,\r\n        pageNum: pG,\r\n        totalPages: tP,\r\n        totalDocs: tD,\r\n        limit: limit,\r\n      };\r\n    }\r\n\r\n    function buildData(fetchedData: any, fetchedFeature: any) {\r\n      var goodFeatures = new Array();\r\n      var dataFeatName = new Array<string>();\r\n      var dataFeatUnit = new Array<string>();\r\n\r\n      fetchedFeature.map((ft: any) =>\r\n        ft.items.map((comp: any, index: number) => {\r\n          if (comp.dimension === 0 && comp.type === \"number\") {\r\n            goodFeatures.push(index);\r\n            dataFeatName.push(comp.name);\r\n            dataFeatUnit.push(comp.unit);\r\n          } else return null;\r\n        })\r\n      );\r\n\r\n      if (goodFeatures.length === 0) {\r\n        setLoading(false);\r\n        return null;\r\n      }\r\n\r\n      var dataStruct = new Array(goodFeatures.length);\r\n\r\n      for (var i = 0; i < dataStruct.length; i++) {\r\n        dataStruct[i] = new Array();\r\n      }\r\n\r\n      fetchedData.map((data: any) =>\r\n        data[\"samples\"].map((sample: any) =>\r\n          sample[\"values\"].map((feature: any, indexFeat: number) => {\r\n            if (goodFeatures.includes(indexFeat))\r\n              dataStruct[goodFeatures.indexOf(indexFeat)].push({\r\n                x: Date.parse(data[\"startDate\"]),\r\n                y: feature,\r\n              });\r\n          })\r\n        )\r\n      );\r\n\r\n      var finalData = Array<IGraphData>();\r\n      for (i = 0; i < dataFeatName.length; i++) {\r\n        finalData[i] = {\r\n          nameStruct: dataFeatName[i],\r\n          dataStruct: dataStruct[i].reverse(),\r\n          unitMeasure: dataFeatUnit[i],\r\n        };\r\n      }\r\n\r\n      return finalData;\r\n    }\r\n\r\n    async function buildPrev(\r\n      formFields: IConfigInputField[],\r\n      fetchedFeature: any\r\n    ) {\r\n      var tempField = formFields;\r\n      tempField.filter((obj) => {\r\n        return (\r\n          obj.name === \"page\" && (obj.value = 1 + parseInt(obj.value) + \"\")\r\n        );\r\n      });\r\n\r\n      const resultsData = await httpService.fetch({\r\n        method: \"get\",\r\n        origUrl: graphConfig.url,\r\n        queryParams: tempField,\r\n        exactMatch: true,\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n      const prData = dataHelpers.extractDataByDataPath(\r\n        resultsData,\r\n        graphConfig.dataPath\r\n      );\r\n\r\n      tempField.filter((obj) => {\r\n        return (\r\n          obj.name === \"page\" && (obj.value = parseInt(obj.value) - 1 + \"\")\r\n        );\r\n      });\r\n\r\n      const pPage = buildData(prData, fetchedFeature);\r\n      return pPage;\r\n    }\r\n    async function buildNext(\r\n      formFields: IConfigInputField[],\r\n      fetchedFeature: any\r\n    ) {\r\n      var tempField = formFields;\r\n      tempField.filter((obj) => {\r\n        return (\r\n          obj.name === \"page\" && (obj.value = parseInt(obj.value) - 1 + \"\")\r\n        );\r\n      });\r\n\r\n      const resultsData = await httpService.fetch({\r\n        method: \"get\",\r\n        origUrl: graphConfig.url,\r\n        queryParams: tempField,\r\n        exactMatch: true,\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n      const nxData = dataHelpers.extractDataByDataPath(\r\n        resultsData,\r\n        graphConfig.dataPath\r\n      );\r\n\r\n      tempField.filter((obj) => {\r\n        return (\r\n          obj.name === \"page\" && (obj.value = parseInt(obj.value) + 1 + \"\")\r\n        );\r\n      });\r\n\r\n      const nPage = buildData(nxData, fetchedFeature);\r\n      return nPage;\r\n    }\r\n    async function submitGraph() {\r\n      setLoading(true);\r\n      setDoneQuery(true);\r\n\r\n      console.log(\"Entered submitGraph\");\r\n\r\n      const {\r\n        fetchedData,\r\n        fetchedFeature,\r\n        pageNum,\r\n        totalPages,\r\n        totalDocs,\r\n        limit,\r\n      } = await fetchFeatureData(true);\r\n\r\n      setFetchedData(fetchedData);\r\n      setFetchedFeature(fetchedFeature);\r\n      setPageNum(pageNum);\r\n      setTotalPages(totalPages);\r\n      setTotalDocs(totalDocs);\r\n      setLimit(limit);\r\n\r\n      const finalData = buildData(fetchedData, fetchedFeature);\r\n\r\n      if (finalData === null) {\r\n        setError(locale.wrong_feature_error);\r\n        return;\r\n      }\r\n\r\n      if (finalData[0].dataStruct.length === 0) {\r\n        setError(locale.no_data_error);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setGraphData(finalData);\r\n\r\n      const next = pageNum > 1;\r\n      const prev = pageNum < totalPages;\r\n\r\n      const zoomIn = limit > 3;\r\n      const zoomOut = limit < totalDocs;\r\n\r\n      setNext(next);\r\n      setPrev(prev);\r\n\r\n      setZoomIn(zoomIn);\r\n      setZoomOut(zoomOut);\r\n\r\n      setShowGraph(true);\r\n\r\n      setTitleState(locale.graph + \" \" + fetchedFeature[0]._id);\r\n\r\n      setLoading(false);\r\n\r\n      var pPage = null;\r\n      var nPage = null;\r\n      if (prev === true) {\r\n        pPage = await buildPrev(formFields, fetchedFeature);\r\n      }\r\n      if (next === true) {\r\n        nPage = await buildNext(formFields, fetchedFeature);\r\n      }\r\n      setPrevGraphData(pPage);\r\n      setNextGraphData(nPage);\r\n    }\r\n\r\n    async function buildMain() {\r\n      const {\r\n        fetchedData,\r\n        pageNum,\r\n        totalPages,\r\n        totalDocs,\r\n        limit,\r\n      } = await fetchFeatureData();\r\n\r\n      console.log(\"Entered BuildMain\");\r\n\r\n      setLoading(true);\r\n\r\n      setPageNum(pageNum);\r\n      setTotalPages(totalPages);\r\n\r\n      const finalData = buildData(fetchedData, fetchedFeature);\r\n\r\n      if (finalData === null) {\r\n        setError(locale.wrong_feature_error);\r\n        return;\r\n      }\r\n\r\n      if (finalData[0].dataStruct.length === 0) {\r\n        setError(locale.no_data_error);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setGraphData(finalData);\r\n\r\n      const next = pageNum > 1;\r\n      const prev = pageNum < totalPages;\r\n\r\n      const zoomIn = limit > 3;\r\n      const zoomOut = limit < totalDocs;\r\n\r\n      setNext(next);\r\n      setPrev(prev);\r\n\r\n      setZoomIn(zoomIn);\r\n      setZoomOut(zoomOut);\r\n\r\n      setTotalDocs(totalDocs);\r\n      setLimit(limit);\r\n\r\n      setLoading(false);\r\n\r\n      var pPage = null;\r\n      var nPage = null;\r\n      if (prev === true) {\r\n        pPage = await buildPrev(formFields, fetchedFeature);\r\n      }\r\n      if (next === true) {\r\n        nPage = await buildNext(formFields, fetchedFeature);\r\n      }\r\n      setPrevGraphData(pPage);\r\n      setNextGraphData(nPage);\r\n    }\r\n\r\n    async function prevShifting() {\r\n      setLoading(true);\r\n\r\n      console.log(\"Entered PrevShifting\");\r\n\r\n      setNextGraphData(graphData);\r\n      setGraphData(prevGraphData);\r\n\r\n      setLoading(false);\r\n\r\n      setPrev(pageNum + 1 < totalPages);\r\n      setNext(pageNum + 1 > 1);\r\n      setPageNum(pageNum + 1);\r\n      const prPage = await buildPrev(formFields, fetchedFeature);\r\n\r\n      setPrevGraphData(prPage);\r\n    }\r\n\r\n    async function nextShifting() {\r\n      setLoading(true);\r\n      console.log(\"Entered NextShifting\");\r\n\r\n      setPrevGraphData(graphData);\r\n      setGraphData(nextGraphData);\r\n      setPrev(pageNum - 1 < totalPages);\r\n      setNext(pageNum - 1 > 1);\r\n      setPageNum(pageNum - 1);\r\n      const nxPage = await buildNext(formFields, fetchedFeature);\r\n\r\n      setNextGraphData(nxPage);\r\n    }\r\n\r\n    async function increaseSamples() {\r\n      setLoading(true);\r\n      console.log(\"Entered Increase Sample\");\r\n\r\n      var tempField = formFields;\r\n\r\n      tempField.filter((obj) => {\r\n        return obj.name === \"limit\" && (obj.value = 2 + limit + \"\");\r\n      });\r\n\r\n      setFormFields(tempField);\r\n      buildMain();\r\n      setLoading(false);\r\n    }\r\n\r\n    async function decreaseSamples() {\r\n      setLoading(true);\r\n      console.log(\"Entered Decrease Sample\");\r\n\r\n      var tempField = formFields;\r\n\r\n      tempField.filter((obj) => {\r\n        return obj.name === \"limit\" && (obj.value = limit - 2 + \"\");\r\n      });\r\n\r\n      setFormFields(tempField);\r\n      buildMain();\r\n      setLoading(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n      setLoading(false);\r\n      setDoneQuery(false);\r\n      setShowGraph(false);\r\n    }, []);\r\n\r\n    return (\r\n      <Popup\r\n        show={true}\r\n        className=\"graph-popup\"\r\n        closeCallback={() => closeCallback(false)}\r\n        customLabels={customLabels}\r\n      >\r\n        <React.Fragment>\r\n          <h2>{titleState}</h2>\r\n\r\n          {loading ? (\r\n            <Loader />\r\n          ) : !doneQuery ? (\r\n            <section className=\"query-params-form\">\r\n              <h5>{locale.graph}</h5>\r\n              <form onSubmit={submitGraph}>\r\n                {formFields.map((queryParam, idx) => {\r\n                  if (queryParam.name == \"page\") return \"\";\r\n                  return (\r\n                    <FormRow\r\n                      key={`query_param_${idx}`}\r\n                      field={queryParam}\r\n                      onChange={graphChanged}\r\n                      showReset={!queryParam.type || queryParam.type === \"text\"}\r\n                    />\r\n                  );\r\n                })}\r\n                <Button type=\"submit\" onClick={submitGraph}>\r\n                  {locale.submit}\r\n                </Button>\r\n              </form>\r\n            </section>\r\n          ) : showGraph ? (\r\n            <GraphHolder\r\n              dataMat={graphData}\r\n              prev={prev}\r\n              prevCallback={prevShifting}\r\n              next={next}\r\n              nextCallback={nextShifting}\r\n              zoomIn={zoomIn}\r\n              zoomInCallback={decreaseSamples}\r\n              zoomOut={zoomOut}\r\n              zoomOutCallback={increaseSamples}\r\n            />\r\n          ) : (\r\n            <h1>{error}</h1>\r\n          )}\r\n        </React.Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport * as QueryString from \"query-string\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { find, remove } from \"lodash\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport {\r\n  IConfigPage,\r\n  IConfigMethods,\r\n  IConfigGetAllMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  IConfigDeleteMethod,\r\n  IConfigInputField,\r\n  IConfigCustomAction,\r\n  IConfigGetSingleMethod,\r\n  ICustomLabels,\r\n  IConfigPagination,\r\n  IConfigGraphMethod,\r\n} from \"../../common/models/config.model\";\r\nimport {\r\n  IPaginationState,\r\n  IQueryPaginationState,\r\n  IBodyPaginationState,\r\n} from \"../../common/models/states.model\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { paginationHelpers } from \"../../helpers/pagination.helpers\";\r\nimport { Table } from \"../table/table.comp\";\r\nimport { Cards } from \"../cards/cards.comp\";\r\nimport { QueryParams } from \"../queryParams/queryParams.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { FormPopup } from \"../formPopup/formPopup.comp\";\r\nimport { FilterField } from \"../filterField/filterField.comp\";\r\nimport {\r\n  isQueryPaginationState,\r\n  isBodyPaginationState,\r\n} from \"../../common/models/states.types.helper\";\r\nimport {\r\n  isQueryPagination,\r\n  isBodyPagination,\r\n} from \"../../common/models/config.types.helper\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./page.scss\";\r\nimport { GraphPopup } from \"../graphPopup/graphPopup.comp\";\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  loadedFields: ILoadedFields[];\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: \"add\" | \"update\" | \"action\";\r\n  title: string;\r\n  config: IConfigPostMethod | IConfigPutMethod;\r\n  submitCallback: (body: any, containFiles: boolean) => void;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  rawData?: {};\r\n}\r\n\r\ninterface IGraphProps {\r\n  title: string;\r\n  config: IConfigGraphMethod;\r\n  rawData?: {};\r\n}\r\n\r\nconst buildInitQueryParamsAndPaginationState = (\r\n  initQueryParams: IConfigInputField[],\r\n  paginationConfig?: IConfigPagination\r\n): {\r\n  initQueryParams: IConfigInputField[];\r\n  initialPagination?: IPaginationState;\r\n} => {\r\n  let initialPagination: IPaginationState | undefined = undefined;\r\n\r\n  if (paginationConfig) {\r\n    if (isQueryPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: paginationConfig.source,\r\n        type: paginationConfig.type,\r\n        page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n        descending:\r\n          paginationConfig.params?.descending?.value === \"true\" || false,\r\n        hasPreviousPage: false,\r\n        hasNextPage: false,\r\n        sortBy: paginationConfig.params?.sortBy?.value,\r\n      };\r\n\r\n      if (!find(initQueryParams, { name: \"page\" })) {\r\n        initQueryParams.push({\r\n          name: paginationConfig?.params?.page?.name,\r\n          label: paginationConfig?.params?.page?.label || \"Page\",\r\n          value: initialPagination?.page,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, { name: \"limit\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.descending &&\r\n        !find(initQueryParams, { name: \"descending\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.descending.name,\r\n          label: paginationConfig.params.descending.label || \"Descending\",\r\n          value: initialPagination?.descending,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.sortBy &&\r\n        !find(initQueryParams, { name: \"sortBy\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.sortBy.name,\r\n          label: \"Sort by\",\r\n          value: initialPagination?.sortBy,\r\n        });\r\n      }\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: \"body\",\r\n        type: paginationConfig.type,\r\n        hasNextPage: false,\r\n        hasPreviousPage: false,\r\n        next: null,\r\n        previous: null,\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n      };\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, { name: \"limit\" })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n    } else {\r\n      throw new Error(\"unrecognized pagination\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    initQueryParams,\r\n    initialPagination,\r\n  };\r\n};\r\n\r\nconst PageComp = ({ context, loadedFields }: IProps) => {\r\n  const { page }: any = useParams();\r\n  const { push, location } = useHistory();\r\n  const { activePage, error, setError, httpService, config } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const pageMethods: IConfigMethods | undefined = activePage?.methods;\r\n  const customActions: IConfigCustomAction[] = activePage?.customActions || [];\r\n  const getAllConfig: IConfigGetAllMethod | undefined = pageMethods?.getAll;\r\n  const paginationConfig = getAllConfig?.pagination;\r\n  const infiniteScroll = paginationConfig?.type === \"infinite-scroll\";\r\n  const getSingleConfig: IConfigGetSingleMethod | undefined =\r\n    pageMethods?.getSingle;\r\n  const postConfig: IConfigPostMethod | undefined = pageMethods?.post;\r\n  const graphConfig: IConfigGraphMethod | undefined = pageMethods?.graph;\r\n  const putConfig: IConfigPutMethod | undefined = pageMethods?.put;\r\n  const deleteConfig: IConfigDeleteMethod | undefined = pageMethods?.delete;\r\n  const customLabels: ICustomLabels | undefined = {\r\n    ...config?.customLabels,\r\n    ...activePage?.customLabels,\r\n  };\r\n  const addItemLabel =\r\n    customLabels?.buttons?.addItem ||\r\n    \"+ \" + locale.add + \" \" + activePage?.itemName;\r\n  const openGraphLabel = locale.graph + \" \" + activePage?.itemName;\r\n  const addItemFormTitle =\r\n    customLabels?.formTitles?.addItem ||\r\n    locale.add + \" \" + activePage?.itemName;\r\n  const editItemFormTitle =\r\n    customLabels?.formTitles?.editItem ||\r\n    locale.update + \" \" + activePage?.itemName;\r\n  const graphTitle = locale.graph + \" \" + activePage?.itemName;\r\n  const {\r\n    initQueryParams,\r\n    initialPagination,\r\n  } = buildInitQueryParamsAndPaginationState(\r\n    getAllConfig?.queryParams || [],\r\n    paginationConfig\r\n  );\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [openedPopup, setOpenedPopup] = useState<null | IPopupProps>(null);\r\n  const [openedGraph, setOpenedGraph] = useState<null | IGraphProps>(null);\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(\r\n    initQueryParams\r\n  );\r\n  const [pagination, setPagination] = useState<IPaginationState | undefined>(\r\n    initialPagination\r\n  );\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState<string>(\"\");\r\n\r\n  function closeFormPopup(refreshData: boolean = false) {\r\n    setOpenedPopup(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, (param) =>\r\n          [\"page\", \"limit\"].includes(param.name)\r\n        );\r\n        setQueryParams(\r\n          buildInitQueryParamsAndPaginationState(\r\n            updatedParams,\r\n            paginationConfig\r\n          ).initQueryParams\r\n        );\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  function closeGraph(refreshData: boolean = false) {\r\n    setOpenedGraph(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, (param) =>\r\n          [\"page\", \"limit\"].includes(param.name)\r\n        );\r\n        setQueryParams(\r\n          buildInitQueryParamsAndPaginationState(\r\n            updatedParams,\r\n            paginationConfig\r\n          ).initQueryParams\r\n        );\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  async function openEditPopup(rawData: any) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: \"update\",\r\n      title: editItemFormTitle,\r\n      config: putConfig as IConfigPutMethod,\r\n      getSingleConfig,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await updateItem(body, rawData, containFiles);\r\n      },\r\n    };\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  function openCustomActionPopup(rawData: any, action: IConfigCustomAction) {\r\n    const params: IPopupProps = {\r\n      rawData,\r\n      type: \"action\",\r\n      title: action.name || \"Custom Action\",\r\n      config: action as IConfigCustomAction,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await performAction(body, rawData, action, containFiles);\r\n      },\r\n    };\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  async function openGraphPopup(graphConfig: IConfigGraphMethod) {\r\n    const params: IGraphProps = {\r\n      title: graphTitle,\r\n      config: graphConfig,\r\n    };\r\n\r\n    setOpenedGraph(params);\r\n\r\n    console.log(params);\r\n    console.log(openedGraph);\r\n  }\r\n\r\n  async function performAction(\r\n    body: any,\r\n    rawData: any,\r\n    action: IConfigCustomAction,\r\n    containFiles: boolean\r\n  ) {\r\n    const { url, requestHeaders, actualMethod } = action;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  function extractQueryParams(\r\n    params: IConfigInputField[]\r\n  ): IConfigInputField[] {\r\n    if (!paginationConfig || isQueryPagination(paginationConfig)) {\r\n      const parsedParams = QueryString.parse(location.search);\r\n      const finalQueryParams = params.map((queryParam) => {\r\n        if (typeof parsedParams[queryParam.name] !== \"undefined\") {\r\n          queryParam.value =\r\n            queryParam.type === \"boolean\"\r\n              ? parsedParams[queryParam.name] === \"true\"\r\n              : decodeURIComponent(parsedParams[queryParam.name] as any);\r\n        } else {\r\n          queryParam.value = queryParam.value || \"\";\r\n        }\r\n        return queryParam;\r\n      });\r\n\r\n      setPagination(getUpdatedPaginationState(finalQueryParams, null));\r\n\r\n      return finalQueryParams;\r\n    } else {\r\n      return params;\r\n    }\r\n  }\r\n\r\n  async function fetchPageData(params: {\r\n    actualMethod: \"get\" | \"put\" | \"post\" | \"patch\" | \"delete\";\r\n    url: string;\r\n    requestHeaders?: any;\r\n    dataPath: string;\r\n    dataTransform: any;\r\n    sortBy: any;\r\n  }) {\r\n    const result = await httpService.fetch({\r\n      method: params.actualMethod || \"get\",\r\n      origUrl: params.url,\r\n      queryParams,\r\n      headers: Object.assign({}, pageHeaders, params.requestHeaders || {}),\r\n    });\r\n    let extractedData = dataHelpers.extractDataByDataPath(\r\n      result,\r\n      params.dataPath\r\n    );\r\n\r\n    if (!extractedData) {\r\n      throw new Error(\"Could not extract data from response.\");\r\n    }\r\n\r\n    if (!Array.isArray(extractedData)) {\r\n      throw new Error(\"Extracted data is invalid.\");\r\n    }\r\n\r\n    if (typeof params.dataTransform === \"function\") {\r\n      extractedData = await params.dataTransform(extractedData);\r\n    }\r\n\r\n    const orderedItems = orderBy(\r\n      extractedData,\r\n      typeof params.sortBy === \"string\" ? [params.sortBy] : params.sortBy || []\r\n    );\r\n\r\n    if (paginationConfig) {\r\n      const total = paginationConfig.fields?.total\r\n        ? dataHelpers.extractDataByDataPath(\r\n            result,\r\n            paginationConfig.fields.total.dataPath\r\n          )\r\n        : undefined;\r\n      const newPaginationState = getUpdatedPaginationState(\r\n        queryParams,\r\n        result,\r\n        total\r\n      );\r\n      if (newPaginationState) {\r\n        setPagination(newPaginationState);\r\n      }\r\n    }\r\n\r\n    if (infiniteScroll) {\r\n      setItems([...items, ...orderedItems]);\r\n    } else {\r\n      setItems(orderedItems);\r\n    }\r\n  }\r\n\r\n  async function getAllRequest() {\r\n    if (infiniteScroll) {\r\n      if (pagination) {\r\n        if (isQueryPaginationState(pagination)) {\r\n          if (pagination?.page !== 1) {\r\n            setLoading(false);\r\n          }\r\n        } else if (isBodyPaginationState(pagination)) {\r\n          if (pagination.previous) {\r\n            setLoading(false);\r\n          }\r\n        } else {\r\n          throw new Error(\"unrecognized pagination source\");\r\n        }\r\n      }\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      if (!getAllConfig) {\r\n        throw new Error(\"Get all method is not defined.\");\r\n      }\r\n\r\n      if (paginationConfig && !pagination) {\r\n        throw new Error(\"Pagination not initialized.\");\r\n      }\r\n\r\n      const {\r\n        url,\r\n        requestHeaders,\r\n        actualMethod,\r\n        dataPath,\r\n        sortBy,\r\n        dataTransform,\r\n      } = getAllConfig;\r\n      await fetchPageData({\r\n        actualMethod: actualMethod,\r\n        url: url,\r\n        requestHeaders: requestHeaders,\r\n        dataPath: dataPath,\r\n        dataTransform: dataTransform,\r\n        sortBy: sortBy,\r\n      });\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function addItem(body: any, containFiles?: boolean, queryParams?: []) {\r\n    if (!postConfig) {\r\n      throw new Error(\"Post method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = postConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"post\",\r\n      origUrl: url,\r\n      queryParams,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function updateItem(body: any, rawData: any, containFiles?: boolean) {\r\n    if (!putConfig) {\r\n      throw new Error(\"Put method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = putConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function deleteItem(item: any) {\r\n    const approved: boolean = window.confirm(\r\n      \"Are you sure you want to delete this item?\"\r\n    );\r\n\r\n    if (!approved) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!deleteConfig) {\r\n        throw new Error(\"Delete method is not defined.\");\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod } = deleteConfig;\r\n      const success = await httpService.fetch({\r\n        method: actualMethod || \"delete\",\r\n        origUrl: url,\r\n        rawData: item,\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        responseType: \"boolean\",\r\n      });\r\n\r\n      if (success) {\r\n        if (pagination?.type === \"infinite-scroll\") {\r\n          setItems([]);\r\n          const updatedParams = [...queryParams];\r\n          remove(updatedParams, (param) =>\r\n            [\"page\", \"limit\"].includes(param.name)\r\n          );\r\n          setQueryParams(\r\n            buildInitQueryParamsAndPaginationState(\r\n              updatedParams,\r\n              paginationConfig\r\n            ).initQueryParams\r\n          );\r\n        } else {\r\n          getAllRequest();\r\n        }\r\n      }\r\n    } catch (e) {\r\n      toast.error(e.message, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function submitQueryParams(\r\n    updatedParams: IConfigInputField[],\r\n    reset?: boolean\r\n  ) {\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (reset) {\r\n      setItems([]);\r\n      remove(updatedParams, (param) => [\"page\", \"limit\"].includes(param.name));\r\n      updatedParams = buildInitQueryParamsAndPaginationState(\r\n        updatedParams,\r\n        paginationConfig\r\n      ).initQueryParams;\r\n    }\r\n\r\n    updatedParams.map((queryParam, idx) => {\r\n      if (queryParam.type === \"select\" && queryParam.value === locale.select) {\r\n        // default value means nothing was selected and thus we explicitly\r\n        // empty out the value in this case; otherwise the string '-- Select --'\r\n        // is used as the value for the given queryParams\r\n        queryParam.value = \"\";\r\n      }\r\n    });\r\n\r\n    setQueryParams(updatedParams);\r\n    setPagination(getUpdatedPaginationState(updatedParams, null));\r\n\r\n    let paramsToUrl = [...updatedParams];\r\n\r\n    if (paginationConfig?.type === \"infinite-scroll\") {\r\n      paramsToUrl = paramsToUrl.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n    }\r\n\r\n    // Building query string\r\n    const queryState: string = paramsToUrl\r\n      .map((queryParam, idx) => {\r\n        return `${idx === 0 ? \"?\" : \"\"}${queryParam.name}=${encodeURIComponent(\r\n          queryParam.value || \"\"\r\n        )}`;\r\n      })\r\n      .join(\"&\");\r\n\r\n    // Pushing query state to url\r\n    if (page && queryState) {\r\n      push(queryState);\r\n    }\r\n  }\r\n\r\n  function getUpdatedPaginationState(\r\n    updatedParams: IConfigInputField[],\r\n    result: any,\r\n    total?: number\r\n  ): IPaginationState | undefined {\r\n    if (!paginationConfig) {\r\n      return;\r\n    }\r\n\r\n    if (isQueryPagination(paginationConfig)) {\r\n      if (pagination && !isQueryPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IQueryPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"query\",\r\n            type: paginationConfig.type,\r\n            page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            descending:\r\n              paginationConfig.params?.descending?.value === \"true\" || false,\r\n            hasPreviousPage: false,\r\n            hasNextPage: false,\r\n            sortBy: paginationConfig.params?.sortBy?.value,\r\n          };\r\n\r\n      newState.total = total || pagination?.total;\r\n      newState.page =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.page?.name\r\n          )?.value\r\n        ) || newState.page;\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      newState.descending =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.descending?.name\r\n        )?.value === \"true\" || newState.descending;\r\n      newState.sortBy =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.sortBy?.name\r\n        )?.value || newState.sortBy;\r\n      newState.hasPreviousPage = paginationHelpers.hasPreviousPage(\r\n        newState.page\r\n      );\r\n      newState.hasNextPage = paginationHelpers.hasNextPage(\r\n        newState.page,\r\n        newState.limit,\r\n        newState.total\r\n      );\r\n      return newState;\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      if (pagination && !isBodyPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IBodyPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"body\",\r\n            type: paginationConfig.type,\r\n            next: result[paginationConfig.params.nextPath || locale.next],\r\n            previous:\r\n              result[paginationConfig.params.prevPath || locale.previous],\r\n            hasNextPage: !!result[\r\n              paginationConfig.params.nextPath || locale.next\r\n            ],\r\n            hasPreviousPage: !!result[\r\n              paginationConfig.params.prevPath || locale.previous\r\n            ],\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            total: result[paginationConfig.params.countPath || \"count\"],\r\n          };\r\n      if (result) {\r\n        newState.next = result[paginationConfig.params.nextPath || locale.next];\r\n        newState.previous =\r\n          result[paginationConfig.params.prevPath || locale.previous];\r\n        newState.hasNextPage = !!result[\r\n          paginationConfig.params.nextPath || locale.next\r\n        ];\r\n        newState.hasPreviousPage = !!result[\r\n          paginationConfig.params.prevPath || locale.previous\r\n        ];\r\n        newState.total = result[paginationConfig.params.countPath || \"count\"];\r\n      }\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      return newState;\r\n    } else {\r\n      throw new Error(\"unrecognized pagination source\");\r\n    }\r\n  }\r\n\r\n  function renderItemsUI() {\r\n    if (loading) {\r\n      return <Loader />;\r\n    }\r\n\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n    let filteredItems = items;\r\n\r\n    if (filter && fieldsToFilter.length) {\r\n      filteredItems = items.filter((item) => {\r\n        let passFilter = false;\r\n        fieldsToFilter.forEach((fieldName) => {\r\n          const value = item[fieldName];\r\n          if (\r\n            typeof value === \"string\" &&\r\n            value.toLowerCase().indexOf(filter) >= 0\r\n          ) {\r\n            passFilter = true;\r\n          }\r\n        });\r\n        return passFilter;\r\n      });\r\n    }\r\n\r\n    if (!filteredItems.length) {\r\n      return <div className=\"app-error\">{locale.nothing_to_see}</div>;\r\n    }\r\n\r\n    const getNextPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (pagination?.page && queryParams.length > 0) {\r\n              const newPage = pagination?.page + 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.next) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.next,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const getPreviousPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (\r\n              pagination?.page &&\r\n              pagination.page > 1 &&\r\n              queryParams.length > 0\r\n            ) {\r\n              const newPage = pagination?.page - 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.previous) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.previous,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const callbacks = {\r\n      delete: deleteConfig ? deleteItem : null,\r\n      put: putConfig ? openEditPopup : null,\r\n      action: customActions.length ? openCustomActionPopup : () => {},\r\n      getNextPage,\r\n      getPreviousPage,\r\n    };\r\n\r\n    if (getAllConfig?.display.type === \"cards\") {\r\n      return (\r\n        <Cards\r\n          pagination={pagination}\r\n          callbacks={callbacks}\r\n          fields={fields}\r\n          items={filteredItems}\r\n          customActions={customActions}\r\n          customLabels={customLabels}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Table\r\n        pagination={pagination}\r\n        callbacks={callbacks}\r\n        fields={fields}\r\n        items={filteredItems}\r\n        customActions={customActions}\r\n        customLabels={customLabels}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPaginationStateLabel() {\r\n    if (loading || !items.length) {\r\n      return;\r\n    }\r\n\r\n    if (!pagination || isQueryPaginationState(pagination)) {\r\n      const currentCountFrom =\r\n        ((pagination?.page || 1) - 1) * (pagination?.limit || 10) + 1;\r\n      const currentCountTo = currentCountFrom + items.length - 1;\r\n      let label: string = `${locale.showing_result} ${currentCountFrom}-${currentCountTo} ${locale.out_of} ${pagination?.total} ${locale.items}`;\r\n\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount\r\n          .replace(\":currentCountFrom\", currentCountFrom as any)\r\n          .replace(\":currentCountTo\", currentCountFrom as any)\r\n          .replace(\":totalCount\", pagination?.total as any);\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n    if (isBodyPaginationState(pagination)) {\r\n      // TODO: extract start end end in a meaningful manner from the API\r\n      // this is not something that id based pagination APIs support generally\r\n      let label: string = `Total Results: ${pagination?.total}`;\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount.replace(\r\n          \":totalCount\",\r\n          pagination?.total as any\r\n        );\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n  }\r\n\r\n  function renderPageContent() {\r\n    const fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <QueryParams\r\n          initialParams={queryParams}\r\n          paginationConfig={paginationConfig}\r\n          submitCallback={submitQueryParams}\r\n        />\r\n        {fieldsToFilter.length > 0 && <FilterField onChange={setFilter} />}\r\n        {pagination?.total && renderPaginationStateLabel()}\r\n        {error ? <div className=\"app-error\">{error}</div> : renderItemsUI()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    const nextActivePage: IConfigPage | null =\r\n      context?.config?.pages?.filter(\r\n        (p, pIdx) => p.id === page || pIdx + 1 === parseInt(page || \"\")\r\n      )[0] || null;\r\n    context.setActivePage(nextActivePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    const {\r\n      initQueryParams,\r\n      initialPagination,\r\n    } = buildInitQueryParamsAndPaginationState(\r\n      getAllConfig?.queryParams || [],\r\n      paginationConfig\r\n    );\r\n\r\n    setItems([]);\r\n    setQueryParams(extractQueryParams(initQueryParams));\r\n    setPagination(initialPagination);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    // Load data when query params\r\n    getAllRequest();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [queryParams]);\r\n\r\n  return (\r\n    <div className=\"app-page\">\r\n      <header className=\"app-page-header\">\r\n        <hgroup>\r\n          <h2>{activePage?.name}</h2>\r\n          {activePage?.description && <h4>{activePage?.description}</h4>}\r\n        </hgroup>\r\n        {graphConfig && (\r\n          <Button\r\n            className=\"add-item\"\r\n            color=\"blue\"\r\n            onClick={() => openGraphPopup(graphConfig)}\r\n          >\r\n            {openGraphLabel}\r\n          </Button>\r\n        )}\r\n        {postConfig && (\r\n          <Button\r\n            className=\"add-item\"\r\n            color=\"green\"\r\n            onClick={() =>\r\n              setOpenedPopup({\r\n                type: \"add\",\r\n                title: addItemFormTitle,\r\n                config: postConfig,\r\n                submitCallback: addItem,\r\n              })\r\n            }\r\n          >\r\n            {addItemLabel}\r\n          </Button>\r\n        )}\r\n      </header>\r\n      <main className=\"app-page-content\">{renderPageContent()}</main>\r\n      {openedPopup && (\r\n        <FormPopup\r\n          title={openedPopup.title}\r\n          closeCallback={closeFormPopup}\r\n          submitCallback={openedPopup.submitCallback}\r\n          type={openedPopup.type}\r\n          fields={openedPopup.config?.fields || []}\r\n          loadedFields={loadedFields}\r\n          rawData={openedPopup.rawData}\r\n          getSingleConfig={openedPopup.getSingleConfig}\r\n          methodConfig={openedPopup.config}\r\n        />\r\n      )}\r\n      {openedGraph && (\r\n        <GraphPopup\r\n          title={openedGraph.title}\r\n          closeCallback={closeGraph}\r\n          fields={openedGraph.config?.fields || []}\r\n          graphConfig={openedGraph.config}\r\n        />\r\n      )}\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Page = withAppContext(PageComp);\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale.js\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport {\r\n  IConfigPage,\r\n  IConfigMethods,\r\n  IConfigGetAllMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  IConfigDeleteMethod,\r\n  IConfigInputField,\r\n  IConfigCustomAction,\r\n  IConfigGetSingleMethod,\r\n  ICustomLabels,\r\n  IConfigPagination,\r\n  IConfigGraphMethod,\r\n} from \"../../common/models/config.model\";\r\n\r\nimport \"./authPage.scss\";\r\nimport { FormPopup } from \"../formPopup/formPopup.comp\";\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: \"add\";\r\n  title: string;\r\n  config: IConfigPostMethod | IConfigPutMethod;\r\n  submitCallback: (body: any, containFiles: boolean) => void;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  rawData?: {};\r\n}\r\n\r\nconst AuthPageComp = ({ context }: IProps) => {\r\n  const { location, replace } = useHistory();\r\n  const [user, setUser] = useState<string>(\"\");\r\n  const [pwd, setPwd] = useState<string>(\"\");\r\n  const [tenant, setTenant] = useState<string>(\"\");\r\n  const { setError, httpService } = context;\r\n  const [openedAddTenant, setOpenedAddTenant] = useState<null | IPopupProps>(\r\n    null\r\n  );\r\n  const postConfig: IConfigPostMethod | undefined = {\r\n    url: \"/tenants/\",\r\n    actualMethod: \"post\",\r\n    requestHeaders: { \"content-type\": \"application/json\" },\r\n    fields: [\r\n      { name: \"token\", type: \"text\", value: \"\", label: \"Token\" },\r\n      { name: \"_id\", type: \"text\", value: \"\", label: \"ID\" },\r\n      {\r\n        name: \"organization\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        label: \"Organizzazione\",\r\n      },\r\n      { name: \"address\", type: \"text\", value: \"\", label: \"Indirizzo\" },\r\n      { name: \"email\", type: \"email\", value: \"\", label: \"e-mail\" },\r\n      { name: \"phone\", type: \"text\", value: \"\", label: \"Telefono\" },\r\n      {\r\n        name: \"admin_username\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        label: \"Username Amministratore\",\r\n      },\r\n      {\r\n        name: \"admin_password\",\r\n        type: \"password\",\r\n        value: \"\",\r\n        label: \"Password Amministratore\",\r\n      },\r\n    ],\r\n    queryParams: [],\r\n  };\r\n\r\n  async function submitForm(e: any) {\r\n    e.preventDefault();\r\n\r\n    console.log(\"entrato nel submit form\");\r\n\r\n    try {\r\n      const credentials = {\r\n        username: `${user}`,\r\n        password: `${pwd}`,\r\n        tenant: `${tenant}`,\r\n      };\r\n      const result = await httpService.fetch({\r\n        method: \"post\",\r\n        origUrl: httpService.loginUrl,\r\n        body: JSON.stringify(credentials),\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n      if (!result) {\r\n        throw new Error(locale.login_error);\r\n      }\r\n      if (result.status === 401) {\r\n        throw new Error(locale.login_error);\r\n      }\r\n\r\n      if (result.user.type !== \"admin\") {\r\n        throw new Error(locale.login_unauthorised_user);\r\n      }\r\n\r\n      sessionStorage.setItem(\"diten-token\", result.token);\r\n      window.location.replace(\"/\");\r\n      console.log(\"token impostato\");\r\n\r\n      //const { from } = location.state || { from: { pathname: \"/\" } };\r\n      //replace(from);\r\n    } catch (e) {\r\n      setError(e.message);\r\n      toast.error(e.message, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleUserChange(event: any) {\r\n    setUser(event.target.value);\r\n  }\r\n\r\n  function handlePwdChange(event: any) {\r\n    setPwd(event.target.value);\r\n  }\r\n\r\n  function handleTenantChange(event: any) {\r\n    setTenant(event.target.value);\r\n  }\r\n\r\n  function closeAddTenantPopup() {\r\n    setOpenedAddTenant(null);\r\n  }\r\n\r\n  async function addTenant(body: any) {\r\n    if (!postConfig) {\r\n      throw new Error(\"Post method is not defined.\");\r\n    }\r\n\r\n    console.log(body);\r\n\r\n    const tokenHead = body[\"token\"];\r\n\r\n    delete body[\"token\"];\r\n\r\n    const result = await httpService.fetch({\r\n      method: \"post\",\r\n      origUrl: httpService.baseUrl + \"/tenants\",\r\n      body: JSON.stringify(body),\r\n      headers: { \"content-type\": \"application/json\", Authorization: tokenHead },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <h4>{locale.login}</h4>\r\n      <form className=\"form-content\" onSubmit={submitForm}>\r\n        <div className=\"form-row row\">\r\n          <label>{locale.username}</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={locale.username_suggestion}\r\n            onChange={handleUserChange}\r\n          />\r\n        </div>\r\n        <div className=\"form-row row\">\r\n          <label>{locale.password}</label>\r\n          <input\r\n            type=\"password\"\r\n            placeholder={locale.password_suggestion}\r\n            onChange={handlePwdChange}\r\n          />\r\n        </div>\r\n        <div className=\"form-row row\">\r\n          <label>{locale.tenant}</label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder={locale.tenant_suggestion}\r\n            onChange={handleTenantChange}\r\n          />\r\n        </div>\r\n        <div className=\"buttons-wrapper center\">\r\n          <Button type=\"submit\" onClick={submitForm} color=\"green\">\r\n            {locale.submit}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n\r\n      <br />\r\n      <br />\r\n      <br />\r\n      <div className=\"form-content\">\r\n        <div className=\"form-row row\">\r\n          <h5>{locale.add_tenant}</h5>\r\n          <div className=\"buttons-wrapper center\"></div>\r\n          <Button\r\n            title={locale.add_tenant}\r\n            onClick={() =>\r\n              setOpenedAddTenant({\r\n                type: \"add\",\r\n                title: locale.add_tenant,\r\n                config: postConfig,\r\n                submitCallback: addTenant,\r\n              })\r\n            }\r\n            color=\"green\"\r\n          >\r\n            <i className=\"fa fa-plus-circle\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {openedAddTenant && (\r\n        <FormPopup\r\n          title={openedAddTenant.title}\r\n          closeCallback={closeAddTenantPopup}\r\n          submitCallback={openedAddTenant.submitCallback}\r\n          fields={openedAddTenant.config?.fields || []}\r\n          rawData={openedAddTenant.rawData}\r\n          getSingleConfig={openedAddTenant.getSingleConfig}\r\n          methodConfig={openedAddTenant.config}\r\n        />\r\n      )}\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = withAppContext(AuthPageComp);\r\n","import React, { useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale.js\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\nconst NavigationComp = ({ context: { config } }: IProps) => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  function logOut() {\r\n    sessionStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          {(config?.pages || []).map((page, idx) => (\r\n            <NavLink\r\n              to={`/${page.id || idx + 1}`}\r\n              activeClassName=\"active\"\r\n              key={`page_${idx}`}\r\n              onClick={() => setIsOpened(false)}\r\n            >\r\n              {page.name}\r\n            </NavLink>\r\n          ))}\r\n        </div>\r\n        <div className=\"logout-wrapper\">\r\n          <Button color=\"red\" onClick={() => logOut()}>\r\n            {locale.logout}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport const Navigation = withAppContext(NavigationComp);\r\n","import React from 'react';\r\nimport { ICustomStyles } from '../../common/models/config.model';\r\n\r\ninterface IProps {\r\n  styles: ICustomStyles\r\n}\r\n\r\nexport const CustomStyles = ({ styles }: IProps) => {\r\n  const cssVars = styles.vars || {};\r\n  const arr = [];\r\n  \r\n  for (const key in cssVars) {\r\n    arr.push(`--${key}: ${(cssVars as any)[key]}`);\r\n  }\r\n\r\n  return (\r\n    <style dangerouslySetInnerHTML={{ __html: `\r\n      :root {\r\n        ${arr.join(';')}\r\n      }\r\n    ` }}>\r\n    </style>\r\n  );\r\n};","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport ConfigService from \"../services/config.service\";\r\nimport { IConfig, IConfigPage } from \"../common/models/config.model\";\r\nimport { Page } from \"../components/page/page.comp\";\r\nimport { AuthPage } from \"../components/authPage/authPage.comp\";\r\nimport { Navigation } from \"../components/navigation/navigation.comp\";\r\nimport { AppContext } from \"./app.context\";\r\nimport HttpService from \"../services/http.service\";\r\nimport { CustomStyles } from \"./customStyles/customStyles.comp\";\r\n\r\nimport \"./app.scss\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { remoteConfig } from \"firebase-admin\";\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\nconst httpService = new HttpService();\r\nconst defaultAppName: string = \"Measurify GUI\";\r\n\r\nfunction changeFavicon(src: string) {\r\n  const link = document.createElement(\"link\");\r\n  const oldLink = document.getElementById(\"favicon\");\r\n  link.id = \"favicon\";\r\n  link.rel = \"shortcut icon\";\r\n  link.href = src;\r\n  if (oldLink) {\r\n    document.head.removeChild(oldLink);\r\n  }\r\n  document.head.appendChild(link);\r\n}\r\n\r\nfunction App() {\r\n  const [loadedFields, setLoadedFields] = useState<ILoadedFields[]>(\r\n    Array<ILoadedFields>(0)\r\n  );\r\n  const [fetchedData, setFetchedData] = useState<boolean>();\r\n  const [firstLoad, setFirstLoad] = useState<boolean>(true);\r\n  const [config, setConfig] = useState<IConfig | null>(null);\r\n  const [activePage, setActivePage] = useState<IConfigPage | null>(\r\n    config?.pages?.[0] || null\r\n  );\r\n  const [error, setError] = useState<string | null>(null);\r\n  const appName: string = config?.name || defaultAppName;\r\n\r\n  async function loadConfig(url?: string): Promise<void> {\r\n    try {\r\n      const windowConfig = (window as any).RESTool?.config;\r\n\r\n      let remoteConfig: IConfig;\r\n\r\n      // Try to load config from window object first\r\n      if (!url && windowConfig) {\r\n        remoteConfig = Object.assign({}, windowConfig, {});\r\n      } else {\r\n        remoteConfig = url\r\n          ? await ConfigService.getRemoteConfig(url)\r\n          : await ConfigService.loadDefaultConfig();\r\n      }\r\n\r\n      // Setting global config for httpService\r\n\r\n      console.log(\"setting global\");\r\n\r\n      httpService.baseUrl = remoteConfig.baseUrl || \"\";\r\n      httpService.loginUrl = remoteConfig.loginUrl || \"\";\r\n      httpService.errorMessageDataPath =\r\n        remoteConfig.errorMessageDataPath || \"\";\r\n      httpService.unauthorizedRedirectUrl =\r\n        remoteConfig.unauthorizedRedirectUrl || \"\";\r\n      httpService.requestHeaders = remoteConfig.requestHeaders || {};\r\n      document.title = remoteConfig.name || defaultAppName;\r\n\r\n      if (remoteConfig?.favicon) {\r\n        changeFavicon(remoteConfig.favicon);\r\n      }\r\n\r\n      if (remoteConfig?.remoteUrl) {\r\n        return await loadConfig(remoteConfig.remoteUrl);\r\n      }\r\n\r\n      console.log(\"set config\");\r\n      setConfig(remoteConfig);\r\n    } catch (e) {\r\n      console.error(\"Could not load config file\", e);\r\n    }\r\n\r\n    setFirstLoad(false);\r\n  }\r\n\r\n  async function preloadData() {\r\n    const resultsData = await httpService.fetch({\r\n      method: \"get\",\r\n      origUrl: httpService.baseUrl + \"/v1/types\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n    });\r\n\r\n    var tempLD = Array<ILoadedFields>(12).fill({\r\n      fieldName: \"\",\r\n      values: [],\r\n    });\r\n    const keys = Object.keys(resultsData);\r\n    const values: Array<string> = Object.values(resultsData);\r\n\r\n    for (var i in tempLD) {\r\n      tempLD[i] = { fieldName: keys[i], values: Object.values(values[i]) };\r\n    }\r\n\r\n    setLoadedFields(tempLD);\r\n  }\r\n\r\n  function scrollToTop(scrollDuration: number = 250) {\r\n    var cosParameter = window.scrollY / 2,\r\n      scrollCount = 0,\r\n      oldTimestamp = performance.now();\r\n\r\n    function step(newTimestamp: number) {\r\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\r\n\r\n      if (scrollCount >= Math.PI) {\r\n        window.scrollTo(0, 0);\r\n      }\r\n\r\n      if (window.scrollY === 0) {\r\n        return;\r\n      }\r\n\r\n      window.scrollTo(\r\n        0,\r\n        Math.round(cosParameter + cosParameter * Math.cos(scrollCount))\r\n      );\r\n      oldTimestamp = newTimestamp;\r\n      window.requestAnimationFrame(step);\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    setFetchedData(false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { isValid, errorMessage } = ConfigService.validateConfig(config);\r\n\r\n    if (!isValid) {\r\n      setError(errorMessage);\r\n      toast.error(errorMessage, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n      return;\r\n    }\r\n  }, [config]);\r\n\r\n  const tkn = sessionStorage.getItem(\"diten-token\");\r\n\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"restool-app\">\r\n        <AppContext.Provider\r\n          value={{\r\n            config,\r\n            activePage,\r\n            setActivePage,\r\n            error,\r\n            setError,\r\n            httpService,\r\n          }}\r\n        >\r\n          <Router>\r\n            <Route exact path=\"/\" component={AuthPage} />\r\n          </Router>\r\n        </AppContext.Provider>\r\n      </div>\r\n    );\r\n\r\n  if (tkn !== null && fetchedData === false) {\r\n    preloadData();\r\n\r\n    setFetchedData(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"restool-app\">\r\n      {!config ? (\r\n        <div className=\"app-error\">\r\n          {firstLoad\r\n            ? \"Loading Configuration...\"\r\n            : \"Could not find config file.\"}\r\n        </div>\r\n      ) : (\r\n        <AppContext.Provider\r\n          value={{\r\n            config,\r\n            activePage,\r\n            setActivePage,\r\n            error,\r\n            setError,\r\n            httpService,\r\n          }}\r\n        >\r\n          {config.customStyles && <CustomStyles styles={config.customStyles} />}\r\n          <Router>\r\n            <aside>\r\n              <h1 title={appName} onClick={() => scrollToTop()}>\r\n                {appName}\r\n              </h1>\r\n              {<Navigation />}\r\n            </aside>\r\n            {config && (\r\n              <Switch>\r\n                <Route exact path=\"/login\" component={AuthPage} />\r\n                <Route\r\n                  exact\r\n                  path=\"/:page\"\r\n                  component={() => <Page loadedFields={loadedFields} />}\r\n                />\r\n                <Redirect path=\"/\" to={`/${config?.pages?.[0]?.id || \"1\"}`} />\r\n              </Switch>\r\n            )}\r\n            <ToastContainer\r\n              position={toast.POSITION.TOP_CENTER}\r\n              autoClose={4000}\r\n              draggable={false}\r\n            />\r\n          </Router>\r\n        </AppContext.Provider>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './index.scss';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}