(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{180:function(e,t,n){},206:function(e,t,n){},232:function(e,t){},234:function(e,t){},249:function(e,t,n){},250:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(34),c=n.n(i),s=(n(206),n(3)),o=n(5),l=n(6),d=n(19),u=n(22),j=n(4),b=n(24),h=n(16),p=n(307),f={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",geo_update:"Posizione aggiornata",geo_failed:"Non \xe8 stato possibile aggiornare la posizione",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",remove:"Rimuovi",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta"},O={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",tools:"Tools",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",geo_update:"Position updated",geo_failed:"It was not possible to update the position",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",remove:"Remove",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired"},m=n(207).default,v=n(225),x=m.create({httpsAgent:new v.Agent({})}),g={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function y(e,t,n){var a={username:"".concat(e),password:"".concat(t),tenant:"".concat(n)},r={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=B+"/login";return new Promise((function(e,t){x.post(i,a,r).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-tenant",n),localStorage.setItem("login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function k(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:R()}},t=B+"/login";return new Promise((function(n,a){x.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),n(e)})).catch((function(e){a(e)}))}))}function w(e,t){return C.apply(this,arguments)}function C(){return C=Object(d.a)(Object(l.a)().mark((function e(t,n){var a,r,i,c,s,o=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},void 0===(r=o.length>3&&void 0!==o[3]?o[3]:void 0)&&(r=R()),i=B+"/"+t+"/file",console.log("POST file:"+i),c={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:r},Object.entries(a).forEach((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];c[n]=a})),s={headers:c},e.abrupt("return",new Promise((function(e,a){x.post(i,n,s).then((function(n){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:n})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),a({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return N=Object(d.a)(Object(l.a)().mark((function e(t,n){var a,r,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(a=c.length>2&&void 0!==c[2]?c[2]:void 0)&&(a=R()),r=B+"/"+t+"/",console.log("POST :"+r),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){x.post(r,n,i).then((function(n){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:n})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function _(e,t,n){return A.apply(this,arguments)}function A(){return A=Object(d.a)(Object(l.a)().mark((function e(t,n,a){var r,i,c,s=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:void 0,i=B+"/"+t+"/"+a,void 0===r&&(r=R()),console.log("PUT :"+i),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},e.abrupt("return",new Promise((function(e,r){x.put(i,n,c).then((function(r){void 0!==n.password&&(n.password="".padStart(n.password.length,"*")),g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+a+", body: "+JSON.stringify(n)}),e({response:r})})).catch((function(e){void 0!==n.password&&(n.password="".padStart(n.password.length,"*")),g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+a+", body: "+JSON.stringify(n)+". "+e.message}),r({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function I(e,t){return D.apply(this,arguments)}function D(){return D=Object(d.a)(Object(l.a)().mark((function e(t,n){var a,r,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:void 0,r=B+"/"+t,void 0===a&&(a=R()),void 0!==n&&(r+="/"+n),console.log("DELETE :"+r),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){x.delete(r,i).then((function(a){void 0!==n?g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+n+", of type: "+t}):g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:a})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+n+", of type: "+t+". "+e.message}),404===e.statusCode&&g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),a({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e){return F.apply(this,arguments)}function F(){return F=Object(d.a)(Object(l.a)().mark((function e(t){var n,a,r,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2?c[2]:void 0,r=B+"/"+t+"/",void 0===a&&(a=R()),r=void 0!==n.filter?r.concat("?filter="+n.filter):r.concat("?filter="),void 0!==n.limit&&(r=r.concat("&limit="+n.limit)),void 0!==n.page&&(r=r.concat("&page="+n.page)),console.log("GET :"+r),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(r,i).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function R(){return localStorage.getItem("token")}function T(e,t){var n={headers:{"Content-Type":"application/json"}},a="https://api.bigdatacloud.net/data/reverse-geocode-client?latitude="+e+"&longitude="+t+"&localityLanguage=it";return console.log("GET location: "+a),new Promise((function(e,t){x.get(a,n).then((function(t){localStorage.setItem("continent",t.data.continent),localStorage.setItem("continentCode",t.data.continentCode),localStorage.setItem("countryName",t.data.countryName),localStorage.setItem("countryCode",t.data.countryCode),localStorage.setItem("principalSubdivision",t.data.principalSubdivision),localStorage.setItem("city",t.data.city),localStorage.setItem("locality",t.data.locality),e(t)})).catch((function(e){t(e)}))}))}var B="https://think.measurify.org/v1",z="Pensaci Prima",E=["it"],L="vertical",W={measurements:["samples","actions"]},G={},H={measurements:["view","delete"]},K={measurements:["samples"]},U={measurements:{tags:[""]}},M={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},measurements:{thing:"",device:"",tags:[""]}},J={},V={measurements:["form"]},q={measurements:{visibility:"VisibilityTypes"}},Y={};function Q(){var e=localStorage.getItem("language");return 0===E.length?O:(1===E.length&&(e=E[0]),"it"===e?f:"en"===e?O:"it"===navigator.language.substring(0,2)?f:(navigator.language.substring(0,2),O))}Y.measurements={device:"devices",thing:"things",tags:"tags"};n(249),n(250);var X=n(1),Z=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(X.jsxs)("div",{children:[Q().language,Object(X.jsxs)("div",{children:[E.includes("it")&&Object(X.jsx)(p.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),E.includes("en")&&Object(X.jsx)(p.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},$=n(323),ee=r.a.createRef(),te=r.a.createRef(),ne=r.a.createRef(),ae=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1];function i(){return(i=Object(d.a)(Object(l.a)().mark((function e(t){var n,a,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=ee.current.value,a=te.current.value,i=ne.current.value,e.prev=4,e.next=7,y(n,a,i);case 7:window.location.replace("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log({error:e.t0.response.data}),r(e.t0.response.data.message+" : "+e.t0.response.data.details);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}return Object(X.jsxs)("div",{className:"auth-page",children:[Object(X.jsx)("div",{className:"title-wrapper",children:Object(X.jsx)("div",{className:"title-section",children:"Pensaci Prima"})}),E.length>1&&Object(X.jsx)("div",{className:"language-wrapper",children:Object(X.jsx)(Z,{})}),Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsxs)($.a,{onSubmit:function(e){return i.apply(this,arguments)},className:"rounded p-4 p-sm-3",children:[Object(X.jsx)("h4",{children:Q().login}),Object(X.jsxs)($.a.Group,{className:"mb-3",controlId:"username",children:[Object(X.jsx)($.a.Label,{children:Q().username}),Object(X.jsx)($.a.Control,{ref:ee,type:"text",placeholder:Q().username_suggestion})]}),Object(X.jsxs)($.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(X.jsx)($.a.Label,{children:Q().password}),Object(X.jsx)($.a.Control,{type:"password",ref:te,placeholder:Q().password_suggestion})]}),Object(X.jsxs)($.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(X.jsx)($.a.Label,{children:Q().tenant}),Object(X.jsx)($.a.Control,{type:"text",ref:ne,placeholder:Q().tenant_suggestion})]}),Object(X.jsx)(p.a,{variant:"primary",type:"submit",children:Q().submit})]}),Object(X.jsx)("br",{}),Object(X.jsx)("div",{style:{color:"red"},children:n})]})},re=(n(254),function(){return Object(a.useEffect)((function(){})),Object(X.jsxs)("div",{className:"page",children:[Object(X.jsx)("header",{className:"page-header",children:z}),Object(X.jsx)("main",{className:"page-content",children:Object(X.jsx)("div",{className:"home-page",children:Object(X.jsx)("div",{className:"info-box",children:Object(X.jsxs)("div",{className:"info-text",children:[Q().welcome_hp,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Q().left_bar_descr_hp,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Q().right_bar_descr_hp,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Q().session_expire_info_hp,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:Q().github_issue_page_hp}),Object(X.jsx)("br",{})]})})})})]})}),ie=(n(255),function(){return Object(X.jsxs)("div",{className:"notFound-page",children:[Q().oh_no,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Q().broken_link,Object(X.jsx)("br",{}),Object(X.jsx)("br",{}),Object(X.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:Q().github_issue_page_hp})]})}),ce=(n(256),n(58)),se=n(25);ce.a.library.add(se.h,se.a,se.m,se.k,se.j,se.l,se.i,se.b);var oe=r.a.createRef(),le=r.a.createRef(),de=r.a.createRef(),ue=r.a.createRef(),je=r.a.createRef(),be=r.a.createRef(),he=r.a.createRef();function pe(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],i=t[1],c=localStorage.getItem("username"),s=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return be.current=null!==c?c:"",je.current=null!==s?s:"",he.current=null!==o&&""!==o?o:"-",Object(a.useEffect)((function(){function e(){var t,n;if(null!==de.current)n=de.current-1;else{if(null===le.current){var a=localStorage.getItem("login-time");null!==a?(le.current=a,t=parseInt(a,10)):(t=Date.now(),le.current=t)}else t=parseInt(le.current,10);null===ue.current&&(ue.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),n=(t+ue.current-Date.now())/1e3}if(n<60&&(clearInterval(oe.current),k().then((function(){de.current=null,le.current=null,oe.current=setInterval((function(){e()}),1e3)}))),n<=0)return localStorage.clear(),void window.location.replace("/");de.current=parseInt(n,10)}oe.current=setInterval((function(){e()}),1e3)}),[]),Object(X.jsxs)("nav",{className:"app-nav",children:[Object(X.jsx)(p.a,{className:"app-nav-opener",onClick:function(){return i(!n)},children:n?Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(X.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(X.jsx)(b.b,{to:"/add/measurements",className:"nav-wrap",children:z}),Object(X.jsx)("hr",{}),Object(X.jsx)("div",{className:"app-nav-wrapper ".concat(n?"opened":""),children:Object(X.jsxs)("div",{className:"app-nav-links",children:[Object(X.jsx)("hr",{}),Object(X.jsxs)("div",{className:"data-wrapper",children:[Object(X.jsxs)(b.b,{to:"/viewProfile/",children:[Q().welcome+" ",Object(X.jsx)("b",{children:be.current})]},"viewProfile"),Object(X.jsx)("div",{style:{paddingLeft:"10px"},children:Object(X.jsxs)("h3",{children:[Q().role+" ","admin"===je.current?Object(X.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===je.current?Object(X.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===je.current?Object(X.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===je.current?Object(X.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(X.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(X.jsx)("div",{style:{paddingLeft:"10px"},children:Object(X.jsxs)("h3",{children:[Q().tenant+" ",Object(X.jsx)("b",{children:he.current})]})}),Object(X.jsx)("br",{}),Object(X.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(X.jsx)(p.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:Q().logout})}),E.length>1&&Object(X.jsxs)(r.a.Fragment,{children:[Object(X.jsx)("hr",{}),Object(X.jsx)("h2",{children:Object(X.jsx)(Z,{})})]})]}),Object(X.jsx)("div",{className:"app-nav-text",children:Q().tools}),Object(X.jsx)("hr",{}),Object.keys(W).map((function(e){return Object(X.jsx)(b.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return i(!1)},children:e},e)}))]})})]})}var fe=n(308),Oe=n(325),me=n(187),ve=n(324);function xe(e){var t={};return K[e.resType].forEach((function(n){n.constructor===Object?Object.keys(n).forEach((function(a){Array.isArray(e.resource[a])?t[a]=e.resource[a].map((function(e){var t={};return n[a].forEach((function(n){t[n]=e[n]})),t})):t[a]=e.resource[a]})):Object.keys(e.resource).includes(n)&&(t[n]=e.resource[n])})),ge(t)}function ge(e){return Object(X.jsx)(Oe.a,{defaultActiveKey:0,size:"lg",children:r.a.Children.toArray(Object.entries(e).map((function(e,t){var n=Object(j.a)(e,2),a=n[0],i=n[1];return Object(X.jsxs)(Oe.a.Item,{eventKey:t,children:[Object(X.jsx)(Oe.a.Header,{children:Object(X.jsx)("b",{children:a})}),Object(X.jsx)(Oe.a.Body,{children:i instanceof Object?Array.isArray(i)?void 0!==i[0]?Object.values(i[0]).some((function(e){return e instanceof Object}))?r.a.Children.toArray(i.map((function(e,t){return Object(X.jsx)(Oe.a,{children:Object(X.jsxs)(Oe.a.Item,{eventKey:"0",children:[Object(X.jsxs)(Oe.a.Header,{children:[a," ",Object(X.jsxs)("i",{children:["[",t,"]"]})]}),Object(X.jsx)(Oe.a.Body,{children:ge(e)})]})})}))):i[0]instanceof Object?Object(X.jsxs)(fe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(X.jsx)("thead",{children:Object(X.jsx)("tr",{children:r.a.Children.toArray(Object.keys(i[0]).map((function(e){return Object(X.jsx)("th",{children:e})})))})}),Object(X.jsx)("tbody",{children:r.a.Children.toArray(i.map((function(e){return Object(X.jsx)("tr",{children:r.a.Children.toArray(Object.values(e).map((function(e){return Object(X.jsx)("td",{children:e})})))})})))})]}):"[ "+i.join(" , ")+" ]":"[ ]":"AAAA":void 0===i||null==i?Object(X.jsx)("i",{children:"None"}):i})]})})))})}function ye(e){var t=Object(a.useState)(void 0),n=Object(j.a)(t,2),r=n[0],i=n[1];Object(a.useEffect)((function(){}),[e]);var c=void 0!==r?Object(X.jsxs)(me.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(X.jsx)(me.a.Header,{as:"h3",children:"View Resource"}),Object(X.jsx)(me.a.Body,{children:Object(X.jsx)(xe,{resource:r,resType:e.resType})})]}):Object(X.jsx)(me.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(X.jsxs)(me.a.Header,{as:"h3",children:["Loading",Object(X.jsx)(me.a.Body,{})]})});return"view"===e.action?Object(X.jsx)(ve.a,{trigger:"click",placement:"left",overlay:c,rootClose:!0,children:Object(X.jsx)(p.a,{variant:"link",size:"sm",onClick:function(){i(e.takeSingle(e.id))},children:Object(X.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(X.jsx)(p.a,{variant:"link",size:"sm",onClick:Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,I(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(X.jsx)(b.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(X.jsx)(p.a,{variant:"link",size:"sm",children:Object(X.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(X.jsx)(b.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(X.jsx)(p.a,{variant:"link",size:"sm",children:Object(X.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(X.jsx)("div",{})}function ke(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(X.jsx)("div",{children:"Loading"}):Object(X.jsx)("div",{children:Object(X.jsxs)(fe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(X.jsx)("thead",{children:Object(X.jsx)("tr",{children:r.a.Children.toArray(e.header.map((function(t){return void 0!==G[e.resType]&&void 0!==G[e.resType][t]?Object(X.jsx)("th",{children:G[e.resType][t]}):Object(X.jsx)("th",{children:t})})))},"header")}),Object(X.jsx)("tbody",{children:r.a.Children.toArray(e.resources.map((function(t,n){return Object(X.jsx)("tr",{children:r.a.Children.toArray(e.header.map((function(a){if("actions"===a)return Object(X.jsxs)("td",{children:[e.actions.includes("view")?Object(X.jsx)(ye,{resType:e.resType,action:"view",k:n+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")?Object(X.jsx)(ye,{resType:e.resType,action:"edit",k:n+"_edit",id:t._id}):"",e.actions.includes("duplicate")?Object(X.jsx)(ye,{resType:e.resType,action:"duplicate",k:n+"_duplicate",id:t._id}):"",e.actions.includes("delete")?Object(X.jsx)(ye,{resType:e.resType,action:"delete",k:n+"_delete",id:t._id,removeSingle:e.removeSingle}):""]});if(void 0!==t[a]){if(Array.isArray(t[a])){if(void 0!==t[a][0]&&t[a][0].constructor===Object){var r="[ "+t[a].map((function(e){return Object.values(e).join(" - ")})).join(" -- ")+" ]";return Object(X.jsx)("td",{children:r.length<=100?r:r.slice(0,97)+"..."})}return Object(X.jsx)("td",{children:"[ "+t[a].join(" , ")+" ]"})}return Object(X.jsx)("td",{children:t[a]})}})))})})))})]})})}ce.a.library.add(se.d,se.f,se.c);var we=n(329);n(180);function Ce(e){var t=Object(h.o)().page,n=Object(b.c)(),r=Object(j.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(void 0),o=Object(j.a)(s,2),u=o[0],f=o[1],O=Object(a.useState)(void 0),m=Object(j.a)(O,2),v=m[0],x=m[1],g=Object(a.useState)(void 0),y=Object(j.a)(g,2),k=y[0],w=y[1],C=Object(a.useState)(1),S=Object(j.a)(C,2),N=S[0],_=S[1],A=Object(a.useState)(1),I=Object(j.a)(A,2),D=I[0],F=I[1],R=Object(a.useState)(),T=Object(j.a)(R,2),B=T[0],z=T[1],E=Object(a.useState)(),L=Object(j.a)(E,2),G=L[0],K=L[1],U=Object(a.useState)(),J=Object(j.a)(U,2),V=J[0],q=J[1],Y=Object(a.useState)(),Q=Object(j.a)(Y,2),Z=Q[0],$=Q[1],ee=Object(a.useState)(),te=Object(j.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var n,a,r=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},e.prev=1,e.next=4,P(t,n);case 4:a=e.sent,x(W[t]),f(a.docs),void 0!==H[t]&&w(H[t]),z(a.hasNextPage),K(a.hasPrevPage),ae(a.totalPages),q(a.prevPage),$(a.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),x(void 0),f(void 0),z(void 0),K(void 0),ae(void 0),q(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),n=null!==i.get("page")?i.get("page"):1;_(n);var a=null!==i.get("limit")?i.get("limit"):10;F(a),e({page:n,limit:a}).catch(console.error)}),[e,t,i]);var re=function(){var e=parseInt(N,10)-2>0,t=parseInt(N,10)+2<ne;return Object(X.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(X.jsxs)(we.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(X.jsx)(we.a.First,{disabled:1===N,onClick:function(){return c({page:1,limit:D})}}),Object(X.jsx)(we.a.Prev,{disabled:!G,onClick:function(){return c({page:V,limit:D})}}),e&&Object(X.jsx)(we.a.Ellipsis,{}),parseInt(N,10)-1>0&&Object(X.jsx)(we.a.Item,{onClick:function(){return c({page:parseInt(N,10)-1,limit:D})},children:parseInt(N,10)-1}),Object(X.jsx)(we.a.Item,{children:Object(X.jsx)("b",{children:N})}),parseInt(N,10)+1<=ne&&Object(X.jsx)(we.a.Item,{onClick:function(){return c({page:parseInt(N,10)+1,limit:D})},children:parseInt(N,10)+1}),t&&Object(X.jsx)(we.a.Ellipsis,{}),Object(X.jsx)(we.a.Next,{disabled:!B,onClick:function(){return c({page:Z,limit:D})}}),Object(X.jsx)(we.a.Last,{disabled:N===ne,onClick:function(){return c({page:ne,limit:D})}})]})})};return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:[t,void 0!==M[t]&&Object(X.jsx)(b.b,{to:"/add/"+t+"/",children:Object(X.jsx)(p.a,{variant:"link",size:"sm",children:Object(X.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(X.jsxs)("main",{className:"page-content",children:[Object(X.jsx)(ke,{resType:t,header:v,resources:u,actions:k,takeSingle:function(e){return u.find((function(t){return t._id===e}))},removeSingle:function(e){var t=u.filter((function(t){return t._id!==e}));f(t)}}),Object(X.jsx)(re,{})]})]})}ce.a.library.add(se.g);var Se=n(309),Ne=n(310),_e=n(183);function Ae(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),s=Object(j.a)(c,2),o=s[0],u=s[1],b=Object(a.useState)(""),h=Object(j.a)(b,2),f=h[0],O=h[1],m=Object(a.useState)(""),v=Object(j.a)(m,2),x=v[0],g=v[1],y=Object(a.useState)(""),k=Object(j.a)(y,2),w=k[0],C=k[1],S=Object(a.useState)(""),N=Object(j.a)(S,2),A=N[0],I=N[1];Object(a.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),n=localStorage.getItem("user-tenant");i(null!==e?e:""),u(null!==t?t:""),O(null!==n&&""!==n?n:"-")}),[]);var D=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x===w){e.next=4;break}return I(Q().pass_not_match),e.abrupt("return");case 4:if(""!==x&&""!==w){e.next=7;break}return I(Q().pass_not_null),e.abrupt("return");case 7:if(!window.confirm(Q().pass_change_confirm)){e.next=21;break}return e.prev=9,e.next=12,_("users",{password:x},r);case 12:n=e.sent,g(""),C(""),200===n.response.status&&I(Q().password_changed),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:[Q().welcome,"\xa0",Object(X.jsx)("b",{children:r}),":\xa0",Q().profile_page_desc]}),Object(X.jsxs)("main",{className:"page-content",children:[Object(X.jsxs)(Se.a,{fluid:!0,children:[Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{xs:1,children:"Username:\xa0"}),Object(X.jsx)(_e.a,{children:Object(X.jsx)("b",{children:r})})]}),Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{xs:1,children:Q().role}),Object(X.jsxs)(_e.a,{children:[o,"\xa0","admin"===o?Object(X.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===o?Object(X.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===o?Object(X.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===o?Object(X.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(X.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{xs:1,children:Q().tenant+" "}),Object(X.jsx)(_e.a,{children:Object(X.jsx)("b",{children:f})})]})]}),Object(X.jsx)("hr",{}),Object(X.jsxs)(Se.a,{fluid:!0,children:[Object(X.jsx)(_e.a,{children:Object(X.jsx)(Ne.a,{children:Object(X.jsx)("b",{children:"Edit password"})})}),Object(X.jsx)(Ne.a,{children:Object(X.jsx)(_e.a,{children:Object(X.jsxs)($.a,{onSubmit:D,children:[Object(X.jsx)(Ne.a,{children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:x,placeholder:Q().enter+" new password"})})}),Object(X.jsx)(Ne.a,{children:Object(X.jsxs)($.a.Group,{className:"mb-3",children:[Object(X.jsx)($.a.Control,{type:"password",onChange:function(e){e.preventDefault(),C(e.target.value)},value:w,placeholder:Q().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(X.jsx)($.a.Text,{id:"passwordHelpBlock",muted:!0,children:A})]})}),Object(X.jsx)(p.a,{variant:"primary",type:"submit",children:Q().submit})]})})})]})]})]})}n(257),n(258);function Ie(){return Object(X.jsx)("div",{className:"unAuth-page",children:Object(X.jsx)("div",{className:"info-box",children:Object(X.jsx)("div",{className:"info-text",children:Q().unauthorised_user})})})}var De=n(311),Pe=n(322),Fe=n(312),Re=n(327),Te=(n(259),r.a.createContext()),Be=r.a.createRef();function ze(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(!1),o=Object(j.a)(s,2),l=o[0],d=o[1],u=r.a.useRef(),b=Object(a.useContext)(Te).notifications;Be.current=0;var h=function(){return c(!1)};Object(a.useEffect)((function(){Be.current<b.notifications.length&&(Be.current=b.notifications.length,d(!0),setTimeout((function(){d(!1)}),600))}),[b.notifications]),!0===/Mobi/i.test(window.navigator.userAgent)?u.current="vertical":u.current=L;var f=b.notifications.filter((function(e){return"error"===e.name}));return Object(X.jsxs)("div",{className:"notificationBar",style:"vertical"===u.current&&!1===/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(X.jsxs)(p.a,{variant:"link",onClick:function(){c(!0)},style:{color:"#fff",textDecoration:"none"},children:[Q().notifications,"\xa0",Object(X.jsx)(De.a,{pill:!0,bg:f.length>0?"danger":"success",className:"element".concat(l?" highlight":""),children:b.notifications.length}),Object(X.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(X.jsxs)(Pe.a,{style:{backgroundColor:"#123651",color:"#fff"},show:i,onHide:h,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(X.jsx)(Pe.a.Header,{children:Object(X.jsxs)(Pe.a.Title,{children:[Q().notifications,"\xa0",Object(X.jsx)(De.a,{pill:!0,bg:f.length>0?"danger":"success",children:b.notifications.length}),"\xa0\xa0\xa0",Object(X.jsx)(p.a,{variant:"outline-secondary",onClick:function(){return h()},children:Q().close+" "+Q().notifications})]})}),Object(X.jsx)(Pe.a.Body,{children:Object(X.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==b.notifications.length&&Object(X.jsx)(p.a,{variant:"warning",onClick:function(){return b.ClearNotifications()},children:Q().clear_all}),Object(X.jsx)(Fe.a,{children:b.notifications.map((function(e,t){var n;return"info"===e.name&&(n="success"),"error"===e.name&&(n="danger"),Object(X.jsxs)(Re.a,{className:"d-inline-block m-1",bg:n,animation:!0,onClose:function(){b.RemoveNotification(t)},children:[Object(X.jsxs)(Re.a.Header,{children:[Object(X.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(X.jsx)("strong",{className:"me-auto",children:e.name}),Object(X.jsx)("small",{children:e.time.slice(0,15)})]}),Object(X.jsx)(Re.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}n(260);ce.a.library.add(se.h,se.a,se.m,se.k,se.j,se.l,se.i,se.b);var Ee=r.a.createRef(),Le=r.a.createRef(),We=r.a.createRef(),Ge=r.a.createRef(),He=r.a.createRef(),Ke=r.a.createRef(),Ue=r.a.createRef();function Me(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=(t[0],t[1]),i=localStorage.getItem("username"),c=localStorage.getItem("user-role"),s=localStorage.getItem("user-tenant");return Ke.current=null!==i?i:"",He.current=null!==c?c:"",Ue.current=null!==s&&""!==s?s:"-",Object(a.useEffect)((function(){function e(){var t,n;if(null!==We.current)n=We.current-1;else{if(null===Le.current){var a=localStorage.getItem("login-time");null!==a?(Le.current=a,t=parseInt(a,10)):(t=Date.now(),Le.current=t)}else t=parseInt(Le.current,10);null===Ge.current&&(Ge.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),n=(t+Ge.current-Date.now())/1e3}if(n<60&&(clearInterval(Ee.current),k().then((function(){We.current=null,Le.current=null,Ee.current=setInterval((function(){e()}),1e3)}))),n<=0)return localStorage.clear(),void window.location.replace("/");We.current=parseInt(n,10)}Ee.current=setInterval((function(){e()}),1e3)}),[]),Object(X.jsx)("nav",{className:"horizontal-nav",children:Object(X.jsx)("div",{className:"horizontal-nav-links",children:Object(X.jsx)("div",{className:"data-wrapper",children:Object(X.jsxs)(Se.a,{fluid:!0,children:[Object(X.jsxs)(Ne.a,{style:{padding:0},children:[Object(X.jsx)(_e.a,{children:Object(X.jsx)(b.b,{to:"/add/measurements",className:"nav-wrap",children:z})}),Object(X.jsx)(_e.a,{children:Object(X.jsxs)(b.b,{to:"/viewProfile/",children:[Q().welcome+" ",Object(X.jsx)("b",{children:Ke.current})]},"viewProfile")}),Object(X.jsx)(_e.a,{children:Object(X.jsxs)("div",{className:"horizontal-nav-text",children:[Q().role+" ","admin"===He.current?Object(X.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===He.current?Object(X.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===He.current?Object(X.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===He.current?Object(X.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(X.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(X.jsx)(_e.a,{children:Object(X.jsxs)("div",{className:"horizontal-nav-text",children:[Q().tenant+" ",Object(X.jsx)("b",{children:Ue.current})]})}),Object(X.jsx)(_e.a,{children:Object(X.jsx)(p.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:Q().logout})}),E.length>1&&Object(X.jsx)(_e.a,{children:Object(X.jsx)(Z,{})}),Object(X.jsx)(_e.a,{children:Object(X.jsx)(ze,{})})]}),Object(X.jsxs)(Ne.a,{style:{padding:0},children:[Object(X.jsx)("hr",{}),Object(X.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:Q().tools})]}),Object(X.jsx)(Ne.a,{style:{padding:0},children:r.a.Children.toArray(Object.keys(W).map((function(e){return Object(X.jsx)(_e.a,{children:Object(X.jsx)(b.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:e},e)})})))})]})})})})}var Je=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var n=!0;return t.forEach((function(t){n=n&&e(t)})),n}if(t.constructor===Object){var a=!0;return Object.entries(t).forEach((function(t){var n=Object(j.a)(t,2),r=(n[0],n[1]);a=a&&e(r)})),a}},Ve=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!Je(e)})).length},qe=function e(t){if(Array.isArray(t),t.constructor===Object)for(var n=Object.entries(t),a=0;a<n.length;a++){if(Array.isArray(n[a][1]))for(var r=0;r<n[a][1].length;r++)n[a][1][r].constructor===Object||Array.isArray(n[a][1][r])?(e(n[a][1][r]),Je(n[a][1][r])&&n[a][1].splice(r,1)):Je(n[a][1][r])&&n[a][1].splice(r,1);if(n[a][1].constructor===Object)for(var i=Object.entries(n[a][1]),c=0;c<i.length;c++)i[a][1].constructor===Object||Array.isArray(i[a][1])?e(i[a][1]):Je(i[a][1])&&delete n[a][1][i[a][0]]}return t},Ye=function e(t,n){if(void 0===t||void 0===n)return!1;if(t===n)return!0;if(typeof t!==typeof n)return!1;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===Object&&n.constructor!==Object||t.constructor!==Object&&n.constructor===Object)return!1;if(t.constructor===Object&&n.constructor===Object){var r=Object.keys(t),i=Object.keys(n);return r.length===i.length&&(!!e(r,i)&&!!e(Object.values(t),Object.values(n)))}return!1},Qe=n(320),Xe=n(321),Ze=function(e){var t,n=Object(a.useContext)(Te);if(t=void 0!==n?n.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.backFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(X.jsxs)($.a,{onSubmit:e.submitFunction,children:[Object(X.jsxs)(Se.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&r.a.Children.toArray(Object.entries(e.values).map((function(n){var a,i=Object(j.a)(n,2),c=i[0],s=i[1];if(void 0!==q[e.resource]&&void 0!==q[e.resource][c]&&void 0!==t.types&&void 0!==t.types[q[e.resource][c]])return function(t,n){return Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:t})}),Object(X.jsx)(_e.a,{sm:4,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsxs)($.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(X.jsx)("option",{children:Q().select+" "+t}),r.a.Children.toArray(Object.entries(n).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(X.jsx)("option",{value:n,children:a})})))]})})})]})}(c,t.types[q[e.resource][c]]);if(Array.isArray(s)){if("number"===typeof s[0])return a=c,Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:a})}),Object(X.jsx)(_e.a,{sm:4,children:r.a.Children.toArray(e.values[a].map((function(t,n){return Object(X.jsx)(Ne.a,{children:Object(X.jsxs)($.a.Group,{className:"mb-3",children:[Object(X.jsxs)($.a.Label,{children:["Insert ",Object(X.jsx)("b",{children:a}),Object(X.jsxs)("i",{children:["[",n,"]"]})]}),Object(X.jsx)($.a.Control,{type:"number",disabled:void 0!==e.disabledFields[a]&&e.disabledFields[a],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[a,n])},value:isNaN(e.values[a][n])?"":e.values[a][n],placeholder:Q().enter+" "+a})]})})})))})]});if("string"===typeof s[0])return function(n){var a;return t!=={}&&void 0!==t.data[n]&&(a=t.data[n]),Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:n})}),Object(X.jsx)(_e.a,{children:r.a.Children.toArray(e.values[n].map((function(r,i){return Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{sm:1,children:Object(X.jsx)(p.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([n,i])},children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(X.jsx)(_e.a,{sm:4,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:void 0!==t.data[n]?Object(X.jsx)(Xe.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],id:n,onChange:function(t,a){t.preventDefault(),e.handleChangesCallback(a,[n,i])},value:""===e.values[n][i]?null:e.values[n][i],options:a,renderInput:function(e){return Object(X.jsx)(Qe.a,Object(o.a)(Object(o.a)({},e),{},{label:Q().enter+" "+n}))}}):Object(X.jsx)($.a.Control,{type:"text",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n,i])},value:e.values[n][i],placeholder:Q().enter+" "+n})})}),Object(X.jsx)(_e.a,{md:"auto"})]})})))})]})}(c);if(s[0].constructor===Object)return function(n){return Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:n})}),Object(X.jsx)(_e.a,{children:r.a.Children.toArray(e.values[n].map((function(a,i){return Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{sm:1,children:Object(X.jsx)(p.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([n,i])},children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),r.a.Children.toArray(Object.entries(a).map((function(a){var c=Object(j.a)(a,2),s=c[0],o=c[1];return"number"===typeof o?Object(X.jsx)(_e.a,{sm:2,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[n,i,s])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:isNaN(e.values[n][i][s])?"":e.values[n][i][s],placeholder:Q().enter+" "+s},n+s+i+"")})}):void 0!==q[e.resource]&&void 0!==q[e.resource][n]&&void 0!==q[e.resource][n][s]&&void 0!==t.types&&void 0!==t.types[q[e.resource][n][s]]?Object(X.jsx)(_e.a,{sm:3,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsxs)($.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n,i,s])},value:e.values[n][i][s],disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],children:[Object(X.jsx)("option",{children:Q().select+" "+s}),r.a.Children.toArray(Object.entries(t.types[q[e.resource][n][s]]).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(X.jsx)("option",{value:n,children:a})})))]})})}):"string"===typeof o?Object(X.jsx)(_e.a,{sm:3,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"text",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n,i,s])},value:e.values[n][i][s],placeholder:Q().enter+" "+s})})}):Array.isArray(o)?0===o.length?s+" is empty":"range"===s&&"enum"!==e.values[n][i].type?"":Object(X.jsx)(Ne.a,{children:Object(X.jsx)(Oe.a,{defaultActiveKey:"0",children:Object(X.jsxs)(Oe.a.Item,{eventKey:"0",children:[Object(X.jsxs)(Oe.a.Header,{children:[Object(X.jsx)("b",{children:s})," : ",Ve(o)," items"]}),Object(X.jsx)(Oe.a.Body,{children:r.a.Children.toArray(o.map((function(t,a){if(t.constructor===Object){var c=Object.entries(t);return Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(X.jsx)(_e.a,{sm:1,children:Object(X.jsx)(p.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([n,i,s,a])},children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),r.a.Children.toArray(c.map((function(t){var r=Object(j.a)(t,2),c=r[0],o=r[1];return Object(X.jsx)(_e.a,{sm:3,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"text",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n,i,s,a,c])},value:o,placeholder:Q().enter+" "+c})})})})))]})}return"number"===typeof t?Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{sm:1,children:Object(X.jsx)(p.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([n,i,s,a])},children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(X.jsx)(_e.a,{sm:3,children:Object(X.jsx)($.a.Control,{type:"number",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[n,i,s,a])},value:isNaN(t)?"":t,placeholder:Q().enter+" "+s},""+n+i+s+a)})]}):"string"===typeof t?Object(X.jsxs)(Ne.a,{children:[Object(X.jsx)(_e.a,{sm:1,children:Object(X.jsx)(p.a,{disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([n,i,s,a])},children:Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(X.jsx)(_e.a,{sm:3,children:Object(X.jsx)($.a.Control,{type:"text",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n,i,s,a])},value:t,placeholder:Q().enter+" "+s},""+n+i+s+a)})]}):"Unknown data type"})))})]})})}):"Unknown data type"})))]})})))})]})}(c)}return"number"===typeof s?function(t){return Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:t})}),Object(X.jsx)(_e.a,{sm:4,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"number",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:Q().enter+" "+t})})})]})}(c):void 0!==Y[e.resource]&&void 0!==Y[e.resource][c]&&void 0!==t.data[Y[e.resource][c]]?function(n,a){var r;return t==={}||void 0===t.data[n]&&void 0===t.data[a]||(r=t.data[void 0!==a?a:n]),Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:n})}),Object(X.jsx)(_e.a,{sm:4,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)(Xe.a,{id:n,onChange:function(t,a){t.preventDefault(),e.handleChangesCallback(a,[n])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:""===e.values[n]?null:e.values[n],options:r,renderInput:function(e){return Object(X.jsx)(Qe.a,Object(o.a)(Object(o.a)({},e),{},{label:Q().enter+" "+n}))}})})})]})}(c,Y[e.resource][c]):"string"===typeof s?function(t){return Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(X.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(X.jsx)("b",{children:t})}),Object(X.jsx)(_e.a,{sm:4,children:Object(X.jsx)($.a.Group,{className:"mb-3",children:Object(X.jsx)($.a.Control,{type:"password"===t?"password":"text",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:Q().enter+" "+t})})})]})}(c):s.constructor===Object?"TODO ObjectFormRow":""})))]}),Object(X.jsx)(p.a,{variant:"primary",type:"submit",children:Q().submit},"submit"),"\xa0\xa0\xa0",Object(X.jsx)(p.a,{variant:"secondary",onClick:e.backFunction,children:Q().cancel},"cancel")]})},$e=n(88);function et(e,t){var n=Object.keys(e),a=Object.keys(t);return(n=n.filter((function(e){return-1!==a.indexOf(e)}))).sort((function(e,t){return a.indexOf(e)-a.indexOf(t)})),n.reduce((function(n,a){if(Array.isArray(e[a])&&0!==e[a].length&&e[a][0].constructor===Object){var r=e[a].map((function(e){return et(e,t[a][0])}));n[a]=r}else n[a]=e[a];return n}),{})}function tt(e,t,n){for(var a=Object.keys(e),r=$e(e),i=0;i<a.length;i++)Array.isArray(r[a[i]])&&(r=nt(r,[a[i]],t,n));return r}function nt(e,t,n,a){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=$e(e),c=i,s=$e(n[a]),l=Object(u.a)(t),d=0;d<l.length&&void 0!==t[d];d++)c=c[t[d]];for(var j=0;j<l.length&&void 0!==t[j]&&void 0!==s;j++)s="number"===typeof t[j]?s[0]:s[t[j]];return Array.isArray(s)?(void 0!==s&&(0===c.length?s[0].constructor===Object?c.push(Object(o.a)({},s[0])):c.push(""):c[0].constructor===Object?0===c.filter((function(e){return Je(e)})).length&&c.push(Object(o.a)({},s[0])):c.includes("")||c.push("")),void 0!==r&&void 0===s&&(0===c.length||0===c.filter((function(e){return Je(e)})).length)&&(r.constructor===Object?c.push(Object(o.a)({},r)):c.push(r)),i):i}var at=n(88);function rt(e){var t=Object(h.o)(),n=t.resource,r=t.id,i=Object(a.useState)(),c=Object(j.a)(i,2),o=c[0],b=c[1],p=Object(a.useState)(""),f=Object(j.a)(p,2),O=f[0],m=f[1],v=Object(h.m)(),x=Object(a.useState)(at(U[n])),g=Object(j.a)(x,2),y=g[0],k=g[1],w=Object(a.useState)({}),C=Object(j.a)(w,2),S=C[0],N=(C[1],Object(a.useState)(void 0)),A=Object(j.a)(N,2),I=A[0],D=A[1],F=Object(a.useContext)(Te).fetched,R=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===F.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:n=e.sent,F.UpdateData(n.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){void 0!==Y[n]&&Object.values(Y[n]).forEach((function(e){return R(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,a,i,c,s,o=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,P(n,t);case 3:a=e.sent,i=a.docs[0],c=at(y),c=et(i,c),s=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,a,i,s,o,d,u,j,h,p,f,O;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==J[n]){e.next=7;break}for(D({}),t=Object.keys(c),a=0;a<t.length;a++)i=t[a],c=nt(c,[i],U,n);return k(c),b(at(c)),e.abrupt("return");case 7:s={},void 0!==I&&(s=I),o=Object.entries(J[n]),d=0;case 11:if(!(d<o.length)){e.next=24;break}if(u=o[d][0],j=o[d][1],void 0!==c[u]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==j.type){e.next=21;break}return e.next=19,j.policy(r);case 19:h=e.sent,s[u]=h;case 21:d++,e.next=11;break;case 24:for(p=Object.keys(c),f=0;f<p.length;f++)O=p[f],void 0!==s[O]&&!1!==s[O]||(c=nt(c,[O],U,n));D(s),k(c),b(at(c));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:r};e({filter:JSON.stringify(t)})}),[]);var T=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var a,i,c,d,j,b,h,p,f,O,x,g,k,w,C,N;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),a=at(y),i=at(o),qe(a),qe(i),c={},d=Object.entries(a),j=0;j<d.length;j++)if(b=d[j][0],h=d[j][1],Array.isArray(h)){if(void 0===c[b]&&(c[b]={add:[],remove:[],update:[]}),p=Object(u.a)(i[b]),void 0!==S[b])for(f=0;f<S[b].indexes.length;f++)(O=p.splice(S[b].indexes[f][0],1)[0]).constructor===Object?(x=Object.keys(O)[0],c[b].remove.push(O[x])):c[b].remove.push(O);for(g=0;g<a[b].length;g++)g<p.length&&!Ye(a[b][g],p[g])&&(a[b][g].constructor===Object?(w=Object.keys(p[g])[0],c[b].update.push((k={},Object(s.a)(k,w,p[g][w]),Object(s.a)(k,"new",a[b][g]),k))):(c[b].add.push(a[b][g]),c[b].remove.push(p[g]))),g>=p.length&&c[b].add.push(a[b][g]);Ye(c[b],{add:[],remove:[],update:[]})&&delete c[b]}else h.constructor===Object||h!==o[b]&&(c[b]=h);return e.prev=8,e.next=11,_(n,c,r);case 11:N=e.sent,C=N.response,m(C.statusText),v("/"+n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),C=e.t0.error.response,m(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(X.jsx)("b",{children:n}),"\xa0of id:\xa0",Object(X.jsx)("b",{children:r}),"\xa0from:"]}),Object(X.jsxs)("main",{className:"page-content",children:[Object(X.jsx)(Ze,{values:y,resource:n,functionalFields:U,disabledFields:I,handleChangesCallback:function(e,t){var a,r=at(y),i=r,c=-1;for(a=0;a<t.length-1;a++)i=i[t[a]],"number"===typeof t[a]&&(c=a);if("number"===typeof t[a]&&(c=a),i[t[a]]=e,-1!==c){var s="number"===typeof e?NaN:"";r=nt(r,t.slice(0,c),U,n,s)}k(r)},arrayDeleteCallback:function(e){var t,a=at(y),r=a;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var i=r.splice(e[t],1),c="number"===typeof i[0]?NaN:"";a=nt(a,e.slice(0,t),U,n,c),1===t&&(void 0===S[e[0]]&&(S[e[0]]={indexes:[],elements:[],minDel:1/0}),Je(i[0])||(S[e[0]].elements.push(i[0]),S[e[0]].indexes.push(e[t]>=S[e[0]].minDel?e[t]+S[[e[0]]].indexes.filter((function(n){return n>=e[t]})).length:e[t]),e[t]<S[e[0]].minDel&&(S[e[0]].minDel=e[t]))),k(a)},submitFunction:T,backFunction:function(e){e.preventDefault(),v(-1)}}),Object(X.jsx)("br",{}),Object(X.jsx)("font",{style:{marginLeft:"5px"},children:O})]})]})}var it=n(326),ct=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(X.jsxs)($.a,{onSubmit:e.submitFunction,children:[Object(X.jsx)($.a.Label,{children:Object(X.jsx)("b",{children:Q().select_file})}),Object(X.jsx)($.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var n=t.target.files[0];e.setFile(n);var a=new FileReader;a.onloadend=function(){var t=a.result;if(n.name.endsWith(".csv")){var r=new RegExp("\\r","g"),i=t.replace(r,"").split("\n");e.setContentHeader(i[0]),i.splice(0,1),e.setContentBody(i)}if(n.name.endsWith(".json")){var c=a.result;e.setContentPlain(c)}},a.readAsText(n)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(X.jsx)(Oe.a,{children:Object(X.jsxs)(Oe.a.Item,{eventKey:"0",children:[Object(X.jsx)(Oe.a.Header,{children:Q().file_content}),Object(X.jsx)(Oe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(X.jsxs)(fe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(X.jsx)("thead",{children:Object(X.jsx)("tr",{children:r.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(X.jsx)("th",{children:e})})))})}),Object(X.jsx)("tbody",{children:r.a.Children.toArray(e.contentBody.map((function(e){return Object(X.jsx)("tr",{children:r.a.Children.toArray(e.split(",").map((function(e){return Object(X.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(X.jsx)(Oe.a,{children:Object(X.jsxs)(Oe.a.Item,{eventKey:"0",children:[Object(X.jsx)(Oe.a.Header,{children:Q().file_content}),Object(X.jsx)(Oe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:e.contentPlain})]})}),Object(X.jsx)(p.a,{variant:"primary",type:"submit",children:Q().submit},"submit"),"\xa0\xa0\xa0",Object(X.jsx)(p.a,{variant:"secondary",onClick:e.backFunction,children:Q().cancel},"cancel")]})},st=n(88);function ot(e){var t=Object(h.o)().resource,n=Object(b.c)(),r=Object(j.a)(n,2),i=r[0];r[1];void 0!==e.resource&&(t=e.resource);var c,s=Object(h.m)(),o=Object(a.useState)("form"),u=Object(j.a)(o,2),p=u[0],f=u[1],O=Object(a.useState)(""),m=Object(j.a)(O,2),v=m[0],x=m[1],g=Object(a.useState)(st(M[t])),y=Object(j.a)(g,2),k=y[0],C=y[1],N=Object(a.useState)(void 0),_=Object(j.a)(N,2),A=_[0],I=_[1],D=Object(a.useState)(null),F=Object(j.a)(D,2),R=F[0],T=F[1],B=Object(a.useState)(null),z=Object(j.a)(B,2),E=z[0],L=z[1],W=Object(a.useState)(null),G=Object(j.a)(W,2),H=G[0],K=G[1],U=Object(a.useContext)(Te);c=void 0!==U?U.fetched:{};var J=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:n=e.sent,c.UpdateData(n.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0!==Y[t]&&Object.values(Y[t]).forEach((function(e){return J(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var n,a,r,i,c=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,P(t,n);case 3:a=e.sent,r=a.docs[0],i=st(k),i=tt(i=et(r,i),M,t),C(i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==i.get("from")&&""!==i.get("from")){var n={_id:i.get("from")};e({filter:JSON.stringify(n)})}}),[i,t]),void 0===M[t])return Object(X.jsx)("div",{children:"This entity cannot be posted"});var q=function(e){e.preventDefault(),s(-1)},Q=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var a,r,i,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=void 0,void 0!==(r=st(k)).token&&(a=r.token,delete r.token),i=st(r),qe(i),e.prev=6,e.next=9,S(t,JSON.stringify(i),a);case 9:o=e.sent,c=o.response,x(c.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),c=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===c.status&&!0===window.confirm("Back to resource page?")&&s("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var a,r,i,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!A.name.endsWith(".csv")){e.next=17;break}return(r=new FormData).append("file",A),e.prev=4,e.next=7,w(t,r);case 7:i=e.sent,a=i.response,x(a.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),a=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!A.name.endsWith(".json")){e.next=31;break}return e.prev=18,e.next=21,S(t,H,void 0);case 21:c=e.sent,a=c.response,x(a.statusText),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(18),console.log(e.t1),a=e.t1.error.response,x(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 31:200===a.status&&!0===window.confirm("Back to resource page?")&&s("/"+t);case 32:case"end":return e.stop()}}),e,null,[[4,12],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(X.jsx)("b",{children:t})]}),Object(X.jsxs)("main",{className:"page-content",children:[Object(X.jsxs)(it.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return f(e)},defaultActiveKey:"form",children:[V[t].includes("form")&&Object(X.jsx)(it.a.Item,{children:Object(X.jsx)(it.a.Link,{eventKey:"form",children:"Form"})}),V[t].includes("file")&&null===i.get("from")&&Object(X.jsx)(it.a.Item,{children:Object(X.jsx)(it.a.Link,{eventKey:"file",children:"File"})})]}),Object(X.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===p&&Object(X.jsxs)("div",{style:{margin:"5px"},children:[Object(X.jsx)(Ze,{values:k,resource:t,functionalFields:M,disabledFields:{},handleChangesCallback:function(e,n){var a,r=st(k),i=r,c=-1;for(a=0;a<n.length-1;a++)i=i[n[a]],"number"===typeof n[a]&&(c=a);i[n[a]]=e,"number"===typeof n[a]&&(c=a),-1!==c&&(r=nt(r,n.slice(0,c),M,t)),C(r)},arrayDeleteCallback:function(e){var n,a=st(k),r=a;for(n=0;n<e.length-1&&void 0!==e[n];n++)r=r[e[n]];r.splice(e[n],1),a=nt(a,e.slice(0,n),M,t),C(a)},submitFunction:Q,backFunction:q}),Object(X.jsx)("br",{}),Object(X.jsx)("font",{style:{marginLeft:"5px"},children:v})]}),"file"===p&&Object(X.jsxs)("div",{style:{margin:"5px"},children:[Object(X.jsx)(ct,{submitFunction:Z,backFunction:q,setContentBody:L,setContentHeader:T,setContentPlain:K,setFile:I,contentPlain:H,contentHeader:R,contentBody:E}),Object(X.jsx)("font",{style:{marginLeft:"5px"},children:v})]})]})]})]})}var lt=n(88);function dt(e){var t="experiments",n=Object(b.c)(),i=Object(j.a)(n,2),c=i[0],s=(i[1],Object(h.m)()),o=Object(a.useState)("form"),u=Object(j.a)(o,2),p=u[0],f=u[1],O=Object(a.useState)(""),m=Object(j.a)(O,2),v=m[0],x=m[1],g=Object(a.useState)(lt(M[t])),y=Object(j.a)(g,2),k=y[0],C=y[1],N=Object(a.useState)({}),_=Object(j.a)(N,2),A=_[0],I=_[1],D=Object(a.useState)(),F=Object(j.a)(D,2),R=F[0],T=F[1],B=Object(a.useState)(void 0),z=Object(j.a)(B,2),E=z[0],L=z[1],W=Object(a.useState)(null),G=Object(j.a)(W,2),H=G[0],K=G[1],U=Object(a.useState)(null),J=Object(j.a)(U,2),q=J[0],Y=J[1],Z=Object(a.useState)(null),ee=Object(j.a)(Z,2),te=ee[0],ne=ee[1];if(Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,n,a=arguments;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,P("protocols",t);case 3:n=e.sent,T(n.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,c]),void 0===M[t])return Object(X.jsx)("div",{children:"This entity cannot be posted"});var ae=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,a,r,i,c,s,o,d,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,a={_id:t.target.value},r={filter:JSON.stringify(a)},e.next=6,P("protocols",r);case 6:for(i=e.sent,c=i.docs[0],s=[],o=0;o<c.metadata.length;o++)"scalar"===c.metadata[o].type&&s.push({name:c.metadata[o].name,value:NaN}),"text"===c.metadata[o].type&&s.push({name:c.metadata[o].name,value:""}),"vector"===c.metadata[o].type&&s.push({name:c.metadata[o].name,value:[NaN]});(d=lt(k)).protocol=n,0!==s.length&&(d.metadata=s),(u=lt(A)).protocol=!0,I(u),C(d);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var a,r,i,c,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=void 0,void 0!==(r=lt(k)).token&&(a=r.token,delete r.token),i=lt(r),qe(i),e.prev=6,e.next=9,S(t,JSON.stringify(i),a);case 9:o=e.sent,c=o.response,x(c.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),c=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===c.status&&!0===window.confirm("Back to resource page?")&&s("/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){e.preventDefault(),s(-1)},ce=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var a,r,i,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!E.name.endsWith(".csv")){e.next=17;break}return(r=new FormData).append("file",E),e.prev=4,e.next=7,w(t,r);case 7:i=e.sent,a=i.response,x(a.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),a=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!E.name.endsWith(".json")){e.next=31;break}return e.prev=18,e.next=21,S(t,te,void 0);case 21:c=e.sent,a=c.response,x(a.statusText),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(18),console.log(e.t1),a=e.t1.error.response,x(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 31:200===a.status&&!0===window.confirm("Back to resource page?")&&s("/"+t);case 32:case"end":return e.stop()}}),e,null,[[4,12],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(X.jsx)("b",{children:t})]}),Object(X.jsxs)("main",{className:"page-content",children:[Object(X.jsxs)(it.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return f(e)},defaultActiveKey:"form",children:[V[t].includes("form")&&Object(X.jsx)(it.a.Item,{children:Object(X.jsx)(it.a.Link,{eventKey:"form",children:"Form"})}),V[t].includes("file")&&null===c.get("from")&&Object(X.jsx)(it.a.Item,{children:Object(X.jsx)(it.a.Link,{eventKey:"file",children:"File"})})]}),Object(X.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===p&&void 0!==R&&Object(X.jsxs)("div",{style:{margin:"5px"},children:[Object(X.jsxs)($.a.Select,{"aria-label":Q().select+" protocol",onChange:ae,children:[Object(X.jsxs)("option",{children:[Q().select," protocol"]}),r.a.Children.toArray(R.map((function(e){return Object(X.jsx)("option",{value:e,children:e})})))]}),Object(X.jsx)("br",{}),Object(X.jsx)(Ze,{values:k,resource:t,functionalFields:M,disabledFields:A,handleChangesCallback:function(e,n){var a,r=lt(k),i=r,c=-1;for(a=0;a<n.length-1;a++)i=i[n[a]],"number"===typeof n[a]&&(c=a);if("number"===typeof n[a]&&(c=a),i[n[a]]=e,-1!==c){var s="number"===typeof e?NaN:"";r=nt(r,n.slice(0,c),M,t,s)}C(r)},arrayDeleteCallback:function(e){var n,a=lt(k),r=a;for(n=0;n<e.length-1&&void 0!==e[n];n++)r=r[e[n]];var i="number"===typeof r.splice(e[n],1)[0]?NaN:"";a=nt(a,e.slice(0,n),M,t,i),C(a)},submitFunction:re,backFunction:ie}),Object(X.jsx)("br",{}),Object(X.jsx)("font",{style:{marginLeft:"5px"},children:v})]}),"file"===p&&Object(X.jsxs)("div",{style:{margin:"5px"},children:[Object(X.jsx)(ct,{submitFunction:ce,backFunction:ie,setContentBody:Y,setContentHeader:K,setContentPlain:ne,setFile:L,contentPlain:te,contentHeader:H,contentBody:q}),Object(X.jsx)("font",{style:{marginLeft:"5px"},children:v})]})]})]})]})}n(88);var ut=function(e){return void 0===e.samples||void 0===e.submitFunction||void 0===e.handleAddSample||void 0===e.handleDeleteSample||void 0===e.items||void 0===e.getAddress||void 0===e.msg||void 0===e.handleChanges||void 0===e.refreshLocation||void 0===e.addrMsg?"Loading":Object(X.jsxs)(Se.a,{fluid:!0,children:[Object(X.jsx)(Ne.a,{children:Object(X.jsxs)("b",{children:["Samples :",e.samples.length]})}),Object(X.jsx)("br",{}),r.a.Children.toArray(e.samples.map((function(t,n){return Object(X.jsx)(Ne.a,{style:{paddingBottom:"10px"},children:Object(X.jsx)(Oe.a,{defaultActiveKey:e.samples.length-1,children:Object(X.jsxs)(Oe.a.Item,{eventKey:n,children:[Object(X.jsx)(Oe.a.Header,{children:Object(X.jsx)("b",{children:Object(X.jsxs)("i",{children:["Sample [",n,"]"]})})}),Object(X.jsxs)(Oe.a.Body,{children:[Object(X.jsxs)(p.a,{variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.handleDeleteSample([n])},children:[Object(X.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",opacity:.85}}),Object(X.jsx)("b",{children:Q().remove})]}),r.a.Children.toArray(Object.entries(t.values).map((function(t){var a=Object(j.a)(t,2),i=a[0],c=a[1];return Object(X.jsxs)(Ne.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px",paddingBottom:5},children:[Object(X.jsxs)(_e.a,{sm:2,children:[Object(X.jsx)("b",{children:Object(X.jsx)("i",{children:c.name})}),"address"===c.name||"indirizzo"===c.name?Object(X.jsx)(p.a,{variant:"link",onClick:Object(d.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshLocation();case 2:case"end":return t.stop()}}),t)}))),children:Object(X.jsx)("i",{className:"fa fa-map-pin","aria-hidden":"true",title:"Refresh Position",style:{width:"20px",height:"20px",marginRight:"10px",opacity:.85}})}):""]}),Object(X.jsx)(_e.a,{sm:2,children:"enum"===c.type?Object(X.jsxs)($.a.Select,{"aria-label":Q().select+" "+c.name,value:c.value,onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,[n,"values",parseInt(i,10),"value"])},children:[Object(X.jsx)("option",{value:"",children:Q().select+" "+c.name}),r.a.Children.toArray(c.enumValues.map((function(e){return Object(X.jsx)("option",{value:e,children:e})})))]}):"text"===c.type?"address"===c.name||"indirizzo"===c.name?Object(X.jsx)(r.a.Fragment,{children:Object(X.jsxs)($.a.Group,{children:[Object(X.jsx)($.a.Control,{type:"text",id:c.name,value:c.value,onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,[n,"values",parseInt(i,10),"value"])},"aria-label":Q().enter+" "+c.name}),Object(X.jsx)($.a.Text,{className:"text-muted",children:e.addrMsg})]})}):Object(X.jsx)($.a.Control,{type:"text",id:c.name,value:c.value,onChange:function(t){t.preventDefault(),e.handleChanges(t.target.value,[n,"values",parseInt(i,10),"value"])},"aria-label":Q().enter+" "+c.name}):"date"===c.name||"data"===c.name?Object(X.jsx)($.a.Control,{type:"date",id:c.name,onChange:function(t){t.preventDefault(),e.handleChanges(Date.parse(t.target.value),[n,"values",parseInt(i,10),"value"])},"aria-label":Q().enter+" "+c.name}):Object(X.jsx)($.a.Control,{type:"number",id:c.name,value:isNaN(c.value)?"":c.value,onChange:function(t){t.preventDefault(),e.handleChanges(parseInt(t.target.value,10),[n,"values",parseInt(i,10),"value"])},"aria-label":Q().enter+" "+c.name})})]})})))]})]})})})}))),0!==e.samples.length&&Object(X.jsx)(p.a,{variant:"link",onClick:function(){e.handleAddSample(e.samples,e.items)},children:Object(X.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add sample",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}),Object(X.jsx)("br",{}),Object(X.jsx)(p.a,{variant:"primary",onClick:e.submitFunction,children:Q().submit}),Object(X.jsx)("hr",{}),Object(X.jsx)("br",{}),Object(X.jsx)("font",{children:e.msg})]})};ce.a.library.add(se.e);var jt=n(88),bt="controllo",ht=[];function pt(e){var t="measurements",n=Object(b.c)(),r=Object(j.a)(n,2),i=r[0],c=(r[1],Object(a.useState)([])),s=Object(j.a)(c,2),u=s[0],p=s[1],f=Object(a.useState)([]),O=Object(j.a)(f,2),m=O[0],v=O[1],x=Object(a.useState)(""),g=Object(j.a)(x,2),y=g[0],k=g[1],w=Object(h.m)(),C=Object(a.useState)(""),N=Object(j.a)(C,2),_=N[0],A=N[1],I=Object(a.useState)({}),D=Object(j.a)(I,2),F=D[0],R=(D[1],Object(a.useState)(void 0)),B=Object(j.a)(R,2),z=(B[0],B[1],Object(a.useContext)(Te).fetched),E=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===z.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t,{limit:100});case 5:n=e.sent,z.UpdateData(n.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(a.useEffect)((function(){void 0!==Y[t]&&Object.values(Y[t]).forEach((function(e){return E(e)}))}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,n,a,r,i,c;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:bt},n={filter:JSON.stringify(t)},e.prev=2,e.next=5,P("features",n);case 5:a=e.sent,r=a.docs[0],i=r.items,c=L([],i),c=H(c),p(c),v(i),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:return e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[e,i]),void 0===M[t])return Object(X.jsx)("div",{children:"This entity cannot be posted"});var L=function(e,t){var n=[],a=jt(e);return a.length>0?a.push(Object(o.a)({},a[a.length-1])):(t.forEach((function(e){"number"===e.type?0===e.dimension?n.push({name:e.name,value:NaN,type:e.type}):n.push([{name:e.name,value:NaN,type:e.type}]):"text"===e.type?0===e.dimension?n.push({name:e.name,value:"",type:e.type}):n.push([{name:e.name,value:"",type:e.type}]):"enum"===e.type&&(0===e.dimension?n.push({name:e.name,value:"",enumValues:e.range,type:e.type}):n.push([{name:e.name,value:"",enumValues:e.range,type:e.type}]))})),a.push({values:n})),p(a),a},W=function(){var e=Object(d.a)(Object(l.a)().mark((function e(n){var a,r,i,c,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=void 0,r=jt(F),i=u.map((function(e){return{values:e.values.map((function(e){return e.value}))}})),void 0!==r.token&&(a=r.token,delete r.token),qe(r),r.feature=bt,r.samples=i,r.tags=ht,r.feature=bt,r.thing="Genova",r.device="think-before-device",e.prev=12,e.next=15,S(t,JSON.stringify(r),a);case 15:s=e.sent,c=s.response,A(c.statusText),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(12),console.log(e.t0),c=e.t0.error.response,A(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 25:200===c.status&&!0===window.confirm("Back to resource page?")&&w("/"+t);case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=Object(d.a)(Object(l.a)().mark((function e(a){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.coords.latitude,n=a.coords.longitude,e.prev=2,e.next=5,T(t,n);case 5:r=H(),p(r),k(Q().geo_update),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error while connecting to Geolocalization APIs"),console.log(e.t0),k(Q().geo_failed);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()):(console.log("Geolocation is not supported by this browser."),k(Q().geo_failed));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=void 0!==e?e:jt(u);return t=t.map((function(e){return e.values=e.values.map((function(e){var t=Object(o.a)({},e);return"address"!==t.name&&"indirizzo"!==t.name||(t.value=K()),t})),{values:e.values}}))},K=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=localStorage.getItem("continent"),a=localStorage.getItem("continentCode"),r=localStorage.getItem("countryName"),i=localStorage.getItem("countryCode"),c=localStorage.getItem("principalSubdivision"),s=localStorage.getItem("city"),o=localStorage.getItem("locality");return!0===e?!0===t?a+" - "+i+" - "+c+" - "+s+" - "+o:n+" - "+r+" - "+c+" - "+s+" - "+o:s+" - "+o};return Object(X.jsxs)("div",{className:"page",children:[Object(X.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(X.jsx)("b",{children:t})]}),Object(X.jsx)("main",{children:Object(X.jsx)(ut,{samples:u,items:m,submitFunction:W,backFunction:function(e){e.preventDefault(),w(-1)},getAddress:K,msg:_,handleAddSample:L,handleDeleteSample:function(e){var t,n=jt(u),a=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)a=a[e[t]];1!==a.length&&(a.splice(e[t],1),p(n))},handleChanges:function(e,t){var n,a=jt(u),r=a;for(n=0;n<t.length-1;n++)r=r[t[n]],"number"===typeof t[n]&&n;t[n],r[t[n]]=e,p(a)},refreshLocation:G,addrMsg:y})})]})}var ft=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(),p=Object(j.a)(c,2),f=p[0],O=p[1],m=Object(a.useState)({}),v=Object(j.a)(m,2),x=v[0],y=v[1],k=r.a.useRef(),w=localStorage.getItem("token"),C=localStorage.getItem("city");function S(e){i((function(t){return[e].concat(t)}))}function N(e){var t=Object(u.a)(n);t.splice(e,1),i(t)}function _(){i([])}var A={notifications:n,PushNotification:S,RemoveNotification:N,ClearNotifications:_};g.ClearNotifications=_,g.PushNotification=S,g.RemoveNotification=N,Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=12;break}return navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,n=e.coords.longitude})),e.prev=2,e.next=5,T(t,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Error while connecting to Geolocalization APIs");case 10:e.next=13;break;case 12:console.log("Geolocation is not supported by this browser.");case 13:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();if(null===C)try{e()}catch(t){console.log(t)}}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("types",{},"");case 3:t=e.sent,O(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===f)try{e()}catch(t){console.log(t)}}),[]);var I={types:f,data:x,UpdateData:function(e,t){y((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(s.a)({},t,Object(u.a)(e)))}))}};return 1==/Mobi/i.test(window.navigator.userAgent)?k.current="vertical":k.current=L,null===w?Object(X.jsx)("div",{className:"app",children:Object(X.jsx)(b.a,{children:Object(X.jsxs)(h.d,{children:[Object(X.jsx)(h.b,{path:"/",element:Object(X.jsx)(ae,{})}),Object(X.jsx)(h.b,{path:"/add/tenants",element:Object(X.jsx)(ot,{resource:"tenants"})})]})})}):Object(X.jsx)(Te.Provider,{value:{notifications:A,fetched:I},children:Object(X.jsx)(b.a,{children:Object(X.jsxs)(Se.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100vh"},children:["horizontal"===k.current?Object(X.jsx)(Ne.a,{style:{padding:0},children:Object(X.jsx)(Me,{})}):"",Object(X.jsxs)(Ne.a,{style:{padding:0},children:["vertical"===k.current?Object(X.jsx)(_e.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(X.jsx)(pe,{})}):"",1==/Mobi/i.test(window.navigator.userAgent)&&Object(X.jsx)(_e.a,{md:"auto",style:{padding:0},children:Object(X.jsx)(ze,{})}),Object(X.jsx)(_e.a,{style:{paddingLeft:0,paddingRight:0},children:Object(X.jsxs)(h.d,{children:[Object(X.jsx)(h.b,{path:"/",element:Object(X.jsx)(h.a,{replace:!0,to:"/add/measurements"})}),Object(X.jsx)(h.b,{path:"/home",element:Object(X.jsx)(re,{})}),Object(X.jsx)(h.b,{path:"/viewProfile",element:Object(X.jsx)(Ae,{})}),Object(X.jsx)(h.b,{path:"/add/experiments/",element:Object(X.jsx)(dt,{})}),Object(X.jsx)(h.b,{path:"/add/measurements/",element:Object(X.jsx)(pt,{})}),Object(X.jsx)(h.b,{path:"/edit/:resource/:id",element:Object(X.jsx)(rt,{})}),Object(X.jsx)(h.b,{path:"/add/:resource/",element:Object(X.jsx)(ot,{})}),Object(X.jsx)(h.b,{path:"/:page",element:Object(X.jsx)(Ce,{res:":page"})}),Object(X.jsx)(h.b,{path:"/unauthorized",element:Object(X.jsx)(Ie,{})}),Object(X.jsx)(h.b,{path:"/404",element:Object(X.jsx)(ie,{})}),Object(X.jsx)(h.b,{path:"*",element:Object(X.jsx)(h.a,{to:"/404",replace:!0})})]})}),"vertical"===k.current&&0==/Mobi/i.test(window.navigator.userAgent)&&Object(X.jsx)(_e.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(X.jsx)(ze,{})})]})]})})})};c.a.render(Object(X.jsx)(r.a.StrictMode,{children:Object(X.jsx)(ft,{})}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.b1b2e68d.chunk.js.map