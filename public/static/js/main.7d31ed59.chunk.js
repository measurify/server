(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{177:function(e,t,r){},204:function(e,t,r){},232:function(e,t){},234:function(e,t){},249:function(e,t,r){},250:function(e,t,r){},254:function(e,t,r){},255:function(e,t,r){},256:function(e,t,r){},257:function(e,t,r){},258:function(e,t,r){},259:function(e,t,r){},260:function(e,t,r){},269:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(34),i=r.n(s),c=(r(204),r(20)),o=r(3),l=r(4),d=r(23),u=r(5),j=r(13),b=r.n(j),p=r(24),h=r(21),f=r(307),m={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",resources:"Risorse",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",old_pass_empty:"Per favore, inserire la vecchia password",old_pass_wrong:"La vecchia password \xe8 sbagliata",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta",no_file:"Si prega di selezionare un file",duplicate_error:"Nel database \xe8 gi\xe0 presente una risorsa con"},x={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",resources:"Resources",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",old_pass_empty:"Please. enter old password",old_pass_wrong:"The old password is wrong",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired",no_file:"Please, select a file",duplicate_error:"The database already contains a resource with"},O=r(207).default,v=r(225),g=O.create({httpsAgent:new v.Agent({})}),y={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function k(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={username:"".concat(e),password:"".concat(t),tenant:"".concat(r)},s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=B+"/login";return new Promise((function(e,t){g.post(i,a,s).then((function(t){!0===n&&(localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-tenant",r),localStorage.setItem("login-time",(new Date).getTime().toString())),e(t)})).catch((function(e){t(e)}))}))}function w(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:T()}},t=B+"/login";return new Promise((function(r,n){g.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),r(e)})).catch((function(e){n(e)}))}))}function C(e,t){return N.apply(this,arguments)}function N(){return N=Object(c.a)(b.a.mark((function e(t,r){var n,a,s,i,c,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},void 0===(a=o.length>3&&void 0!==o[3]?o[3]:void 0)&&(a=T()),s=B+"/"+t+"/file",console.log("POST file:"+s),i={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(n).forEach((function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];i[r]=n})),c={headers:i},e.abrupt("return",new Promise((function(e,n){g.post(s,r,c).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),n({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function S(e,t){return _.apply(this,arguments)}function _(){return _=Object(c.a)(b.a.mark((function e(t,r){var n,a,s,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=T()),a=B+"/"+t+"/",console.log("POST :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,n){g.post(a,r,s).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),n({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function A(e,t,r){return D.apply(this,arguments)}function D(){return D=Object(c.a)(b.a.mark((function e(t,r,n){var a,s,i,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=B+"/"+t+"/"+n,void 0===a&&(a=T()),console.log("PUT :"+s),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){g.put(s,r,i).then((function(a){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)}),e({response:a})})).catch((function(e){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e,t){return I.apply(this,arguments)}function I(){return I=Object(c.a)(b.a.mark((function e(t,r){var n,a,s,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:void 0,a=B+"/"+t,void 0===n&&(n=T()),void 0!==r&&(a+="/"+r),console.log("DELETE :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,n){g.delete(a,s).then((function(n){void 0!==r?y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+r+", of type: "+t}):y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:n})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+r+", of type: "+t+". "+e.message}),404===e.statusCode&&y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),n({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function F(e){return R.apply(this,arguments)}function R(){return R=Object(c.a)(b.a.mark((function e(t){var r,n,a,s,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2?i[2]:void 0,a=B+"/"+t+"/",void 0===n&&(n=T()),a=void 0!==r.filter?a.concat("?filter="+r.filter):a.concat("?filter="),void 0!==r.limit&&(a=a.concat("&limit="+r.limit)),void 0!==r.page&&(a=a.concat("&page="+r.page)),console.log("GET :"+a),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(a,s).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function T(){return localStorage.getItem("token")}var B="https://hi-drive.measurify.org/v1",E="Admin Dashboard",z=[],L="vertical",W={users:["username","type","actions"],protocols:["_id","description","actions"],experiments:["_id","description","protocol","actions"]},H={},K={users:["view","delete"],protocols:["view","delete"],experiments:["view","delete"]},G={users:["username","type","actions","fieldmask","status"],protocols:["_id","description","metadata"],experiments:["_id","description","state","startDate","endDate","manager","place","protocol","metadata"]},U={experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}],metadata:[{name:"",value:""}],tags:[""],visibility:""}},J={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},users:{username:"",password:"",type:""},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}]}},M={},V={users:["form","file"],tenants:["form"],protocols:["form","file"],experiments:["form","file"]},q={users:{type:"UserRoles",status:"UserStatusTypes"},protocols:{metadata:{type:"MetadataTypes"},field:{type:"TopicFieldTypes"}},experiments:{visibility:"VisibilityTypes"}},Y={},Q={};function X(){var e=localStorage.getItem("language");return 0===z.length?x:(1===z.length&&(e=z[0]),"it"===e?m:"en"===e?x:"it"===navigator.language.substring(0,2)?m:(navigator.language.substring(0,2),x))}Q.protocols={_id:"Please, enter protocol's name.",description:"Please, enter a short protocol's description."},Q.experiments={_id:"Please, enter experiment's name (N.B. don't use the # character in experiment's name).",state:"Please, enter 0 for ongoing experiment, 1 for finished experiment.",description:"Please, enter a short experiment's description.",manager:"Please, enter the experiment's company name (as a short Acronym).",startDate:"Please, use yyyy/mm/dd format.",endDate:"Please, use yyyy/mm/dd format."};r(249),r(250);var Z=r(0),$=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(Z.jsxs)("div",{children:[X().language,Object(Z.jsxs)("div",{children:[z.includes("it")&&Object(Z.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),z.includes("en")&&Object(Z.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},ee=r(323),te=a.a.createRef(),re=a.a.createRef(),ne=a.a.createRef(),ae=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],a=t[1];function s(){return(s=Object(c.a)(b.a.mark((function e(t){var r,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=te.current.value,n=re.current.value,s=ne.current.value,""!==r){e.next=7;break}return a("Please, insert your username"),e.abrupt("return");case 7:if(""!==n){e.next=10;break}return a("Please, insert your password"),e.abrupt("return");case 10:return e.prev=10,e.next=13,k(r,n,s);case 13:window.location.replace("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(10),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 20:case"end":return e.stop()}}),e,null,[[10,16]])})))).apply(this,arguments)}return Object(Z.jsxs)("div",{className:"auth-page",children:[Object(Z.jsxs)("div",{className:"title-wrapper",children:[Object(Z.jsx)("div",{className:"title-section",children:"Measurify"}),Object(Z.jsx)("br",{}),Object(Z.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),z.length>1&&Object(Z.jsx)("div",{className:"language-wrapper",children:Object(Z.jsx)($,{})}),Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),Object(Z.jsxs)("div",{className:"login-section",children:[Object(Z.jsx)("h4",{children:X().login}),Object(Z.jsxs)(ee.a,{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(Z.jsxs)(ee.a.Group,{className:"mb-3",controlId:"username",children:[Object(Z.jsx)(ee.a.Label,{children:X().username}),Object(Z.jsx)(ee.a.Control,{ref:te,type:"text",placeholder:X().username_suggestion})]}),Object(Z.jsxs)(ee.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Z.jsx)(ee.a.Label,{children:X().password}),Object(Z.jsx)(ee.a.Control,{type:"password",ref:re,placeholder:X().password_suggestion})]}),Object(Z.jsxs)(ee.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(Z.jsx)(ee.a.Label,{children:X().tenant}),Object(Z.jsx)(ee.a.Control,{type:"text",ref:ne,placeholder:X().tenant_suggestion})]}),Object(Z.jsx)(f.a,{variant:"success",type:"submit",children:X().submit})]}),Object(Z.jsx)("br",{}),Object(Z.jsx)("div",{style:{color:"red"},children:r}),Object(Z.jsx)("br",{}),Object(Z.jsx)("div",{className:"form-row row",children:Object(Z.jsx)(p.b,{to:"/add/tenants",children:Object(Z.jsxs)(f.a,{variant:"outline-success",size:"sm",children:[X().add_tenant,Object(Z.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})},se=(r(254),function(){return Object(n.useEffect)((function(){})),Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsx)("header",{className:"page-header",children:E}),Object(Z.jsx)("main",{className:"page-content",children:Object(Z.jsx)("div",{className:"home-page",children:Object(Z.jsx)("div",{className:"info-box",children:Object(Z.jsxs)("div",{className:"info-text",children:[X().welcome_hp,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),X().left_bar_descr_hp,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),X().right_bar_descr_hp,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),X().session_expire_info_hp,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),Object(Z.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:X().github_issue_page_hp}),Object(Z.jsx)("br",{})]})})})})]})}),ie=(r(255),function(){return Object(Z.jsxs)("div",{className:"notFound-page",children:[X().oh_no,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),X().broken_link,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),Object(Z.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:X().github_issue_page_hp})]})}),ce=(r(256),r(64)),oe=r(26),le=function(e,t,r){if("create"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("read"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}}if("update"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("delete"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}return!1},de=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var r=!0;return t.forEach((function(t){r=r&&e(t)})),r}if(t.constructor===Object){var n=!0;return Object.entries(t).forEach((function(t){var r=Object(u.a)(t,2),a=(r[0],r[1]);n=n&&e(a)})),n}},ue=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!de(e)})).length},je=function e(t){if(Array.isArray(t),t.constructor===Object)for(var r=Object.entries(t),n=0;n<r.length;n++){if(Array.isArray(r[n][1]))for(var a=0;a<r[n][1].length;a++)r[n][1][a].constructor===Object||Array.isArray(r[n][1][a])?(e(r[n][1][a]),de(r[n][1][a])&&r[n][1].splice(a,1)):de(r[n][1][a])&&r[n][1].splice(a,1);if(r[n][1].constructor===Object)for(var s=Object.entries(r[n][1]),i=0;i<s.length;i++)s[n][1].constructor===Object||Array.isArray(s[n][1])?e(s[n][1]):de(s[n][1])&&delete r[n][1][s[n][0]]}return t},be=function e(t,r){if(void 0===t||void 0===r)return!1;if(t===r)return!0;if(typeof t!==typeof r)return!1;if(Array.isArray(t)&&!Array.isArray(r)||!Array.isArray(t)&&Array.isArray(r))return!1;if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===Object&&r.constructor!==Object||t.constructor!==Object&&r.constructor===Object)return!1;if(t.constructor===Object&&r.constructor===Object){var a=Object.keys(t),s=Object.keys(r);return a.length===s.length&&(!!e(a,s)&&!!e(Object.values(t),Object.values(r)))}return!1};function pe(e){return e&&e[0].toUpperCase()+e.slice(1)}ce.a.library.add(oe.g,oe.a,oe.l,oe.j,oe.i,oe.k,oe.h,oe.b);var he=a.a.createRef(),fe=a.a.createRef(),me=a.a.createRef(),xe=a.a.createRef(),Oe=a.a.createRef(),ve=a.a.createRef(),ge=a.a.createRef();function ye(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),r=t[0],s=t[1],i=localStorage.getItem("username"),c=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return ve.current=null!==i?i:"",Oe.current=null!==c?c:"",ge.current=null!==o&&""!==o?o:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==me.current)r=me.current-1;else{if(null===fe.current){var n=localStorage.getItem("login-time");null!==n?(fe.current=n,t=parseInt(n,10)):(t=Date.now(),fe.current=t)}else t=parseInt(fe.current,10);null===xe.current&&(xe.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+xe.current-Date.now())/1e3}if(r<60&&(clearInterval(he.current),w().then((function(){me.current=null,fe.current=null,he.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");me.current=parseInt(r,10)}he.current=setInterval((function(){e()}),1e3)}),[]),Object(Z.jsxs)("nav",{className:"app-nav",children:[Object(Z.jsx)(f.a,{className:"app-nav-opener",onClick:function(){return s(!r)},children:r?Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(Z.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(Z.jsx)(p.b,{to:"/home",className:"nav-wrap",children:E}),Object(Z.jsx)("hr",{}),Object(Z.jsx)("div",{className:"app-nav-wrapper ".concat(r?"opened":""),children:Object(Z.jsxs)("div",{className:"app-nav-links",children:[Object(Z.jsx)("hr",{}),Object(Z.jsxs)("div",{className:"data-wrapper",children:[Object(Z.jsxs)(p.b,{to:"/viewProfile/",children:[X().welcome+" ",Object(Z.jsx)("b",{children:ve.current})]},"viewProfile"),Object(Z.jsx)("div",{style:{paddingLeft:"10px"},children:Object(Z.jsxs)("h3",{children:[X().role+" ","admin"===Oe.current?Object(Z.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===Oe.current?Object(Z.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===Oe.current?Object(Z.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===Oe.current?Object(Z.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Z.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(Z.jsx)("div",{style:{paddingLeft:"10px"},children:Object(Z.jsxs)("h3",{children:[X().tenant+" ",Object(Z.jsx)("b",{children:ge.current})]})}),Object(Z.jsx)("br",{}),Object(Z.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(Z.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:X().logout})}),z.length>1&&Object(Z.jsxs)(a.a.Fragment,{children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)("h2",{children:Object(Z.jsx)($,{})})]})]}),Object(Z.jsx)("div",{className:"app-nav-text",children:X().resources}),Object(Z.jsx)("hr",{}),Object.keys(W).map((function(e){return le(Oe.current,e,"read")?Object(Z.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return s(!1)},children:pe(e)},e):""}))]})})]})}var ke=r(308),we=r(325),Ce=r(185),Ne=r(324);function Se(e){var t={};return G[e.resType].forEach((function(r){r.constructor===Object?Object.keys(r).forEach((function(n){Array.isArray(e.resource[n])?t[n]=e.resource[n].map((function(e){var t={};return r[n].forEach((function(r){t[r]=e[r]})),t})):t[n]=e.resource[n]})):Object.keys(e.resource).includes(r)&&(t[r]=e.resource[r])})),_e(t)}function _e(e){return Object(Z.jsx)(we.a,{defaultActiveKey:0,size:"lg",children:a.a.Children.toArray(Object.entries(e).map((function(e,t){var r=Object(u.a)(e,2),n=r[0],s=r[1];return Object(Z.jsxs)(we.a.Item,{eventKey:t,children:[Object(Z.jsx)(we.a.Header,{children:Object(Z.jsx)("b",{children:n})}),Object(Z.jsx)(we.a.Body,{children:s instanceof Object?Array.isArray(s)?void 0!==s[0]?Object.values(s[0]).some((function(e){return e instanceof Object}))?a.a.Children.toArray(s.map((function(e,t){return Object(Z.jsx)(we.a,{children:Object(Z.jsxs)(we.a.Item,{eventKey:"0",children:[Object(Z.jsxs)(we.a.Header,{children:[n," ",Object(Z.jsxs)("i",{children:["[",t,"]"]})]}),Object(Z.jsx)(we.a.Body,{children:_e(e)})]})})}))):s[0]instanceof Object?Object(Z.jsxs)(ke.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(Z.jsx)("thead",{children:Object(Z.jsx)("tr",{children:a.a.Children.toArray(Object.keys(s[0]).map((function(e){return Object(Z.jsx)("th",{children:e})})))})}),Object(Z.jsx)("tbody",{children:a.a.Children.toArray(s.map((function(e){return Object(Z.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(Z.jsx)("td",{children:e})})))})})))})]}):"[ "+s.join(" , ")+" ]":"[ ]":"AAAA":void 0===s||null==s?Object(Z.jsx)("i",{children:"None"}):s})]})})))})}function Ae(e){var t=Object(n.useState)(void 0),r=Object(u.a)(t,2),a=r[0],s=r[1];Object(n.useEffect)((function(){}),[e]);var i=void 0!==a?Object(Z.jsxs)(Ce.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(Z.jsx)(Ce.a.Header,{as:"h3",children:"View Resource"}),Object(Z.jsx)(Ce.a.Body,{children:Object(Z.jsx)(Se,{resource:a,resType:e.resType})})]}):Object(Z.jsx)(Ce.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(Z.jsxs)(Ce.a.Header,{as:"h3",children:["Loading",Object(Z.jsx)(Ce.a.Body,{})]})});return"view"===e.action?Object(Z.jsx)(Ne.a,{trigger:"click",placement:"left",overlay:i,rootClose:!0,children:Object(Z.jsx)(f.a,{variant:"link",size:"sm",onClick:function(){s(e.takeSingle(e.id))},children:Object(Z.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(Z.jsx)(f.a,{variant:"link",size:"sm",onClick:Object(c.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,P(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(Z.jsx)(p.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(Z.jsx)(f.a,{variant:"link",size:"sm",children:Object(Z.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(Z.jsx)(p.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(Z.jsx)(f.a,{variant:"link",size:"sm",children:Object(Z.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(Z.jsx)("div",{})}function De(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(Z.jsx)("div",{children:"Loading"}):Object(Z.jsx)("div",{children:Object(Z.jsxs)(ke.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(Z.jsx)("thead",{children:Object(Z.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==H[e.resType]&&void 0!==H[e.resType][t]?Object(Z.jsx)("th",{children:H[e.resType][t]}):Object(Z.jsx)("th",{children:t})})))},"header")}),Object(Z.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,r){return Object(Z.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(n){return"actions"===n?Object(Z.jsxs)("td",{children:[e.actions.includes("view")?Object(Z.jsx)(Ae,{resType:e.resType,action:"view",k:r+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")&&le(e.userRole,e.resType,"update")?Object(Z.jsx)(Ae,{resType:e.resType,action:"edit",k:r+"_edit",id:t._id}):"",e.actions.includes("duplicate")&&le(e.userRole,e.resType,"create")?Object(Z.jsx)(Ae,{resType:e.resType,action:"duplicate",k:r+"_duplicate",id:t._id}):"",e.actions.includes("delete")&&le(e.userRole,e.resType,"delete")?Object(Z.jsx)(Ae,{resType:e.resType,action:"delete",k:r+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[n]?Array.isArray(t[n])?Object(Z.jsx)("td",{children:"[ "+t[n].join(" , ")+" ]"}):Object(Z.jsx)("td",{children:t[n]}):void 0})))})})))})]})})}ce.a.library.add(oe.d,oe.e,oe.c);var Pe=r(329);r(177);ce.a.library.add(oe.f);var Ie=a.a.createRef();function Fe(e){var t=Object(h.h)().page,r=Object(p.c)(),a=Object(u.a)(r,2),s=a[0],i=a[1],o=Object(n.useState)(void 0),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(n.useState)(void 0),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(n.useState)(void 0),y=Object(u.a)(g,2),k=y[0],w=y[1],C=Object(n.useState)(1),N=Object(u.a)(C,2),S=N[0],_=N[1],A=Object(n.useState)(1),D=Object(u.a)(A,2),P=D[0],I=D[1],R=Object(n.useState)(),T=Object(u.a)(R,2),B=T[0],E=T[1],z=Object(n.useState)(),L=Object(u.a)(z,2),H=L[0],G=L[1],U=Object(n.useState)(),M=Object(u.a)(U,2),V=M[0],q=M[1],Y=Object(n.useState)(),Q=Object(u.a)(Y,2),X=Q[0],$=Q[1],ee=Object(n.useState)(),te=Object(u.a)(ee,2),re=te[0],ne=te[1],ae=localStorage.getItem("user-role");Ie.current=null!==ae?ae:"",Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var r,n,a=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,F(t,r);case 4:n=e.sent,v(W[t]),j(n.docs),void 0!==K[t]&&w(K[t]),E(n.hasNextPage),G(n.hasPrevPage),ne(n.totalPages),q(n.prevPage),$(n.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),j(void 0),E(void 0),G(void 0),ne(void 0),q(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;_(r);var n=null!==s.get("limit")?s.get("limit"):10;I(n),e({page:r,limit:n}).catch(console.error)}),[e,t,s]);var se=function(){var e=parseInt(S,10)-2>0,t=parseInt(S,10)+2<re;return Object(Z.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(Z.jsxs)(Pe.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(Z.jsx)(Pe.a.First,{disabled:1===S,onClick:function(){return i({page:1,limit:P})}}),Object(Z.jsx)(Pe.a.Prev,{disabled:!H,onClick:function(){return i({page:V,limit:P})}}),e&&Object(Z.jsx)(Pe.a.Ellipsis,{}),parseInt(S,10)-1>0&&Object(Z.jsx)(Pe.a.Item,{onClick:function(){return i({page:parseInt(S,10)-1,limit:P})},children:parseInt(S,10)-1}),Object(Z.jsx)(Pe.a.Item,{children:Object(Z.jsx)("b",{children:S})}),parseInt(S,10)+1<=re&&Object(Z.jsx)(Pe.a.Item,{onClick:function(){return i({page:parseInt(S,10)+1,limit:P})},children:parseInt(S,10)+1}),t&&Object(Z.jsx)(Pe.a.Ellipsis,{}),Object(Z.jsx)(Pe.a.Next,{disabled:!B,onClick:function(){return i({page:X,limit:P})}}),Object(Z.jsx)(Pe.a.Last,{disabled:S===re,onClick:function(){return i({page:re,limit:P})}})]})})};return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:[t,void 0!==J[t]&&le(Ie.current,t,"create")&&Object(Z.jsx)(p.b,{to:"/add/"+t+"/",children:Object(Z.jsx)(f.a,{variant:"link",size:"sm",children:Object(Z.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsx)(De,{resType:t,userRole:Ie.current,header:O,resources:d,actions:k,takeSingle:function(e){return d.find((function(t){return t._id===e}))},removeSingle:function(e){var t=d.filter((function(t){return t._id!==e}));j(t)}}),Object(Z.jsx)(se,{})]})]})}var Re=r(309),Te=r(310),Be=r(180);function Ee(e){var t=Object(n.useState)(""),r=Object(u.a)(t,2),a=r[0],s=r[1],i=Object(n.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(""),p=Object(u.a)(j,2),h=p[0],m=p[1],x=Object(n.useState)(""),O=Object(u.a)(x,2),v=O[0],g=O[1],y=Object(n.useState)(""),w=Object(u.a)(y,2),C=w[0],N=w[1],S=Object(n.useState)(""),_=Object(u.a)(S,2),D=_[0],P=_[1],I=Object(n.useState)(""),F=Object(u.a)(I,2),R=F[0],T=F[1];Object(n.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),r=localStorage.getItem("user-tenant");s(null!==e?e:""),d(null!==t?t:""),m(null!==r&&""!==r?r:"-")}),[]);var B=function(){var e=Object(c.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===v&&T(X().old_pass_empty),C===D){e.next=5;break}return T(X().pass_not_match),e.abrupt("return");case 5:if(""!==C&&""!==D){e.next=8;break}return T(X().pass_not_null),e.abrupt("return");case 8:return e.prev=8,e.next=11,k(a,v,h,!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),T(X().old_pass_wrong),e.abrupt("return");case 17:if(!window.confirm(X().pass_change_confirm)){e.next=31;break}return e.prev=19,e.next=22,A("users",{password:C},a);case 22:r=e.sent,N(""),P(""),200===r.response.status&&T(X().password_changed),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(19),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[8,13],[19,28]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:[X().welcome,"\xa0",Object(Z.jsx)("b",{children:a}),":\xa0",X().profile_page_desc]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsxs)(Re.a,{fluid:!0,children:[Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{xs:1,children:"Username:\xa0"}),Object(Z.jsx)(Be.a,{children:Object(Z.jsx)("b",{children:a})})]}),Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{xs:1,children:X().role}),Object(Z.jsxs)(Be.a,{children:[l,"\xa0","admin"===l?Object(Z.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===l?Object(Z.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===l?Object(Z.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===l?Object(Z.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Z.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{xs:1,children:X().tenant+" "}),Object(Z.jsx)(Be.a,{children:Object(Z.jsx)("b",{children:h})})]})]}),Object(Z.jsx)("hr",{}),Object(Z.jsxs)(Re.a,{fluid:!0,children:[Object(Z.jsx)(Be.a,{children:Object(Z.jsx)(Te.a,{children:Object(Z.jsx)("b",{children:"Edit password"})})}),Object(Z.jsx)(Te.a,{children:Object(Z.jsx)(Be.a,{children:Object(Z.jsxs)(ee.a,{onSubmit:B,children:[Object(Z.jsx)(Te.a,{children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsx)(ee.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:v,placeholder:X().enter+" old password"})})}),Object(Z.jsx)(Te.a,{children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsx)(ee.a.Control,{type:"password",onChange:function(e){e.preventDefault(),N(e.target.value)},value:C,placeholder:X().enter+" new password"})})}),Object(Z.jsx)(Te.a,{children:Object(Z.jsxs)(ee.a.Group,{className:"mb-3",children:[Object(Z.jsx)(ee.a.Control,{type:"password",onChange:function(e){e.preventDefault(),P(e.target.value)},value:D,placeholder:X().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(Z.jsx)(ee.a.Text,{id:"passwordHelpBlock",muted:!0,children:R})]})}),Object(Z.jsx)(f.a,{variant:"primary",type:"submit",children:X().submit})]})})})]})]})]})}r(257),r(258);function ze(){return Object(Z.jsx)("div",{className:"unAuth-page",children:Object(Z.jsx)("div",{className:"info-box",children:Object(Z.jsx)("div",{className:"info-text",children:X().unauthorised_user})})})}var Le=r(311),We=r(322),He=r(312),Ke=r(327),Ge=(r(259),a.a.createContext()),Ue=a.a.createRef();function Je(e){var t=Object(n.useState)(!1),r=Object(u.a)(t,2),s=r[0],i=r[1],c=Object(n.useState)(!1),o=Object(u.a)(c,2),l=o[0],d=o[1],j=a.a.useRef(),b=Object(n.useContext)(Ge).notifications;Ue.current=0;var p=function(){return i(!1)};Object(n.useEffect)((function(){Ue.current<b.notifications.length&&(Ue.current=b.notifications.length,d(!0),setTimeout((function(){d(!1)}),600))}),[b.notifications]),!0===/Mobi/i.test(window.navigator.userAgent)?j.current="vertical":j.current=L;var h=b.notifications.filter((function(e){return"error"===e.name}));return Object(Z.jsxs)("div",{className:"notificationBar",style:"vertical"===j.current&&!1===/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(Z.jsxs)(f.a,{variant:"link",onClick:function(){i(!0)},style:{color:"#fff",textDecoration:"none"},children:[X().notifications,"\xa0",Object(Z.jsx)(Le.a,{pill:!0,bg:h.length>0?"danger":"success",className:"element".concat(l?" highlight":""),children:b.notifications.length}),Object(Z.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(Z.jsxs)(We.a,{style:{backgroundColor:"#123651",color:"#fff"},show:s,onHide:p,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(Z.jsx)(We.a.Header,{children:Object(Z.jsxs)(We.a.Title,{children:[X().notifications,"\xa0",Object(Z.jsx)(Le.a,{pill:!0,bg:h.length>0?"danger":"success",children:b.notifications.length}),"\xa0\xa0\xa0",Object(Z.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return p()},children:X().close+" "+X().notifications})]})}),Object(Z.jsx)(We.a.Body,{children:Object(Z.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==b.notifications.length&&Object(Z.jsx)(f.a,{variant:"warning",onClick:function(){return b.ClearNotifications()},children:X().clear_all}),Object(Z.jsx)(He.a,{children:b.notifications.map((function(e,t){var r;return"info"===e.name&&(r="success"),"error"===e.name&&(r="danger"),Object(Z.jsxs)(Ke.a,{className:"d-inline-block m-1",bg:r,animation:!0,onClose:function(){b.RemoveNotification(t)},children:[Object(Z.jsxs)(Ke.a.Header,{children:[Object(Z.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(Z.jsx)("strong",{className:"me-auto",children:e.name}),Object(Z.jsx)("small",{children:e.time.slice(0,15)})]}),Object(Z.jsx)(Ke.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}r(260);ce.a.library.add(oe.g,oe.a,oe.l,oe.j,oe.i,oe.k,oe.h,oe.b);var Me=a.a.createRef(),Ve=a.a.createRef(),qe=a.a.createRef(),Ye=a.a.createRef(),Qe=a.a.createRef(),Xe=a.a.createRef(),Ze=a.a.createRef();function $e(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),r=(t[0],t[1]),s=localStorage.getItem("username"),i=localStorage.getItem("user-role"),c=localStorage.getItem("user-tenant");return Xe.current=null!==s?s:"",Qe.current=null!==i?i:"",Ze.current=null!==c&&""!==c?c:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==qe.current)r=qe.current-1;else{if(null===Ve.current){var n=localStorage.getItem("login-time");null!==n?(Ve.current=n,t=parseInt(n,10)):(t=Date.now(),Ve.current=t)}else t=parseInt(Ve.current,10);null===Ye.current&&(Ye.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+Ye.current-Date.now())/1e3}if(r<60&&(clearInterval(Me.current),w().then((function(){qe.current=null,Ve.current=null,Me.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");qe.current=parseInt(r,10)}Me.current=setInterval((function(){e()}),1e3)}),[]),Object(Z.jsx)("nav",{className:"horizontal-nav",children:Object(Z.jsx)("div",{className:"horizontal-nav-links",children:Object(Z.jsx)("div",{className:"data-wrapper",children:Object(Z.jsxs)(Re.a,{fluid:!0,children:[Object(Z.jsxs)(Te.a,{style:{padding:0},children:[Object(Z.jsx)(Be.a,{children:Object(Z.jsx)(p.b,{to:"/home",className:"nav-wrap",children:E})}),Object(Z.jsx)(Be.a,{children:Object(Z.jsxs)(p.b,{to:"/viewProfile/",children:[X().welcome+" ",Object(Z.jsx)("b",{children:Xe.current})]},"viewProfile")}),Object(Z.jsx)(Be.a,{children:Object(Z.jsxs)("div",{className:"horizontal-nav-text",children:[X().role+" ","admin"===Qe.current?Object(Z.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===Qe.current?Object(Z.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===Qe.current?Object(Z.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===Qe.current?Object(Z.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Z.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(Z.jsx)(Be.a,{children:Object(Z.jsxs)("div",{className:"horizontal-nav-text",children:[X().tenant+" ",Object(Z.jsx)("b",{children:Ze.current})]})}),Object(Z.jsx)(Be.a,{children:Object(Z.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:X().logout})}),z.length>1&&Object(Z.jsx)(Be.a,{children:Object(Z.jsx)($,{})}),Object(Z.jsx)(Be.a,{children:Object(Z.jsx)(Je,{})})]}),Object(Z.jsxs)(Te.a,{style:{padding:0},children:[Object(Z.jsx)("hr",{}),Object(Z.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:X().resources})]}),Object(Z.jsx)(Te.a,{style:{padding:0},children:a.a.Children.toArray(Object.keys(W).map((function(e){return le(Qe.current,e,"read")?Object(Z.jsx)(Be.a,{children:Object(Z.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return r(!1)},children:pe(e)},e)}):""})))})]})})})})}var et=r(320),tt=r(321),rt=function(e){var t,r=Object(n.useContext)(Ge);if(t=void 0!==r?r.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.backFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(Z.jsxs)(ee.a,{onSubmit:e.submitFunction,children:[Object(Z.jsxs)(Re.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(r){var n,s=Object(u.a)(r,2),i=s[0],c=s[1];if(void 0!==q[e.resource]&&void 0!==q[e.resource][i]&&void 0!==t.types&&void 0!==t.types[q[e.resource][i]])return function(t,r){return Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:t})}),Object(Z.jsx)(Be.a,{sm:6,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsxs)(ee.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(Z.jsx)("option",{children:X().select+" "+t}),a.a.Children.toArray(Object.entries(r).map((function(e){var t=Object(u.a)(e,2),r=(t[0],t[1]);return Object(Z.jsx)("option",{value:r,children:r})})))]})})})]})}(i,t.types[q[e.resource][i]]);if(Array.isArray(c)){if("number"===typeof c[0])return n=i,Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:n})}),Object(Z.jsx)(Be.a,{sm:6,children:a.a.Children.toArray(e.values[n].map((function(t,r){return Object(Z.jsx)(Te.a,{children:Object(Z.jsxs)(ee.a.Group,{className:"mb-3",children:[Object(Z.jsxs)(ee.a.Label,{children:["Insert ",Object(Z.jsx)("b",{children:n}),Object(Z.jsxs)("i",{children:["[",r,"]"]})]}),Object(Z.jsx)(ee.a.Control,{type:"number",disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[n,r])},value:isNaN(e.values[n][r])?"":e.values[n][r],placeholder:X().enter+" "+n})]})})})))})]});if("string"===typeof c[0])return function(r){var n;return t!=={}&&void 0!==t.data[r]&&(n=t.data[r]),Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:r})}),Object(Z.jsx)(Be.a,{children:a.a.Children.toArray(e.values[r].map((function(a,s){return Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(Z.jsx)(Be.a,{sm:6,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:void 0!==t.data[r]?Object(Z.jsx)(tt.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r,s])},value:""===e.values[r][s]?null:e.values[r][s],options:n,renderInput:function(e){return Object(Z.jsx)(et.a,Object(l.a)(Object(l.a)({},e),{},{label:X().enter+" "+r}))}}):Object(Z.jsx)(ee.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s])},value:e.values[r][s],placeholder:X().enter+" "+r})})}),Object(Z.jsx)(Be.a,{md:"auto"})]})})))})]})}(i);if(c[0].constructor===Object)return function(r){return Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:r})}),Object(Z.jsxs)(Be.a,{children:[Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:["metadata"!==r&&Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)("b",{children:Object(Z.jsx)("i",{children:"Remove"})})}),Object.keys(e.values[r][0]).map((function(e){return Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)("b",{children:Object(Z.jsx)("i",{children:pe(r)+" "+e})})})}))]}),a.a.Children.toArray(e.values[r].map((function(n,s){return Object(Z.jsxs)(Te.a,{children:["metadata"!==r&&Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(u.a)(n,2),c=i[0],o=i[1],l=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][c]?e.disabledFields[r][c]:!0===e.disabledFields[r]);return"number"===typeof o?Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsx)(ee.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,s,c])},disabled:l,value:isNaN(e.values[r][s][c])?"":e.values[r][s][c],placeholder:X().enter+" "+c},r+c+s+"")})}):void 0!==q[e.resource]&&void 0!==q[e.resource][r]&&void 0!==q[e.resource][r][c]&&void 0!==t.types&&void 0!==t.types[q[e.resource][r][c]]?Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsxs)(ee.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c])},value:e.values[r][s][c],disabled:l,children:[Object(Z.jsx)("option",{children:X().select+" "+c}),a.a.Children.toArray(Object.entries(t.types[q[e.resource][r][c]]).map((function(e){var t=Object(u.a)(e,2),r=t[0],n=t[1];return Object(Z.jsx)("option",{value:r,children:n})})))]})})}):"string"===typeof o?Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsxs)(ee.a.Group,{className:"mb-3",children:[Object(Z.jsx)(ee.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c])},value:e.values[r][s][c],placeholder:X().enter+" "+c}),"metadata"===r&&"name"===c&&"Country"===e.values[r][s][c]&&Object(Z.jsx)(ee.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(o)?0===o.length?c+" is empty":"range"===c&&"enum"!==e.values[r][s].type?"":Object(Z.jsx)(Te.a,{children:Object(Z.jsx)(we.a,{defaultActiveKey:"0",children:Object(Z.jsxs)(we.a.Item,{eventKey:"0",children:[Object(Z.jsxs)(we.a.Header,{children:[Object(Z.jsx)("b",{children:c})," : ",ue(o)," items"]}),Object(Z.jsx)(we.a.Body,{children:a.a.Children.toArray(o.map((function(t,n){if(t.constructor===Object){var i=Object.entries(t);return Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(i.map((function(t){var a=Object(u.a)(t,2),i=a[0],o=a[1];return Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsx)(ee.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c,n,i])},value:o,placeholder:X().enter+" "+i})})})})))]})}return"number"===typeof t?Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)(ee.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,s,c,n])},value:isNaN(t)?"":t,placeholder:X().enter+" "+c},""+r+s+c+n)})]}):"string"===typeof t?Object(Z.jsxs)(Te.a,{children:[Object(Z.jsx)(Be.a,{sm:1,children:Object(Z.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s,c,n])},children:Object(Z.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(Z.jsx)(Be.a,{sm:4,children:Object(Z.jsx)(ee.a.Control,{type:"text",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s,c,n])},value:t,placeholder:X().enter+" "+c},""+r+s+c+n)})]}):"Unknown data type"})))})]})})}):"Unknown data type"})))]})})))]})]})}(i)}return"number"===typeof c?function(t){return Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:t})}),Object(Z.jsx)(Be.a,{sm:6,children:Object(Z.jsxs)(ee.a.Group,{className:"mb-3",children:[Object(Z.jsx)(ee.a.Control,{type:"number",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(parseInt(r.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:X().enter+" "+t}),void 0!==Q[e.resource]&&void 0!==Q[e.resource][t]&&Object(Z.jsx)(ee.a.Text,{className:"text-muted",children:Q[e.resource][t]})]})})]})}(i):void 0!==Y[e.resource]&&void 0!==Y[e.resource][i]&&void 0!==t.data[Y[e.resource][i]]?function(r,n){var a;return t==={}||void 0===t.data[r]&&void 0===t.data[n]||(a=t.data[void 0!==n?n:r]),Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:r})}),Object(Z.jsx)(Be.a,{sm:6,children:Object(Z.jsx)(ee.a.Group,{className:"mb-3",children:Object(Z.jsx)(tt.a,{id:r,onChange:function(t,n){t.preventDefault(),e.handleChangesCallback(n,[r])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:""===e.values[r]?null:e.values[r],options:a,renderInput:function(e){return Object(Z.jsx)(et.a,Object(l.a)(Object(l.a)({},e),{},{label:X().enter+" "+r}))}})})})]})}(i,Y[e.resource][i]):"string"===typeof c?function(t){return Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:t})}),Object(Z.jsx)(Be.a,{sm:6,children:Object(Z.jsxs)(ee.a.Group,{className:"mb-3",children:[Object(Z.jsx)(ee.a.Control,{type:"password"===t?"password":"text",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:X().enter+" "+t}),void 0!==Q[e.resource]&&void 0!==Q[e.resource][t]&&Object(Z.jsx)(ee.a.Text,{className:"text-muted",children:Q[e.resource][t]})]})})]})}(i):c.constructor===Object?"TODO ObjectFormRow":""})))]}),Object(Z.jsx)(f.a,{variant:"primary",type:"submit",children:X().submit},"submit"),"\xa0\xa0\xa0",Object(Z.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:X().cancel},"cancel")]})},nt=r(99);function at(e,t){var r=Object.keys(e),n=Object.keys(t);return(r=r.filter((function(e){return-1!==n.indexOf(e)}))).sort((function(e,t){return n.indexOf(e)-n.indexOf(t)})),r.reduce((function(r,n){if(Array.isArray(e[n])&&0!==e[n].length&&e[n][0].constructor===Object){var a=e[n].map((function(e){return at(e,t[n][0])}));r[n]=a}else r[n]=e[n];return r}),{})}function st(e,t,r){for(var n=Object.keys(e),a=nt(e),s=0;s<n.length;s++)Array.isArray(a[n[s]])&&(a=it(a,[n[s]],t,r));return a}function it(e,t,r,n){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=nt(e),i=s,c=nt(r[n]),o=Object(d.a)(t),u=0;u<o.length&&void 0!==t[u];u++)i=i[t[u]];for(var j=0;j<o.length&&void 0!==t[j]&&void 0!==c;j++)c="number"===typeof t[j]?c[0]:c[t[j]];return Array.isArray(c)?(void 0!==c&&(0===i.length?c[0].constructor===Object?i.push(Object(l.a)({},c[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return de(e)})).length&&i.push(Object(l.a)({},c[0])):i.includes("")||i.push("")),void 0!==a&&void 0===c&&(0===i.length||0===i.filter((function(e){return de(e)})).length)&&(a.constructor===Object?i.push(Object(l.a)({},a)):i.push(a)),s):s}var ct=r(99);function ot(e){var t=Object(h.h)(),r=t.resource,a=t.id,s=Object(n.useState)(),i=Object(u.a)(s,2),l=i[0],j=i[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),m=f[0],x=f[1],O=Object(h.g)(),v=Object(n.useState)(ct(U[r])),g=Object(u.a)(v,2),y=g[0],k=g[1],w=Object(n.useState)({}),C=Object(u.a)(w,2),N=C[0],S=(C[1],Object(n.useState)(void 0)),_=Object(u.a)(S,2),D=_[0],P=_[1],I=Object(n.useContext)(Ge).fetched,R=function(){var e=Object(c.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===I.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,I.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){void 0!==Y[r]&&Object.values(Y[r]).forEach((function(e){return R(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var t,n,s,i,o,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,F(r,t);case 3:n=e.sent,s=n.docs[0],i=ct(y),i=at(s,i),o=function(){var e=Object(c.a)(b.a.mark((function e(){var t,n,s,c,o,l,d,u,p,h,f,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==M[r]){e.next=7;break}for(P({}),t=Object.keys(i),n=0;n<t.length;n++)s=t[n],i=it(i,[s],U,r);return k(i),j(ct(i)),e.abrupt("return");case 7:c={},void 0!==D&&(c=D),o=Object.entries(M[r]),l=0;case 11:if(!(l<o.length)){e.next=24;break}if(d=o[l][0],u=o[l][1],void 0!==i[d]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==u.type){e.next=21;break}return e.next=19,u.policy(a);case 19:p=e.sent,c[d]=p;case 21:l++,e.next=11;break;case 24:for(h=Object.keys(i),f=0;f<h.length;f++)m=h[f],void 0!==c[m]&&!1!==c[m]||(i=it(i,[m],U,r));P(c),k(i),j(ct(i));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:a};e({filter:JSON.stringify(t)})}),[]);var T=function(){var e=Object(c.a)(b.a.mark((function e(t){var n,s,i,c,u,j,p,h,f,m,v,g,k,w,C,S;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=ct(y),s=ct(l),je(n),je(s),i={},c=Object.entries(n),u=0;u<c.length;u++)if(j=c[u][0],p=c[u][1],Array.isArray(p)){if(void 0===i[j]&&(i[j]={add:[],remove:[],update:[]}),h=Object(d.a)(s[j]),void 0!==N[j])for(f=0;f<N[j].indexes.length;f++)(m=h.splice(N[j].indexes[f][0],1)[0]).constructor===Object?(v=Object.keys(m)[0],i[j].remove.push(m[v])):i[j].remove.push(m);for(g=0;g<n[j].length;g++)g<h.length&&!be(n[j][g],h[g])&&(n[j][g].constructor===Object?(w=Object.keys(h[g])[0],i[j].update.push((k={},Object(o.a)(k,w,h[g][w]),Object(o.a)(k,"new",n[j][g]),k))):(i[j].add.push(n[j][g]),i[j].remove.push(h[g]))),g>=h.length&&i[j].add.push(n[j][g]);be(i[j],{add:[],remove:[],update:[]})&&delete i[j]}else p.constructor===Object||p!==l[j]&&(i[j]=p);if(console.log(i),0!==Object.keys(i).length){e.next=12;break}return x("No changes found"),e.abrupt("return");case 12:return e.prev=12,e.next=15,A(r,i,a);case 15:S=e.sent,C=S.response,x(C.statusText),O("/"+r),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(12),C=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 25:case"end":return e.stop()}}),e,null,[[12,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(Z.jsx)("b",{children:r}),"\xa0of id:\xa0",Object(Z.jsx)("b",{children:a}),"\xa0"]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsx)(rt,{values:y,resource:r,functionalFields:U,disabledFields:D,handleChangesCallback:function(e,t){var n,a=ct(y),s=a,i=-1;for(n=0;n<t.length-1;n++)s=s[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),s[t[n]]=e,-1!==i){var c="number"===typeof e?NaN:"";a=it(a,t.slice(0,i),U,r,c)}k(a)},arrayDeleteCallback:function(e){var t,n=ct(y),a=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)a=a[e[t]];var s=a.splice(e[t],1),i="number"===typeof s[0]?NaN:"";n=it(n,e.slice(0,t),U,r,i),1===t&&(void 0===N[e[0]]&&(N[e[0]]={indexes:[],elements:[],minDel:1/0}),de(s[0])||(N[e[0]].elements.push(s[0]),N[e[0]].indexes.push(e[t]>=N[e[0]].minDel?e[t]+N[[e[0]]].indexes.filter((function(r){return r>=e[t]})).length:e[t]),e[t]<N[e[0]].minDel&&(N[e[0]].minDel=e[t]))),k(n)},submitFunction:T,backFunction:function(e){e.preventDefault(),O(-1)}}),Object(Z.jsx)("br",{}),Object(Z.jsx)("font",{style:{marginLeft:"5px"},children:m})]})]})}var lt=r(326),dt=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(Z.jsxs)(ee.a,{onSubmit:e.submitFunction,children:[Object(Z.jsx)(ee.a.Label,{children:Object(Z.jsx)("b",{children:X().select_file})}),Object(Z.jsx)(ee.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var r=t.target.files[0];e.setFile(r);var n=new FileReader;n.onloadend=function(){var t=n.result;if(r.name.endsWith(".csv")){var a=new RegExp("\\r","g"),s=t.replace(a,"").split("\n");e.setContentHeader(s[0]),s.splice(0,1),e.setContentBody(s),e.setContentPlain(null)}r.name.endsWith(".json")&&(e.setContentHeader(null),e.setContentBody(null),e.setContentPlain(JSON.stringify(JSON.parse(t),null,4)))},n.readAsText(r)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(Z.jsx)(we.a,{children:Object(Z.jsxs)(we.a.Item,{eventKey:"0",children:[Object(Z.jsx)(we.a.Header,{children:X().file_content}),Object(Z.jsx)(we.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(Z.jsxs)(ke.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(Z.jsx)("thead",{children:Object(Z.jsx)("tr",{children:a.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(Z.jsx)("th",{children:e})})))})}),Object(Z.jsx)("tbody",{children:a.a.Children.toArray(e.contentBody.map((function(e){return Object(Z.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(Z.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(Z.jsx)(we.a,{children:Object(Z.jsxs)(we.a.Item,{eventKey:"0",children:[Object(Z.jsx)(we.a.Header,{children:X().file_content}),Object(Z.jsx)(we.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(Z.jsx)("textarea",{cols:"120",rows:"10",readOnly:!0,children:e.contentPlain})})]})}),Object(Z.jsx)(f.a,{variant:"primary",type:"submit",children:X().submit},"submit"),"\xa0\xa0\xa0",Object(Z.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:X().cancel},"cancel")]})},ut=r(99);function jt(e){var t=Object(h.h)().resource,r=Object(p.c)(),a=Object(u.a)(r,2),s=a[0];a[1];void 0!==e.resource&&(t=e.resource);var i,o=Object(h.g)(),l=Object(n.useState)("form"),d=Object(u.a)(l,2),j=d[0],f=d[1],m=Object(n.useState)(""),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(n.useState)(!1),y=Object(u.a)(g,2),k=y[0],w=y[1],N=Object(n.useState)(ut(J[t])),_=Object(u.a)(N,2),A=_[0],D=_[1],P=Object(n.useState)(void 0),I=Object(u.a)(P,2),R=I[0],T=I[1],B=Object(n.useState)(null),E=Object(u.a)(B,2),z=E[0],L=E[1],W=Object(n.useState)(null),H=Object(u.a)(W,2),K=H[0],G=H[1],U=Object(n.useState)(null),M=Object(u.a)(U,2),q=M[0],Q=M[1],$=Object(n.useContext)(Ge);i=void 0!==$?$.fetched:{};var ee=function(){var e=Object(c.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,i.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==Y[t]&&Object.values(Y[t]).forEach((function(e){return ee(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var r,n,a,s,i=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,F(t,r);case 3:n=e.sent,a=n.docs[0],s=ut(A),s=st(s=at(a,s),J,t),D(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var r={_id:s.get("from")};e({filter:JSON.stringify(r)})}}),[s,t]),void 0===J[t])return Object(Z.jsx)("div",{children:"This entity cannot be posted"});var te=function(e){e.preventDefault(),o(-1)},re=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=void 0,void 0!==(a=ut(A)).token&&(n=a.token,delete a.token),s=ut(a),je(s),e.prev=6,e.next=9,S(t,JSON.stringify(s),n);case 9:c=e.sent,i=c.response,v(i.statusText),w(!1),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),i=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),l="",l=e.t0.error.response.data.details.includes("duplicate key")?X().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+l),w(!0);case 24:200===i.status&&!0===window.confirm("Back to resource page?")&&o("tenants"===t?"/":"/"+t);case 25:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==R){e.next=5;break}return v(X().no_file),w(!0),e.abrupt("return");case 5:if(!R.name.endsWith(".csv")){e.next=23;break}return(a=new FormData).append("file",R),e.prev=8,e.next=11,C(t,a);case 11:s=e.sent,n=s.response,v(n.statusText),w(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,v(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),w(!0);case 23:if(!R.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,S(t,q,void 0);case 27:i=e.sent,n=i.response,v(n.statusText),w(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),n=e.t1.error.response,v(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),w(!0);case 39:200===n.status&&!0===window.confirm("Back to resource page?")&&o("/"+t);case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(Z.jsx)("b",{children:t})]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsxs)(lt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),w(!1)},defaultActiveKey:"form",children:[V[t].includes("form")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"form",children:"Form"})}),V[t].includes("file")&&null===s.get("from")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"file",children:"File"})})]}),Object(Z.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[Object(Z.jsx)(rt,{values:A,resource:t,functionalFields:J,disabledFields:{},handleChangesCallback:function(e,r){var n,a=ut(A),s=a,i=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(i=n);s[r[n]]=e,"number"===typeof r[n]&&(i=n),-1!==i&&(a=it(a,r.slice(0,i),J,t)),D(a)},arrayDeleteCallback:function(e){var r,n=ut(A),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];a.splice(e[r],1),n=it(n,e.slice(0,r),J,t),D(n)},submitFunction:re,backFunction:te}),Object(Z.jsx)("br",{}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:O})]}),"file"===j&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[Object(Z.jsx)(dt,{submitFunction:ne,backFunction:te,setContentBody:G,setContentHeader:L,setContentPlain:Q,setFile:T,contentPlain:q,contentHeader:z,contentBody:K}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:O})]})]})]})]})}var bt=r(99);function pt(e){var t="experiments",r=Object(p.c)(),s=Object(u.a)(r,2),i=s[0],o=(s[1],Object(h.g)()),l=Object(n.useState)("form"),d=Object(u.a)(l,2),j=d[0],f=d[1],m=Object(n.useState)(""),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(n.useState)(!1),y=Object(u.a)(g,2),k=y[0],w=y[1],N=Object(n.useState)(bt(J[t])),_=Object(u.a)(N,2),A=_[0],D=_[1],P=Object(n.useState)({metadata:{name:!0}}),I=Object(u.a)(P,2),R=I[0],T=I[1],B=Object(n.useState)(),E=Object(u.a)(B,2),z=E[0],L=E[1],W=Object(n.useState)(void 0),H=Object(u.a)(W,2),K=H[0],G=H[1],U=Object(n.useState)(null),M=Object(u.a)(U,2),q=M[0],Y=M[1],Q=Object(n.useState)(null),$=Object(u.a)(Q,2),te=$[0],re=$[1],ne=Object(n.useState)(null),ae=Object(u.a)(ne,2),se=ae[0],ie=ae[1];if(Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var t,r,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,F("protocols",t);case 3:r=e.sent,L(r.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,i]),Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var r,n,a,s,i,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,F(t,r);case 3:n=e.sent,a=n.docs[0],(s=bt(A)).protocol="",s.metadata=[{name:"",value:""}],(i=bt(R)).protocol=!0,T(i),(s=at(a,s))._id=s._id+"_copy",console.log(s),s=st(s,J,t),D(s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==i.get("from")&&""!==i.get("from")){var r={_id:i.get("from")};e({filter:JSON.stringify(r)})}}),[i,t]),void 0===J[t])return Object(Z.jsx)("div",{children:"This entity cannot be posted"});var ce=function(){var e=Object(c.a)(b.a.mark((function e(t){var r,n,a,s,i,c,o,l,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,n={_id:t.target.value},a={filter:JSON.stringify(n)},e.next=6,F("protocols",a);case 6:for(s=e.sent,i=s.docs[0],c=[],o=0;o<i.metadata.length;o++)"scalar"===i.metadata[o].type&&c.push({name:i.metadata[o].name,value:0}),"text"===i.metadata[o].type&&c.push({name:i.metadata[o].name,value:i.metadata[o].name+"_Name"}),"vector"===i.metadata[o].type&&c.push({name:i.metadata[o].name,value:[0]});(l=bt(A)).protocol=r,0!==c.length&&(l.metadata=c),(d=bt(R)).protocol=!0,T(d),D(l);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=void 0,void 0!==(a=bt(A)).token&&(n=a.token,delete a.token),s=bt(a),je(s),void 0!==s.protocol){e.next=10;break}return v("Please, select a protocol"),w(!0),e.abrupt("return");case 10:if(""!==s._id){e.next=14;break}return v("Please, define an _id"),w(!0),e.abrupt("return");case 14:if(""!==s.state){e.next=18;break}return v("Please, select a state"),w(!0),e.abrupt("return");case 18:return e.prev=18,e.next=21,S(t,JSON.stringify(s),n);case 21:c=e.sent,i=c.response,v(i.statusText),w(!1),e.next=36;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0),i=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),l="",l=e.t0.error.response.data.details.includes("duplicate key")?X().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+l),w(!0);case 36:200===i.status&&!0===window.confirm("Experiment successufully posted! Back to resource page?")&&o("/"+t);case 37:case"end":return e.stop()}}),e,null,[[18,27]])})));return function(t){return e.apply(this,arguments)}}(),le=function(e){e.preventDefault(),o(-1)},de=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==K){e.next=5;break}return v(X().no_file),w(!0),e.abrupt("return");case 5:if(!K.name.endsWith(".csv")){e.next=23;break}return(a=new FormData).append("file",K),e.prev=8,e.next=11,C(t,a);case 11:s=e.sent,n=s.response,v(n.statusText),w(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,v(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),w(!0);case 23:if(!K.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,S(t,se,void 0);case 27:i=e.sent,n=i.response,v(n.statusText),w(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),n=e.t1.error.response,v(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),w(!0);case 39:200===n.status&&!0===window.confirm("Experiment successufully posted! Back to resource page?")&&o("/"+t);case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(Z.jsx)("b",{children:t})]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsxs)(lt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),w(!1)},defaultActiveKey:"form",children:[V[t].includes("form")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"form",children:"Form"})}),V[t].includes("file")&&null===i.get("from")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"file",children:"File"})})]}),Object(Z.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&"Export values on a json file","form"===j&&void 0!==z&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[(null===i.get("from")||""===i.get("from"))&&Object(Z.jsxs)(ee.a.Select,{"aria-label":X().select+" protocol",onChange:ce,children:[Object(Z.jsxs)("option",{children:[X().select," protocol"]}),a.a.Children.toArray(z.map((function(e){return Object(Z.jsx)("option",{value:e,children:e})})))]}),Object(Z.jsx)("br",{}),Object(Z.jsx)(rt,{values:A,resource:t,functionalFields:J,disabledFields:R,handleChangesCallback:function(e,r){var n,a=bt(A),s=a,i=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(i=n);if("number"===typeof r[n]&&(i=n),s[r[n]]=e,-1!==i){var c="number"===typeof e?NaN:"";a=it(a,r.slice(0,i),J,t,c)}D(a)},arrayDeleteCallback:function(e){var r,n=bt(A),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];var s="number"===typeof a.splice(e[r],1)[0]?NaN:"";n=it(n,e.slice(0,r),J,t,s),D(n)},submitFunction:oe,backFunction:le}),Object(Z.jsx)("br",{}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:O})]}),"file"===j&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[Object(Z.jsx)(dt,{submitFunction:de,backFunction:le,setContentBody:re,setContentHeader:Y,setContentPlain:ie,setFile:G,contentPlain:se,contentHeader:q,contentBody:te}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:k?"red":"black"},children:O})]})]})]})]})}var ht=r(99);function ft(e){var t="measurements",r=Object(p.c)(),s=Object(u.a)(r,2),i=s[0],o=(s[1],Object(n.useState)([])),l=Object(u.a)(o,2),d=l[0],j=l[1],m=Object(n.useState)([]),x=Object(u.a)(m,2),O=x[0],v=x[1],g=Object(h.g)(),y=Object(n.useState)("form"),k=Object(u.a)(y,2),w=k[0],N=k[1],_=Object(n.useState)(""),A=Object(u.a)(_,2),D=A[0],P=A[1],I=Object(n.useState)(!1),R=Object(u.a)(I,2),T=R[0],B=R[1],E=Object(n.useState)(ht(J[t])),z=Object(u.a)(E,2),L=z[0],W=z[1],H=Object(n.useState)({}),K=Object(u.a)(H,2),G=K[0],U=(K[1],Object(n.useState)()),M=Object(u.a)(U,2),q=M[0],Q=M[1],$=Object(n.useState)(""),te=Object(u.a)($,2),re=te[0],ne=te[1],ae=Object(n.useState)(void 0),se=Object(u.a)(ae,2),ie=se[0],ce=se[1],oe=Object(n.useState)(null),le=Object(u.a)(oe,2),de=le[0],ue=le[1],be=Object(n.useState)(null),pe=Object(u.a)(be,2),he=pe[0],fe=pe[1],me=Object(n.useState)(null),xe=Object(u.a)(me,2),Oe=xe[0],ve=xe[1],ge=Object(n.useContext)(Ge).fetched,ye=function(){var e=Object(c.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ge.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,ge.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==Y[t]&&Object.values(Y[t]).forEach((function(e){return ye(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var t,r,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,F("features",t);case 4:r=e.sent,Q(r.docs.map((function(e){return e._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,i]),void 0===J[t])return Object(Z.jsx)("div",{children:"This entity cannot be posted"});var ke=function(){var e=Object(c.a)(b.a.mark((function e(t){var r,n,a,s,i,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,n={_id:r},a={filter:JSON.stringify(n)},e.next=6,F("features",a);case 6:return s=e.sent,i=s.docs[0],c=i.items,o=Ce([],c),j(o),v(c),ne(r),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e,t){var r=[],n=ht(e);return t.forEach((function(e){"number"===e.type?0===e.dimension?r.push({name:e.name,value:NaN,type:e.type}):r.push([{name:e.name,value:NaN,type:e.type}]):"text"===e.type?0===e.dimension?r.push({name:e.name,value:"",type:e.type}):r.push([{name:e.name,value:"",type:e.type}]):"enum"===e.type&&(0===e.dimension?r.push({name:e.name,value:"",enumValues:e.range,type:e.type}):r.push([{name:e.name,value:"",enumValues:e.range,type:e.type}]))})),n.push({values:r}),n},Ne=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=void 0,a=ht(L),console.log(d),s=d.map((function(e){return{values:e.values.map((function(e){return e.value}))}})),void 0!==a.token&&(n=a.token,delete a.token),je(a),a.feature=re,a.samples=s,e.prev=9,e.next=12,S(t,JSON.stringify(a),n);case 12:c=e.sent,i=c.response,P(i.statusText),B(!1),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0),i=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),B(!0);case 24:200===i.status&&!0===window.confirm("Back to resource page?")&&g("/"+t);case 25:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(e){e.preventDefault(),g(-1)},_e=function(){var e=Object(c.a)(b.a.mark((function e(r){var n,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==ie){e.next=5;break}return P(X().no_file),B(!0),e.abrupt("return");case 5:if(!ie.name.endsWith(".csv")){e.next=23;break}return(a=new FormData).append("file",ie),e.prev=8,e.next=11,C(t,a);case 11:s=e.sent,n=s.response,P(n.statusText),B(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),n=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),B(!0);case 23:if(!ie.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,S(t,Oe,void 0);case 27:i=e.sent,n=i.response,P(n.statusText),B(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),n=e.t1.error.response,P(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),B(!0);case 39:200===n.status&&!0===window.confirm("Back to resource page?")&&g("/"+t);case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"page",children:[Object(Z.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(Z.jsx)("b",{children:t})]}),Object(Z.jsxs)("main",{className:"page-content",children:[Object(Z.jsxs)(lt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){N(e),P(""),B(!1)},defaultActiveKey:"form",children:[V[t].includes("form")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"form",children:"Form"})}),V[t].includes("file")&&null===i.get("from")&&Object(Z.jsx)(lt.a.Item,{children:Object(Z.jsx)(lt.a.Link,{eventKey:"file",children:"File"})})]}),Object(Z.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===w&&void 0!==q&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[Object(Z.jsxs)(ee.a.Select,{"aria-label":X().select+" feature",onChange:ke,value:re,children:[Object(Z.jsxs)("option",{children:[X().select," feature"]}),a.a.Children.toArray(q.map((function(e){return Object(Z.jsx)("option",{value:e,children:e})})))]}),Object(Z.jsx)("hr",{}),Object(Z.jsxs)(Re.a,{fluid:!0,children:[Object(Z.jsx)(Te.a,{children:Object(Z.jsxs)("b",{children:["Samples :",d.length]})}),Object(Z.jsx)("br",{}),a.a.Children.toArray(d.map((function(e,t){return Object(Z.jsx)(Te.a,{style:{padding:10},children:Object(Z.jsx)(we.a,{defaultActiveKey:"0",children:Object(Z.jsxs)(we.a.Item,{eventKey:t,children:[Object(Z.jsx)(we.a.Header,{children:Object(Z.jsx)("b",{children:Object(Z.jsxs)("i",{children:["Sample [",t,"]"]})})}),Object(Z.jsx)(we.a.Body,{children:a.a.Children.toArray(Object.values(e.values).map((function(e){return Object(Z.jsxs)(Te.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px",padding:10},children:[Object(Z.jsx)(Be.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Z.jsx)("b",{children:Object(Z.jsx)("i",{children:e.name})})}),Object(Z.jsx)(Be.a,{sm:2,children:"enum"===e.type?Object(Z.jsxs)(ee.a.Select,{"aria-label":X().select+" "+e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},children:[Object(Z.jsx)("option",{value:"",children:X().select+" "+e.name}),a.a.Children.toArray(e.enumValues.map((function(e){return Object(Z.jsx)("option",{value:e,children:e})})))]}):"text"===e.type?Object(Z.jsx)(ee.a.Control,{type:"text",id:e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},"aria-label":X().enter+" "+e.name}):Object(Z.jsx)(ee.a.Control,{type:"number",id:e.name,onChange:function(t){t.preventDefault(),e.value=parseInt(t.target.value,10)},"aria-label":X().enter+" "+e.name})})]})})))})]})})})}))),0!==d.length&&Object(Z.jsx)(f.a,{variant:"link",onClick:function(){var e=Ce(d,O);j(e)},children:Object(Z.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add sample",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})]}),Object(Z.jsx)("hr",{}),Object(Z.jsx)("br",{}),Object(Z.jsx)(rt,{values:L,resource:t,functionalFields:J,disabledFields:G,handleChangesCallback:function(e,r){var n,a=ht(L),s=a,i=-1;for(n=0;n<r.length-1;n++)s=s[r[n]],"number"===typeof r[n]&&(i=n);if("number"===typeof r[n]&&(i=n),s[r[n]]=e,-1!==i){var c="number"===typeof e?NaN:"";a=it(a,r.slice(0,i),J,t,c)}W(a)},arrayDeleteCallback:function(e){var r,n=ht(L),a=n;for(r=0;r<e.length-1&&void 0!==e[r];r++)a=a[e[r]];var s="number"===typeof a.splice(e[r],1)[0]?NaN:"";n=it(n,e.slice(0,r),J,t,s),W(n)},submitFunction:Ne,backFunction:Se}),Object(Z.jsx)("br",{}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:T?"red":"black"},children:D})]}),"file"===w&&Object(Z.jsxs)("div",{style:{margin:"5px"},children:[Object(Z.jsx)(dt,{submitFunction:_e,backFunction:Se,setContentBody:fe,setContentHeader:ue,setContentPlain:ve,setFile:ce,contentPlain:Oe,contentHeader:de,contentBody:he}),Object(Z.jsx)("font",{style:{marginLeft:"5px",color:T?"red":"black"},children:D})]})]})]})]})}var mt=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),r=t[0],s=t[1],i=Object(n.useState)(),j=Object(u.a)(i,2),f=j[0],m=j[1],x=Object(n.useState)({}),O=Object(u.a)(x,2),v=O[0],g=O[1],k=a.a.useRef(),w=localStorage.getItem("token");function C(e){s((function(t){return[e].concat(t)}))}function N(e){var t=Object(d.a)(r);t.splice(e,1),s(t)}function S(){s([])}var _={notifications:r,PushNotification:C,RemoveNotification:N,ClearNotifications:S};y.ClearNotifications=S,y.PushNotification=C,y.RemoveNotification=N,Object(n.useEffect)((function(){var e=function(){var e=Object(c.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("types",{},"");case 3:t=e.sent,m(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===f)try{e()}catch(t){console.log(t)}}),[]);var A={types:f,data:v,UpdateData:function(e,t){g((function(r){return Object(l.a)(Object(l.a)({},r),{},Object(o.a)({},t,Object(d.a)(e)))}))}};return 1==/Mobi/i.test(window.navigator.userAgent)?k.current="vertical":k.current=L,null===w?Object(Z.jsx)("div",{className:"app",children:Object(Z.jsx)(p.a,{children:Object(Z.jsxs)(h.d,{children:[Object(Z.jsx)(h.b,{path:"/",element:Object(Z.jsx)(ae,{})}),Object(Z.jsx)(h.b,{path:"/add/tenants",element:Object(Z.jsx)(jt,{resource:"tenants"})})]})})}):Object(Z.jsx)(Ge.Provider,{value:{notifications:_,fetched:A},children:Object(Z.jsx)(p.a,{children:Object(Z.jsxs)(Re.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100vh",width:"99vw"},children:["horizontal"===k.current?Object(Z.jsx)(Te.a,{style:{padding:0},children:Object(Z.jsx)($e,{})}):"",Object(Z.jsxs)(Te.a,{style:{padding:0},children:["vertical"===k.current?Object(Z.jsx)(Be.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(Z.jsx)(ye,{})}):"",1==/Mobi/i.test(window.navigator.userAgent)&&Object(Z.jsx)(Be.a,{md:"auto",style:{padding:0},children:Object(Z.jsx)(Je,{})}),Object(Z.jsx)(Be.a,{style:{paddingLeft:0,paddingRight:0},children:Object(Z.jsxs)(h.d,{children:[Object(Z.jsx)(h.b,{path:"/",element:Object(Z.jsx)(se,{})}),Object(Z.jsx)(h.b,{path:"/home",element:Object(Z.jsx)(se,{})}),Object(Z.jsx)(h.b,{path:"/viewProfile",element:Object(Z.jsx)(Ee,{})}),Object(Z.jsx)(h.b,{path:"/add/experiments/",element:Object(Z.jsx)(pt,{})}),Object(Z.jsx)(h.b,{path:"/add/measurements/",element:Object(Z.jsx)(ft,{})}),Object(Z.jsx)(h.b,{path:"/edit/:resource/:id",element:Object(Z.jsx)(ot,{})}),Object(Z.jsx)(h.b,{path:"/add/:resource/",element:Object(Z.jsx)(jt,{})}),Object(Z.jsx)(h.b,{path:"/:page",element:Object(Z.jsx)(Fe,{res:":page"})}),Object(Z.jsx)(h.b,{path:"/unauthorized",element:Object(Z.jsx)(ze,{})}),Object(Z.jsx)(h.b,{path:"/404",element:Object(Z.jsx)(ie,{})}),Object(Z.jsx)(h.b,{path:"*",element:Object(Z.jsx)(h.a,{to:"/404",replace:!0})})]})}),"vertical"===k.current&&0==/Mobi/i.test(window.navigator.userAgent)&&Object(Z.jsx)(Be.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(Z.jsx)(Je,{})})]})]})})})};i.a.render(Object(Z.jsx)(a.a.StrictMode,{children:Object(Z.jsx)(mt,{})}),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.7d31ed59.chunk.js.map