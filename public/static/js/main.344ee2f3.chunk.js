(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{107:function(e,t,r){},215:function(e,t,r){},241:function(e,t){},243:function(e,t){},258:function(e,t,r){},259:function(e,t,r){},263:function(e,t,r){},264:function(e,t,r){},265:function(e,t,r){},266:function(e,t,r){},267:function(e,t,r){},268:function(e,t,r){},269:function(e,t,r){},278:function(e,t,r){"use strict";r.r(t);var a,n=r(1),s=r.n(n),c=r(38),i=r.n(c),o=(r(215),r(6)),l=r(13),d=r(4),u=r(5),j=r(20),b=r(3),p=r(24),h=r(16),f=r(316),x={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",resources:"Risorse",notifications:"Notifiche",file_content:"Contenuto del file",preview:"Anteprima",configuration:"Configurazione",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",old_pass_empty:"Per favore, inserire la vecchia password",old_pass_wrong:"La vecchia password \xe8 sbagliata",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",import:"Importa",export:"Esporta",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta",no_file:"Si prega di selezionare un file",duplicate_error:"Nel database \xe8 gi\xe0 presente una risorsa con",error_imported_file:"Nel file sono presenti errori, non \xe8 stato possibile importarlo"},O={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",resources:"Resources",notifications:"Notifications",file_content:"File content",preview:"Preview",configuration:"Configuration",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",old_pass_empty:"Please. enter old password",old_pass_wrong:"The old password is wrong",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",import:"Import",export:"Export",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired",no_file:"Please, select a file",duplicate_error:"The database already contains a resource with",error_imported_file:"File contains errors. It was not possible to import it"},m=r(216).default,v=r(234),g=m.create({httpsAgent:new v.Agent({})}),y={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function C(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={username:"".concat(e),password:"".concat(t),tenant:"".concat(r)},c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=a+"/login";return new Promise((function(e,t){g.post(i,s,c).then((function(t){!0===n&&(localStorage.setItem("token",t.data.token),localStorage.setItem("token-expiration-time",t.data.token_expiration_time),localStorage.setItem("username",t.data.user.username),localStorage.setItem("user-role",t.data.user.type),localStorage.setItem("user-tenant",r),localStorage.setItem("login-time",(new Date).getTime().toString())),e(t)})).catch((function(e){t(e)}))}))}function k(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:L()}},t=a+"/login";return new Promise((function(r,a){g.put(t,{},e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("login-time",(new Date).getTime().toString()),localStorage.setItem("token-expiration-time",e.data.token_expiration_time),r(e)})).catch((function(e){a(e)}))}))}function w(e,t){return N.apply(this,arguments)}function N(){return N=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i,l,d=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>2&&void 0!==d[2]?d[2]:{},void 0===(s=d.length>3&&void 0!==d[3]?d[3]:void 0)&&(s=L()),c=a+"/"+t+"/file",console.log("POST file:"+c),i={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:s},Object.entries(n).forEach((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];i[r]=a})),l={headers:i},e.abrupt("return",new Promise((function(e,a){g.post(c,r,l).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),a({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function S(e,t){return _.apply(this,arguments)}function _(){return _=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(n=i.length>2&&void 0!==i[2]?i[2]:void 0)&&(n=L()),s=a+"/"+t+"/",console.log("POST :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,a){g.post(s,r,c).then((function(r){y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:r})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function A(e,t,r){return D.apply(this,arguments)}function D(){return D=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c,i,l=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:void 0,c=a+"/"+t+"/"+n,void 0===s&&(s=L()),console.log("PUT :"+c),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:s}},e.abrupt("return",new Promise((function(e,a){g.put(c,r,i).then((function(a){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)}),e({response:a})})).catch((function(e){void 0!==r.password&&(r.password="".padStart(r.password.length,"*")),y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+n+", body: "+JSON.stringify(r)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function P(e,t){return R.apply(this,arguments)}function R(){return R=Object(l.a)(Object(o.a)().mark((function e(t,r){var n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:void 0,s=a+"/"+t,void 0===n&&(n=L()),void 0!==r&&(s+="/"+r),console.log("DELETE :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n}},e.abrupt("return",new Promise((function(e,a){g.delete(s,c).then((function(a){void 0!==r?y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+r+", of type: "+t}):y.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:a})})).catch((function(e){y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+r+", of type: "+t+". "+e.message}),404===e.statusCode&&y.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),a({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return I=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2?i[2]:void 0,s=a+"/"+t+"/",void 0===n&&(n=L()),s=void 0!==r.filter?s.concat("?filter="+r.filter):s.concat("?filter="),void 0!==r.limit&&(s=s.concat("&limit="+r.limit)),void 0!==r.page&&(s=s.concat("&page="+r.page)),console.log("GET :"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function E(e,t,r){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a+"/"+t+"/"+r,void 0===n&&(n=L()),console.log("GET ONE:"+s),c={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:n},json:!0},e.abrupt("return",new Promise((function(e,t){g.get(s,c).then((function(t){e({response:t})})).catch((function(e){t({error:e})}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return localStorage.getItem("token")}function z(){return!0}var B="https://hi-drive.measurify.org/v1",H="Admin Dashboard",M=[],W="vertical",G=["updatehistory","downloadexperiment","removesteps"],K={users:["username","type","_actions"],roles:["_id","_actions"],protocols:["_id","description","_actions"],experiments:["_id","description","protocol","_actions"]},U={users:{_actions:"Management"},roles:{_actions:"Management"},protocols:{_actions:"Management"},experiments:{_actions:"Management"}},J={users:["admin"],roles:["admin"],protocols:["admin"]},V={users:["view","delete"],roles:["view","delete"],protocols:["view","delete"],experiments:["view","edit","duplicate","delete"]},q={users:["username","type","fieldmask","status"],roles:["_id","default","actions"],protocols:["_id","description","metadata","topics"],experiments:["_id","description","state","startDate","endDate","manager","place","protocol","metadata","history"]},X={experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",protocol:"",place:[{name:""}],metadata:[{name:"",value:""}],tags:[""]}},Y={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:!0},users:{username:"",password:"",type:""},roles:{_id:"",default:{create:!1,read:"",update:"",delete:""},actions:[{entity:"",crud:{create:!1,read:"",update:"",delete:""}}]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:NaN,startDate:"",endDate:"",manager:"",place:[{name:""}]}},Q={};Q.experiments={protocol:{_type:"disable",policy:z},metadata:{name:{_type:"disable",policy:z}}};var Z={users:["form","file"],roles:["form","file"],tenants:["form"],protocols:["form","file"],experiments:["form","file"]},$={users:{status:"UserStatusTypes"},roles:{default:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"},actions:{crud:{read:"RoleCrudTypes",update:"RoleCrudTypes",delete:"RoleCrudTypes"}}},protocols:{metadata:{type:"MetadataTypes"},field:{type:"TopicFieldTypes"}},experiments:{visibility:"VisibilityTypes"}},ee={users:{type:"roles"}},te={};function re(){var e=localStorage.getItem("language");return 0===M.length?O:(1===M.length&&(e=M[0]),"it"===e?x:"en"===e?O:"it"===navigator.language.substring(0,2)?x:(navigator.language.substring(0,2),O))}te.protocols={_id:"Please, enter protocol's name.",description:"Please, enter a short protocol's description."},te.experiments={_id:"Please, enter experiment's name (N.B. don't use the # character in experiment's name).",state:"Please, enter 0 for ongoing experiment, 1 for finished experiment.",description:"Please, enter a short experiment's description.",manager:"Please, enter the experiment's company name (as a short Acronym).",startDate:"Please, use yyyy/mm/dd format.",endDate:"Please, use yyyy/mm/dd format."},te.updateHistory={step:"Please, enter the step number."};var ae=void 0;function ne(){return se.apply(this,arguments)}function se(){return(se=Object(l.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("user-role"))&&void 0!==t&&""!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,E("roles",t);case 6:void 0!==(r=e.sent)&&localStorage.setItem("role",JSON.stringify(r.response.data)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function ce(e,t,r){if(void 0===ae){var a=localStorage.getItem("role");if(void 0===a||null===a)return function(e,t,r){if("create"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("read"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}}if("update"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}if("delete"===r){if("admin"===e)return!0;if("provider"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!0}if("supplier"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}if("analyst"===e){if("users"===t)return!1;if("protocols"===t)return!1;if("experiments"===t)return!1}}return!1}(e,t,r);ae=JSON.parse(a)}if(0!==ae.actions.length){var n=ae.actions.filter((function(e){return e.entity===t}))[0];if(void 0!==n&&void 0!==n[r])return"none"!==n[r]&&!1!==n[r]}return"none"!==ae.default[r]&&!1!==ae.default[r]}r(258),r(259);var ie,oe,le,de=r(0),ue=function(){function e(e){localStorage.setItem("language",e),window.location.reload()}return Object(de.jsxs)("div",{children:[re().language,Object(de.jsxs)("div",{children:[M.includes("it")&&Object(de.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),M.includes("en")&&Object(de.jsx)(f.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},je=r(333),be=["title","titleId"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pe.apply(this,arguments)}function he(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fe(e,t){var r=e.title,a=e.titleId,s=he(e,be);return n.createElement("svg",pe({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 2000 684.1443",style:{enableBackground:"new 0 0 2000 684.1443"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,ie||(ie=n.createElement("style",{type:"text/css"},"\n\t.st0{fill:#412DDC;}\n")),oe||(oe=n.createElement("g",{id:"Ebene_1"})),le||(le=n.createElement("g",{id:"Ebene_2"},n.createElement("g",{id:"Ebene_1_00000087379663538115244230000007289071449435198639_"},n.createElement("g",null,n.createElement("g",null,n.createElement("g",null,n.createElement("path",{className:"st0",d:"M273.8813,0l-18.8949,154.1839h-78.9261L195.0387,0H80.6832L30.1849,411.0756h114.3555l22.154-180.0848 h78.8426l-22.154,180.0848h114.3555L388.2368,0H273.8813z"}),n.createElement("path",{className:"st0",d:"M432.8709,2.2803l-9.2844,75.5039h114.3535l9.2864-75.5039H432.8709z M420.0013,106.6177 l-37.3841,304.4579h114.3555l37.4656-304.4579H420.0013z"})),n.createElement("path",{className:"st0",d:"M1135.3733,165.1794l-0.4077-58.5617h-97.7394l-37.3841,304.4579h114.3535l21.1777-172.0214 c1.7101-14.1721,10.3442-20.1178,29.4857-20.1178h54.7338l14.6614-118.9166 C1191.5726,100.0198,1156.9567,126.4099,1135.3733,165.1794z"}),n.createElement("path",{className:"st0",d:"M1263.7954,106.5778h114.3672l-37.3903,304.5068H1226.417L1263.7954,106.5778z M1276.6091,2.2963h114.3553 l-9.2589,75.5126h-114.3672L1276.6091,2.2963z"}),n.createElement("path",{className:"st0",d:"M1712.9618,106.5778l-136.6525,304.5068h-109.7969l-62.5334-304.5068h116.1033l15.3057,190.612 l61.4706-190.612H1712.9618z"}),n.createElement("path",{className:"st0",d:"M1998.9126,186.153l-11.4437,93.2038h-166.2128l-6.2474,50.948 c-1.2637,10.2274,1.4762,17.8566,24.2103,17.8566c20.8091,0,26.9502-4.3933,28.1194-13.9593l3.0942-25.1787h113.3988 l-2.8462,23.1474c-6.7908,55.294-37.0714,85.4801-150.293,85.4801c-118.9495,0-136.3809-35.7368-129.0587-95.4713 l15.5654-126.6967c7.334-59.7109,33.552-95.4477,152.4896-95.4477C1982.9102,100.0351,2005.6915,130.9535,1998.9126,186.153z  M1861.1619,169.5247c-22.7578,0-27.3518,7.6056-28.6036,17.833l-5.6805,46.2712h52.8138l6.0703-49.4835 C1886.9429,174.5557,1881.9591,169.5247,1861.1619,169.5247z"}),n.createElement("path",{className:"st0",d:"M851.1967,0H701.5729l-18.8969,153.8583h-97.1688l-9.3659,76.8069h97.0872l-22.1541,180.4104h149.6238 c126.5709,0,161.5131-35.2673,169.0873-96.436l26.7972-218.2031C1004.0756,35.2678,977.7676,0,851.1967,0z M881.8218,99.5311 L855.7563,311.626c-1.7101,13.8465-11.076,22.6427-45.6105,22.6427h-35.2683l12.8697-104.9071h-56.1179l9.0397-74.2819h56.1994 l9.6125-78.2729h35.2663C876.3633,76.8069,883.5319,85.6036,881.8218,99.5311z"})),n.createElement("g",null,n.createElement("path",{className:"st0",d:"M110.5972,539.2612l-9.4614,77.0629c-2.2112,18.0159-14.2417,30.3447-54.8392,30.3447H0l16.9143-137.7523 h46.2926C103.8044,508.9164,112.8124,521.2452,110.5972,539.2612z M61.123,525.8904H38.4976L25.7473,629.6988h22.6333 c23.1264,0,28.3363-7.2263,29.2829-14.9139l9.0835-73.9846C87.6895,533.1127,84.2533,525.8904,61.123,525.8904z"}),n.createElement("path",{className:"st0",d:"M216.8713,570.5604l-3.6191,29.4777H149.409l-2.5334,20.6368 c-0.7914,6.4507-0.0398,12.6072,18.6284,12.6072c16.8706,0,20.5652-3.1657,21.2811-9.012l1.4158-11.5056h23.4923 l-1.4556,11.8317c-1.9249,15.6815-12.7026,24.3116-46.6505,24.3116c-36.4256,0-42.3633-12.0424-40.3151-28.7181l5.6235-45.8193 c2.0482-16.6796,10.9408-28.7221,47.3704-28.7221C210.2138,545.6483,218.7962,554.8948,216.8713,570.5604z M174.345,561.278 c-18.6682,0-20.9311,6.1564-21.7225,12.6031l-1.6425,13.3867h40.3509l2.0084-16.3774 C194.0591,565.0403,191.2155,561.278,174.345,561.278z"}),n.createElement("path",{className:"st0",d:"M301.256,583.263l1.6664-13.5696c0.5727-4.6531-2.2709-8.4153-18.5449-8.4153 c-16.2701,0-19.9647,3.1617-20.5374,7.8148l-1.0579,8.6381c-2.076,16.9064,62.1331,9.0398,58.6771,37.2091l-1.376,11.2032 c-1.7817,14.4803-12.6867,22.7645-46.4636,22.7645s-42.5343-9.2307-40.7566-23.7111l1.7061-13.9037h23.4923l-1.6664,13.5736 c-0.5727,4.6531,2.2709,8.4154,19.1414,8.4154c16.8705,0,20.5652-3.1657,21.1379-7.8149l1.0579-8.6421 c2.076-16.9023-61.9581-9.0358-58.5021-37.2051l1.3761-11.2033c1.7777-14.4684,12.5117-22.7685,45.6921-22.7685 c33.1764,0,41.7588,9.2466,39.981,23.715l-1.7061,13.8997H301.256z"}),n.createElement("path",{className:"st0",d:"M353.8004,547.8873h23.6633l-12.1259,98.7814h-23.6673L353.8004,547.8873z M357.9763,513.8679h23.6673 l-2.1953,17.8648H355.785L357.9763,513.8679z"}),n.createElement("path",{className:"st0",d:"M389.017,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4967-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7393,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9527,28.8096-46.8494,28.8096C395.5274,684.1443,387.0921,675.5977,389.017,659.9163z M457.3623,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6867,12.3049l-4.7685,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309C453.7432,625.1053,456.5708,619.2432,457.3623,612.7964z"}),n.createElement("path",{className:"st0",d:"M514.2576,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9497-11.3823 c25.7433,0,34.1149,10.0818,31.8798,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043c-14.1144,0-21.4123,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673 L514.2576,547.8873z"}),n.createElement("path",{className:"st0",d:"M627.2013,547.8873h23.6633l-12.1259,98.7814h-23.6673L627.2013,547.8873z M631.3771,513.8679h23.6673 l-2.1953,17.8648h-23.6633L631.3771,513.8679z"}),n.createElement("path",{className:"st0",d:"M676.0392,547.8873h19.3164l0.3381,9.1432c6.9001-7.4131,17.4512-11.3823,32.9496-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9284,72.7399h-23.6673l8.7495-71.2405 c1.1136-9.0836-3.7702-13.8043-17.8847-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6673L676.0392,547.8873z"}),n.createElement("path",{className:"st0",d:"M775.278,659.9163l1.6743-13.5935h23.2537l-1.6147,13.1799c-0.7198,5.8463,2.1118,9.012,18.5409,9.012 c18.2267,0,20.4061-6.1564,21.1976-12.6032l2.764-22.5259c-5.7031,4.4265-14.9178,7.5206-29.0045,7.5206 c-30.1658,0-34.4968-11.7044-32.6037-27.1234l5.0309-40.9912c1.8931-15.4189,9.0994-27.1234,39.2652-27.1234 c16.5643,0,25.7354,4.3628,29.7323,10.6266l2.426-8.3876h19.3164l-13.1918,107.4275 c-2.0482,16.6796-10.9528,28.8096-46.8494,28.8096C781.7884,684.1443,773.3531,675.5977,775.278,659.9163z M843.6232,612.7964 l4.7724-38.8476c0.7914-6.4468-0.5966-12.3049-18.6682-12.3049c-18.0676,0-20.8953,5.8582-21.6868,12.3049l-4.7684,38.8476 c-0.7914,6.4468,0.5966,12.309,18.6642,12.309S842.8318,619.2432,843.6232,612.7964z"}),n.createElement("path",{className:"st0",d:"M1010.4437,612.4146h-42.073l-14.2258,34.2542h-24.5422l61.0076-137.7523h24.3115l26.0894,137.7523 h-25.2104L1010.4437,612.4146z M1007.791,595.4526l-8.8568-56.6289l-23.5201,56.6289H1007.791z"}),n.createElement("path",{className:"st0",d:"M1060.4349,620.6312l8.9324-72.7438h23.6633l-8.7455,71.2445 c-1.1176,9.0795,3.7662,13.8043,17.2842,13.8043s20.8118-5.202,21.9054-14.1065l8.7097-70.9423h23.6674l-12.126,98.7814 h-19.3204l-0.338-9.1432c-6.6417,7.1984-18.028,11.3823-32.6077,11.3823 C1065.6527,648.9078,1058.1998,638.826,1060.4349,620.6312z"}),n.createElement("path",{className:"st0",d:"M1199.8815,620.1062c-0.7915,6.4507,0.1432,11.1078,10.4318,11.1078h14.8383l-1.8971,15.4547h-18.9187 c-25.437,0-30.1101-10.3721-28.0579-27.0478l6.9081-56.2789h-11.1556l1.8931-15.4547h11.1595l2.3147-18.8551l24.7053-8.4671 l-3.3527,27.3222h26.6342l-1.8971,15.4547h-26.6381L1199.8815,620.1062z"}),n.createElement("path",{className:"st0",d:"M1334.0784,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1330.153,545.6483,1336.1265,557.3925,1334.0784,574.0681z M1310.4707,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 c18.6681,0,20.8953-5.8582,21.6868-12.3089L1310.4707,573.5829z"}),n.createElement("path",{className:"st0",d:"M1468.0803,545.6522c22.7526,0,31.2356,9.183,28.9647,27.6761l-9.004,73.3404h-23.6672l8.821-71.837 c1.1533-9.3818-3.8379-13.2037-14.9617-13.2037c-11.1237,0-18.3102,4.2991-19.4397,13.502l-8.7853,71.5388h-22.7924 l8.8171-71.837c1.1533-9.3818-3.8379-13.2037-14.9615-13.2037c-11.1238,0-18.3103,4.2991-19.4397,13.502l-8.7853,71.5388 h-23.6633l12.1299-98.7775h19.3164l0.3619,8.475c6.6178-7.1268,16.3774-10.7181,29.4937-10.7181 c14.3253,0,23.2697,3.7861,26.9364,11.5771c6.4547-7.795,16.5166-11.5771,30.6589-11.5771V545.6522z"}),n.createElement("path",{className:"st0",d:"M1608.5012,574.3704l-8.8767,72.2984h-19.3164l-0.6045-6.4587 c-5.7509,5.3133-16.7155,8.6978-33.8962,8.6978c-27.175,0-33.0531-8.833-31.5419-21.1617l2.1238-17.3041 c1.5153-12.3248,9.5449-20.9868,36.7159-20.9868c14.8025,0,24.0848,2.2072,29.1636,5.8303l2.6288-21.4044 c0.7914-6.4467,0.1233-12.6031-18.1034-12.6031c-15.8326,0-19.4397,3.1617-20.1556,9.0119l-1.5829,12.8737h-23.2576 l1.6425-13.3748c1.9249-15.6814,12.4481-24.1406,45.2745-24.1406C1604.6117,545.6483,1610.5494,557.6907,1608.5012,574.3704z  M1578.3911,626.8791l1.913-15.5701c0.4932-4.0526-3.619-7.2144-21.0901-7.2144c-15.6736,0-18.7677,3.1617-19.2648,7.2144 l-1.913,15.5701c-0.4971,4.0526,1.8215,7.2183,17.495,7.2183C1573.0023,634.0974,1577.894,630.9316,1578.3911,626.8791z"}),n.createElement("path",{className:"st0",d:"M1655.7285,620.1062c-0.7915,6.4507,0.1431,11.1078,10.4316,11.1078h14.8384l-1.8971,15.4547h-18.9187 c-25.4371,0-30.1101-10.3721-28.058-27.0478l6.9081-56.2789h-11.1555l1.8931-15.4547h11.1595l2.3147-18.8551l24.7052-8.4671 l-3.3525,27.3222h26.6342l-1.8971,15.4547h-26.6382L1655.7285,620.1062z"}),n.createElement("path",{className:"st0",d:"M1706.8651,547.8873h23.6633l-12.126,98.7814h-23.6674L1706.8651,547.8873z M1711.041,513.8679h23.6672 l-2.1953,17.8648h-23.6633L1711.041,513.8679z"}),n.createElement("path",{className:"st0",d:"M1838.8468,574.0681l-5.6991,46.4199c-2.0482,16.6757-10.905,28.4199-47.3307,28.4199 c-36.4255,0-42.4031-11.7441-40.3549-28.4199l5.6991-46.4199c2.0481-16.6757,10.905-28.4199,47.3346-28.4199 C1834.9214,545.6483,1840.8949,557.3925,1838.8468,574.0681z M1815.2391,573.5829c0.7914-6.4467,0.0039-12.3049-18.6642-12.3049 c-18.6682,0-20.8954,5.8582-21.6868,12.3049l-5.8184,47.3903c-0.7915,6.4507-0.004,12.3089,18.6642,12.3089 s20.8953-5.8582,21.6868-12.3089L1815.2391,573.5829z"}),n.createElement("path",{className:"st0",d:"M1866.0854,547.8873h19.3164l0.338,9.1432c6.9001-7.4131,17.4513-11.3823,32.9497-11.3823 c25.7433,0,34.115,10.0818,31.8799,28.2806l-8.9285,72.7399h-23.6672l8.7494-71.2405 c1.1136-9.0836-3.7701-13.8043-17.8846-13.8043s-21.4124,5.202-22.506,14.1026l-8.7097,70.9422h-23.6674L1866.0854,547.8873z"})))))))}var xe=n.forwardRef(fe),Oe=(r.p,s.a.createRef()),me=s.a.createRef(),ve=s.a.createRef(),ge=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),r=t[0],a=t[1];function s(){return(s=Object(l.a)(Object(o.a)().mark((function e(t){var r,n,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Oe.current.value,n=me.current.value,s=ve.current.value,""!==r){e.next=7;break}return a("Please, insert your username"),e.abrupt("return");case 7:if(""!==n){e.next=10;break}return a("Please, insert your password"),e.abrupt("return");case 10:return e.prev=10,e.next=13,C(r,n,s);case 13:return e.next=15,ne();case 15:window.location.replace("/"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 22:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return Object(de.jsxs)("div",{className:"auth-page",children:[Object(de.jsxs)("div",{className:"title-wrapper",children:[Object(de.jsx)("div",{className:"logo-section",children:Object(de.jsx)(xe,{})}),Object(de.jsx)("div",{className:"title-section",children:"Consolidated Database Dashboard"}),Object(de.jsx)("br",{}),Object(de.jsxs)("div",{className:"subtitle-section",children:["Powered by\xa0",Object(de.jsx)("a",{target:"_blank",href:"https://measurify.org/",children:"Measurify"})]})]}),M.length>1&&Object(de.jsx)("div",{className:"language-wrapper",children:Object(de.jsx)(ue,{})}),Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),Object(de.jsxs)("div",{className:"login-section",children:[Object(de.jsx)("h4",{children:re().login}),Object(de.jsxs)(je.a,{onSubmit:function(e){return s.apply(this,arguments)},children:[Object(de.jsxs)(je.a.Group,{className:"mb-3",controlId:"username",children:[Object(de.jsx)(je.a.Label,{children:re().username}),Object(de.jsx)(je.a.Control,{ref:Oe,type:"text",placeholder:re().username_suggestion})]}),Object(de.jsxs)(je.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(de.jsx)(je.a.Label,{children:re().password}),Object(de.jsx)(je.a.Control,{type:"password",ref:me,placeholder:re().password_suggestion})]}),Object(de.jsxs)(je.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(de.jsx)(je.a.Label,{children:re().tenant}),Object(de.jsx)(je.a.Control,{type:"text",ref:ve,placeholder:re().tenant_suggestion})]}),Object(de.jsx)(f.a,{variant:"success",type:"submit",children:re().submit})]}),Object(de.jsx)("br",{}),Object(de.jsx)("div",{style:{color:"red"},children:r}),Object(de.jsx)("br",{}),Object(de.jsx)("div",{className:"form-row row",children:Object(de.jsx)(p.b,{to:"/add/tenants",children:Object(de.jsxs)(f.a,{variant:"outline-success",size:"sm",children:[re().add_tenant,Object(de.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})},ye=(r(263),function(){return Object(n.useEffect)((function(){})),Object(de.jsxs)("div",{className:"page",children:[Object(de.jsx)("header",{className:"page-header",children:H}),Object(de.jsx)("main",{className:"page-content",children:Object(de.jsx)("div",{className:"home-page",children:Object(de.jsx)("div",{className:"info-box",children:Object(de.jsxs)("div",{className:"info-text",children:[re().welcome_hp,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),re().left_bar_descr_hp,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),re().right_bar_descr_hp,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),re().session_expire_info_hp,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),Object(de.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:re().github_issue_page_hp}),Object(de.jsx)("br",{})]})})})})]})}),Ce=(r(264),function(){return Object(de.jsxs)("div",{className:"notFound-page",children:[re().oh_no,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),re().broken_link,Object(de.jsx)("br",{}),Object(de.jsx)("br",{}),Object(de.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:re().github_issue_page_hp})]})}),ke=(r(265),r(76)),we=r(28),Ne=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("boolean"===typeof t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var r=!0;return t.forEach((function(t){r=r&&e(t)})),r}if(t.constructor===Object){var a=!0;return Object.entries(t).forEach((function(t){var r=Object(b.a)(t,2),n=(r[0],r[1]);a=a&&e(n)})),a}return!0},Se=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!Ne(e)})).length},_e=function e(t){if(Array.isArray(t),t.constructor===Object)for(var r=Object.entries(t),a=0;a<r.length;a++){if(Array.isArray(r[a][1]))for(var n=0;n<r[a][1].length;n++)r[a][1][n].constructor===Object||Array.isArray(r[a][1][n])?(e(r[a][1][n]),Ne(r[a][1][n])&&r[a][1].splice(n,1)):Ne(r[a][1][n])&&r[a][1].splice(n,1);if(r[a][1].constructor===Object)for(var s=Object.entries(r[a][1]),c=0;c<s.length;c++)s[a][1].constructor===Object||Array.isArray(s[a][1])?e(s[a][1]):Ne(s[a][1])&&delete r[a][1][s[a][0]]}return t},Ae=function e(t,r){if(void 0===t||void 0===r)return!1;if(t===r)return!0;if(typeof t!==typeof r)return!1;if(Array.isArray(t)&&!Array.isArray(r)||!Array.isArray(t)&&Array.isArray(r))return!1;if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===Object&&r.constructor!==Object||t.constructor!==Object&&r.constructor===Object)return!1;if(t.constructor===Object&&r.constructor===Object){var n=Object.keys(t),s=Object.keys(r);return n.length===s.length&&(!!e(n,s)&&!!e(Object.values(t),Object.values(r)))}return!1};function De(e){return e&&e[0].toUpperCase()+e.slice(1)}function Pe(e){return e.slice(0,10).replaceAll("-","/")}ke.a.library.add(we.g,we.a,we.l,we.j,we.i,we.k,we.h,we.b);var Re=s.a.createRef(),Fe=s.a.createRef(),Ie=s.a.createRef(),Ee=s.a.createRef(),Te=s.a.createRef(),Le=s.a.createRef(),ze=s.a.createRef();function Be(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),r=t[0],a=t[1],c=localStorage.getItem("username"),i=localStorage.getItem("user-role"),o=localStorage.getItem("user-tenant");return Le.current=null!==c?c:"",Te.current=null!==i?i:"",ze.current=null!==o&&""!==o?o:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==Ie.current)r=Ie.current-1;else{if(null===Fe.current){var a=localStorage.getItem("login-time");null!==a?(Fe.current=a,t=parseInt(a,10)):(t=Date.now(),Fe.current=t)}else t=parseInt(Fe.current,10);null===Ee.current&&(Ee.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+Ee.current-Date.now())/1e3}if(r<60&&(clearInterval(Re.current),k().then((function(){Ie.current=null,Fe.current=null,Re.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");Ie.current=parseInt(r,10)}Re.current=setInterval((function(){e()}),1e3)}),[]),Object(de.jsxs)("nav",{className:"app-nav",children:[Object(de.jsx)(f.a,{className:"app-nav-opener",onClick:function(){return a(!r)},children:r?Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(de.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(de.jsx)(p.b,{to:"/home",className:"nav-wrap",children:H}),Object(de.jsx)("hr",{}),Object(de.jsx)("div",{className:"app-nav-wrapper ".concat(r?"opened":""),children:Object(de.jsxs)("div",{className:"app-nav-links",children:[Object(de.jsx)("hr",{}),Object(de.jsxs)("div",{className:"data-wrapper",children:[Object(de.jsxs)(p.b,{to:"/viewProfile/",children:[re().welcome+" ",Object(de.jsx)("b",{children:Le.current})]},"viewProfile"),Object(de.jsx)("div",{style:{paddingLeft:"10px"},children:Object(de.jsxs)("h3",{children:[re().role+" ","admin"===Te.current?Object(de.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===Te.current?Object(de.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===Te.current?Object(de.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===Te.current?Object(de.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(de.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(de.jsx)("div",{style:{paddingLeft:"10px"},children:Object(de.jsxs)("h3",{children:[re().tenant+" ",Object(de.jsx)("b",{children:ze.current})]})}),Object(de.jsx)("br",{}),Object(de.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(de.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:re().logout})}),M.length>1&&Object(de.jsxs)(s.a.Fragment,{children:[Object(de.jsx)("hr",{}),Object(de.jsx)("h2",{children:Object(de.jsx)(ue,{})})]})]}),Object(de.jsx)("hr",{}),Object(de.jsx)("div",{className:"app-nav-text",children:re().resources}),Object(de.jsx)("hr",{}),Object.keys(K).map((function(e){return!ce(Te.current,e,"read")||void 0!==J[e]&&!J[e].includes(Te.current)?"":Object(de.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:De(e)},e)})),Object(de.jsx)("hr",{}),0!==G.length&&Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{className:"app-nav-text",children:"Manage Experiments"})," ",Object(de.jsx)("hr",{})]}),G.includes("updatehistory")&&ce(Te.current,"experiments","update")&&Object(de.jsx)(p.b,{to:"/updatehistory",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Update Experiments History"}),G.includes("downloadexperiment")&&ce(Te.current,"experiments","read")&&Object(de.jsx)(p.b,{to:"/downloadexperiment",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Download Experiments Data"}),G.includes("removesteps")&&ce(Te.current,"experiments","update")&&Object(de.jsx)(p.b,{to:"/removesteps",className:function(e){return e.isActive?"active":""},onClick:function(){return a(!1)},children:"Remove History Steps"})]})})]})}var He=r(317),Me=r(335),We=r(197),Ge=r(334);function Ke(e){var t={};return q[e.resType].forEach((function(r){r.constructor===Object?Object.keys(r).forEach((function(a){Array.isArray(e.resource[a])?t[a]=e.resource[a].map((function(e){var t={};return r[a].forEach((function(r){t[r]=e[r]})),t})):t[a]=e.resource[a]})):Object.keys(e.resource).includes(r)&&(t[r]=e.resource[r])})),Ue(t)}function Ue(e){return Object(de.jsx)(Me.a,{defaultActiveKey:0,size:"lg",children:s.a.Children.toArray(Object.entries(e).map((function(e,t){var r=Object(b.a)(e,2),a=r[0],n=r[1];return Object(de.jsxs)(Me.a.Item,{eventKey:t,children:[Object(de.jsx)(Me.a.Header,{children:Object(de.jsx)("b",{children:a})}),Object(de.jsx)(Me.a.Body,{children:n instanceof Object?Array.isArray(n)?void 0!==n[0]?Object.values(n[0]).some((function(e){return e instanceof Object}))?s.a.Children.toArray(n.map((function(e,t){var r=Object(de.jsxs)("span",{children:[a," ",Object(de.jsxs)("i",{children:["[",t,"]"]})]});return"history"===a&&void 0!==e.step&&(r=Object(de.jsxs)("span",{children:["Step ",Object(de.jsx)("i",{children:e.step})]})),"metadata"===a&&void 0!==e.name&&(r=Object(de.jsx)("span",{children:Object(de.jsx)("i",{children:e.name})})),"topics"===a&&void 0!==e.name&&(r=Object(de.jsx)("span",{children:Object(de.jsx)("i",{children:e.name})})),Object(de.jsx)(Me.a,{children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsx)(Me.a.Header,{children:r}),Object(de.jsx)(Me.a.Body,{children:Ue(e)})]})})}))):n[0]instanceof Object?Object(de.jsxs)(He.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(de.jsx)("thead",{children:Object(de.jsx)("tr",{children:s.a.Children.toArray(Object.keys(n[0]).map((function(e){return Object(de.jsx)("th",{children:e})})))})}),Object(de.jsx)("tbody",{children:s.a.Children.toArray(n.map((function(e){return Object(de.jsx)("tr",{children:s.a.Children.toArray(Object.values(e).map((function(e){return Array.isArray(e)?Object(de.jsxs)("td",{children:["[",e.join(", "),"]"]}):Object(de.jsx)("td",{children:e})})))})})))})]}):"[ "+n.join(" , ")+" ]":"[ ]":Object(de.jsx)(He.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(de.jsx)("tbody",{children:s.a.Children.toArray(Object.entries(n).map((function(e){return Object(de.jsxs)("tr",{children:[Object(de.jsx)("td",{children:Object(de.jsx)("b",{children:e[0]})}),Object(de.jsx)("td",{children:"string"!==typeof e[1]?e[1].toString():e[1]})]})})))})}):void 0===n||null==n?Object(de.jsx)("i",{children:"None"}):a.toLowerCase().includes("date")?Pe(n):n})]})})))})}function Je(e){var t=Object(n.useState)(void 0),r=Object(b.a)(t,2),a=r[0],s=r[1];Object(n.useEffect)((function(){}),[e]);var c=void 0!==a?Object(de.jsxs)(We.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?250:"400px"},children:[Object(de.jsx)(We.a.Header,{as:"h3",children:"View Resource"}),Object(de.jsx)(We.a.Body,{children:Object(de.jsx)(Ke,{resource:a,resType:e.resType})})]}):Object(de.jsx)(We.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(de.jsxs)(We.a.Header,{as:"h3",children:["Loading",Object(de.jsx)(We.a.Body,{})]})});return"view"===e.action?Object(de.jsx)(Ge.a,{trigger:"click",placement:"left",overlay:c,rootClose:!0,children:Object(de.jsx)(f.a,{variant:"link",size:"sm",onClick:function(){s(e.takeSingle(e.id))},children:Object(de.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(de.jsx)(f.a,{variant:"link",size:"sm",onClick:Object(l.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,P(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(de.jsx)(p.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(de.jsx)(f.a,{variant:"link",size:"sm",children:Object(de.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(de.jsx)(p.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(de.jsx)(f.a,{variant:"link",size:"sm",children:Object(de.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(de.jsx)("div",{})}function Ve(e){return void 0===e.header||void 0===e.resources||e.header.includes("_actions")&&void 0===e._actions?Object(de.jsx)("div",{children:"Loading"}):Object(de.jsx)("div",{children:Object(de.jsxs)(He.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(de.jsx)("thead",{children:Object(de.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(t){return void 0!==U[e.resType]&&void 0!==U[e.resType][t]?Object(de.jsx)("th",{children:U[e.resType][t]}):Object(de.jsx)("th",{children:t})})))},"header")}),Object(de.jsx)("tbody",{children:s.a.Children.toArray(e.resources.map((function(t,r){return Object(de.jsx)("tr",{children:s.a.Children.toArray(e.header.map((function(a){return"_actions"===a?Object(de.jsxs)("td",{children:[e._actions.includes("view")?Object(de.jsx)(Je,{resType:e.resType,action:"view",k:r+"_view",id:t._id,takeSingle:e.takeSingle}):"",e._actions.includes("edit")&&ce(e.userRole,e.resType,"update")?Object(de.jsx)(Je,{resType:e.resType,action:"edit",k:r+"_edit",id:t._id}):"",e._actions.includes("duplicate")&&ce(e.userRole,e.resType,"create")?Object(de.jsx)(Je,{resType:e.resType,action:"duplicate",k:r+"_duplicate",id:t._id}):"",e._actions.includes("delete")&&ce(e.userRole,e.resType,"delete")?Object(de.jsx)(Je,{resType:e.resType,action:"delete",k:r+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[a]?Array.isArray(t[a])?Object(de.jsx)("td",{children:"[ "+t[a].join(" , ")+" ]"}):Object(de.jsx)("td",{children:t[a]}):void 0})))})})))})]})})}ke.a.library.add(we.d,we.e,we.c);var qe=r(340);r(107);ke.a.library.add(we.f);var Xe=s.a.createRef();function Ye(e){var t=Object(h.o)().page,r=Object(p.c)(),a=Object(b.a)(r,2),s=a[0],c=a[1],i=Object(n.useState)(void 0),d=Object(b.a)(i,2),u=d[0],j=d[1],x=Object(n.useState)(void 0),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(n.useState)(void 0),y=Object(b.a)(g,2),C=y[0],k=y[1],w=Object(n.useState)(1),N=Object(b.a)(w,2),S=N[0],_=N[1],A=Object(n.useState)(1),D=Object(b.a)(A,2),P=D[0],R=D[1],I=Object(n.useState)(),E=Object(b.a)(I,2),T=E[0],L=E[1],z=Object(n.useState)(),B=Object(b.a)(z,2),H=B[0],M=B[1],W=Object(n.useState)(),G=Object(b.a)(W,2),U=G[0],J=G[1],q=Object(n.useState)(),X=Object(b.a)(q,2),Q=X[0],Z=X[1],$=Object(n.useState)(),ee=Object(b.a)($,2),te=ee[0],re=ee[1],ae=localStorage.getItem("user-role");Xe.current=null!==ae?ae:"",Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{},e.prev=1,e.next=4,F(t,r);case 4:a=e.sent,v(K[t]),j(a.docs),void 0!==V[t]&&k(V[t]),L(a.hasNextPage),M(a.hasPrevPage),re(a.totalPages),J(a.prevPage),Z(a.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),j(void 0),L(void 0),M(void 0),re(void 0),J(void 0),Z(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),r=null!==s.get("page")?s.get("page"):1;_(r);var a=null!==s.get("limit")?s.get("limit"):10;R(a),e({page:r,limit:a}).catch(console.error)}),[e,t,s]);var ne=function(){var e=parseInt(S,10)-2>0,t=parseInt(S,10)+2<te;return Object(de.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(de.jsxs)(qe.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(de.jsx)(qe.a.First,{disabled:1===S,onClick:function(){return c({page:1,limit:P})}}),Object(de.jsx)(qe.a.Prev,{disabled:!H,onClick:function(){return c({page:U,limit:P})}}),e&&Object(de.jsx)(qe.a.Ellipsis,{}),parseInt(S,10)-1>0&&Object(de.jsx)(qe.a.Item,{onClick:function(){return c({page:parseInt(S,10)-1,limit:P})},children:parseInt(S,10)-1}),Object(de.jsx)(qe.a.Item,{children:Object(de.jsx)("b",{children:S})}),parseInt(S,10)+1<=te&&Object(de.jsx)(qe.a.Item,{onClick:function(){return c({page:parseInt(S,10)+1,limit:P})},children:parseInt(S,10)+1}),t&&Object(de.jsx)(qe.a.Ellipsis,{}),Object(de.jsx)(qe.a.Next,{disabled:!T,onClick:function(){return c({page:Q,limit:P})}}),Object(de.jsx)(qe.a.Last,{disabled:S===te,onClick:function(){return c({page:te,limit:P})}})]})})};return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:[De(t),void 0!==Y[t]&&ce(Xe.current,t,"create")&&Object(de.jsx)(p.b,{to:"/add/"+t+"/",children:Object(de.jsx)(f.a,{variant:"link",size:"sm",children:Object(de.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsx)(Ve,{resType:t,userRole:Xe.current,header:m,resources:u,_actions:C,takeSingle:function(e){return u.find((function(t){return t._id===e}))},removeSingle:function(e){var t=u.filter((function(t){return t._id!==e}));j(t)}}),Object(de.jsx)(ne,{})]})]})}var Qe=r(318),Ze=r(319),$e=r(192);function et(e){var t=Object(n.useState)(""),r=Object(b.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(""),i=Object(b.a)(c,2),d=i[0],u=i[1],j=Object(n.useState)(""),p=Object(b.a)(j,2),h=p[0],x=p[1],O=Object(n.useState)(""),m=Object(b.a)(O,2),v=m[0],g=m[1],y=Object(n.useState)(""),k=Object(b.a)(y,2),w=k[0],N=k[1],S=Object(n.useState)(""),_=Object(b.a)(S,2),D=_[0],P=_[1],R=Object(n.useState)(""),F=Object(b.a)(R,2),I=F[0],E=F[1];Object(n.useEffect)((function(){var e=localStorage.getItem("username"),t=localStorage.getItem("user-role"),r=localStorage.getItem("user-tenant");s(null!==e?e:""),u(null!==t?t:""),x(null!==r&&""!==r?r:"-")}),[]);var T=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===v&&E(re().old_pass_empty),w===D){e.next=5;break}return E(re().pass_not_match),e.abrupt("return");case 5:if(""!==w&&""!==D){e.next=8;break}return E(re().pass_not_null),e.abrupt("return");case 8:return e.prev=8,e.next=11,C(a,v,"-"!==h?h:"",!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(8),E(re().old_pass_wrong),e.abrupt("return");case 17:if(!window.confirm(re().pass_change_confirm)){e.next=32;break}return e.prev=19,e.next=22,A("users",{password:w},a);case 22:r=e.sent,g(""),N(""),P(""),200===r.response.status&&E(re().password_changed),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[8,13],[19,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:[re().welcome,"\xa0",Object(de.jsx)("b",{children:a}),":\xa0",re().profile_page_desc]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{xs:1,children:"Username:\xa0"}),Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:a})})]}),Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{xs:1,children:re().role}),Object(de.jsxs)($e.a,{children:[d,"\xa0","admin"===d?Object(de.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===d?Object(de.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===d?Object(de.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===d?Object(de.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(de.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{xs:1,children:re().tenant+" "}),Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:h})})]})]}),Object(de.jsx)("hr",{}),Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(Ze.a,{children:Object(de.jsx)("b",{children:"Edit password"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsxs)(je.a,{onSubmit:T,children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:v,placeholder:re().enter+" old password"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"password",onChange:function(e){e.preventDefault(),N(e.target.value)},value:w,placeholder:re().enter+" new password"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"password",onChange:function(e){e.preventDefault(),P(e.target.value)},value:D,placeholder:re().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(de.jsx)(je.a.Text,{id:"passwordHelpBlock",muted:!0,children:I})]})}),Object(de.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit})]})})})]})]})]})}r(266),r(267);function tt(){return Object(de.jsx)("div",{className:"unAuth-page",children:Object(de.jsx)("div",{className:"info-box",children:Object(de.jsx)("div",{className:"info-text",children:re().unauthorised_user})})})}var rt=r(320),at=r(332),nt=r(321),st=r(337),ct=(r(268),s.a.createContext()),it=s.a.createRef();function ot(e){var t=Object(n.useState)(!1),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(!1),o=Object(b.a)(i,2),l=o[0],d=o[1],u=s.a.useRef(),j=Object(n.useContext)(ct).notifications;it.current=0;var p=function(){return c(!1)};Object(n.useEffect)((function(){it.current<j.notifications.length&&(it.current=j.notifications.length,d(!0),setTimeout((function(){d(!1)}),600))}),[j.notifications]),!0===/Mobi/i.test(window.navigator.userAgent)?u.current="vertical":u.current=W;var h=j.notifications.filter((function(e){return"error"===e.name}));return Object(de.jsxs)("div",{className:"notificationBar",style:"vertical"===u.current&&!1===/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(de.jsxs)(f.a,{variant:"link",onClick:function(){c(!0)},style:{color:"#fff",textDecoration:"none"},children:[re().notifications,"\xa0",Object(de.jsx)(rt.a,{pill:!0,bg:h.length>0?"danger":"success",className:"element".concat(l?" highlight":""),children:j.notifications.length}),Object(de.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(de.jsxs)(at.a,{style:{backgroundColor:"#123651",color:"#fff"},show:a,onHide:p,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(de.jsx)(at.a.Header,{children:Object(de.jsxs)(at.a.Title,{children:[re().notifications,"\xa0",Object(de.jsx)(rt.a,{pill:!0,bg:h.length>0?"danger":"success",children:j.notifications.length}),"\xa0\xa0\xa0",Object(de.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return p()},children:re().close+" "+re().notifications})]})}),Object(de.jsx)(at.a.Body,{children:Object(de.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==j.notifications.length&&Object(de.jsx)(f.a,{variant:"warning",onClick:function(){return j.ClearNotifications()},children:re().clear_all}),Object(de.jsx)(nt.a,{children:j.notifications.map((function(e,t){var r;return"info"===e.name&&(r="success"),"error"===e.name&&(r="danger"),Object(de.jsxs)(st.a,{className:"d-inline-block m-1",bg:r,animation:!0,onClose:function(){j.RemoveNotification(t)},children:[Object(de.jsxs)(st.a.Header,{children:[Object(de.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(de.jsx)("strong",{className:"me-auto",children:e.name}),Object(de.jsx)("small",{children:e.time.slice(0,15)})]}),Object(de.jsx)(st.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}r(269);ke.a.library.add(we.g,we.a,we.l,we.j,we.i,we.k,we.h,we.b);var lt=s.a.createRef(),dt=s.a.createRef(),ut=s.a.createRef(),jt=s.a.createRef(),bt=s.a.createRef(),pt=s.a.createRef(),ht=s.a.createRef();function ft(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),r=(t[0],t[1]),a=localStorage.getItem("username"),c=localStorage.getItem("user-role"),i=localStorage.getItem("user-tenant");return pt.current=null!==a?a:"",bt.current=null!==c?c:"",ht.current=null!==i&&""!==i?i:"-",Object(n.useEffect)((function(){function e(){var t,r;if(null!==ut.current)r=ut.current-1;else{if(null===dt.current){var a=localStorage.getItem("login-time");null!==a?(dt.current=a,t=parseInt(a,10)):(t=Date.now(),dt.current=t)}else t=parseInt(dt.current,10);null===jt.current&&(jt.current=function(){var e=localStorage.getItem("token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),r=(t+jt.current-Date.now())/1e3}if(r<60&&(clearInterval(lt.current),k().then((function(){ut.current=null,dt.current=null,lt.current=setInterval((function(){e()}),1e3)}))),r<=0)return localStorage.clear(),void window.location.replace("/");ut.current=parseInt(r,10)}lt.current=setInterval((function(){e()}),1e3)}),[]),Object(de.jsx)("nav",{className:"horizontal-nav",children:Object(de.jsx)("div",{className:"horizontal-nav-links",children:Object(de.jsx)("div",{className:"data-wrapper",children:Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsxs)(Ze.a,{style:{padding:0},children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(p.b,{to:"/home",className:"nav-wrap",children:H})}),Object(de.jsx)($e.a,{children:Object(de.jsxs)(p.b,{to:"/viewProfile/",children:[re().welcome+" ",Object(de.jsx)("b",{children:pt.current})]},"viewProfile")}),Object(de.jsx)($e.a,{children:Object(de.jsxs)("div",{className:"horizontal-nav-text",children:[re().role+" ","admin"===bt.current?Object(de.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===bt.current?Object(de.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===bt.current?Object(de.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===bt.current?Object(de.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(de.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(de.jsx)($e.a,{children:Object(de.jsxs)("div",{className:"horizontal-nav-text",children:[re().tenant+" ",Object(de.jsx)("b",{children:ht.current})]})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:re().logout})}),M.length>1&&Object(de.jsx)($e.a,{children:Object(de.jsx)(ue,{})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(ot,{})})]}),Object(de.jsxs)(Ze.a,{style:{padding:0},children:[Object(de.jsx)("hr",{}),Object(de.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:re().resources})]}),Object(de.jsx)(Ze.a,{style:{padding:0},children:s.a.Children.toArray(Object.keys(K).map((function(e){return ce(bt.current,e,"read")?Object(de.jsx)($e.a,{children:Object(de.jsx)(p.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return r(!1)},children:De(e)},e)}):""})))})]})})})})}var xt=r(64),Ot={PushLog:function(e){},RemoveLog:function(e){},ClearLogs:function(){}};function mt(e,t,r,a,n){return vt.apply(this,arguments)}function vt(){return(vt=Object(l.a)(Object(o.a)().mark((function e(t,r,n,s,c){var i,l,d,u,j,b,p;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,l=i.split("#")[0],(d=new FormData).append("file",t),u=!1===r||void 0===r?a+"/experiments/"+l+"/file?sep="+n+"&sepArray="+s+"&sepFloat="+c:a+"/experiments/"+l+"/file/?override=true&sep="+n+"&sepArray="+s+"&sepFloat="+c,j={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:L()},b={headers:j},e.prev=7,e.next=10,g.put(u,d,b);case 10:p=e.sent,Ot.PushLog({type:"info",msg:i+", successfully posted: Added: [ "+p.data.report.success.join(", ")+" ] Ignored: ["+p.data.report.ignored.join(", ")+" ] Overridden: ["+p.data.report.overridden.join(", ")+" ]\n"}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("error in response"),Ot.PushLog({type:"error",msg:i+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 18:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}function gt(e,t,r){return yt.apply(this,arguments)}function yt(){return(yt=Object(l.a)(Object(o.a)().mark((function e(t,r,n){var s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1===n||void 0===n?a+"/experiments/"+t:a+"/experiments/"+t+"?override=true",c=r.history.add[0].step,i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:L()}},e.prev=3,e.next=6,g.put(s,JSON.stringify(r),i);case 6:l=e.sent,Ot.PushLog({type:"info",msg:"Step "+c+", successfully posted: Added: [ "+l.data.report.success.join(", ")+" ] Ignored: ["+l.data.report.ignored.join(", ")+" ] Overridden: ["+l.data.report.overridden.join(", ")+" ]\n"}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("error in response"),Ot.PushLog({type:"error",msg:"Step "+c+" was not posted: "+e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"")});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function Ct(e,t,r,a){return kt.apply(this,arguments)}function kt(){return kt=Object(l.a)(Object(o.a)().mark((function e(t,r,a,n){var s,c,i,l,d,u,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j.length>4&&void 0!==j[4]?j[4]:void 0,c="experiments/"+t+"/history?sep="+r+"&sepArray="+a+"&sepFloat="+n,i=t+"#history.csv",e.prev=3,e.next=6,wt(c);case 6:return l=e.sent,d=new Blob([l]),u=null,void 0===s||!1===s?Object(xt.saveAs)(d,i):u=new File([d],i),Ot.PushLog({type:"info",msg:i+" successfully downloaded.\n"}),e.abrupt("return",u);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])}))),kt.apply(this,arguments)}function wt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(l.a)(Object(o.a)().mark((function e(t){var r,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"get",url:a+"/"+t,headers:{Authorization:L()}},e.prev=2,e.next=5,g(r);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),Ot.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details:"")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function St(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(l.a)(Object(o.a)().mark((function e(t,r){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"put",url:a+"/experiments/"+t,headers:{Authorization:L()},data:{history:{remove:r}}},e.prev=2,e.next=5,g(n);case 5:e.sent,Ot.PushLog({type:"info",msg:"Successfully deleted steps with id: "+r.join(" - ")+"\n"}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("error in response"),console.log(e.t0),Ot.PushLog({type:"error",msg:e.t0.response.data.message+" "+(void 0!==e.t0.response.data.details?e.t0.response.data.details+"\n":"\n")});case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var At=r(330),Dt=r(331),Pt=function(e){var t,r=Object(n.useContext)(ct);if(t=void 0!==r?r.fetched:{},void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";return Object(de.jsxs)(je.a,{onSubmit:e.submitFunction,children:[Object(de.jsxs)(Qe.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&s.a.Children.toArray(Object.entries(e.values).map((function(r){var a,n=Object(b.a)(r,2),c=n[0],i=n[1];if(void 0!==$[e.resource]&&void 0!==$[e.resource][c]&&void 0!==t.types&&void 0!==t.types[$[e.resource][c]])return function(t,r){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:t})}),Object(de.jsx)($e.a,{sm:4,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsxs)(je.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(de.jsx)("option",{children:re().select+" "+t}),s.a.Children.toArray(Object.entries(r).map((function(e){var t=Object(b.a)(e,2),r=(t[0],t[1]);return Object(de.jsx)("option",{value:r,children:r})})))]})})})]},t)}(c,t.types[$[e.resource][c]]);if(Array.isArray(i)){if("number"===typeof i[0])return a=c,Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:a})}),Object(de.jsx)($e.a,{sm:2,children:s.a.Children.toArray(e.values[a].map((function(t,r){return Object(de.jsx)(Ze.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"number",disabled:void 0!==e.disabledFields[a]&&e.disabledFields[a],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[a,r])},value:isNaN(e.values[a][r])?"":e.values[a][r],placeholder:re().enter+" "+a+"["+r+"]"})})})})))})]},a);if("boolean"===typeof i[0])return function(t){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:t})}),Object(de.jsx)($e.a,{children:s.a.Children.toArray(e.values[t].map((function(r,a){return Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(f.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(r){r.preventDefault(),e.arrayDeleteCallback([t,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{sm:6,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t,a])},checked:e.values[t][a],placeholder:re().enter+" "+t})})}),Object(de.jsx)($e.a,{md:"auto"})]})})))})]},t)}(c);if("string"===typeof i[0])return function(r){var a;return t!=={}&&void 0!==t.data[r]&&(a=t.data[r]),Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:r})}),Object(de.jsx)($e.a,{children:s.a.Children.toArray(e.values[r].map((function(n,s){return Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,s])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{sm:Math.max(2,2),children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:void 0!==t.data[r]?Object(de.jsx)(Dt.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],id:r,onChange:function(t,a){t.preventDefault(),e.handleChangesCallback(a,[r,s])},value:""===e.values[r][s]?null:e.values[r][s],options:a,renderInput:function(e){return Object(de.jsx)(At.a,Object(u.a)(Object(u.a)({},e),{},{label:re().enter+" "+r+"["+s+"]"}))}}):Object(de.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,s])},value:e.values[r][s],placeholder:re().enter+" "+r+"["+s+"]"})})}),Object(de.jsx)($e.a,{md:"auto"})]})})))})]},r)}(c);if(i[0].constructor===Object)return function(r){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:r})}),Object(de.jsxs)($e.a,{children:[Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:[void 0===e.disabledFields[r]&&Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)("b",{children:Object(de.jsx)("i",{children:"Remove"})})}),s.a.Children.toArray(Object.entries(e.values[r][0]).map((function(e){return Object(de.jsx)($e.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(de.jsx)("b",{children:Object(de.jsx)("i",{children:De(r)+" "+e[0]})})})})))]}),s.a.Children.toArray(e.values[r].map((function(a,n){return Object(de.jsxs)(Ze.a,{children:[void 0===e.disabledFields[r]&&Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(f.a,{disabled:void 0!==e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(Object.entries(a).map((function(a){var c=Object(b.a)(a,2),i=c[0],o=c[1],l=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][i]?e.disabledFields[r][i]:!0===e.disabledFields[r]);return"number"===typeof o?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i])},disabled:l,value:isNaN(e.values[r][n][i])?"":e.values[r][n][i],placeholder:re().enter+" "+i})})}):"boolean"===typeof o?Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,n,i])},disabled:l,checked:e.values[r][n][i],placeholder:re().enter+" "+i})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][i]&&void 0!==t.types&&void 0!==t.types[$[e.resource][r][i]]?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsxs)(je.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i])},value:e.values[r][n][i],disabled:l,children:[Object(de.jsx)("option",{children:re().select+" "+i}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][i]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(de.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof o?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i])},value:e.values[r][n][i],placeholder:re().enter+" "+i}),"metadata"===r&&"name"===i&&"Country"===e.values[r][n][i]&&Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(o)?0===o.length?i+" is empty":"range"===i&&"enum"!==e.values[r][n].type?"":Object(de.jsx)(Me.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsxs)(Me.a.Header,{children:[Object(de.jsx)("b",{children:i})," : ",Se(o)," items"]}),Object(de.jsx)(Me.a.Body,{children:Object(de.jsx)(Qe.a,{fluid:!0,children:s.a.Children.toArray(o.map((function(t,a){if(t.constructor===Object){var c=Object.entries(t);return Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(c.map((function(t){var s=Object(b.a)(t,2),c=s[0],o=s[1];return Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"text",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a,c])},value:o,placeholder:re().enter+" "+c})})})})))]})}return"number"===typeof t?Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i,a])},value:isNaN(t)?"":t,placeholder:re().enter+" "+i})})]}):"string"===typeof t?Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{disabled:l,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,n,i,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a])},value:t,placeholder:re().enter+" "+i})})]}):"Unknown data type"})))})})]})}):o.constructor===Object?Object(de.jsx)(Me.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsx)(Me.a.Header,{children:Object(de.jsx)("b",{children:i})}),Object(de.jsx)(Me.a.Body,{children:Object(de.jsx)(Qe.a,{fluid:!0,children:Object(de.jsx)(Ze.a,{children:s.a.Children.toArray(Object.entries(o).map((function(a){return"number"===typeof a[1]?Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"number",disabled:l,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n,i,a[0]],!0)},value:isNaN(a[1])?"":a[1],placeholder:re().enter+" "+a[0]})}):"boolean"===typeof a[1]?Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,n,i,a[0]],!0)},disabled:l,checked:a[1],label:a[0]})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][i]&&void 0!==$[e.resource][r][i][a[0]]&&void 0!==t.types&&void 0!==$[e.resource][r][i][a[0]]?Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsxs)(je.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a[0]],!0)},value:a[1],disabled:l,children:[Object(de.jsx)("option",{children:re().select+" "+a[0]}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][i][a[0]]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(de.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof a[1]?Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[i]&&e.disabledFields[i],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,n,i,a[0]],!0)},value:a[1],placeholder:re().enter+" "+a[0]})}):"Unknown data type"})))})})})]})}):"Unknown data type"})))]})})))]})]},r)}(c)}return"number"===typeof i?function(t){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:t})}),Object(de.jsx)($e.a,{sm:4,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"number",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(parseInt(r.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:re().enter+" "+t}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(de.jsx)(je.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):void 0!==ee[e.resource]&&void 0!==ee[e.resource][c]&&void 0!==t.data[ee[e.resource][c]]?function(r,a){var n;return t==={}||void 0===t.data[r]&&void 0===t.data[a]||(n=t.data[void 0!==a?a:r]),Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:r})}),Object(de.jsx)($e.a,{sm:4,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(Dt.a,{id:r,onChange:function(t,a){t.preventDefault(),e.handleChangesCallback(a,[r])},disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],value:""===e.values[r]?null:e.values[r],options:n,renderInput:function(e){return Object(de.jsx)(At.a,Object(u.a)(Object(u.a)({},e),{},{label:re().enter+" "+r}))}})})})]},r)}(c,ee[e.resource][c]):"boolean"===typeof i?function(t){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:t})}),Object(de.jsx)($e.a,{sm:1,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Check,{id:t,type:"checkbox",onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.checked,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],checked:e.values[t]}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(de.jsx)(je.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):"string"===typeof i?function(t){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:t})}),Object(de.jsx)($e.a,{sm:4,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"password"===t?"password":"text",id:t,onChange:function(r){r.preventDefault(),e.handleChangesCallback(r.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:e.values[t],placeholder:re().enter+" "+t}),void 0!==te[e.resource]&&void 0!==te[e.resource][t]&&Object(de.jsx)(je.a.Text,{className:"text-muted",children:te[e.resource][t]})]})})]},t)}(c):i.constructor===Object?function(r){return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Ze.a,{style:{borderBottomStyle:"dashed",borderBottomWidth:"1px",marginBottom:"5px"},children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(e){return Object(de.jsx)($e.a,{sm:"boolean"===typeof e[1]?1:("number"===typeof e[1]||e[1],2),children:Object(de.jsx)("b",{children:Object(de.jsx)("i",{children:De(r)+" "+e[0]})})})})))}),Object(de.jsx)(Ze.a,{children:s.a.Children.toArray(Object.entries(e.values[r]).map((function(a){var n=Object(b.a)(a,2),c=n[0],i=n[1],o=void 0!==e.disabledFields[r]&&(void 0!==e.disabledFields[r][c]?e.disabledFields[r][c]:!0===e.disabledFields[r]);return"number"===typeof i?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"number",onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c])},disabled:o,value:isNaN(e.values[r][c])?"":e.values[r][c],placeholder:re().enter+" "+c})})}):"boolean"===typeof i?Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.checked,[r,c])},disabled:o,checked:e.values[r][c],label:c})})}):void 0!==$[e.resource]&&void 0!==$[e.resource][r]&&void 0!==$[e.resource][r][c]&&void 0!==t.types&&void 0!==t.types[$[e.resource][r][c]]?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsxs)(je.a.Select,{"aria-label":"Default select",onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],disabled:o,children:[Object(de.jsx)("option",{children:re().select+" "+c}),s.a.Children.toArray(Object.entries(t.types[$[e.resource][r][c]]).map((function(e){var t=Object(b.a)(e,2),r=t[0],a=t[1];return Object(de.jsx)("option",{value:r,children:a})})))]})})}):"string"===typeof i?Object(de.jsx)($e.a,{sm:2,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c])},value:e.values[r][c],placeholder:re().enter+" "+c}),"metadata"===r&&"name"===c&&"Country"===e.values[r][c]&&Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Please, enter 2-letter country code (i.e., It, De, Fr, etc...)."})]})}):Array.isArray(i)?0===i.length?c+" is empty":"range"===c&&"enum"!==e.values[r].type?"":Object(de.jsx)(Me.a,{defaultActiveKey:"0",style:{paddingBottom:"10px",width:"auto"},children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsxs)(Me.a.Header,{children:[Object(de.jsx)("b",{children:c})," : ",Se(i)," items"]}),Object(de.jsx)(Me.a.Body,{children:Object(de.jsx)(Qe.a,{fluid:!0,children:s.a.Children.toArray(i.map((function(t,a){if(t.constructor===Object){var n=Object.entries(t);return Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(de.jsx)($e.a,{sm:1,children:Object(de.jsx)(f.a,{disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),s.a.Children.toArray(n.map((function(t){var n=Object(b.a)(t,2),s=n[0],i=n[1];return Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Control,{type:"text",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,a,s])},value:i,placeholder:re().enter+" "+s})})})})))]})}return"number"===typeof t?Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"number",disabled:o,onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,c,a])},value:isNaN(t)?"":t,placeholder:re().enter+" "+c})})]}):"string"===typeof t?Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{disabled:o,variant:"link",size:"sm",onClick:function(t){t.preventDefault(),e.arrayDeleteCallback([r,c,a])},children:Object(de.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[c]&&e.disabledFields[c],onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[r,c,a])},value:t,placeholder:re().enter+" "+c})})]}):"Unknown data type"})))})})]})}):"Unknown data type"})))})]})}(c):""})))]},"form"),Object(de.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit}),"\xa0\xa0\xa0",void 0!==e.backFunction&&Object(de.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:re().cancel})]})},Rt=r(72);function Ft(e,t){var r=Object.keys(e),a=Object.keys(t);return(r=r.filter((function(e){return-1!==a.indexOf(e)}))).sort((function(e,t){return a.indexOf(e)-a.indexOf(t)})),r.reduce((function(r,a){if(Array.isArray(e[a])&&0!==e[a].length&&e[a][0].constructor===Object){var n=e[a].map((function(e){return Ft(e,t[a][0])}));r[a]=n}else r[a]=e[a];return r}),{})}function It(e,t,r){for(var a=Object.keys(e),n=Rt(e),s=0;s<a.length;s++)Array.isArray(n[a[s]])&&(n=Et(n,[a[s]],t,r));return n}function Et(e,t,r,a){for(var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=Rt(e),c=s,i=void 0!==r?Rt(r[a]):void 0,o=Object(j.a)(t),l=0;l<o.length&&void 0!==t[l];l++)c=c[t[l]];var d,b=Se(c),p=c.length;if(b<p)return s;for(var h=0;h<o.length&&void 0!==t[h]&&void 0!==i;h++)i="number"===typeof t[h]?i[0]:i[t[h]];return void 0===i||Array.isArray(i)?(void 0!==i&&(d=i[0].constructor===Object?Object(u.a)({},i[0]):""),void 0!==n&&void 0===i&&(d=n.constructor===Object?Object(u.a)({},n):n),void 0!==d&&c.push(d),s):s}var Tt=r(72);function Lt(e){var t=Object(h.o)(),r=t.resource,a=t.id,s=Object(n.useState)(),c=Object(b.a)(s,2),i=c[0],u=c[1],p=Object(n.useState)(""),f=Object(b.a)(p,2),x=f[0],O=f[1],m=Object(h.m)(),v=Object(n.useState)(Tt(X[r])),g=Object(b.a)(v,2),y=g[0],C=g[1],k=Object(n.useState)({}),w=Object(b.a)(k,2),N=w[0],S=(w[1],Object(n.useState)(void 0)),_=Object(b.a)(S,2),D=_[0],P=_[1],R=Object(n.useContext)(ct).fetched,I=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===R.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,R.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){void 0!==ee[r]&&Object.values(ee[r]).forEach((function(e){return I(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,s,c,i,j=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>0&&void 0!==j[0]?j[0]:{},e.next=3,F(r,t);case 3:n=e.sent,s=n.docs[0],c=Tt(y),c=Ft(s,c),Object.entries(c).forEach((function(e){e[0].toLowerCase().includes("date")&&(c[e[0]]=Pe(e[1]))})),i=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,s,i,l,j,b,p,h,f,x,O,m,v,g;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==Q[r]){e.next=7;break}for(P({}),t=Object.keys(c),n=0;n<t.length;n++)s=t[n],c=Et(c,[s],X,r);return C(c),u(Tt(c)),e.abrupt("return");case 7:i={},void 0!==D&&(i=D),l=Object.entries(Q[r]),j=0;case 11:if(!(j<l.length)){e.next=40;break}if(b=l[j][0],p=l[j][1],void 0!==c[b]){e.next=16;break}return e.abrupt("continue",37);case 16:if(void 0===p._type||"disable"!==p._type){e.next=23;break}return e.next=19,p.policy(a);case 19:h=e.sent,i[b]=h,e.next=37;break;case 23:f=Object.entries(p),x=0;case 25:if(!(x<f.length)){e.next=37;break}if(console.log({value:p,k:f[x][0],v:f[x][1],val:c[b]}),!1!==Array.isArray(c[b])||void 0!==c[b][f[x][0]]){e.next=29;break}return e.abrupt("continue",34);case 29:if(void 0===f[x][1]._type||"disable"!==f[x][1]._type){e.next=34;break}return e.next=32,f[x][1].policy(a);case 32:O=e.sent,i[b]=Object(d.a)({},f[x][0],O);case 34:x++,e.next=25;break;case 37:j++,e.next=11;break;case 40:for(m=Object.keys(c),v=0;v<m.length;v++)g=m[v],void 0!==i[g]&&!1!==i[g]||(c=Et(c,[g],X,r));P(i),C(c),u(Tt(c));case 45:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:a};e({filter:JSON.stringify(t)})}),[]);var E=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n,s,c,l,u,b,p,h,f,x,v,g,C,k,w;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),n=Tt(y),s=Tt(i),_e(n),_e(s),c={},l=Object.entries(n),u=0;u<l.length;u++)if(b=l[u][0],p=l[u][1],Array.isArray(p)){if(void 0===c[b]&&(c[b]={add:[],remove:[],update:[]}),h=Object(j.a)(s[b]),void 0!==N[b])for(f=0;f<N[b].indexes.length;f++)(x=h.splice(N[b].indexes[f][0],1)[0]).constructor===Object?(v=Object.keys(x)[0],c[b].remove.push(x[v])):c[b].remove.push(x);for(g=0;g<n[b].length;g++)g<h.length&&!Ae(n[b][g],h[g])&&(n[b][g].constructor===Object?(k=Object.keys(h[g])[0],c[b].update.push((C={},Object(d.a)(C,k,h[g][k]),Object(d.a)(C,"new",n[b][g]),C))):(c[b].add.push(n[b][g]),c[b].remove.push(h[g]))),g>=h.length&&c[b].add.push(n[b][g]);Ae(c[b],{add:[],remove:[],update:[]})&&delete c[b]}else p.constructor===Object||p!==i[b]&&(c[b]=p);if(0!==Object.keys(c).length){e.next=11;break}return O("No changes found"),e.abrupt("return");case 11:return e.prev=11,e.next=14,A(r,c,a);case 14:w=e.sent,w.response,window.alert("Resource successfully edited!"),m("/"+r),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(11),e.t0.error.response,O(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 24:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(de.jsx)("b",{children:r}),"\xa0of id:\xa0",Object(de.jsx)("b",{children:a}),"\xa0"]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsx)(Pt,{values:y,resource:r,functionalFields:X,disabledFields:D,handleChangesCallback:function(e,t){var a,n=Tt(y),s=n,c=-1;for(a=0;a<t.length-1;a++)s=s[t[a]],"number"===typeof t[a]&&(c=a);if("number"===typeof t[a]&&(c=a),s[t[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Et(n,t.slice(0,c),X,r,i)}C(n)},arrayDeleteCallback:function(e){var t,a=Tt(y),n=a;for(t=0;t<e.length-1&&void 0!==e[t];t++)n=n[e[t]];var s=n.splice(e[t],1),c="number"===typeof s[0]?NaN:"";a=Et(a,e.slice(0,t),X,r,c),1===t&&(void 0===N[e[0]]&&(N[e[0]]={indexes:[],elements:[],minDel:1/0}),Ne(s[0])||(N[e[0]].elements.push(s[0]),N[e[0]].indexes.push(e[t]>=N[e[0]].minDel?e[t]+N[[e[0]]].indexes.filter((function(r){return r>=e[t]})).length:e[t]),e[t]<N[e[0]].minDel&&(N[e[0]].minDel=e[t]))),C(a)},submitFunction:E,backFunction:function(e){e.preventDefault(),m(-1)}}),Object(de.jsx)("br",{}),Object(de.jsx)("font",{style:{marginLeft:"5px"},children:x})]})]})}var zt=r(336),Bt=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(de.jsxs)(je.a,{onSubmit:e.submitFunction,children:[Object(de.jsx)(je.a.Label,{children:Object(de.jsx)("b",{children:re().select_file})}),Object(de.jsx)(je.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var r=t.target.files[0];e.setFile(r);var a=new FileReader;a.onloadend=function(){var t=a.result;if(r.name.endsWith(".csv")){var n=new RegExp("\\r","g"),s=t.replace(n,"").split("\n");e.setContentHeader(s[0]),s.splice(0,1),e.setContentBody(s),e.setContentPlain(null)}r.name.endsWith(".json")&&(e.setContentHeader(null),e.setContentBody(null),e.setContentPlain(JSON.stringify(JSON.parse(t),null,4)))},a.readAsText(r)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(de.jsx)(Me.a,{children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsx)(Me.a.Header,{children:re().file_content}),Object(de.jsx)(Me.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(de.jsxs)(He.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(de.jsx)("thead",{children:Object(de.jsx)("tr",{children:s.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(de.jsx)("th",{children:e})})))})}),Object(de.jsx)("tbody",{children:s.a.Children.toArray(e.contentBody.map((function(e){return Object(de.jsx)("tr",{children:s.a.Children.toArray(e.split(",").map((function(e){return Object(de.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(de.jsx)(Me.a,{children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsx)(Me.a.Header,{children:re().file_content}),Object(de.jsx)(Me.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(de.jsx)("textarea",{style:{resize:"both"},cols:"120",rows:"10",readOnly:!0,value:e.contentPlain})})]})}),Object(de.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit},"submit"),"\xa0\xa0\xa0",Object(de.jsx)(f.a,{variant:"secondary",onClick:e.backFunction,children:re().cancel},"cancel")]})},Ht=r(72);function Mt(e){var t=Object(h.o)().resource,r=Object(p.c)(),a=Object(b.a)(r,2),s=a[0];a[1];void 0!==e.resource&&(t=e.resource);var c,i=Object(h.m)(),d=Object(n.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],x=Object(n.useState)(""),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),C=y[0],k=y[1],N=Object(n.useState)(Ht(Y[t])),_=Object(b.a)(N,2),A=_[0],D=_[1],P=Object(n.useState)(void 0),R=Object(b.a)(P,2),I=R[0],E=R[1],T=Object(n.useState)(null),L=Object(b.a)(T,2),z=L[0],B=L[1],H=Object(n.useState)(null),M=Object(b.a)(H,2),W=M[0],G=M[1],K=Object(n.useState)(null),U=Object(b.a)(K,2),J=U[0],V=U[1],q=Object(n.useContext)(ct);if(c=void 0!==q?q.fetched:{},Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===c.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,c.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();void 0!==ee[t]&&Object.values(ee[t]).forEach((function(t){return e(t)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n,s,c=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,F(t,r);case 3:a=e.sent,n=a.docs[0],s=Ht(A),s=It(s=Ft(n,s),Y,t),D(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var r={_id:s.get("from")};e({filter:JSON.stringify(r)})}}),[s,t]),void 0===Y[t])return Object(de.jsx)("div",{children:"This entity cannot be posted"});var X=function(e){e.preventDefault(),i(-1)},Q=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=void 0,void 0!==(n=Ht(A)).token&&(a=n.token,delete n.token),s=Ht(n),_e(s),e.prev=6,e.next=9,S(t,JSON.stringify(s),a);case 9:l=e.sent,c=l.response,v(c.statusText),k(!1),e.next=24;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),c=e.t0.error.response,console.log({message:c.data.message,details:c.data.details}),d="",d=c.data.details.includes("duplicate key")?re().duplicate_error+" "+c.data.details.slice(c.data.details.indexOf("{")+1,-1):c.data.details,v(c.data.message+" : "+d),k(!0);case 24:200===c.status&&(window.alert("Resource successufully posted!"),i("/"+t));case 25:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==I){e.next=5;break}return v(re().no_file),k(!0),e.abrupt("return");case 5:if(!I.name.endsWith(".csv")){e.next=26;break}return(n=new FormData).append("file",I),e.prev=8,e.next=11,w(t,n);case 11:s=e.sent,a=s.response,v(a.statusText),k(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),k(!0);case 26:if(!I.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,S(t,J,void 0);case 30:l=e.sent,a=l.response,v(a.statusText),k(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),a=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=e.t1.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),k(!0);case 45:200===a.status&&(window.alert("Resource posted correctly"),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(de.jsx)("b",{children:t})]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsxs)(zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),k(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===s.get("from")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(de.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[Object(de.jsx)(Pt,{values:A,resource:t,functionalFields:Y,disabledFields:{},handleChangesCallback:function(e,r){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=Ht(A),c=s,i=-1;for(a=0;a<r.length-1;a++)c=c[r[a]],"number"===typeof r[a]&&(i=a);c[r[a]]=e,"number"===typeof r[a]&&(i=a),!1===n&&-1!==i&&(s=Et(s,r.slice(0,i),Y,t)),D(s)},arrayDeleteCallback:function(e){var r,a=Ht(A),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];n.splice(e[r],1),a=Et(a,e.slice(0,r),Y,t),D(a)},submitFunction:Q,backFunction:X}),Object(de.jsx)("br",{}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:C?"red":"black"},children:m})]}),"file"===j&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[Object(de.jsx)(Bt,{submitFunction:$,backFunction:X,setContentBody:G,setContentHeader:B,setContentPlain:V,setFile:E,contentPlain:J,contentHeader:z,contentBody:W}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:C?"red":"black"},children:m})]})]})]})]})}function Wt(e){var t=Object(n.useState)(null),r=Object(b.a)(t,2),a=r[0],s=r[1];return Object(de.jsx)(Me.a,{size:"lg",children:Object(de.jsxs)(Me.a.Item,{eventKey:0,children:[Object(de.jsx)(Me.a.Header,{children:re().import+" - "+re().export+" "+re().configuration}),Object(de.jsx)(Me.a.Body,{children:Object(de.jsx)(Qe.a,{children:Object(de.jsxs)(Ze.a,{children:[Object(de.jsx)($e.a,{sm:6,children:Object(de.jsxs)(je.a,{onSubmit:function(){return e.importValues(a)},children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)("b",{children:"Import configuration from json file"})}),Object(de.jsx)(Ze.a,{children:Object(de.jsxs)($e.a,{children:[Object(de.jsx)(je.a.Label,{children:Object(de.jsx)("b",{children:re().select_file})}),Object(de.jsx)(je.a.Control,{className:"mb-3",type:"file",accept:".json",label:"File",onChange:function(e){e.preventDefault();var t=e.target.files[0],r=new FileReader;r.onloadend=function(){var e=r.result;s(e)},r.readAsText(t)}})]})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("font",{style:{marginLeft:"5px",color:"red"},children:e.importMsg})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{type:"submit",variant:"success",children:"Load"})})})]})}),Object(de.jsxs)($e.a,{sm:6,children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)("b",{children:"Download configuration as json file"})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"22px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{variant:"primary",onClick:function(){var t=new Blob([JSON.stringify(e.values,null,4)]);Object(xt.saveAs)(t,(""!==e.values._id?e.values._id:"Experiment")+".json")},children:"Download"})})})]})]})})})]})})}var Gt=r(72);function Kt(e){var t="experiments",r=Object(p.c)(),a=Object(b.a)(r,2),c=a[0],i=(a[1],Object(h.m)()),d=Object(n.useState)("form"),u=Object(b.a)(d,2),j=u[0],f=u[1],x=Object(n.useState)(""),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),C=y[0],k=y[1],N=Object(n.useState)(""),_=Object(b.a)(N,2),A=_[0],D=_[1],P=Object(n.useState)(Gt(Y[t])),R=Object(b.a)(P,2),I=R[0],E=R[1],T=Object(n.useState)({metadata:{name:!0}}),L=Object(b.a)(T,2),z=L[0],B=L[1],H=Object(n.useState)(),M=Object(b.a)(H,2),W=M[0],G=M[1],K=Object(n.useState)(void 0),U=Object(b.a)(K,2),J=U[0],V=U[1],q=Object(n.useState)(null),X=Object(b.a)(q,2),Q=X[0],$=X[1],ee=Object(n.useState)(null),te=Object(b.a)(ee,2),ae=te[0],ne=te[1],se=Object(n.useState)(null),ce=Object(b.a)(se,2),ie=ce[0],oe=ce[1];if(Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,F("protocols",t);case 3:r=e.sent,G(r.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,c]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var r,a,n,s,c,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,F(t,r);case 3:a=e.sent,n=a.docs[0],(s=Gt(I)).protocol="",s.metadata=[{name:"",value:""}],(c=Gt(z)).protocol=!0,B(c),s=Ft(n,s),Object.entries(s).forEach((function(e){e[0].toLowerCase().includes("date")&&(s[e[0]]=Pe(e[1]))})),s._id=s._id+"_copy",s=It(s,Y,t),E(s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==c.get("from")&&""!==c.get("from")){var r={_id:c.get("from")};e({filter:JSON.stringify(r)})}}),[c,t]),void 0===Y[t])return Object(de.jsx)("div",{children:"This entity cannot be posted"});var le=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,a={_id:t.target.value},n={filter:JSON.stringify(a)},e.next=6,F("protocols",n);case 6:for(s=e.sent,c=s.docs[0],i=[],l=0;l<c.metadata.length;l++)"scalar"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:0}),"text"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:c.metadata[l].name+"_Name"}),"vector"===c.metadata[l].type&&i.push({name:c.metadata[l].name,value:[0]});(d=Gt(I)).protocol=r,0!==i.length&&(d.metadata=i),(u=Gt(z)).protocol=!0,B(u),E(d);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a=void 0,void 0!==(n=Gt(I)).token&&(a=n.token,delete n.token),s=Gt(n),_e(s),void 0!==s.protocol){e.next=10;break}return v("Please, select a protocol"),k(!0),e.abrupt("return");case 10:if(""!==s._id){e.next=14;break}return v("Please, define an _id"),k(!0),e.abrupt("return");case 14:if(""!==s.state){e.next=18;break}return v("Please, select a state"),k(!0),e.abrupt("return");case 18:return e.prev=18,e.next=21,S(t,JSON.stringify(s),a);case 21:l=e.sent,c=l.response,v(c.statusText),k(!1),e.next=36;break;case 27:e.prev=27,e.t0=e.catch(18),console.log(e.t0),c=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),d="",d=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+d),k(!0);case 36:200===c.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 37:case"end":return e.stop()}}),e,null,[[18,27]])})));return function(t){return e.apply(this,arguments)}}(),be=function(e){e.preventDefault(),i(-1)},pe=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==J){e.next=5;break}return v(re().no_file),k(!0),e.abrupt("return");case 5:if(!J.name.endsWith(".csv")){e.next=26;break}return(n=new FormData).append("file",J),e.prev=8,e.next=11,w(t,n);case 11:s=e.sent,a=s.response,v(a.statusText),k(!1),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,console.log({message:e.t0.error.response.data.message,details:e.t0.error.response.data.details}),c="",c=e.t0.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t0.error.response.data.details.slice(e.t0.error.response.data.details.indexOf("{")+1,-1):e.t0.error.response.data.details,v(e.t0.error.response.data.message+" : "+c),k(!0);case 26:if(!J.name.endsWith(".json")){e.next=45;break}return e.prev=27,e.next=30,S(t,ie,void 0);case 30:l=e.sent,a=l.response,v(a.statusText),k(!1),e.next=45;break;case 36:e.prev=36,e.t1=e.catch(27),console.log(e.t1),a=e.t1.error.response,console.log({message:e.t1.error.response.data.message,details:e.t1.error.response.data.details}),d="",d=e.t1.error.response.data.details.includes("duplicate key")?re().duplicate_error+" "+e.t1.error.response.data.details.slice(e.t1.error.response.data.details.indexOf("{")+1,-1):e.t1.error.response.data.details,v(e.t1.error.response.data.message+" : "+d),k(!0);case 45:200===a.status&&(window.alert("Experiment successufully posted!"),i("/"+t));case 46:case"end":return e.stop()}}),e,null,[[8,17],[27,36]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(de.jsx)("b",{children:t})]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsxs)(zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){f(e),v(""),k(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===c.get("from")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(de.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===j&&(null===c.get("from")||""===c.get("from"))&&Object(de.jsx)(Wt,{values:I,importValues:function(e){try{var t=JSON.parse(e),r=Gt(I);null===t.state&&(t.state=NaN),r.protocol="",r.metadata=[{name:"",value:""}];var a=Ft(t,r);if(void 0===a._id&&void 0===a.owner&&void 0===a.protocol&&void 0===a.metadata)return void D(re().error_imported_file);D(""),void 0!==a.history&&delete a.history,E(a);var n=Gt(z);n.protocol=!0,B(n)}catch(s){D(re().error_imported_file),console.log(s)}},importMsg:A}),"form"===j&&void 0!==W&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[(null===c.get("from")||""===c.get("from"))&&Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" protocol",onChange:le,value:I.protocol,children:[Object(de.jsxs)("option",{children:[re().select," protocol"]}),s.a.Children.toArray(W.map((function(e){return Object(de.jsx)("option",{value:e,children:e})})))]}),Object(de.jsx)("br",{}),Object(de.jsx)(Pt,{values:I,resource:t,functionalFields:Y,disabledFields:z,handleChangesCallback:function(e,r){var a,n=Gt(I),s=n,c=-1;for(a=0;a<r.length-1;a++)s=s[r[a]],"number"===typeof r[a]&&(c=a);if("number"===typeof r[a]&&(c=a),s[r[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Et(n,r.slice(0,c),Y,t,i)}E(n)},arrayDeleteCallback:function(e){var r,a=Gt(I),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];var s="number"===typeof n.splice(e[r],1)[0]?NaN:"";a=Et(a,e.slice(0,r),Y,t,s),E(a)},submitFunction:ue,backFunction:be}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:C?"red":"black"},children:m})]}),"file"===j&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[Object(de.jsx)(Bt,{submitFunction:pe,backFunction:be,setContentBody:ne,setContentHeader:$,setContentPlain:oe,setFile:V,contentPlain:ie,contentHeader:Q,contentBody:ae}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:C?"red":"black"},children:m})]})]})]})]})}var Ut=r(72);function Jt(e){var t="measurements",r=Object(p.c)(),a=Object(b.a)(r,2),c=a[0],i=(a[1],Object(n.useState)([])),d=Object(b.a)(i,2),u=d[0],j=d[1],x=Object(n.useState)([]),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(h.m)(),y=Object(n.useState)("form"),C=Object(b.a)(y,2),k=C[0],N=C[1],_=Object(n.useState)(""),A=Object(b.a)(_,2),D=A[0],P=A[1],R=Object(n.useState)(!1),I=Object(b.a)(R,2),E=I[0],T=I[1],L=Object(n.useState)(Ut(Y[t])),z=Object(b.a)(L,2),B=z[0],H=z[1],M=Object(n.useState)({}),W=Object(b.a)(M,2),G=W[0],K=(W[1],Object(n.useState)()),U=Object(b.a)(K,2),J=U[0],V=U[1],q=Object(n.useState)(""),X=Object(b.a)(q,2),Q=X[0],$=X[1],te=Object(n.useState)(void 0),ae=Object(b.a)(te,2),ne=ae[0],se=ae[1],ce=Object(n.useState)(null),ie=Object(b.a)(ce,2),oe=ie[0],le=ie[1],ue=Object(n.useState)(null),be=Object(b.a)(ue,2),pe=be[0],he=be[1],fe=Object(n.useState)(null),xe=Object(b.a)(fe,2),Oe=xe[0],me=xe[1],ve=Object(n.useContext)(ct).fetched,ge=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ve.data[t]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,F(t,{limit:100});case 5:r=e.sent,ve.UpdateData(r.docs.map((function(e){return e._id})),t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){void 0!==ee[t]&&Object.values(ee[t]).forEach((function(e){return ge(e)}))}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,F("features",t);case 4:r=e.sent,V(r.docs.map((function(e){return e._id}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,c]),void 0===Y[t])return Object(de.jsx)("div",{children:"This entity cannot be posted"});var ye=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target.value,a={_id:r},n={filter:JSON.stringify(a)},e.next=6,F("features",n);case 6:return s=e.sent,c=s.docs[0],i=c.items,l=Ce([],i),j(l),v(i),$(r),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e,t){var r=[],a=Ut(e);return t.forEach((function(e){"number"===e.type?0===e.dimension?r.push({name:e.name,value:NaN,type:e.type}):r.push([{name:e.name,value:NaN,type:e.type}]):"text"===e.type?0===e.dimension?r.push({name:e.name,value:"",type:e.type}):r.push([{name:e.name,value:"",type:e.type}]):"enum"===e.type&&(0===e.dimension?r.push({name:e.name,value:"",enumValues:e.range,type:e.type}):r.push([{name:e.name,value:"",enumValues:e.range,type:e.type}]))})),a.push({values:r}),a},ke=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=void 0,n=Ut(B),s=u.map((function(e){return{values:e.values.map((function(e){return e.value}))}})),void 0!==n.token&&(a=n.token,delete n.token),_e(n),n.feature=Q,n.samples=s,e.prev=8,e.next=11,S(t,JSON.stringify(n),a);case 11:i=e.sent,c=i.response,P(c.statusText),T(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),c=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),T(!0);case 23:200===c.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 24:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),we=function(e){e.preventDefault(),g(-1)},Ne=function(){var e=Object(l.a)(Object(o.a)().mark((function e(r){var a,n,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),void 0!==ne){e.next=5;break}return P(re().no_file),T(!0),e.abrupt("return");case 5:if(!ne.name.endsWith(".csv")){e.next=23;break}return(n=new FormData).append("file",ne),e.prev=8,e.next=11,w(t,n);case 11:s=e.sent,a=s.response,P(a.statusText),T(!1),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0),a=e.t0.error.response,P(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details),T(!0);case 23:if(!ne.name.endsWith(".json")){e.next=39;break}return e.prev=24,e.next=27,S(t,Oe,void 0);case 27:c=e.sent,a=c.response,P(a.statusText),T(!1),e.next=39;break;case 33:e.prev=33,e.t1=e.catch(24),console.log(e.t1),a=e.t1.error.response,P(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details),T(!0);case 39:200===a.status&&(window.alert("Measurement successufully posted!"),g("/"+t));case 40:case"end":return e.stop()}}),e,null,[[8,17],[24,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(de.jsx)("b",{children:t})]}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsxs)(zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){N(e),P(""),T(!1)},defaultActiveKey:"form",children:[Z[t].includes("form")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"form",children:"Form"})}),Z[t].includes("file")&&null===c.get("from")&&Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(de.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===k&&void 0!==J&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" feature",onChange:ye,value:Q,children:[Object(de.jsxs)("option",{children:[re().select," feature"]}),s.a.Children.toArray(J.map((function(e){return Object(de.jsx)("option",{value:e,children:e})})))]}),Object(de.jsx)("hr",{}),Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsx)(Ze.a,{children:Object(de.jsxs)("b",{children:["Samples :",u.length]})}),Object(de.jsx)("br",{}),s.a.Children.toArray(u.map((function(e,t){return Object(de.jsx)(Ze.a,{style:{padding:10},children:Object(de.jsx)(Me.a,{defaultActiveKey:"0",children:Object(de.jsxs)(Me.a.Item,{eventKey:t,children:[Object(de.jsx)(Me.a.Header,{children:Object(de.jsx)("b",{children:Object(de.jsxs)("i",{children:["Sample [",t,"]"]})})}),Object(de.jsx)(Me.a.Body,{children:s.a.Children.toArray(Object.values(e.values).map((function(e){return Object(de.jsxs)(Ze.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px",padding:10},children:[Object(de.jsx)($e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(de.jsx)("b",{children:Object(de.jsx)("i",{children:e.name})})}),Object(de.jsx)($e.a,{sm:2,children:"enum"===e.type?Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" "+e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},children:[Object(de.jsx)("option",{value:"",children:re().select+" "+e.name}),s.a.Children.toArray(e.enumValues.map((function(e){return Object(de.jsx)("option",{value:e,children:e})})))]}):"text"===e.type?Object(de.jsx)(je.a.Control,{type:"text",id:e.name,onChange:function(t){t.preventDefault(),e.value=t.target.value},"aria-label":re().enter+" "+e.name}):Object(de.jsx)(je.a.Control,{type:"number",id:e.name,onChange:function(t){t.preventDefault(),e.value=parseInt(t.target.value,10)},"aria-label":re().enter+" "+e.name})})]})})))})]})})})}))),0!==u.length&&Object(de.jsx)(f.a,{variant:"link",onClick:function(){var e=Ce(u,m);j(e)},children:Object(de.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add sample",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})]}),Object(de.jsx)("hr",{}),Object(de.jsx)("br",{}),Object(de.jsx)(Pt,{values:B,resource:t,functionalFields:Y,disabledFields:G,handleChangesCallback:function(e,r){var a,n=Ut(B),s=n,c=-1;for(a=0;a<r.length-1;a++)s=s[r[a]],"number"===typeof r[a]&&(c=a);if("number"===typeof r[a]&&(c=a),s[r[a]]=e,-1!==c){var i="number"===typeof e?NaN:"";n=Et(n,r.slice(0,c),Y,t,i)}H(n)},arrayDeleteCallback:function(e){var r,a=Ut(B),n=a;for(r=0;r<e.length-1&&void 0!==e[r];r++)n=n[e[r]];var s="number"===typeof n.splice(e[r],1)[0]?NaN:"";a=Et(a,e.slice(0,r),Y,t,s),H(a)},submitFunction:ke,backFunction:we}),Object(de.jsx)("br",{}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:E?"red":"black"},children:D})]}),"file"===k&&Object(de.jsxs)("div",{style:{margin:"5px"},children:[Object(de.jsx)(Bt,{submitFunction:Ne,backFunction:we,setContentBody:he,setContentHeader:le,setContentPlain:me,setFile:se,contentPlain:Oe,contentHeader:oe,contentBody:pe}),Object(de.jsx)("font",{style:{marginLeft:"5px",color:E?"red":"black"},children:D})]})]})]})]})}var Vt=r(329);function qt(e){return void 0===e.postHistory||void 0===e.arraySepRef||void 0===e.floatSepRef||void 0===e.csvSep||void 0===e.setCsvSep||void 0===e.ovdRef||void 0===e.setCsvHeader||void 0===e.setCsvContent||void 0===e.setFile||void 0===e.file||void 0===e.csvContent||void 0===e.csvHeader?"Loading":Object(de.jsxs)(je.a,{onSubmit:e.postHistory,children:[Object(de.jsxs)(Ze.a,{style:{paddingTop:"10px"},children:[Object(de.jsx)($e.a,{sm:1,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Column Separator",value:e.csvSep,onChange:function(t){t.preventDefault(),e.setCsvSep(t.target.value)},children:[Object(de.jsx)("option",{value:",",children:","}),Object(de.jsx)("option",{value:";",children:";"}),Object(de.jsx)("option",{value:"-",children:"-"}),Object(de.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(de.jsx)($e.a,{sm:1,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Array separator",ref:e.arraySepRef,children:[Object(de.jsx)("option",{value:";",children:";"}),Object(de.jsx)("option",{value:",",children:","}),Object(de.jsx)("option",{value:".",children:"."}),Object(de.jsx)("option",{value:"-",children:"-"})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(de.jsx)($e.a,{sm:1,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Floating Point separator",ref:e.floatSepRef,children:[Object(de.jsx)("option",{value:".",children:"."}),Object(de.jsx)("option",{value:",",children:","})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{sm:3,children:Object(de.jsx)(je.a.Control,{className:"mb-3",type:"file",accept:".csv",label:"File",onChange:function(t){var r=t.target.files[0],a=new FileReader;a.onloadend=function(){var t=a.result,n=new RegExp("\\r","g"),s=t.replace(n,"").split("\n");e.setCsvHeader(s[0]),e.setFile(r),s.splice(0,1),e.setCsvContent(s)},a.readAsText(r)}})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",label:"Update duplicate steps in History Experiment",ref:e.ovdRef})})})}),null!==e.csvContent&&Object(de.jsx)(Ze.a,{children:Object(de.jsx)(Me.a,{children:Object(de.jsxs)(Me.a.Item,{eventKey:"0",children:[Object(de.jsx)(Me.a.Header,{children:re().preview+" - "+e.file.name}),Object(de.jsx)(Me.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(de.jsxs)(He.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(de.jsx)("thead",{children:Object(de.jsx)("tr",{children:s.a.Children.toArray(e.csvHeader.split(e.csvSep).map((function(e){return Object(de.jsx)("th",{children:e})})))})}),Object(de.jsx)("tbody",{children:s.a.Children.toArray(e.csvContent.map((function(t){return Object(de.jsx)("tr",{children:s.a.Children.toArray(t.split(e.csvSep).map((function(e){return Object(de.jsx)("td",{children:e})})))})})))})]})})]})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{variant:"primary",type:"submit",children:re().submit})})})]})}function Xt(e){return void 0===e.experiments||void 0===e.postHistory||void 0===e.values||void 0===e.ovdRef||void 0===e.handleExperimentChange||void 0===e.handleChanges?"Loading":Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:0!==e.experiments.length&&Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" experiment",onChange:e.handleExperimentChange,children:[Object(de.jsxs)("option",{children:[re().select," experiment to update its history"]}),s.a.Children.toArray(e.experiments.map((function(e){return Object(de.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",label:"Update step if already present in History Experiment",ref:e.ovdRef})})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(Pt,{values:e.values,resource:"updateHistory",functionalFields:{updateHistory:{}},disabledFields:{fields:{name:!0}},handleChangesCallback:e.handleChanges,arrayDeleteCallback:function(){},submitFunction:e.postHistory})})})]})}var Yt=r(72),Qt=s.a.createRef(),Zt=s.a.createRef(),$t=s.a.createRef();function er(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(null),c=Object(b.a)(s,2),i=c[0],d=c[1],u=Object(n.useContext)(ct).logs,j=Object(n.useState)(0),p=Object(b.a)(j,2),h=p[0],f=p[1],x=Object(n.useState)(null),O=Object(b.a)(x,2),m=O[0],v=O[1],g=Object(n.useState)("file"),y=Object(b.a)(g,2),C=y[0],k=y[1],w=Object(n.useState)(0),N=Object(b.a)(w,2),S=N[0],_=N[1],A=Object(n.useState)([]),D=Object(b.a)(A,2),P=D[0],R=D[1],I=Object(n.useState)(""),E=Object(b.a)(I,2),T=E[0],L=E[1],z=Object(n.useState)({}),B=Object(b.a)(z,2),H=B[0],M=B[1],W=Object(n.useState)(""),G=Object(b.a)(W,2),K=G[0],U=G[1],J=Object(n.useState)(!1),V=Object(b.a)(J,2),q=V[0],X=V[1],Y=Object(n.useState)(","),Q=Object(b.a)(Y,2),Z=Q[0],$=Q[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{});case 2:t=e.sent,R(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Z,a=Zt.current.value,n=$t.current.value,s=Qt.current.checked,""!==r&&""!==a&&""!==n){e.next=9;break}return U("Please, define all the separators"),X(!0),e.abrupt("return");case 9:if(r!==a&&r!==n&&a!==n){e.next=13;break}return U("All the separators should have different values"),X(!0),e.abrupt("return");case 13:if(null!==m&&void 0!==m){e.next=17;break}return U("Please, choose a file"),X(!0),e.abrupt("return");case 17:return U(""),X(!1),f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+S+"-------\n"}),e.next=23,mt(m,s,r,a,n);case 23:u.PushLog({type:"info",msg:"-------End Upload Operation "+S+"-------\n\n"}),_((function(e){return e+1})),f(100);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=Yt(H),r=_e(r),void 0!==T&&""!==T){e.next=7;break}return U("Please, select one experiment"),X(!0),e.abrupt("return");case 7:if(r.fields=r.fields.filter((function(e){return"number"===typeof e.value&&!isNaN(e.value)||"string"===typeof e.value&&""!==e.value||Array.isArray(e.value)&&0!==e.value.length})),!isNaN(r.step)){e.next=12;break}return U("Please, define the step number"),X(!0),e.abrupt("return");case 12:if(0!==r.fields.length){e.next=16;break}return U("Please, define at least one field"),X(!0),e.abrupt("return");case 16:return U(""),X(!1),a={},(n=[]).push(r),a.history={add:n},f(0),u.PushLog({type:"info",msg:"-------Begin Upload Operation "+S+"-------\n"}),e.next=26,gt(T,a,Qt.current.checked);case 26:u.PushLog({type:"info",msg:"-------End Upload Operation "+S+"-------\n\n"}),_((function(e){return e+1})),f(100);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,n,s,c,i,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=P.filter((function(e){return e._id===t.target.value}))[0],a=r.protocol,n={_id:a},s={filter:JSON.stringify(n)},e.next=7,F("protocols",s);case 7:c=e.sent,i=c.docs[0],l=[],i.topics.map((function(e){return e.fields})).forEach((function(e){l=l.concat(e.map((function(e){var t="scalar"===e.type?NaN:"vector"===e.type?[NaN]:(e.type,"");return{name:e.name,value:t}})))})),(d={}).step=NaN,d.fields=l,M(d),L(t.target.value);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsx)("header",{className:"page-header",children:"Update Experiment History"}),Object(de.jsxs)("main",{className:"page-content",children:[Object(de.jsxs)(zt.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){k(e),U(""),X(!1)},defaultActiveKey:"file",children:[Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"form",children:"Form"})}),Object(de.jsx)(zt.a.Item,{children:Object(de.jsx)(zt.a.Link,{eventKey:"file",children:"File"})})]}),Object(de.jsxs)(Qe.a,{fluid:!0,children:["form"===C&&Object(de.jsx)(Ze.a,{children:Object(de.jsx)(Xt,{postHistory:te,values:H,ovdRef:Qt,handleExperimentChange:re,handleChanges:function(e,t){var r,a=Yt(H),n=a,s=-1;for(r=0;r<t.length-1;r++)n=n[t[r]],"number"===typeof t[r]&&(s=r);if("number"===typeof t[r]&&(s=r),n[t[r]]=e,-1!==s){var c="number"===typeof e?NaN:"";a=Et(a,t.slice(0,s),void 0,void 0,c)}M(a)},experiments:P})}),"file"===C&&Object(de.jsx)(Ze.a,{children:Object(de.jsx)(qt,{postHistory:ee,arraySepRef:Zt,csvSep:Z,setCsvSep:$,floatSepRef:$t,ovdRef:Qt,setCsvHeader:d,setCsvContent:a,setFile:v,file:m,csvContent:r,csvHeader:i})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("font",{style:{marginLeft:"5px",color:q?"red":"black"},children:K})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)(Vt.a,{now:h,label:"".concat(h,"%"),variant:100===h?"success":"info"})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Operation logs"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:u.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})]})]})}var tr=r(146),rr=(r(72),s.a.createRef()),ar=s.a.createRef(),nr=s.a.createRef(),sr=s.a.createRef(),cr=s.a.createRef();function ir(){var e=Object(n.useContext)(ct).logs,t=Object(n.useState)(0),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(0),d=Object(b.a)(i,2),u=d[0],j=d[1],p=Object(n.useState)([]),h=Object(b.a)(p,2),x=h[0],O=h[1],m=Object(n.useState)(""),v=Object(b.a)(m,2),g=v[0],y=v[1],C=Object(n.useState)(!1),k=Object(b.a)(C,2),w=k[0],N=k[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{limit:100});case 2:t=e.sent,O(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var S=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n,s,i,l,d,b,p,h,f;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=ar.current.value,a=nr.current.value,n=sr.current.value,s=rr.current.value,i=rr.current.selectedIndex,l=cr.current.checked,0!==i){t.next=10;break}return y("Please, select one or All experiment"),N(!0),t.abrupt("return");case 10:if(""!==r&&""!==n&&""!==a){t.next=14;break}return y("Please, define all the separators"),N(!0),t.abrupt("return");case 14:if(r!==a&&r!==n&&a!==n){t.next=18;break}return y("Please, define three different separators"),N(!0),t.abrupt("return");case 18:if(y(""),N(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),d=[],"All"!==s){t.next=36;break}b=0;case 25:if(!(b<x.length)){t.next=34;break}return t.next=28,Ct(x[b]._id,r,a,n,l);case 28:p=t.sent,d.push(p),c((b+1)/x.length*100);case 31:b++,t.next=25;break;case 34:t.next=40;break;case 36:return t.next=38,Ct(s,r,a,n,l);case 38:h=t.sent,d.push(h);case 40:if(!0!==l){t.next=46;break}return t.next=43,Object(tr.a)(d).blob();case 43:f=t.sent,Object(xt.saveAs)(f,"experiments_history.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_history.zip archive\n"});case 46:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 49:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n,s,i,l,d,b,p,h,f,O,m;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=rr.current.value,a=rr.current.selectedIndex,n=cr.current.checked,0!==a){t.next=7;break}return y("Please, select one or All experiment"),N(!0),t.abrupt("return");case 7:if(y(""),N(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Download Operation "+u+"-------\n"}),s=[],"All"===r)for(i=0;i<x.length;i++)l=new Blob([JSON.stringify(x[i],null,4)]),d=x[i]._id+".json",b=null,void 0===n||!1===n?Object(xt.saveAs)(l,d):b=new File([l],d),s.push(b),e.PushLog({type:"info",msg:d+" successfully downloaded.\n"}),c((i+1)/x.length*100);else p=x.filter((function(e){return e._id===r}))[0],h=new Blob([JSON.stringify(p,null,4)]),f=r+".json",O=null,void 0===n||!1===n?Object(xt.saveAs)(h,f):O=new File([h],f),s.push(O),e.PushLog({type:"info",msg:f+" successfully downloaded.\n"});if(!0!==n){t.next=19;break}return t.next=16,Object(tr.a)(s).blob();case 16:m=t.sent,Object(xt.saveAs)(m,"experiments_data.zip"),e.PushLog({type:"info",msg:"Files compressed into experiments_data.zip archive\n"});case 19:e.PushLog({type:"info",msg:"-------End Download Operation "+u+"-------\n\n"}),j((function(e){return e+1})),c(100);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsx)("header",{className:"page-header",children:"Download Experiment History"}),Object(de.jsx)("main",{className:"page-content",children:Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Select experiment"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{sm:3,children:0!==x.length&&Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" experiment",ref:rr,children:[Object(de.jsxs)("option",{children:[re().select," experiment"]}),Object(de.jsx)("option",{children:"All"}),s.a.Children.toArray(x.map((function(e){return Object(de.jsx)("option",{value:e._id,children:e._id})})))]})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(je.a.Group,{className:"mb-3",children:Object(de.jsx)(je.a.Check,{type:"checkbox",label:"Compress files in a single .zip archive",ref:cr})})})}),Object(de.jsxs)(Ze.a,{children:[Object(de.jsxs)($e.a,{children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Download history as csv"})})}),Object(de.jsxs)(Ze.a,{style:{paddingTop:"10px"},children:[Object(de.jsx)($e.a,{sm:2,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Column Separator",ref:ar,children:[Object(de.jsx)("option",{value:",",children:","}),Object(de.jsx)("option",{value:";",children:";"}),Object(de.jsx)("option",{value:"-",children:"-"}),Object(de.jsx)("option",{value:"\\t",children:"\\t"})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Column separator"})]})}),Object(de.jsx)($e.a,{sm:2,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Array separator",ref:nr,children:[Object(de.jsx)("option",{value:";",children:";"}),Object(de.jsx)("option",{value:",",children:","}),Object(de.jsx)("option",{value:".",children:"."}),Object(de.jsx)("option",{value:"-",children:"-"})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Array separator"})]})}),Object(de.jsx)($e.a,{sm:2,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsxs)(je.a.Select,{"aria-label":"CSV Floating Point separator",ref:sr,children:[Object(de.jsx)("option",{value:".",children:"."}),Object(de.jsx)("option",{value:",",children:","})]}),Object(de.jsx)(je.a.Text,{className:"text-muted",children:"Floating Point separator"})]})})]}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{variant:"primary",onClick:S,children:"Download History"})})})]}),Object(de.jsxs)($e.a,{children:[Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Download experiment data as json"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{variant:"primary",onClick:_,children:"Download Data"})})})]})]}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("font",{style:{marginLeft:"5px",color:w?"red":"black"},children:g})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)(Vt.a,{now:a,label:"".concat(a,"%"),variant:100===a?"success":"info"})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Operation logs"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}r(72);var or=s.a.createRef();function lr(){var e=Object(n.useContext)(ct).logs,t=Object(n.useState)(0),r=Object(b.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(0),d=Object(b.a)(i,2),u=d[0],p=d[1],h=Object(n.useState)([]),x=Object(b.a)(h,2),O=x[0],m=x[1],v=Object(n.useState)(),g=Object(b.a)(v,2),y=g[0],C=g[1],k=Object(n.useState)(),w=Object(b.a)(k,2),N=w[0],S=w[1],_=Object(n.useState)(),A=Object(b.a)(_,2),D=A[0],P=(A[1],Object(n.useState)("")),R=Object(b.a)(P,2),I=R[0],E=R[1],T=Object(n.useState)(!1),L=Object(b.a)(T,2),z=L[0],B=L[1];Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("experiments",{limit:100});case 2:t=e.sent,m(t.docs);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var H=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var r,a,n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==D){t.next=4;break}return E("Please, select one or All experiment"),B(!0),t.abrupt("return");case 4:if(r=[],a=Object(j.a)(N),""!==(n=or.current.value)){t.next=11;break}return E("Please, define at least one step"),B(!0),t.abrupt("return");case 11:if(n.includes("*")?(r=r.concat(N),a=[]):n.replace(/\s/g,"").split(",").forEach((function(e){if(e.includes("/")){var t=e.split("-"),n=N.indexOf(parseInt(t[0])),s=N.indexOf(parseInt(t[1]));if(-1!==n&&-1!==s)for(var c=n;c<=s;c++)r.push(N[c]),a.splice(a.indexOf(N[c]),1)}else N.includes(parseInt(e))&&(r.push(parseInt(e)),a.splice(a.indexOf(parseInt(e)),1))})),0!==r.length){t.next=16;break}return E("The experiment history does not contain specified steps, please check them"),B(!0),t.abrupt("return");case 16:return E(""),B(!1),c(0),e.PushLog({type:"info",msg:"-------Begin Remove Operation "+u+"-------\n"}),t.next=22,St(y,r);case 22:e.PushLog({type:"info",msg:"-------End Remove Operation "+u+"-------\n\n"}),p((function(e){return e+1})),c(100),S(a);case 26:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(de.jsxs)("div",{className:"page",children:[Object(de.jsx)("header",{className:"page-header",children:"Remove steps from Experiment History"}),Object(de.jsx)("main",{className:"page-content",children:Object(de.jsxs)(Qe.a,{fluid:!0,children:[Object(de.jsx)(Ze.a,{style:{paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Select experiment"})})}),Object(de.jsxs)(Ze.a,{style:{paddingBottom:"10px"},children:[Object(de.jsx)($e.a,{sm:3,children:0!==O.length&&Object(de.jsxs)(je.a.Select,{"aria-label":re().select+" experiment",onChange:function(e){var t=e.target.value;if(0===e.target.selectedIndex)return C(void 0),void S(void 0);var r=O.filter((function(e){return e._id===t}))[0].history.map((function(e){return e.step})).sort((function(e,t){return e-t}));C(t),S(r)},children:[Object(de.jsxs)("option",{children:[re().select," experiment"]}),s.a.Children.toArray(O.map((function(e){return Object(de.jsx)("option",{value:e._id,children:e._id})})))]})}),void 0!==y&&Object(de.jsxs)($e.a,{children:["History steps contained into ",Object(de.jsx)("b",{children:y}),": ["," ",N.join(", ")," ]"]})]}),void 0!==N&&0===N.length&&Object(de.jsx)(Ze.a,{style:{paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:"The selected experiment's history does not contain steps"})}),void 0!==N&&0!==N.length&&Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Ze.a,{style:{paddingBottom:"10px"},children:Object(de.jsx)($e.a,{sm:3,children:Object(de.jsxs)(je.a.Group,{className:"mb-3",children:[Object(de.jsx)(je.a.Control,{type:"text",ref:or}),Object(de.jsxs)(je.a.Text,{className:"text-muted",children:["Define the steps comma separated.",Object(de.jsx)("br",{})," intervals can be specified as begin-end (included)."," ",Object(de.jsx)("br",{})," to remove all steps enter * ",Object(de.jsx)("br",{}),"Example: 2, 3, 5-7"]})]})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)(f.a,{onClick:H,children:"Remove steps"})})})]}),Object(de.jsx)(Ze.a,{style:{paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)("font",{style:{marginLeft:"5px",color:z?"red":"black"},children:I})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)(Vt.a,{now:a,label:"".concat(a,"%"),variant:100===a?"success":"info"})})}),Object(de.jsx)(Ze.a,{style:{paddingTop:"10px",paddingBottom:"10px"},children:Object(de.jsx)($e.a,{children:Object(de.jsx)("b",{children:"Operation logs"})})}),Object(de.jsx)(Ze.a,{children:Object(de.jsx)($e.a,{children:Object(de.jsx)("textarea",{id:"logger",style:{resize:"both"},cols:"100",rows:"10",readOnly:!0,value:e.logs.map((function(e){return e.msg})).reverse().join("-")})})})]})})]})}var dr=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1],i=Object(n.useState)([]),f=Object(b.a)(i,2),x=f[0],O=f[1],m=Object(n.useState)(),v=Object(b.a)(m,2),g=v[0],C=v[1],k=Object(n.useState)({}),w=Object(b.a)(k,2),N=w[0],S=w[1],_=s.a.useRef(),A=localStorage.getItem("token");function D(e){c((function(t){return[e].concat(t)}))}function P(e){var t=Object(j.a)(r);t.splice(e,1),c(t)}function R(){c([])}a=void 0!==B?B:window.location.origin+"/v1";var I={notifications:r,PushNotification:D,RemoveNotification:P,ClearNotifications:R};y.ClearNotifications=R,y.PushNotification=D,y.RemoveNotification=P,Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("types",{},"");case 3:t=e.sent,C(t.response.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===g)try{e()}catch(t){console.log(t)}}),[]);var E={types:g,data:N,UpdateData:function(e,t){S((function(r){return Object(u.a)(Object(u.a)({},r),{},Object(d.a)({},t,Object(j.a)(e)))}))}};function T(e){O((function(t){return[e].concat(t)}));var t=document.getElementById("logger");null!==t&&void 0!==t&&(t.scrollTop=t.scrollHeight)}function L(e){var t=Object(j.a)(x);t.splice(e,1),O(t)}function z(){O([])}var H={logs:x,PushLog:T,RemoveLog:L,ClearLogs:z};return Ot.ClearLogs=z,Ot.PushLog=T,Ot.RemoveLog=L,1==/Mobi/i.test(window.navigator.userAgent)?_.current="vertical":_.current=W,null===A?Object(de.jsx)("div",{className:"app",children:Object(de.jsx)(p.a,{children:Object(de.jsxs)(h.d,{children:[Object(de.jsx)(h.b,{path:"/",element:Object(de.jsx)(ge,{})}),Object(de.jsx)(h.b,{path:"/add/tenants",element:Object(de.jsx)(Mt,{resource:"tenants"})}),Object(de.jsx)(h.b,{path:"*",element:Object(de.jsx)(h.a,{to:"/",replace:!0})})]})})}):Object(de.jsx)(ct.Provider,{value:{notifications:I,fetched:E,logs:H},children:Object(de.jsx)(p.a,{children:Object(de.jsxs)(Qe.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100vh",width:"99vw"},children:["horizontal"===_.current?Object(de.jsx)(Ze.a,{style:{padding:0},children:Object(de.jsx)(ft,{})}):"",Object(de.jsxs)(Ze.a,{style:{padding:0},children:["vertical"===_.current?Object(de.jsx)($e.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(de.jsx)(Be,{})}):"",1==/Mobi/i.test(window.navigator.userAgent)&&Object(de.jsx)($e.a,{md:"auto",style:{padding:0},children:Object(de.jsx)(ot,{})}),Object(de.jsx)($e.a,{style:{paddingLeft:0,paddingRight:0},children:Object(de.jsxs)(h.d,{children:[Object(de.jsx)(h.b,{path:"/",element:Object(de.jsx)(ye,{})}),Object(de.jsx)(h.b,{path:"/home",element:Object(de.jsx)(ye,{})}),Object(de.jsx)(h.b,{path:"/viewProfile",element:Object(de.jsx)(et,{})}),Object(de.jsx)(h.b,{path:"/add/experiments/",element:Object(de.jsx)(Kt,{})}),Object(de.jsx)(h.b,{path:"/add/measurements/",element:Object(de.jsx)(Jt,{})}),Object(de.jsx)(h.b,{path:"/edit/:resource/:id",element:Object(de.jsx)(Lt,{})}),Object(de.jsx)(h.b,{path:"/downloadexperiment",element:Object(de.jsx)(ir,{})}),Object(de.jsx)(h.b,{path:"/updatehistory",element:Object(de.jsx)(er,{})}),Object(de.jsx)(h.b,{path:"/removesteps",element:Object(de.jsx)(lr,{})}),Object(de.jsx)(h.b,{path:"/add/:resource/",element:Object(de.jsx)(Mt,{})}),Object(de.jsx)(h.b,{path:"/:page",element:Object(de.jsx)(Ye,{res:":page"})}),Object(de.jsx)(h.b,{path:"/unauthorized",element:Object(de.jsx)(tt,{})}),Object(de.jsx)(h.b,{path:"/404",element:Object(de.jsx)(Ce,{})}),Object(de.jsx)(h.b,{path:"*",element:Object(de.jsx)(h.a,{to:"/404",replace:!0})})]})}),"vertical"===_.current&&0==/Mobi/i.test(window.navigator.userAgent)&&Object(de.jsx)($e.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(de.jsx)(ot,{})})]})]})})})};i.a.render(Object(de.jsx)(s.a.StrictMode,{children:Object(de.jsx)(dr,{})}),document.getElementById("root"))}},[[278,1,2]]]);
//# sourceMappingURL=main.344ee2f3.chunk.js.map